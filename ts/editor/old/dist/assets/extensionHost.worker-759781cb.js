!function(){"use strict";class e{constructor(e){this.executor=e,this._didRun=!1}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}const t=new class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout((()=>{if(e.stack){if(f.isErrorNoTelemetry(e))throw new f(e.message+"\n\n"+e.stack);throw new Error(e.message+"\n\n"+e.stack)}throw e}),0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach((t=>{t(e)}))}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}};function i(e){t.setUnexpectedErrorHandler(e)}function r(e){a(e)||t.onUnexpectedError(e)}function n(e){a(e)||t.onUnexpectedExternalError(e)}function s(e){if(e instanceof Error){const{name:t,message:i}=e;return{$isError:!0,name:t,message:i,stack:e.stacktrace||e.stack,noTelemetry:f.isErrorNoTelemetry(e)}}return e}const o="Canceled";function a(e){return e instanceof l||e instanceof Error&&e.name===o&&e.message===o}class l extends Error{constructor(){super(o),this.name=this.message}}function c(){const e=new Error(o);return e.name=e.message,e}function u(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}function d(e){return e?new Error(`Illegal state: ${e}`):new Error("Illegal state")}function h(e){return e?new Error(`readonly property '${e} cannot be changed'`):new Error("readonly property cannot be changed")}class p extends Error{constructor(e){super("NotImplemented"),e&&(this.message=e)}}class g extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class f extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof f)return e;const t=new f;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return"CodeExpectedError"===e.name}}function m(e){const t=this;let i,r=!1;return function(){return r||(r=!0,i=e.apply(t,arguments)),i}}var v;function _(e){if(v.is(e)){const i=[];for(const r of e)if(r)try{r.dispose()}catch(t){i.push(t)}if(1===i.length)throw i[0];if(i.length>1)throw new AggregateError(i,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}if(e)return e.dispose(),e}function y(...e){return w((()=>_(e)))}function w(e){return{dispose:m((()=>{e()}))}}!function(e){function t(e){return e&&"object"==typeof e&&"function"==typeof e[Symbol.iterator]}e.is=t;const i=Object.freeze([]);function*r(e){yield e}e.empty=function(){return i},e.single=r,e.wrap=function(e){return t(e)?e:r(e)},e.from=function(e){return e||i},e.isEmpty=function(e){return!e||!0===e[Symbol.iterator]().next().done},e.first=function(e){return e[Symbol.iterator]().next().value},e.some=function(e,t){for(const i of e)if(t(i))return!0;return!1},e.find=function(e,t){for(const i of e)if(t(i))return i},e.filter=function*(e,t){for(const i of e)t(i)&&(yield i)},e.map=function*(e,t){let i=0;for(const r of e)yield t(r,i++)},e.concat=function*(...e){for(const t of e)for(const e of t)yield e},e.reduce=function(e,t,i){let r=i;for(const n of e)r=t(r,n);return r},e.slice=function*(e,t,i=e.length){for(t<0&&(t+=e.length),i<0?i+=e.length:i>e.length&&(i=e.length);t<i;t++)yield e[t]},e.consume=function(t,i=Number.POSITIVE_INFINITY){const r=[];if(0===i)return[r,t];const n=t[Symbol.iterator]();for(let s=0;s<i;s++){const t=n.next();if(t.done)return[r,e.empty()];r.push(t.value)}return[r,{[Symbol.iterator]:()=>n}]}}(v||(v={}));class b{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(0!==this._toDispose.size)try{_(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?b.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}b.DISABLE_DISPOSED_WARNING=!1;let x=class{constructor(){this._store=new b,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};x.None=Object.freeze({dispose(){}});class C{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||(null===(t=this._value)||void 0===t||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,null===(e=this._value)||void 0===e||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e}}const D="undefined"!=typeof Buffer,S=new e((()=>new Uint8Array(256)));let E,k;class I{static alloc(e){return new I(D?Buffer.allocUnsafe(e):new Uint8Array(e))}static wrap(e){return D&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new I(e)}static fromString(e,t){return!((null==t?void 0:t.dontUseNodeBuffer)||!1)&&D?new I(Buffer.from(e)):(E||(E=new TextEncoder),new I(E.encode(e)))}static fromByteArray(e){const t=I.alloc(e.length);for(let i=0,r=e.length;i<r;i++)t.buffer[i]=e[i];return t}static concat(e,t){if(void 0===t){t=0;for(let i=0,r=e.length;i<r;i++)t+=e[i].byteLength}const i=I.alloc(t);let r=0;for(let n=0,s=e.length;n<s;n++){const t=e[n];i.set(t,r),r+=t.byteLength}return i}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}clone(){const e=I.alloc(this.byteLength);return e.set(this),e}toString(){return D?this.buffer.toString():(k||(k=new TextDecoder),k.decode(this.buffer))}slice(e,t){return new I(this.buffer.subarray(e,t))}set(e,t){if(e instanceof I)this.buffer.set(e.buffer,t);else if(e instanceof Uint8Array)this.buffer.set(e,t);else if(e instanceof ArrayBuffer)this.buffer.set(new Uint8Array(e),t);else{if(!ArrayBuffer.isView(e))throw new Error("Unknown argument 'array'");this.buffer.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t)}}readUInt32BE(e){return function(e,t){return e[t]*Math.pow(2,24)+e[t+1]*Math.pow(2,16)+e[t+2]*Math.pow(2,8)+e[t+3]}(this.buffer,e)}writeUInt32BE(e,t){!function(e,t,i){e[i+3]=t,t>>>=8,e[i+2]=t,t>>>=8,e[i+1]=t,t>>>=8,e[i]=t}(this.buffer,e,t)}readUInt32LE(e){return function(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0|e[t+2]<<16>>>0|e[t+3]<<24>>>0}(this.buffer,e)}writeUInt32LE(e,t){!function(e,t,i){e[i+0]=255&t,t>>>=8,e[i+1]=255&t,t>>>=8,e[i+2]=255&t,t>>>=8,e[i+3]=255&t}(this.buffer,e,t)}readUInt8(e){return function(e,t){return e[t]}(this.buffer,e)}writeUInt8(e,t){!function(e,t,i){e[i]=t}(this.buffer,e,t)}indexOf(e,t=0){return function(e,t,i=0){const r=t.byteLength,n=e.byteLength;if(0===r)return 0;if(1===r)return e.indexOf(t[0]);if(r>n-i)return-1;const s=S.value;s.fill(t.length);for(let c=0;c<t.length;c++)s[t[c]]=t.length-c-1;let o=i+t.length-1,a=o,l=-1;for(;o<n;)if(e[o]===t[a]){if(0===a){l=o;break}o--,a--}else o+=Math.max(t.length-a,s[e[o]]),a=t.length-1;return l}(this.buffer,e instanceof I?e.buffer:e,t)}}function T({buffer:e},t=!0,i=!1){const r=i?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";let n="";const s=e.byteLength%3;let o=0;for(;o<e.byteLength-s;o+=3){const t=e[o+0],i=e[o+1],s=e[o+2];n+=r[t>>>2],n+=r[63&(t<<4|i>>>4)],n+=r[63&(i<<2|s>>>6)],n+=r[63&s]}if(1===s){const i=e[o+0];n+=r[i>>>2],n+=r[i<<4&63],t&&(n+="==")}else if(2===s){const i=e[o+0],s=e[o+1];n+=r[i>>>2],n+=r[63&(i<<4|s>>>4)],n+=r[s<<2&63],t&&(n+="=")}return n}let P=class e{constructor(t){this.element=t,this.next=e.Undefined,this.prev=e.Undefined}};P.Undefined=new P(void 0);class A{constructor(){this._first=P.Undefined,this._last=P.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===P.Undefined}clear(){let e=this._first;for(;e!==P.Undefined;){const t=e.next;e.prev=P.Undefined,e.next=P.Undefined,e=t}this._first=P.Undefined,this._last=P.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new P(e);if(this._first===P.Undefined)this._first=i,this._last=i;else if(t){const e=this._last;this._last=i,i.prev=e,e.next=i}else{const e=this._first;this._first=i,i.next=e,e.prev=i}this._size+=1;let r=!1;return()=>{r||(r=!0,this._remove(i))}}shift(){if(this._first!==P.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==P.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==P.Undefined&&e.next!==P.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===P.Undefined&&e.next===P.Undefined?(this._first=P.Undefined,this._last=P.Undefined):e.next===P.Undefined?(this._last=this._last.prev,this._last.next=P.Undefined):e.prev===P.Undefined&&(this._first=this._first.next,this._first.prev=P.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==P.Undefined;)yield e.element,e=e.next}}const R=globalThis.performance&&"function"==typeof globalThis.performance.now;class F{static create(e){return new F(e)}constructor(e){this._now=R&&!1===e?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return-1!==this._stopTime?this._stopTime-this._startTime:this._now()-this._startTime}}var $,L=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};!function(e){function t(e){return(t,i=null,r)=>{let n,s=!1;return n=e((e=>{if(!s)return n?n.dispose():s=!0,t.call(i,e)}),null,r),s&&n.dispose(),n}}function i(e,t,i){return o(((i,r=null,n)=>e((e=>i.call(r,t(e))),null,n)),i)}function r(e,t,i){return o(((i,r=null,n)=>e((e=>{t(e),i.call(r,e)}),null,n)),i)}function n(e,t,i){return o(((i,r=null,n)=>e((e=>t(e)&&i.call(r,e)),null,n)),i)}function s(e,t,r,n){let s=r;return i(e,(e=>(s=t(s,e),s)),n)}function o(e,t){let i;const r=new B({onWillAddFirstListener(){i=e(r.fire,r)},onDidRemoveLastListener(){null==i||i.dispose()}});return null==t||t.add(r),r.event}function a(e,t,i=100,r=!1,n=!1,s,o){let a,l,c,u,d=0;const h=new B({leakWarningThreshold:s,onWillAddFirstListener(){a=e((e=>{d++,l=t(l,e),r&&!c&&(h.fire(l),l=void 0),u=()=>{const e=l;l=void 0,c=void 0,(!r||d>1)&&h.fire(e),d=0},"number"==typeof i?(clearTimeout(c),c=setTimeout(u,i)):void 0===c&&(c=0,queueMicrotask(u))}))},onWillRemoveListener(){n&&d>0&&(null==u||u())},onDidRemoveLastListener(){u=void 0,a.dispose()}});return null==o||o.add(h),h.event}function l(e,t=((e,t)=>e===t),i){let r,s=!0;return n(e,(e=>{const i=s||!t(e,r);return s=!1,r=e,i}),i)}e.None=()=>x.None,e.defer=function(e,t){return a(e,(()=>{}),0,void 0,!0,void 0,t)},e.once=t,e.map=i,e.forEach=r,e.filter=n,e.signal=function(e){return e},e.any=function(...e){return(t,i=null,r)=>y(...e.map((e=>e((e=>t.call(i,e)),null,r))))},e.reduce=s,e.debounce=a,e.accumulate=function(t,i=0,r){return e.debounce(t,((e,t)=>e?(e.push(t),e):[t]),i,void 0,!0,void 0,r)},e.latch=l,e.split=function(t,i,r){return[e.filter(t,i,r),e.filter(t,(e=>!i(e)),r)]},e.buffer=function(e,t=!1,i=[]){let r=i.slice(),n=e((e=>{r?r.push(e):o.fire(e)}));const s=()=>{null==r||r.forEach((e=>o.fire(e))),r=null},o=new B({onWillAddFirstListener(){n||(n=e((e=>o.fire(e))))},onDidAddFirstListener(){r&&(t?setTimeout(s):s())},onDidRemoveLastListener(){n&&n.dispose(),n=null}});return o.event};class c{constructor(e){this.event=e,this.disposables=new b}map(e){return new c(i(this.event,e,this.disposables))}forEach(e){return new c(r(this.event,e,this.disposables))}filter(e){return new c(n(this.event,e,this.disposables))}reduce(e,t){return new c(s(this.event,e,t,this.disposables))}latch(){return new c(l(this.event,void 0,this.disposables))}debounce(e,t=100,i=!1,r=!1,n){return new c(a(this.event,e,t,i,r,n,this.disposables))}on(e,t,i){return this.event(e,t,i)}once(e,i,r){return t(this.event)(e,i,r)}dispose(){this.disposables.dispose()}}e.chain=function(e){return new c(e)},e.fromNodeEventEmitter=function(e,t,i=(e=>e)){const r=(...e)=>n.fire(i(...e)),n=new B({onWillAddFirstListener:()=>e.on(t,r),onDidRemoveLastListener:()=>e.removeListener(t,r)});return n.event},e.fromDOMEventEmitter=function(e,t,i=(e=>e)){const r=(...e)=>n.fire(i(...e)),n=new B({onWillAddFirstListener:()=>e.addEventListener(t,r),onDidRemoveLastListener:()=>e.removeEventListener(t,r)});return n.event},e.toPromise=function(e){return new Promise((i=>t(e)(i)))},e.fromPromise=function(e){const t=new B;return e.then((e=>{t.fire(e)}),(()=>{t.fire(void 0)})).finally((()=>{t.dispose()})),t.event},e.runAndSubscribe=function(e,t){return t(void 0),e((e=>t(e)))},e.runAndSubscribeWithStore=function(e,t){let i=null;function r(e){null==i||i.dispose(),i=new b,t(e,i)}r(void 0);const n=e((e=>r(e)));return w((()=>{n.dispose(),null==i||i.dispose()}))};class u{constructor(e,t){this._observable=e,this._counter=0,this._hasChanged=!1;const i={onWillAddFirstListener:()=>{e.addObserver(this)},onDidRemoveLastListener:()=>{e.removeObserver(this)}};this.emitter=new B(i),t&&t.add(this.emitter)}beginUpdate(e){this._counter++}handlePossibleChange(e){}handleChange(e,t){this._hasChanged=!0}endUpdate(e){this._counter--,0===this._counter&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}e.fromObservable=function(e,t){return new u(e,t).emitter.event},e.fromObservableLight=function(e){return t=>{let i=0,r=!1;const n={beginUpdate(){i++},endUpdate(){i--,0===i&&(e.reportChanges(),r&&(r=!1,t()))},handlePossibleChange(){},handleChange(){r=!0}};return e.addObserver(n),e.reportChanges(),{dispose(){e.removeObserver(n)}}}}}($||($={}));class O{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${O._idPool++}`,O.all.add(this)}start(e){this._stopWatch=new F,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}}O.all=new Set,O._idPool=0;class M{constructor(e,t=Math.random().toString(18).slice(2,5)){this.threshold=e,this.name=t,this._warnCountdown=0}dispose(){var e;null===(e=this._stacks)||void 0===e||e.clear()}check(e,t){const i=this.threshold;if(i<=0||t<i)return;this._stacks||(this._stacks=new Map);const r=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,r+1),this._warnCountdown-=1,this._warnCountdown<=0){let e;this._warnCountdown=.5*i;let r=0;for(const[t,i]of this._stacks)(!e||r<i)&&(e=t,r=i);console.warn(`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${r}):`),console.warn(e)}return()=>{const t=this._stacks.get(e.value)||0;this._stacks.set(e.value,t-1)}}}class N{static create(){var e;return new N(null!==(e=(new Error).stack)&&void 0!==e?e:"")}constructor(e){this.value=e}print(){console.warn(this.value.split("\n").slice(2).join("\n"))}}let H=0;class U{constructor(e){this.value=e,this.id=H++}}class B{constructor(e){var t,i,r,n,s;this._size=0,this._options=e,this._leakageMon=(null===(t=this._options)||void 0===t?void 0:t.leakWarningThreshold)?new M(null!==(r=null===(i=this._options)||void 0===i?void 0:i.leakWarningThreshold)&&void 0!==r?r:-1):void 0,this._perfMon=(null===(n=this._options)||void 0===n?void 0:n._profName)?new O(this._options._profName):void 0,this._deliveryQueue=null===(s=this._options)||void 0===s?void 0:s.deliveryQueue}dispose(){var e,t,i,r;this._disposed||(this._disposed=!0,(null===(e=this._deliveryQueue)||void 0===e?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),null===(i=null===(t=this._options)||void 0===t?void 0:t.onDidRemoveLastListener)||void 0===i||i.call(t),null===(r=this._leakageMon)||void 0===r||r.dispose())}get event(){var e;return null!==(e=this._event)&&void 0!==e||(this._event=(e,t,i)=>{var r,n,s,o,a;if(this._leakageMon&&this._size>3*this._leakageMon.threshold)return console.warn(`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far`),x.None;if(this._disposed)return x.None;t&&(e=e.bind(t));const l=new U(e);let c;this._leakageMon&&this._size>=Math.ceil(.2*this._leakageMon.threshold)&&(l.stack=N.create(),c=this._leakageMon.check(l.stack,this._size+1)),this._listeners?this._listeners instanceof U?(null!==(a=this._deliveryQueue)&&void 0!==a||(this._deliveryQueue=new V),this._listeners=[this._listeners,l]):this._listeners.push(l):(null===(n=null===(r=this._options)||void 0===r?void 0:r.onWillAddFirstListener)||void 0===n||n.call(r,this),this._listeners=l,null===(o=null===(s=this._options)||void 0===s?void 0:s.onDidAddFirstListener)||void 0===o||o.call(s,this)),this._size++;const u=w((()=>{null==c||c(),this._removeListener(l)}));return i instanceof b?i.add(u):Array.isArray(i)&&i.push(u),u}),this._event}_removeListener(e){var t,i,r,n;if(null===(i=null===(t=this._options)||void 0===t?void 0:t.onWillRemoveListener)||void 0===i||i.call(t,this),!this._listeners)return;if(1===this._size)return this._listeners=void 0,null===(n=null===(r=this._options)||void 0===r?void 0:r.onDidRemoveLastListener)||void 0===n||n.call(r,this),void(this._size=0);const s=this._listeners,o=s.indexOf(e);if(-1===o)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,s[o]=void 0;const a=this._deliveryQueue.current===this;if(2*this._size<=s.length){let e=0;for(let t=0;t<s.length;t++)s[t]?s[e++]=s[t]:a&&(this._deliveryQueue.end--,e<this._deliveryQueue.i&&this._deliveryQueue.i--);s.length=e}}_deliver(e,t){var i;if(!e)return;const n=(null===(i=this._options)||void 0===i?void 0:i.onListenerError)||r;if(n)try{e.value(t)}catch(s){n(s)}else e.value(t)}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){var t,i,r,n;if((null===(t=this._deliveryQueue)||void 0===t?void 0:t.current)&&(this._deliverQueue(this._deliveryQueue),null===(i=this._perfMon)||void 0===i||i.stop()),null===(r=this._perfMon)||void 0===r||r.start(this._size),this._listeners)if(this._listeners instanceof U)this._deliver(this._listeners,e);else{const t=this._deliveryQueue;t.enqueue(this,e,this._listeners.length),this._deliverQueue(t)}else;null===(n=this._perfMon)||void 0===n||n.stop()}hasListeners(){return this._size>0}}class V{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class W extends B{fireAsync(e,t,i){return L(this,void 0,void 0,(function*(){if(this._listeners)for(this._asyncDeliveryQueue||(this._asyncDeliveryQueue=new A),((e,t)=>{if(e instanceof U)t(e);else for(let i=0;i<e.length;i++){const r=e[i];r&&t(r)}})(this._listeners,(t=>this._asyncDeliveryQueue.push([t.value,e])));this._asyncDeliveryQueue.size>0&&!t.isCancellationRequested;){const[e,s]=this._asyncDeliveryQueue.shift(),o=[],a=Object.assign(Object.assign({},s),{token:t,waitUntil:t=>{if(Object.isFrozen(o))throw new Error("waitUntil can NOT be called asynchronous");i&&(t=i(t,e)),o.push(t)}});try{e(a)}catch(n){r(n);continue}Object.freeze(o),yield Promise.allSettled(o).then((e=>{for(const t of e)"rejected"===t.status&&r(t.reason)}))}}))}}class z extends B{get isPaused(){return 0!==this._isPaused}constructor(e){super(e),this._isPaused=0,this._eventQueue=new A,this._mergeFn=null==e?void 0:e.merge}pause(){this._isPaused++}resume(){if(0!==this._isPaused&&0==--this._isPaused)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&0!==this._eventQueue.size;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(0!==this._isPaused?this._eventQueue.push(e):super.fire(e))}}class j extends z{constructor(e){var t;super(e),this._delay=null!==(t=e.delay)&&void 0!==t?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout((()=>{this._handle=void 0,this.resume()}),this._delay)),super.fire(e)}}var q;function K(e){const t=I.alloc(1);switch(e){case 0:t.writeUInt8(1,0);break;case 1:t.writeUInt8(2,0);break;case 2:t.writeUInt8(3,0)}return t}!function(e){e[e.Desktop=1]="Desktop",e[e.Web=2]="Web"}(q||(q={}));const G=e=>{performance.mark(e)};let Q="undefined"!=typeof document&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function J(e,t,...i){return function(e,t){let i;return i=0===t.length?e:e.replace(/\{(\d+)\}/g,((e,i)=>{const r=i[0],n=t[r];let s=e;return"string"==typeof n?s=n:"number"!=typeof n&&"boolean"!=typeof n&&null!=n||(s=String(n)),s})),Q&&(i="［"+i.replace(/[aouei]/g,"$&$&")+"］"),i}(t,i)}var Z;const Y="en";let X,ee,te,ie=!1,re=!1,ne=!1,se=!1,oe=!1,ae=!1,le=Y,ce=Y;const ue="object"==typeof self?self:"object"==typeof global?global:{};let de;void 0!==ue.vscode&&void 0!==ue.vscode.process?de=ue.vscode.process:"undefined"!=typeof process&&(de=process);const he="string"==typeof(null===(Z=null==de?void 0:de.versions)||void 0===Z?void 0:Z.electron)&&"renderer"===(null==de?void 0:de.type);if("object"!=typeof navigator||he)if("object"==typeof de){ie="win32"===de.platform,re="darwin"===de.platform,ne="linux"===de.platform,ne&&de.env.SNAP&&de.env.SNAP_REVISION,de.env.CI||de.env.BUILD_ARTIFACTSTAGINGDIRECTORY,X=Y,le=Y;const e=de.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e),i=t.availableLanguages["*"];X=t.locale,ce=t.osLocale,le=i||Y,ee=t._translationsConfigFile}catch(_C){}se=!0}else console.error("Unable to resolve platform.");else te=navigator.userAgent,ie=te.indexOf("Windows")>=0,re=te.indexOf("Macintosh")>=0,ae=(te.indexOf("Macintosh")>=0||te.indexOf("iPad")>=0||te.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,ne=te.indexOf("Linux")>=0,null==te||te.indexOf("Mobi"),oe=!0,J(0,"_"),X=Y,le=X,ce=navigator.language;function pe(e){switch(e){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}const ge=ie,fe=re,me=ne,ve=se,_e=oe,ye=oe&&"function"==typeof ue.importScripts,we=te,be=le;var xe;!function(e){e.value=function(){return be},e.isDefaultVariant=function(){return 2===be.length?"en"===be:be.length>=3&&("e"===be[0]&&"n"===be[1]&&"-"===be[2])},e.isDefault=function(){return"en"===be}}(xe||(xe={}));const Ce="function"==typeof ue.postMessage&&!ue.importScripts,De=(()=>{if(Ce){const e=[];ue.addEventListener("message",(t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let i=0,r=e.length;i<r;i++){const r=e[i];if(r.id===t.data.vscodeScheduleAsyncWork)return e.splice(i,1),void r.callback()}}));let t=0;return i=>{const r=++t;e.push({id:r,callback:i}),ue.postMessage({vscodeScheduleAsyncWork:r},"*")}}return e=>setTimeout(e)})(),Se=re||ae?2:ie?1:3;let Ee=!0,ke=!1;function Ie(){if(!ke){ke=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2;const t=new Uint16Array(e.buffer);Ee=513===t[0]}return Ee}const Te=!!(we&&we.indexOf("Chrome")>=0),Pe=!!(we&&we.indexOf("Firefox")>=0),Ae=!!(!Te&&we&&we.indexOf("Safari")>=0),Re=!!(we&&we.indexOf("Edg/")>=0);let Fe;if(we&&we.indexOf("Android"),void 0!==ue.vscode&&void 0!==ue.vscode.process){const e=ue.vscode.process;Fe={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd:()=>e.cwd()}}else Fe="undefined"!=typeof process?{get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd:()=>process.env.VSCODE_CWD||process.cwd()}:{get platform(){return ge?"win32":fe?"darwin":"linux"},get arch(){},get env(){return{}},cwd:()=>"/"};const $e=Fe.cwd,Le=Fe.env,Oe=Fe.platform;Fe.arch;const Me=46,Ne=47,He=92,Ue=58;class Be extends Error{constructor(e,t,i){let r;"string"==typeof t&&0===t.indexOf("not ")?(r="must not be",t=t.replace(/^not /,"")):r="must be";const n=-1!==e.indexOf(".")?"property":"argument";let s=`The "${e}" ${n} ${r} of type ${t}`;s+=". Received type "+typeof i,super(s),this.code="ERR_INVALID_ARG_TYPE"}}function Ve(e,t){if("string"!=typeof e)throw new Be(t,"string",e)}const We="win32"===Oe;function ze(e){return e===Ne||e===He}function je(e){return e===Ne}function qe(e){return e>=65&&e<=90||e>=97&&e<=122}function Ke(e,t,i,r){let n="",s=0,o=-1,a=0,l=0;for(let c=0;c<=e.length;++c){if(c<e.length)l=e.charCodeAt(c);else{if(r(l))break;l=Ne}if(r(l)){if(o===c-1||1===a);else if(2===a){if(n.length<2||2!==s||n.charCodeAt(n.length-1)!==Me||n.charCodeAt(n.length-2)!==Me){if(n.length>2){const e=n.lastIndexOf(i);-1===e?(n="",s=0):(n=n.slice(0,e),s=n.length-1-n.lastIndexOf(i)),o=c,a=0;continue}if(0!==n.length){n="",s=0,o=c,a=0;continue}}t&&(n+=n.length>0?`${i}..`:"..",s=2)}else n.length>0?n+=`${i}${e.slice(o+1,c)}`:n=e.slice(o+1,c),s=c-o-1;o=c,a=0}else l===Me&&-1!==a?++a:a=-1}return n}function Ge(e,t){!function(e,t){if(null===e||"object"!=typeof e)throw new Be(t,"Object",e)}(t,"pathObject");const i=t.dir||t.root,r=t.base||`${t.name||""}${t.ext||""}`;return i?i===t.root?`${i}${r}`:`${i}${e}${r}`:r}const Qe={resolve(...e){let t="",i="",r=!1;for(let n=e.length-1;n>=-1;n--){let s;if(n>=0){if(s=e[n],Ve(s,"path"),0===s.length)continue}else 0===t.length?s=$e():(s=Le[`=${t}`]||$e(),(void 0===s||s.slice(0,2).toLowerCase()!==t.toLowerCase()&&s.charCodeAt(2)===He)&&(s=`${t}\\`));const o=s.length;let a=0,l="",c=!1;const u=s.charCodeAt(0);if(1===o)ze(u)&&(a=1,c=!0);else if(ze(u))if(c=!0,ze(s.charCodeAt(1))){let e=2,t=e;for(;e<o&&!ze(s.charCodeAt(e));)e++;if(e<o&&e!==t){const i=s.slice(t,e);for(t=e;e<o&&ze(s.charCodeAt(e));)e++;if(e<o&&e!==t){for(t=e;e<o&&!ze(s.charCodeAt(e));)e++;e!==o&&e===t||(l=`\\\\${i}\\${s.slice(t,e)}`,a=e)}}}else a=1;else qe(u)&&s.charCodeAt(1)===Ue&&(l=s.slice(0,2),a=2,o>2&&ze(s.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(t.length>0){if(l.toLowerCase()!==t.toLowerCase())continue}else t=l;if(r){if(t.length>0)break}else if(i=`${s.slice(a)}\\${i}`,r=c,c&&t.length>0)break}return i=Ke(i,!r,"\\",ze),r?`${t}\\${i}`:`${t}${i}`||"."},normalize(e){Ve(e,"path");const t=e.length;if(0===t)return".";let i,r=0,n=!1;const s=e.charCodeAt(0);if(1===t)return je(s)?"\\":e;if(ze(s))if(n=!0,ze(e.charCodeAt(1))){let n=2,s=n;for(;n<t&&!ze(e.charCodeAt(n));)n++;if(n<t&&n!==s){const o=e.slice(s,n);for(s=n;n<t&&ze(e.charCodeAt(n));)n++;if(n<t&&n!==s){for(s=n;n<t&&!ze(e.charCodeAt(n));)n++;if(n===t)return`\\\\${o}\\${e.slice(s)}\\`;n!==s&&(i=`\\\\${o}\\${e.slice(s,n)}`,r=n)}}}else r=1;else qe(s)&&e.charCodeAt(1)===Ue&&(i=e.slice(0,2),r=2,t>2&&ze(e.charCodeAt(2))&&(n=!0,r=3));let o=r<t?Ke(e.slice(r),!n,"\\",ze):"";return 0!==o.length||n||(o="."),o.length>0&&ze(e.charCodeAt(t-1))&&(o+="\\"),void 0===i?n?`\\${o}`:o:n?`${i}\\${o}`:`${i}${o}`},isAbsolute(e){Ve(e,"path");const t=e.length;if(0===t)return!1;const i=e.charCodeAt(0);return ze(i)||t>2&&qe(i)&&e.charCodeAt(1)===Ue&&ze(e.charCodeAt(2))},join(...e){if(0===e.length)return".";let t,i;for(let s=0;s<e.length;++s){const r=e[s];Ve(r,"path"),r.length>0&&(void 0===t?t=i=r:t+=`\\${r}`)}if(void 0===t)return".";let r=!0,n=0;if("string"==typeof i&&ze(i.charCodeAt(0))){++n;const e=i.length;e>1&&ze(i.charCodeAt(1))&&(++n,e>2&&(ze(i.charCodeAt(2))?++n:r=!1))}if(r){for(;n<t.length&&ze(t.charCodeAt(n));)n++;n>=2&&(t=`\\${t.slice(n)}`)}return Qe.normalize(t)},relative(e,t){if(Ve(e,"from"),Ve(t,"to"),e===t)return"";const i=Qe.resolve(e),r=Qe.resolve(t);if(i===r)return"";if((e=i.toLowerCase())===(t=r.toLowerCase()))return"";let n=0;for(;n<e.length&&e.charCodeAt(n)===He;)n++;let s=e.length;for(;s-1>n&&e.charCodeAt(s-1)===He;)s--;const o=s-n;let a=0;for(;a<t.length&&t.charCodeAt(a)===He;)a++;let l=t.length;for(;l-1>a&&t.charCodeAt(l-1)===He;)l--;const c=l-a,u=o<c?o:c;let d=-1,h=0;for(;h<u;h++){const i=e.charCodeAt(n+h);if(i!==t.charCodeAt(a+h))break;i===He&&(d=h)}if(h!==u){if(-1===d)return r}else{if(c>u){if(t.charCodeAt(a+h)===He)return r.slice(a+h+1);if(2===h)return r.slice(a+h)}o>u&&(e.charCodeAt(n+h)===He?d=h:2===h&&(d=3)),-1===d&&(d=0)}let p="";for(h=n+d+1;h<=s;++h)h!==s&&e.charCodeAt(h)!==He||(p+=0===p.length?"..":"\\..");return a+=d,p.length>0?`${p}${r.slice(a,l)}`:(r.charCodeAt(a)===He&&++a,r.slice(a,l))},toNamespacedPath(e){if("string"!=typeof e||0===e.length)return e;const t=Qe.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===He){if(t.charCodeAt(1)===He){const e=t.charCodeAt(2);if(63!==e&&e!==Me)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(qe(t.charCodeAt(0))&&t.charCodeAt(1)===Ue&&t.charCodeAt(2)===He)return`\\\\?\\${t}`;return e},dirname(e){Ve(e,"path");const t=e.length;if(0===t)return".";let i=-1,r=0;const n=e.charCodeAt(0);if(1===t)return ze(n)?e:".";if(ze(n)){if(i=r=1,ze(e.charCodeAt(1))){let n=2,s=n;for(;n<t&&!ze(e.charCodeAt(n));)n++;if(n<t&&n!==s){for(s=n;n<t&&ze(e.charCodeAt(n));)n++;if(n<t&&n!==s){for(s=n;n<t&&!ze(e.charCodeAt(n));)n++;if(n===t)return e;n!==s&&(i=r=n+1)}}}}else qe(n)&&e.charCodeAt(1)===Ue&&(i=t>2&&ze(e.charCodeAt(2))?3:2,r=i);let s=-1,o=!0;for(let a=t-1;a>=r;--a)if(ze(e.charCodeAt(a))){if(!o){s=a;break}}else o=!1;if(-1===s){if(-1===i)return".";s=i}return e.slice(0,s)},basename(e,t){void 0!==t&&Ve(t,"ext"),Ve(e,"path");let i,r=0,n=-1,s=!0;if(e.length>=2&&qe(e.charCodeAt(0))&&e.charCodeAt(1)===Ue&&(r=2),void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(i=e.length-1;i>=r;--i){const l=e.charCodeAt(i);if(ze(l)){if(!s){r=i+1;break}}else-1===a&&(s=!1,a=i+1),o>=0&&(l===t.charCodeAt(o)?-1==--o&&(n=i):(o=-1,n=a))}return r===n?n=a:-1===n&&(n=e.length),e.slice(r,n)}for(i=e.length-1;i>=r;--i)if(ze(e.charCodeAt(i))){if(!s){r=i+1;break}}else-1===n&&(s=!1,n=i+1);return-1===n?"":e.slice(r,n)},extname(e){Ve(e,"path");let t=0,i=-1,r=0,n=-1,s=!0,o=0;e.length>=2&&e.charCodeAt(1)===Ue&&qe(e.charCodeAt(0))&&(t=r=2);for(let a=e.length-1;a>=t;--a){const t=e.charCodeAt(a);if(ze(t)){if(!s){r=a+1;break}}else-1===n&&(s=!1,n=a+1),t===Me?-1===i?i=a:1!==o&&(o=1):-1!==i&&(o=-1)}return-1===i||-1===n||0===o||1===o&&i===n-1&&i===r+1?"":e.slice(i,n)},format:Ge.bind(null,"\\"),parse(e){Ve(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;const i=e.length;let r=0,n=e.charCodeAt(0);if(1===i)return ze(n)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(ze(n)){if(r=1,ze(e.charCodeAt(1))){let t=2,n=t;for(;t<i&&!ze(e.charCodeAt(t));)t++;if(t<i&&t!==n){for(n=t;t<i&&ze(e.charCodeAt(t));)t++;if(t<i&&t!==n){for(n=t;t<i&&!ze(e.charCodeAt(t));)t++;t===i?r=t:t!==n&&(r=t+1)}}}}else if(qe(n)&&e.charCodeAt(1)===Ue){if(i<=2)return t.root=t.dir=e,t;if(r=2,ze(e.charCodeAt(2))){if(3===i)return t.root=t.dir=e,t;r=3}}r>0&&(t.root=e.slice(0,r));let s=-1,o=r,a=-1,l=!0,c=e.length-1,u=0;for(;c>=r;--c)if(n=e.charCodeAt(c),ze(n)){if(!l){o=c+1;break}}else-1===a&&(l=!1,a=c+1),n===Me?-1===s?s=c:1!==u&&(u=1):-1!==s&&(u=-1);return-1!==a&&(-1===s||0===u||1===u&&s===a-1&&s===o+1?t.base=t.name=e.slice(o,a):(t.name=e.slice(o,s),t.base=e.slice(o,a),t.ext=e.slice(s,a))),t.dir=o>0&&o!==r?e.slice(0,o-1):t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},Je=(()=>{if(We){const e=/\\/g;return()=>{const t=$e().replace(e,"/");return t.slice(t.indexOf("/"))}}return()=>$e()})(),Ze={resolve(...e){let t="",i=!1;for(let r=e.length-1;r>=-1&&!i;r--){const n=r>=0?e[r]:Je();Ve(n,"path"),0!==n.length&&(t=`${n}/${t}`,i=n.charCodeAt(0)===Ne)}return t=Ke(t,!i,"/",je),i?`/${t}`:t.length>0?t:"."},normalize(e){if(Ve(e,"path"),0===e.length)return".";const t=e.charCodeAt(0)===Ne,i=e.charCodeAt(e.length-1)===Ne;return 0===(e=Ke(e,!t,"/",je)).length?t?"/":i?"./":".":(i&&(e+="/"),t?`/${e}`:e)},isAbsolute:e=>(Ve(e,"path"),e.length>0&&e.charCodeAt(0)===Ne),join(...e){if(0===e.length)return".";let t;for(let i=0;i<e.length;++i){const r=e[i];Ve(r,"path"),r.length>0&&(void 0===t?t=r:t+=`/${r}`)}return void 0===t?".":Ze.normalize(t)},relative(e,t){if(Ve(e,"from"),Ve(t,"to"),e===t)return"";if((e=Ze.resolve(e))===(t=Ze.resolve(t)))return"";const i=e.length,r=i-1,n=t.length-1,s=r<n?r:n;let o=-1,a=0;for(;a<s;a++){const i=e.charCodeAt(1+a);if(i!==t.charCodeAt(1+a))break;i===Ne&&(o=a)}if(a===s)if(n>s){if(t.charCodeAt(1+a)===Ne)return t.slice(1+a+1);if(0===a)return t.slice(1+a)}else r>s&&(e.charCodeAt(1+a)===Ne?o=a:0===a&&(o=0));let l="";for(a=1+o+1;a<=i;++a)a!==i&&e.charCodeAt(a)!==Ne||(l+=0===l.length?"..":"/..");return`${l}${t.slice(1+o)}`},toNamespacedPath:e=>e,dirname(e){if(Ve(e,"path"),0===e.length)return".";const t=e.charCodeAt(0)===Ne;let i=-1,r=!0;for(let n=e.length-1;n>=1;--n)if(e.charCodeAt(n)===Ne){if(!r){i=n;break}}else r=!1;return-1===i?t?"/":".":t&&1===i?"//":e.slice(0,i)},basename(e,t){void 0!==t&&Ve(t,"ext"),Ve(e,"path");let i,r=0,n=-1,s=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(i=e.length-1;i>=0;--i){const l=e.charCodeAt(i);if(l===Ne){if(!s){r=i+1;break}}else-1===a&&(s=!1,a=i+1),o>=0&&(l===t.charCodeAt(o)?-1==--o&&(n=i):(o=-1,n=a))}return r===n?n=a:-1===n&&(n=e.length),e.slice(r,n)}for(i=e.length-1;i>=0;--i)if(e.charCodeAt(i)===Ne){if(!s){r=i+1;break}}else-1===n&&(s=!1,n=i+1);return-1===n?"":e.slice(r,n)},extname(e){Ve(e,"path");let t=-1,i=0,r=-1,n=!0,s=0;for(let o=e.length-1;o>=0;--o){const a=e.charCodeAt(o);if(a!==Ne)-1===r&&(n=!1,r=o+1),a===Me?-1===t?t=o:1!==s&&(s=1):-1!==t&&(s=-1);else if(!n){i=o+1;break}}return-1===t||-1===r||0===s||1===s&&t===r-1&&t===i+1?"":e.slice(t,r)},format:Ge.bind(null,"/"),parse(e){Ve(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;const i=e.charCodeAt(0)===Ne;let r;i?(t.root="/",r=1):r=0;let n=-1,s=0,o=-1,a=!0,l=e.length-1,c=0;for(;l>=r;--l){const t=e.charCodeAt(l);if(t!==Ne)-1===o&&(a=!1,o=l+1),t===Me?-1===n?n=l:1!==c&&(c=1):-1!==n&&(c=-1);else if(!a){s=l+1;break}}if(-1!==o){const r=0===s&&i?1:s;-1===n||0===c||1===c&&n===o-1&&n===s+1?t.base=t.name=e.slice(r,o):(t.name=e.slice(r,n),t.base=e.slice(r,o),t.ext=e.slice(n,o))}return s>0?t.dir=e.slice(0,s-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Ze.win32=Qe.win32=Qe,Ze.posix=Qe.posix=Ze;const Ye=We?Qe.normalize:Ze.normalize,Xe=We?Qe.isAbsolute:Ze.isAbsolute,et=We?Qe.join:Ze.join,tt=We?Qe.resolve:Ze.resolve,it=We?Qe.relative:Ze.relative,rt=We?Qe.dirname:Ze.dirname,nt=We?Qe.basename:Ze.basename,st=We?Qe.extname:Ze.extname;We?Qe.format:Ze.format,We?Qe.parse:Ze.parse,We?Qe.toNamespacedPath:Ze.toNamespacedPath;const ot=We?Qe.sep:Ze.sep;We?Qe.delimiter:Ze.delimiter;const at=/^\w[\w\d+.-]*$/,lt=/^\//,ct=/^\/\//;const ut="",dt="/",ht=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class pt{static isUri(e){return e instanceof pt||!!e&&("string"==typeof e.authority&&"string"==typeof e.fragment&&"string"==typeof e.path&&"string"==typeof e.query&&"string"==typeof e.scheme&&"string"==typeof e.fsPath&&"function"==typeof e.with&&"function"==typeof e.toString)}constructor(e,t,i,r,n,s=!1){"object"==typeof e?(this.scheme=e.scheme||ut,this.authority=e.authority||ut,this.path=e.path||ut,this.query=e.query||ut,this.fragment=e.fragment||ut):(this.scheme=function(e,t){return e||t?e:"file"}(e,s),this.authority=t||ut,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==dt&&(t=dt+t):t=dt}return t}(this.scheme,i||ut),this.query=r||ut,this.fragment=n||ut,function(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!at.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!lt.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(ct.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this,s))}get fsPath(){return yt(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:r,query:n,fragment:s}=e;return void 0===t?t=this.scheme:null===t&&(t=ut),void 0===i?i=this.authority:null===i&&(i=ut),void 0===r?r=this.path:null===r&&(r=ut),void 0===n?n=this.query:null===n&&(n=ut),void 0===s?s=this.fragment:null===s&&(s=ut),t===this.scheme&&i===this.authority&&r===this.path&&n===this.query&&s===this.fragment?this:new ft(t,i,r,n,s)}static parse(e,t=!1){const i=ht.exec(e);return i?new ft(i[2]||ut,Ct(i[4]||ut),Ct(i[5]||ut),Ct(i[7]||ut),Ct(i[9]||ut),t):new ft(ut,ut,ut,ut,ut)}static file(e){let t=ut;if(ge&&(e=e.replace(/\\/g,dt)),e[0]===dt&&e[1]===dt){const i=e.indexOf(dt,2);-1===i?(t=e.substring(2),e=dt):(t=e.substring(2,i),e=e.substring(i)||dt)}return new ft("file",t,e,ut,ut)}static from(e,t){return new ft(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return i=ge&&"file"===e.scheme?pt.file(Qe.join(yt(e,!0),...t)).path:Ze.join(e.path,...t),e.with({path:i})}toString(e=!1){return wt(this,e)}toJSON(){return this}static revive(e){var t,i;if(e){if(e instanceof pt)return e;{const r=new ft(e);return r._formatted=null!==(t=e.external)&&void 0!==t?t:null,r._fsPath=e._sep===gt&&null!==(i=e.fsPath)&&void 0!==i?i:null,r}}return e}}const gt=ge?1:void 0;class ft extends pt{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=yt(this,!1)),this._fsPath}toString(e=!1){return e?wt(this,!0):(this._formatted||(this._formatted=wt(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=gt),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const mt={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function vt(e,t,i){let r,n=-1;for(let s=0;s<e.length;s++){const o=e.charCodeAt(s);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||45===o||46===o||95===o||126===o||t&&47===o||i&&91===o||i&&93===o||i&&58===o)-1!==n&&(r+=encodeURIComponent(e.substring(n,s)),n=-1),void 0!==r&&(r+=e.charAt(s));else{void 0===r&&(r=e.substr(0,s));const t=mt[o];void 0!==t?(-1!==n&&(r+=encodeURIComponent(e.substring(n,s)),n=-1),r+=t):-1===n&&(n=s)}}return-1!==n&&(r+=encodeURIComponent(e.substring(n))),void 0!==r?r:e}function _t(e){let t;for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);35===r||63===r?(void 0===t&&(t=e.substr(0,i)),t+=mt[r]):void 0!==t&&(t+=e[i])}return void 0!==t?t:e}function yt(e,t){let i;return i=e.authority&&e.path.length>1&&"file"===e.scheme?`//${e.authority}${e.path}`:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,ge&&(i=i.replace(/\//g,"\\")),i}function wt(e,t){const i=t?_t:vt;let r="",{scheme:n,authority:s,path:o,query:a,fragment:l}=e;if(n&&(r+=n,r+=":"),(s||"file"===n)&&(r+=dt,r+=dt),s){let e=s.indexOf("@");if(-1!==e){const t=s.substr(0,e);s=s.substr(e+1),e=t.lastIndexOf(":"),-1===e?r+=i(t,!1,!1):(r+=i(t.substr(0,e),!1,!1),r+=":",r+=i(t.substr(e+1),!1,!0)),r+="@"}s=s.toLowerCase(),e=s.lastIndexOf(":"),-1===e?r+=i(s,!1,!0):(r+=i(s.substr(0,e),!1,!0),r+=s.substr(e))}if(o){if(o.length>=3&&47===o.charCodeAt(0)&&58===o.charCodeAt(2)){const e=o.charCodeAt(1);e>=65&&e<=90&&(o=`/${String.fromCharCode(e+32)}:${o.substr(3)}`)}else if(o.length>=2&&58===o.charCodeAt(1)){const e=o.charCodeAt(0);e>=65&&e<=90&&(o=`${String.fromCharCode(e+32)}:${o.substr(2)}`)}r+=i(o,!0,!1)}return a&&(r+="?",r+=i(a,!1,!1)),l&&(r+="#",r+=t?l:vt(l,!1,!1)),r}function bt(e){try{return decodeURIComponent(e)}catch(yr){return e.length>3?e.substr(0,3)+bt(e.substr(3)):e}}const xt=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Ct(e){return e.match(xt)?e.replace(xt,(e=>bt(e))):e}class Dt{static{this.count=0}constructor(e){this._proxyIdentifierBrand=void 0,this.sid=e,this.nid=++Dt.count}}const St=[];function Et(e){const t=new Dt(e);return St[t.nid]=t,t}function kt(e){return St[e].sid}class It{constructor(e){this.value=e}}var Tt,Pt,At;!function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"}(Tt||(Tt={})),function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"}(Pt||(Pt={})),function(e){e[e.None=0]="None",e[e.Process=1]="Process",e[e.Output=2]="Output"}(At||(At={}));class Rt{static{this._n=0}static mixin(e){return e._id=Rt._n++,e}}const Ft={MainThreadAuthentication:Et("MainThreadAuthentication"),MainThreadBulkEdits:Et("MainThreadBulkEdits"),MainThreadChatProvider:Et("MainThreadChatProvider"),MainThreadChatSlashCommands:Et("MainThreadChatSlashCommands"),MainThreadChatVariables:Et("MainThreadChatVariables"),MainThreadClipboard:Et("MainThreadClipboard"),MainThreadCommands:Et("MainThreadCommands"),MainThreadComments:Et("MainThreadComments"),MainThreadConfiguration:Et("MainThreadConfiguration"),MainThreadConsole:Et("MainThreadConsole"),MainThreadDebugService:Et("MainThreadDebugService"),MainThreadDecorations:Et("MainThreadDecorations"),MainThreadDiagnostics:Et("MainThreadDiagnostics"),MainThreadDialogs:Et("MainThreadDiaglogs"),MainThreadDocuments:Et("MainThreadDocuments"),MainThreadDocumentContentProviders:Et("MainThreadDocumentContentProviders"),MainThreadTextEditors:Et("MainThreadTextEditors"),MainThreadEditorInsets:Et("MainThreadEditorInsets"),MainThreadEditorTabs:Et("MainThreadEditorTabs"),MainThreadErrors:Et("MainThreadErrors"),MainThreadTreeViews:Et("MainThreadTreeViews"),MainThreadDownloadService:Et("MainThreadDownloadService"),MainThreadKeytar:Et("MainThreadKeytar"),MainThreadLanguageFeatures:Et("MainThreadLanguageFeatures"),MainThreadLanguages:Et("MainThreadLanguages"),MainThreadLogger:Et("MainThreadLogger"),MainThreadMessageService:Et("MainThreadMessageService"),MainThreadOutputService:Et("MainThreadOutputService"),MainThreadProgress:Et("MainThreadProgress"),MainThreadQuickDiff:Et("MainThreadQuickDiff"),MainThreadQuickOpen:Et("MainThreadQuickOpen"),MainThreadStatusBar:Et("MainThreadStatusBar"),MainThreadSecretState:Et("MainThreadSecretState"),MainThreadStorage:Et("MainThreadStorage"),MainThreadTelemetry:Et("MainThreadTelemetry"),MainThreadTerminalService:Et("MainThreadTerminalService"),MainThreadWebviews:Et("MainThreadWebviews"),MainThreadWebviewPanels:Et("MainThreadWebviewPanels"),MainThreadWebviewViews:Et("MainThreadWebviewViews"),MainThreadCustomEditors:Et("MainThreadCustomEditors"),MainThreadUrls:Et("MainThreadUrls"),MainThreadUriOpeners:Et("MainThreadUriOpeners"),MainThreadProfileContentHandlers:Et("MainThreadProfileContentHandlers"),MainThreadWorkspace:Et("MainThreadWorkspace"),MainThreadFileSystem:Et("MainThreadFileSystem"),MainThreadExtensionService:Et("MainThreadExtensionService"),MainThreadSCM:Et("MainThreadSCM"),MainThreadSearch:Et("MainThreadSearch"),MainThreadShare:Et("MainThreadShare"),MainThreadTask:Et("MainThreadTask"),MainThreadWindow:Et("MainThreadWindow"),MainThreadLabelService:Et("MainThreadLabelService"),MainThreadNotebook:Et("MainThreadNotebook"),MainThreadNotebookDocuments:Et("MainThreadNotebookDocumentsShape"),MainThreadNotebookEditors:Et("MainThreadNotebookEditorsShape"),MainThreadNotebookKernels:Et("MainThreadNotebookKernels"),MainThreadNotebookRenderers:Et("MainThreadNotebookRenderers"),MainThreadInteractive:Et("MainThreadInteractive"),MainThreadChat:Et("MainThreadChat"),MainThreadInlineChat:Et("MainThreadInlineChatShape"),MainThreadTheming:Et("MainThreadTheming"),MainThreadTunnelService:Et("MainThreadTunnelService"),MainThreadManagedSockets:Et("MainThreadManagedSockets"),MainThreadTimeline:Et("MainThreadTimeline"),MainThreadTesting:Et("MainThreadTesting"),MainThreadLocalization:Et("MainThreadLocalizationShape"),MainThreadAiRelatedInformation:Et("MainThreadAiRelatedInformation"),MainThreadAiEmbeddingVector:Et("MainThreadAiEmbeddingVector"),MainThreadIssueReporter:Et("MainThreadIssueReporter")},$t={ExtHostCommands:Et("ExtHostCommands"),ExtHostConfiguration:Et("ExtHostConfiguration"),ExtHostDiagnostics:Et("ExtHostDiagnostics"),ExtHostDebugService:Et("ExtHostDebugService"),ExtHostDecorations:Et("ExtHostDecorations"),ExtHostDocumentsAndEditors:Et("ExtHostDocumentsAndEditors"),ExtHostDocuments:Et("ExtHostDocuments"),ExtHostDocumentContentProviders:Et("ExtHostDocumentContentProviders"),ExtHostDocumentSaveParticipant:Et("ExtHostDocumentSaveParticipant"),ExtHostEditors:Et("ExtHostEditors"),ExtHostTreeViews:Et("ExtHostTreeViews"),ExtHostFileSystem:Et("ExtHostFileSystem"),ExtHostFileSystemInfo:Et("ExtHostFileSystemInfo"),ExtHostFileSystemEventService:Et("ExtHostFileSystemEventService"),ExtHostLanguages:Et("ExtHostLanguages"),ExtHostLanguageFeatures:Et("ExtHostLanguageFeatures"),ExtHostQuickOpen:Et("ExtHostQuickOpen"),ExtHostQuickDiff:Et("ExtHostQuickDiff"),ExtHostStatusBar:Et("ExtHostStatusBar"),ExtHostShare:Et("ExtHostShare"),ExtHostExtensionService:Et("ExtHostExtensionService"),ExtHostLogLevelServiceShape:Et("ExtHostLogLevelServiceShape"),ExtHostTerminalService:Et("ExtHostTerminalService"),ExtHostSCM:Et("ExtHostSCM"),ExtHostSearch:Et("ExtHostSearch"),ExtHostTask:Et("ExtHostTask"),ExtHostWorkspace:Et("ExtHostWorkspace"),ExtHostWindow:Et("ExtHostWindow"),ExtHostWebviews:Et("ExtHostWebviews"),ExtHostWebviewPanels:Et("ExtHostWebviewPanels"),ExtHostCustomEditors:Et("ExtHostCustomEditors"),ExtHostWebviewViews:Et("ExtHostWebviewViews"),ExtHostEditorInsets:Et("ExtHostEditorInsets"),ExtHostEditorTabs:Et("ExtHostEditorTabs"),ExtHostProgress:Et("ExtHostProgress"),ExtHostComments:Et("ExtHostComments"),ExtHostSecretState:Et("ExtHostSecretState"),ExtHostStorage:Et("ExtHostStorage"),ExtHostUrls:Et("ExtHostUrls"),ExtHostUriOpeners:Et("ExtHostUriOpeners"),ExtHostProfileContentHandlers:Et("ExtHostProfileContentHandlers"),ExtHostOutputService:Et("ExtHostOutputService"),ExtHosLabelService:Et("ExtHostLabelService"),ExtHostNotebook:Et("ExtHostNotebook"),ExtHostNotebookDocuments:Et("ExtHostNotebookDocuments"),ExtHostNotebookEditors:Et("ExtHostNotebookEditors"),ExtHostNotebookKernels:Et("ExtHostNotebookKernels"),ExtHostNotebookRenderers:Et("ExtHostNotebookRenderers"),ExtHostNotebookDocumentSaveParticipant:Et("ExtHostNotebookDocumentSaveParticipant"),ExtHostInteractive:Et("ExtHostInteractive"),ExtHostInlineChat:Et("ExtHostInlineChatShape"),ExtHostChat:Et("ExtHostChat"),ExtHostChatSlashCommands:Et("ExtHostChatSlashCommands"),ExtHostChatVariables:Et("ExtHostChatVariables"),ExtHostChatProvider:Et("ExtHostChatProvider"),ExtHostAiRelatedInformation:Et("ExtHostAiRelatedInformation"),ExtHostAiEmbeddingVector:Et("ExtHostAiEmbeddingVector"),ExtHostTheming:Et("ExtHostTheming"),ExtHostTunnelService:Et("ExtHostTunnelService"),ExtHostManagedSockets:Et("ExtHostManagedSockets"),ExtHostAuthentication:Et("ExtHostAuthentication"),ExtHostTimeline:Et("ExtHostTimeline"),ExtHostTesting:Et("ExtHostTesting"),ExtHostTelemetry:Et("ExtHostTelemetry"),ExtHostLocalization:Et("ExtHostLocalization"),ExtHostIssueReporter:Et("ExtHostIssueReporter")},Lt=Object.freeze((function(e,t){const i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}}));var Ot,Mt;!function(e){e.isCancellationToken=function(t){return t===e.None||t===e.Cancelled||(t instanceof Nt||!(!t||"object"!=typeof t)&&("boolean"==typeof t.isCancellationRequested&&"function"==typeof t.onCancellationRequested))},e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:$.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Lt})}(Ot||(Ot={}));class Nt{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Lt:(this._emitter||(this._emitter=new B),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class Ht{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new Nt),this._token}cancel(){this._token?this._token instanceof Nt&&this._token.cancel():this._token=Ot.Cancelled}dispose(e=!1){var t;e&&this.cancel(),null===(t=this._parentListener)||void 0===t||t.dispose(),this._token?this._token instanceof Nt&&this._token.dispose():this._token=Ot.None}}function Ut(e){return!e||"string"!=typeof e||0===e.trim().length}const Bt=/{([^}]+)}/g;function Vt(e,t){return e.replace(Bt,((e,i)=>{var r;return null!==(r=t[i])&&void 0!==r?r:e}))}function Wt(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function zt(e,t){let i=0;const r=t.charCodeAt(0);for(let n=e.length-1;n>=0;n--)e.charCodeAt(n)===r&&i++;return i}function jt(e,t){if(!e||!t)return e;const i=t.length,r=e.length;if(0===i||0===r)return e;let n=r,s=-1;for(;s=e.lastIndexOf(t,n-1),-1!==s&&s+i===n;){if(0===s)return"";n=s}return e.substring(0,n)}function qt(e){if("^"===e.source||"^$"===e.source||"$"===e.source||"^\\s*$"===e.source)return!1;return!(!e.exec("")||0!==e.lastIndex)}function Kt(e){return e.split(/\r\n|\r|\n/)}function Gt(e,t){return e<t?-1:e>t?1:0}function Qt(e,t,i=0,r=e.length,n=0,s=t.length){for(;i<r&&n<s;i++,n++){const r=e.charCodeAt(i),s=t.charCodeAt(n);if(r<s)return-1;if(r>s)return 1}const o=r-i,a=s-n;return o<a?-1:o>a?1:0}function Jt(e,t){return Zt(e,t,0,e.length,0,t.length)}function Zt(e,t,i=0,r=e.length,n=0,s=t.length){for(;i<r&&n<s;i++,n++){let o=e.charCodeAt(i),a=t.charCodeAt(n);if(o===a)continue;if(o>=128||a>=128)return Qt(e.toLowerCase(),t.toLowerCase(),i,r,n,s);Yt(o)&&(o-=32),Yt(a)&&(a-=32);const l=o-a;if(0!==l)return l}const o=r-i,a=s-n;return o<a?-1:o>a?1:0}function Yt(e){return e>=97&&e<=122}function Xt(e,t){return e.length===t.length&&0===Zt(e,t)}function ei(e,t){const i=t.length;return!(t.length>e.length)&&0===Zt(e,t,0,i)}function ti(e,t){const i=Math.min(e.length,t.length);let r;for(r=0;r<i;r++)if(e.charCodeAt(r)!==t.charCodeAt(r))return r;return i}function ii(e){return 55296<=e&&e<=56319}function ri(e){return 56320<=e&&e<=57343}function ni(e,t){return t-56320+(e-55296<<10)+65536}class si{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=function(e,t){const i=e.charCodeAt(t-1);if(ri(i)&&t>1){const r=e.charCodeAt(t-2);if(ii(r))return ni(r,i)}return i}(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=function(e,t,i){const r=e.charCodeAt(i);if(ii(r)&&i+1<t){const t=e.charCodeAt(i+1);if(ri(t))return ni(r,t)}return r}(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class oi{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new si(e,t)}nextGraphemeLength(){const e=ui.getInstance(),t=this._iterator,i=t.offset;let r=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const i=t.offset,n=e.getGraphemeBreakType(t.nextCodePoint());if(ci(r,n)){t.setOffset(i);break}r=n}return t.offset-i}prevGraphemeLength(){const e=ui.getInstance(),t=this._iterator,i=t.offset;let r=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const i=t.offset,n=e.getGraphemeBreakType(t.prevCodePoint());if(ci(n,r)){t.setOffset(i);break}r=n}return i-t.offset}eol(){return this._iterator.eol()}}function ai(e,t){return new oi(e,t).nextGraphemeLength()}function li(e,t=!1){return!!e&&(t&&(e=e.replace(/\\./g,"")),e.toLowerCase()!==e)}function ci(e,t){return 0===e?5!==t&&7!==t:(2!==e||3!==t)&&(4===e||2===e||3===e||(4===t||2===t||3===t||(8!==e||8!==t&&9!==t&&11!==t&&12!==t)&&((11!==e&&9!==e||9!==t&&10!==t)&&((12!==e&&10!==e||10!==t)&&(5!==t&&13!==t&&(7!==t&&(1!==e&&((13!==e||14!==t)&&(6!==e||6!==t)))))))))}class ui{static getInstance(){return ui._INSTANCE||(ui._INSTANCE=new ui),ui._INSTANCE}constructor(){this._data=JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}getGraphemeBreakType(e){if(e<32)return 10===e?3:13===e?2:4;if(e<127)return 0;const t=this._data,i=t.length/3;let r=1;for(;r<=i;)if(e<t[3*r])r*=2;else{if(!(e>t[3*r+1]))return t[3*r+2];r=2*r+1}return 0}}ui._INSTANCE=null;class di{static getInstance(e){return Mt.cache.get(Array.from(e))}static getLocales(){return Mt._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}function hi(e){return"string"==typeof e}function pi(e){return!("object"!=typeof e||null===e||Array.isArray(e)||e instanceof RegExp||e instanceof Date)}function gi(e){const t=Object.getPrototypeOf(Uint8Array);return"object"==typeof e&&e instanceof t}function fi(e){return"number"==typeof e&&!isNaN(e)}function mi(e){return void 0===e}function vi(e){return!_i(e)}function _i(e){return mi(e)||null===e}function yi(e){if(_i(e))throw new Error("Assertion Failed: argument is undefined or null");return e}Mt=di,di.ambiguousCharacterData=new e((()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))),di.cache=new class{constructor(e){this.fn=e,this.lastCache=void 0,this.lastArgKey=void 0}get(e){const t=JSON.stringify(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this.fn(e)),this.lastCache}}((e=>{function t(e){const t=new Map;for(let i=0;i<e.length;i+=2)t.set(e[i],e[i+1]);return t}function i(e,t){if(!e)return t;const i=new Map;for(const[r,n]of e)t.has(r)&&i.set(r,n);return i}const r=Mt.ambiguousCharacterData.value;let n,s=e.filter((e=>!e.startsWith("_")&&e in r));0===s.length&&(s=["_default"]);for(const a of s){n=i(n,t(r[a]))}const o=function(e,t){const i=new Map(e);for(const[r,n]of t)i.set(r,n);return i}(t(r._common),n);return new Mt(o)})),di._locales=new e((()=>Object.keys(Mt.ambiguousCharacterData.value).filter((e=>!e.startsWith("_")))));const wi=Object.prototype.hasOwnProperty;function bi(e,t){if(hi(t)){if(typeof e!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if("function"==typeof t){try{if(e instanceof t)return}catch(yr){}if(!_i(e)&&e.constructor===t)return;if(1===t.length&&!0===t.call(void 0,e))return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function xi(e){return 47===e||92===e}function Ci(e){return e.replace(/[\\/]/g,Ze.sep)}function Di(e,t=Ze.sep){if(!e)return"";const i=e.length,r=e.charCodeAt(0);if(xi(r)){if(xi(e.charCodeAt(1))&&!xi(e.charCodeAt(2))){let r=3;const n=r;for(;r<i&&!xi(e.charCodeAt(r));r++);if(n!==r&&!xi(e.charCodeAt(r+1)))for(r+=1;r<i;r++)if(xi(e.charCodeAt(r)))return e.slice(0,r+1).replace(/[\\/]/g,t)}return t}if(Ti(r)&&58===e.charCodeAt(1))return xi(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let n=e.indexOf("://");if(-1!==n)for(n+=3;n<i;n++)if(xi(e.charCodeAt(n)))return e.slice(0,n+1);return""}const Si=/[\\/:\*\?"<>\|]/g,Ei=/[\\/]/g,ki=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function Ii(e,t,i,r=ot){if(e===t)return!0;if(!e||!t)return!1;if(t.length>e.length)return!1;if(i){if(!ei(e,t))return!1;if(t.length===e.length)return!0;let i=t.length;return t.charAt(t.length-1)===r&&i--,e.charAt(i)===r}return t.charAt(t.length-1)!==r&&(t+=r),0===e.indexOf(t)}function Ti(e){return e>=65&&e<=90||e>=97&&e<=122}var Pi,Ai,Ri,Fi;class $i{constructor(e,t){this.uri=e,this.value=t}}class Li{constructor(e,t){this[Pi]="ResourceMap",e instanceof Li?(this.map=new Map(e.map),this.toKey=null!=t?t:Li.defaultToKey):(this.map=new Map,this.toKey=null!=e?e:Li.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new $i(e,t)),this}get(e){var t;return null===(t=this.map.get(this.toKey(e)))||void 0===t?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){void 0!==t&&(e=e.bind(t));for(const[i,r]of this.map)e(r.value,r.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(Pi=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}}Li.defaultToKey=e=>e.toString();class Oi{constructor(e,t){this[Ai]="ResourceSet",e&&"function"!=typeof e?(this._map=new Li(t),e.forEach(this.add,this)):this._map=new Li(e)}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,t){this._map.forEach(((i,r)=>e.call(t,r,r,this)))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(Ai=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}class Mi{constructor(){this[Ri]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return null===(e=this._head)||void 0===e?void 0:e.value}get last(){var e;return null===(e=this._tail)||void 0===e?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const i=this._map.get(e);if(i)return 0!==t&&this.touch(i,t),i.value}set(e,t,i=0){let r=this._map.get(e);if(r)r.value=t,0!==i&&this.touch(r,i);else{switch(r={key:e,value:t,next:void 0,previous:void 0},i){case 0:case 2:default:this.addItemLast(r);break;case 1:this.addItemFirst(r)}this._map.set(e,r),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const i=this._state;let r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this,t=this._state;let i=this._head;const r={[Symbol.iterator]:()=>r,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const e={value:i.key,done:!1};return i=i.next,e}return{value:void 0,done:!0}}};return r}values(){const e=this,t=this._state;let i=this._head;const r={[Symbol.iterator]:()=>r,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const e={value:i.value,done:!1};return i=i.next,e}return{value:void 0,done:!0}}};return r}entries(){const e=this,t=this._state;let i=this._head;const r={[Symbol.iterator]:()=>r,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const e={value:[i.key,i.value],done:!1};return i=i.next,e}return{value:void 0,done:!0}}};return r}[(Ri=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(1===t||2===t)if(1===t){if(e===this._head)return;const t=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(t.previous=i,i.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(2===t){if(e===this._tail)return;const t=e.next,i=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=i,i.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach(((t,i)=>{e.push([i,t])})),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}}class Ni extends Mi{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}!function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.vscodeManagedRemoteResource="vscode-managed-remote-resource",e.vscodeUserData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.vscodeChatSesssion="vscode-chat-editor",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls",e.vscodeSourceControl="vscode-scm"}(Fi||(Fi={}));const Hi=new class{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${Fi.vscodeRemoteResource}`}setPreferredWebSchema(e){this._preferredWebSchema=e}setDelegate(e){this._delegate=e}setServerRootPath(e){this._remoteResourcesPath=`${e}/${Fi.vscodeRemoteResource}`}set(e,t,i){this._hosts[e]=t,this._ports[e]=i}setConnectionToken(e,t){this._connectionTokens[e]=t}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return r(a),e}const t=e.authority;let i=this._hosts[t];i&&-1!==i.indexOf(":")&&-1===i.indexOf("[")&&(i=`[${i}]`);const n=this._ports[t],s=this._connectionTokens[t];let o=`path=${encodeURIComponent(e.path)}`;return"string"==typeof s&&(o+=`&tkn=${encodeURIComponent(s)}`),pt.from({scheme:_e?this._preferredWebSchema:Fi.vscodeRemoteResource,authority:`${i}:${n}`,path:this._remoteResourcesPath,query:o})}};class Ui{constructor(){this.staticBrowserUris=new Li}asBrowserUri(e){const t=this.toUri(e,globalThis.monacoRequire);return this.uriToBrowserUri(t)}uriToBrowserUri(e){var t;return e.scheme===Fi.vscodeRemote?Hi.rewrite(e):e.scheme===Fi.file&&(ve||ye&&ue.origin===`${Fi.vscodeFileResource}://${Ui.FALLBACK_AUTHORITY}`)?e.with({scheme:Fi.vscodeFileResource,authority:e.authority||Ui.FALLBACK_AUTHORITY,query:null,fragment:null}):null!==(t=this.staticBrowserUris.get(e))&&void 0!==t?t:e}asFileUri(e){const t=this.toUri(e,globalThis.monacoRequire);return this.uriToFileUri(t)}uriToFileUri(e){return e.scheme===Fi.vscodeFileResource?e.with({scheme:Fi.file,authority:e.authority!==Ui.FALLBACK_AUTHORITY?e.authority:null,query:null,fragment:null}):e}toUri(e,t){return pt.isUri(e)?e:pt.parse(t.toUrl(e))}registerStaticBrowserUri(e,t){return this.staticBrowserUris.set(e,t),w((()=>{this.staticBrowserUris.get(e)===t&&this.staticBrowserUris.delete(e)}))}getRegisteredBrowserUris(){return this.staticBrowserUris.keys()}}var Bi;function Vi(e){return yt(e,!0)}Ui.FALLBACK_AUTHORITY="vscode-app",new Ui,function(e){const t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);e.CoopAndCoep=Object.freeze(t.get("3"));const i="vscode-coi";e.getHeadersFromQuery=function(e){let r;"string"==typeof e?r=new URL(e).searchParams:e instanceof URL?r=e.searchParams:pt.isUri(e)&&(r=new URL(e.toString(!0)).searchParams);const n=null==r?void 0:r.get(i);if(n)return t.get(n)},e.addSearchParam=function(e,t,r){if(!globalThis.crossOriginIsolated)return;const n=t&&r?"3":r?"2":"1";e instanceof URLSearchParams?e.set(i,n):e[i]=n}}(Bi||(Bi={}));class Wi{constructor(e){this._ignorePathCasing=e}compare(e,t,i=!1){return e===t?0:Gt(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t||!(!e||!t)&&this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===Fi.file)return Ii(Vi(e),Vi(t),this._ignorePathCasing(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(er(e.authority,t.authority))return Ii(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return pt.joinPath(e,...t)}basenameOrAuthority(e){return Qi(e)||e.authority}basename(e){return Ze.basename(e.path)}extname(e){return Ze.extname(e.path)}dirname(e){if(0===e.path.length)return e;let t;return e.scheme===Fi.file?t=pt.file(rt(Vi(e))).path:(t=Ze.dirname(e.path),e.authority&&t.length&&47!==t.charCodeAt(0)&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return t=e.scheme===Fi.file?pt.file(Ye(Vi(e))).path:Ze.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!er(e.authority,t.authority))return;if(e.scheme===Fi.file){const i=it(Vi(e),Vi(t));return ge?Ci(i):i}let i=e.path||"/";const r=t.path||"/";if(this._ignorePathCasing(e)){let e=0;for(const t=Math.min(i.length,r.length);e<t&&(i.charCodeAt(e)===r.charCodeAt(e)||i.charAt(e).toLowerCase()===r.charAt(e).toLowerCase());e++);i=r.substr(0,e)+i.substr(e)}return Ze.relative(i,r)}resolvePath(e,t){if(e.scheme===Fi.file){const i=pt.file(tt(Vi(e),t));return e.with({authority:i.authority,path:i.path})}var i;return-1===(i=t).indexOf("/")&&(i=Ci(i)),/^[a-zA-Z]:(\/|$)/.test(i)&&(i="/"+i),t=i,e.with({path:Ze.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&"/"===e.path[0]}isEqualAuthority(e,t){return e===t||void 0!==e&&void 0!==t&&Xt(e,t)}hasTrailingPathSeparator(e,t=ot){if(e.scheme===Fi.file){const i=Vi(e);return i.length>Di(i).length&&i[i.length-1]===t}{const t=e.path;return t.length>1&&47===t.charCodeAt(t.length-1)&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=ot){return tr(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=ot){let i=!1;if(e.scheme===Fi.file){const r=Vi(e);i=void 0!==r&&r.length===Di(r).length&&r[r.length-1]===t}else{t="/";const r=e.path;i=1===r.length&&47===r.charCodeAt(r.length-1)}return i||tr(e,t)?e:e.with({path:e.path+"/"})}}const zi=new Wi((()=>!1)),ji=new Wi((e=>e.scheme!==Fi.file||!me)),qi=new Wi((e=>!0)),Ki=zi.isEqual.bind(zi);zi.isEqualOrParent.bind(zi),zi.getComparisonKey.bind(zi);const Gi=zi.basenameOrAuthority.bind(zi),Qi=zi.basename.bind(zi);zi.extname.bind(zi);const Ji=zi.dirname.bind(zi),Zi=zi.joinPath.bind(zi);zi.normalizePath.bind(zi);const Yi=zi.relativePath.bind(zi);zi.resolvePath.bind(zi);const Xi=zi.isAbsolutePath.bind(zi),er=zi.isEqualAuthority.bind(zi),tr=zi.hasTrailingPathSeparator.bind(zi);var ir;zi.removeTrailingPathSeparator.bind(zi),zi.addTrailingPathSeparator.bind(zi),function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime",e.parseMetaData=function(t){const i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach((e=>{const[t,r]=e.split(":");t&&r&&i.set(t,r)}));const r=t.path.substring(0,t.path.indexOf(";"));return r&&i.set(e.META_DATA_MIME,r),i}}(ir||(ir={}));var rr=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{l(r.next(e))}catch(_C){s(_C)}}function a(e){try{l(r.throw(e))}catch(_C){s(_C)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))},nr=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=e[i]&&function(t){return new Promise((function(r,n){(function(e,t,i,r){Promise.resolve(r).then((function(t){e({value:t,done:i})}),t)})(r,n,(t=e[i](t)).done,t.value)}))}}};function sr(e){return!!e&&"function"==typeof e.then}function or(e,t,i){return new Promise(((r,n)=>{const s=t.onCancellationRequested((()=>{s.dispose(),r(i)}));e.then(r,n).finally((()=>s.dispose()))}))}function ar(e){return new Promise(((t,i)=>{const r=e();sr(r)?r.then(t,i):t(r)}))}class lr{constructor(){this._isOpen=!1,this._promise=new Promise(((e,t)=>{this._completePromise=e}))}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}function cr(e,t){return t?new Promise(((i,r)=>{const n=setTimeout((()=>{s.dispose(),i()}),e),s=t.onCancellationRequested((()=>{clearTimeout(n),s.dispose(),r(new l)}))})):function(e){const t=new Ht,i=e(t.token),r=new Promise(((e,r)=>{const n=t.token.onCancellationRequested((()=>{n.dispose(),t.dispose(),r(new l)}));Promise.resolve(i).then((i=>{n.dispose(),t.dispose(),e(i)}),(e=>{n.dispose(),t.dispose(),r(e)}))}));return new class{cancel(){t.cancel()}then(e,t){return r.then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return r.finally(e)}}}((t=>cr(e,t)))}class ur{constructor(e){this._size=0,this.maxDegreeOfParalellism=e,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new B}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(e){return this._size++,new Promise(((t,i)=>{this.outstandingPromises.push({factory:e,c:t,e:i}),this.consume()}))}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const e=this.outstandingPromises.shift();this.runningPromises++;const t=e.factory();t.then(e.c,e.e),t.then((()=>this.consumed()),(()=>this.consumed()))}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onDrained.fire()}dispose(){this._onDrained.dispose()}}class dr extends ur{constructor(){super(1)}}class hr{constructor(){this.queues=new Map,this.drainers=new Set}whenDrained(){return rr(this,void 0,void 0,(function*(){if(this.isDrained())return;const e=new vr;return this.drainers.add(e),e.p}))}isDrained(){for(const[,e]of this.queues)if(e.size>0)return!1;return!0}queueFor(e,t=zi){const i=t.getComparisonKey(e);let r=this.queues.get(i);return r||(r=new dr,$.once(r.onDrained)((()=>{null==r||r.dispose(),this.queues.delete(i),this.onDidQueueDrain()})),this.queues.set(i,r)),r}onDidQueueDrain(){this.isDrained()&&this.releaseDrainers()}releaseDrainers(){for(const e of this.drainers)e.complete();this.drainers.clear()}dispose(){for(const[,e]of this.queues)e.dispose();this.queues.clear(),this.releaseDrainers()}}class pr{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){-1!==this._token&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval((()=>{e()}),t)}}class gr{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return-1!==this.timeoutToken}flush(){this.isScheduled()&&(this.cancel(),this.doRun())}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;null===(e=this.runner)||void 0===e||e.call(this)}}let fr;fr="function"!=typeof requestIdleCallback||"function"!=typeof cancelIdleCallback?e=>{De((()=>{if(t)return;const i=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining:()=>Math.max(0,i-Date.now())}))}));let t=!1;return{dispose(){t||(t=!0)}}}:(e,t)=>{const i=requestIdleCallback(e,"number"==typeof t?{timeout:t}:void 0);let r=!1;return{dispose(){r||(r=!0,cancelIdleCallback(i))}}};class mr{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=fr((()=>this._executor()))}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class vr{get isRejected(){var e;return 1===(null===(e=this.outcome)||void 0===e?void 0:e.outcome)}get isResolved(){var e;return 0===(null===(e=this.outcome)||void 0===e?void 0:e.outcome)}get isSettled(){return!!this.outcome}get value(){var e,t;return 0===(null===(e=this.outcome)||void 0===e?void 0:e.outcome)?null===(t=this.outcome)||void 0===t?void 0:t.value:void 0}constructor(){this.p=new Promise(((e,t)=>{this.completeCallback=e,this.errorCallback=t}))}complete(e){return new Promise((t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()}))}error(e){return new Promise((t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()}))}cancel(){return this.error(new l)}}var _r,yr;!function(e){e.settled=function(e){return rr(this,void 0,void 0,(function*(){let t;const i=yield Promise.all(e.map((e=>e.then((e=>e),(e=>{t||(t=e)})))));if(void 0!==t)throw t;return i}))},e.withAsyncBody=function(e){return new Promise(((t,i)=>rr(this,void 0,void 0,(function*(){try{yield e(t,i)}catch(r){i(r)}}))))}}(_r||(_r={}));class wr{static fromArray(e){return new wr((t=>{t.emitMany(e)}))}static fromPromise(e){return new wr((t=>rr(this,void 0,void 0,(function*(){t.emitMany(yield e)}))))}static fromPromises(e){return new wr((t=>rr(this,void 0,void 0,(function*(){yield Promise.all(e.map((e=>rr(this,void 0,void 0,(function*(){return t.emitOne(yield e)})))))}))))}static merge(e){return new wr((t=>rr(this,void 0,void 0,(function*(){yield Promise.all(e.map((e=>{var i,r,n;return rr(this,void 0,void 0,(function*(){var s,o,a,l;try{for(i=!0,r=nr(e);!(s=(n=yield r.next()).done);i=!0){l=n.value,i=!1;const e=l;t.emitOne(e)}}catch(c){o={error:c}}finally{try{i||s||!(a=r.return)||(yield a.call(r))}finally{if(o)throw o.error}}}))})))}))))}constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new B,queueMicrotask((()=>rr(this,void 0,void 0,(function*(){const t={emitOne:e=>this.emitOne(e),emitMany:e=>this.emitMany(e),reject:e=>this.reject(e)};try{yield Promise.resolve(e(t)),this.resolve()}catch(i){this.reject(i)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}}))))}[Symbol.asyncIterator](){let e=0;return{next:()=>rr(this,void 0,void 0,(function*(){for(;;){if(2===this._state)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(1===this._state)return{done:!0,value:void 0};yield $.toPromise(this._onStateChanged.event)}}))}}static map(e,t){return new wr((i=>rr(this,void 0,void 0,(function*(){var r,n,s,o;try{for(var a,l=!0,c=nr(e);!(r=(a=yield c.next()).done);l=!0){o=a.value,l=!1;const e=o;i.emitOne(t(e))}}catch(u){n={error:u}}finally{try{l||r||!(s=c.return)||(yield s.call(c))}finally{if(n)throw n.error}}}))))}map(e){return wr.map(this,e)}static filter(e,t){return new wr((i=>rr(this,void 0,void 0,(function*(){var r,n,s,o;try{for(var a,l=!0,c=nr(e);!(r=(a=yield c.next()).done);l=!0){o=a.value,l=!1;const e=o;t(e)&&i.emitOne(e)}}catch(u){n={error:u}}finally{try{l||r||!(s=c.return)||(yield s.call(c))}finally{if(n)throw n.error}}}))))}filter(e){return wr.filter(this,e)}static coalesce(e){return wr.filter(e,(e=>!!e))}coalesce(){return wr.coalesce(this)}static toPromise(e){var t,i,r,n,s,o,a;return rr(this,void 0,void 0,(function*(){const l=[];try{for(t=!0,i=nr(e);r=yield i.next(),!(n=r.done);t=!0){a=r.value,t=!1;const e=a;l.push(e)}}catch(c){s={error:c}}finally{try{t||n||!(o=i.return)||(yield o.call(i))}finally{if(s)throw s.error}}return l}))}toPromise(){return wr.toPromise(this)}emitOne(e){0===this._state&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){0===this._state&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){0===this._state&&(this._state=1,this._onStateChanged.fire())}reject(e){0===this._state&&(this._state=2,this._error=e,this._onStateChanged.fire())}}function br(e,t,i,r){if(!e||r>200)return null;if("object"==typeof e){if(1===e.$mid)return i?pt.revive(t.transformIncoming(e)):t.transformIncoming(e);if(e instanceof I)return null;for(const n in e)if(Object.hasOwnProperty.call(e,n)){const s=br(e[n],t,i,r+1);null!==s&&(e[n]=s)}}return null}function xr(e,t){const i=br(e,t,!1,0);return null===i?e:i}wr.EMPTY=wr.fromArray([]);class Cr{constructor(){this._actual=null,this._actualOk=null,this._actualErr=null,this._hasValue=!1,this._value=null,this._hasErr=!1,this._err=null}get[Symbol.toStringTag](){return this.toString()}_ensureActual(){return this._actual||(this._actual=new Promise(((e,t)=>{this._actualOk=e,this._actualErr=t,this._hasValue&&this._actualOk(this._value),this._hasErr&&this._actualErr(this._err)}))),this._actual}resolveOk(e){this._hasValue||this._hasErr||(this._hasValue=!0,this._value=e,this._actual&&this._actualOk(e))}resolveErr(e){this._hasValue||this._hasErr||(this._hasErr=!0,this._err=e,this._actual?this._actualErr(e):r(e))}then(e,t){return this._ensureActual().then(e,t)}catch(e){return this._ensureActual().then(void 0,e)}finally(e){return this._ensureActual().finally(e)}}class Dr extends Cr{constructor(){super(),this._hasErr=!0,this._err=new l}}function Sr(e,t){try{return JSON.stringify(e,t)}catch(i){return"null"}}const Er="$$ref$$",kr={[Er]:-1};function Ir(e,t=null,i=!1){const r=[];return{jsonString:(i?Sr:JSON.stringify)(e,((e,i)=>{if(void 0===i)return kr;if("object"==typeof i){if(i instanceof I){const e=r.push(i)-1;return{[Er]:e}}if(t)return t(e,i)}return i})),referencedBuffers:r}}function Tr(e,t,i){return JSON.parse(e,((e,r)=>{if(r){const e=r[Er];if("number"==typeof e)return t[e];if(i&&1===r.$mid)return i.transformIncoming(r)}return r}))}function Pr(e,t){return JSON.stringify(e,t)}const Ar=()=>{},Rr=Symbol.for("rpcProtocol"),Fr=Symbol.for("rpcProxy");class $r extends x{static{yr=Rr}static{this.UNRESPONSIVE_TIME=3e3}constructor(e,t=null,i=null){super(),this[yr]=!0,this._onDidChangeResponsiveState=this._register(new B),this.onDidChangeResponsiveState=this._onDidChangeResponsiveState.event,this._protocol=e,this._logger=t,this._uriTransformer=i,this._uriReplacer=function(e){return e?(t,i)=>i&&1===i.$mid?e.transformOutgoing(i):i:null}(this._uriTransformer),this._isDisposed=!1,this._locals=[],this._proxies=[];for(let r=0,n=Dt.count;r<n;r++)this._locals[r]=null,this._proxies[r]=null;this._lastMessageId=0,this._cancelInvokedHandlers=Object.create(null),this._pendingRPCReplies={},this._responsiveState=0,this._unacknowledgedCount=0,this._unresponsiveTime=0,this._asyncCheckUresponsive=this._register(new gr((()=>this._checkUnresponsive()),1e3)),this._protocol.onMessage((e=>this._receiveOneMessage(e)))}dispose(){this._isDisposed=!0,Object.keys(this._pendingRPCReplies).forEach((e=>{this._pendingRPCReplies[e].resolveErr(c())}))}drain(){return"function"==typeof this._protocol.drain?this._protocol.drain():Promise.resolve()}_onWillSendRequest(e){0===this._unacknowledgedCount&&(this._unresponsiveTime=Date.now()+$r.UNRESPONSIVE_TIME),this._unacknowledgedCount++,this._asyncCheckUresponsive.isScheduled()||this._asyncCheckUresponsive.schedule()}_onDidReceiveAcknowledge(e){this._unresponsiveTime=Date.now()+$r.UNRESPONSIVE_TIME,this._unacknowledgedCount--,0===this._unacknowledgedCount&&this._asyncCheckUresponsive.cancel(),this._setResponsiveState(0)}_checkUnresponsive(){0!==this._unacknowledgedCount&&(Date.now()>this._unresponsiveTime?this._setResponsiveState(1):this._asyncCheckUresponsive.schedule())}_setResponsiveState(e){this._responsiveState!==e&&(this._responsiveState=e,this._onDidChangeResponsiveState.fire(this._responsiveState))}get responsiveState(){return this._responsiveState}transformIncomingURIs(e){return this._uriTransformer?xr(e,this._uriTransformer):e}getProxy(e){const{nid:t,sid:i}=e;return this._proxies[t]||(this._proxies[t]=this._createProxy(t,i)),this._proxies[t]}_createProxy(e,t){const i={get:(i,r)=>("string"!=typeof r||i[r]||36!==r.charCodeAt(0)||(i[r]=(...t)=>this._remoteCall(e,r,t)),r===Fr?t:i[r])};return new Proxy(Object.create(null),i)}set(e,t){return this._locals[e.nid]=t,t}assertRegistered(e){for(let t=0,i=e.length;t<i;t++){const i=e[t];if(!this._locals[i.nid])throw new Error(`Missing proxy instance ${i.sid}`)}}_receiveOneMessage(e){if(this._isDisposed)return;const t=e.byteLength,i=Lr.read(e,0),r=i.readUInt8(),n=i.readUInt32();switch(r){case 1:case 2:{let{rpcId:e,method:s,args:o}=Or.deserializeRequestJSONArgs(i);this._uriTransformer&&(o=xr(o,this._uriTransformer)),this._receiveRequest(t,n,e,s,o,2===r);break}case 3:case 4:{let{rpcId:e,method:s,args:o}=Or.deserializeRequestMixedArgs(i);this._uriTransformer&&(o=xr(o,this._uriTransformer)),this._receiveRequest(t,n,e,s,o,4===r);break}case 5:this._logger?.logIncoming(t,n,0,"ack"),this._onDidReceiveAcknowledge(n);break;case 6:this._receiveCancel(t,n);break;case 7:this._receiveReply(t,n,void 0);break;case 9:{let e=Or.deserializeReplyOKJSON(i);this._uriTransformer&&(e=xr(e,this._uriTransformer)),this._receiveReply(t,n,e);break}case 10:{const e=Or.deserializeReplyOKJSONWithBuffers(i,this._uriTransformer);this._receiveReply(t,n,e);break}case 8:{const e=Or.deserializeReplyOKVSBuffer(i);this._receiveReply(t,n,e);break}case 11:{let e=Or.deserializeReplyErrError(i);this._uriTransformer&&(e=xr(e,this._uriTransformer)),this._receiveReplyErr(t,n,e);break}case 12:this._receiveReplyErr(t,n,void 0);break;default:console.error("received unexpected message"),console.error(e)}}_receiveRequest(e,t,i,r,n,s){this._logger?.logIncoming(e,t,1,`receiveRequest ${kt(i)}.${r}(`,n);const o=String(t);let a,l;if(s){const e=new Ht;n.push(e.token),a=this._invokeHandler(i,r,n),l=()=>e.cancel()}else a=this._invokeHandler(i,r,n),l=Ar;this._cancelInvokedHandlers[o]=l;const c=Or.serializeAcknowledged(t);this._logger?.logOutgoing(c.byteLength,t,1,"ack"),this._protocol.send(c),a.then((e=>{delete this._cancelInvokedHandlers[o];const i=Or.serializeReplyOK(t,e,this._uriReplacer);this._logger?.logOutgoing(i.byteLength,t,1,"reply:",e),this._protocol.send(i)}),(e=>{delete this._cancelInvokedHandlers[o];const i=Or.serializeReplyErr(t,e);this._logger?.logOutgoing(i.byteLength,t,1,"replyErr:",e),this._protocol.send(i)}))}_receiveCancel(e,t){this._logger?.logIncoming(e,t,1,"receiveCancel");const i=String(t);this._cancelInvokedHandlers[i]?.()}_receiveReply(e,t,i){this._logger?.logIncoming(e,t,0,"receiveReply:",i);const r=String(t);if(!this._pendingRPCReplies.hasOwnProperty(r))return;const n=this._pendingRPCReplies[r];delete this._pendingRPCReplies[r],n.resolveOk(i)}_receiveReplyErr(e,t,i){this._logger?.logIncoming(e,t,0,"receiveReplyErr:",i);const r=String(t);if(!this._pendingRPCReplies.hasOwnProperty(r))return;const n=this._pendingRPCReplies[r];let s;delete this._pendingRPCReplies[r],i&&(i.$isError?(s=new Error,s.name=i.name,s.message=i.message,s.stack=i.stack):s=i),n.resolveErr(s)}_invokeHandler(e,t,i){try{return Promise.resolve(this._doInvokeHandler(e,t,i))}catch(r){return Promise.reject(r)}}_doInvokeHandler(e,t,i){const r=this._locals[e];if(!r)throw new Error("Unknown actor "+kt(e));const n=r[t];if("function"!=typeof n)throw new Error("Unknown method "+t+" on actor "+kt(e));return n.apply(r,i)}_remoteCall(e,t,i){if(this._isDisposed)return new Dr;let r=null;if(i.length>0&&Ot.isCancellationToken(i[i.length-1])&&(r=i.pop()),r&&r.isCancellationRequested)return Promise.reject(c());const n=Or.serializeRequestArguments(i,this._uriReplacer),s=++this._lastMessageId,o=String(s),a=new Cr;r&&r.onCancellationRequested((()=>{const e=Or.serializeCancel(s);this._logger?.logOutgoing(e.byteLength,s,0,"cancel"),this._protocol.send(Or.serializeCancel(s))})),this._pendingRPCReplies[o]=a,this._onWillSendRequest(s);const l=Or.serializeRequest(s,e,t,n,!!r);return this._logger?.logOutgoing(l.byteLength,s,0,`request: ${kt(e)}.${t}(`,i),this._protocol.send(l),a}}class Lr{static alloc(e,t,i){const r=new Lr(I.alloc(i+1+4),0);return r.writeUInt8(e),r.writeUInt32(t),r}static read(e,t){return new Lr(e,t)}get buffer(){return this._buff}constructor(e,t){this._buff=e,this._offset=t}static sizeUInt8(){return 1}static{this.sizeUInt32=4}writeUInt8(e){this._buff.writeUInt8(e,this._offset),this._offset+=1}readUInt8(){const e=this._buff.readUInt8(this._offset);return this._offset+=1,e}writeUInt32(e){this._buff.writeUInt32BE(e,this._offset),this._offset+=4}readUInt32(){const e=this._buff.readUInt32BE(this._offset);return this._offset+=4,e}static sizeShortString(e){return 1+e.byteLength}writeShortString(e){this._buff.writeUInt8(e.byteLength,this._offset),this._offset+=1,this._buff.set(e,this._offset),this._offset+=e.byteLength}readShortString(){const e=this._buff.readUInt8(this._offset);this._offset+=1;const t=this._buff.slice(this._offset,this._offset+e).toString();return this._offset+=e,t}static sizeLongString(e){return 4+e.byteLength}writeLongString(e){this._buff.writeUInt32BE(e.byteLength,this._offset),this._offset+=4,this._buff.set(e,this._offset),this._offset+=e.byteLength}readLongString(){const e=this._buff.readUInt32BE(this._offset);this._offset+=4;const t=this._buff.slice(this._offset,this._offset+e).toString();return this._offset+=e,t}writeBuffer(e){this._buff.writeUInt32BE(e.byteLength,this._offset),this._offset+=4,this._buff.set(e,this._offset),this._offset+=e.byteLength}static sizeVSBuffer(e){return 4+e.byteLength}writeVSBuffer(e){this._buff.writeUInt32BE(e.byteLength,this._offset),this._offset+=4,this._buff.set(e,this._offset),this._offset+=e.byteLength}readVSBuffer(){const e=this._buff.readUInt32BE(this._offset);this._offset+=4;const t=this._buff.slice(this._offset,this._offset+e);return this._offset+=e,t}static sizeMixedArray(e){let t=0;t+=1;for(let i=0,r=e.length;i<r;i++){const r=e[i];switch(t+=1,r.type){case 1:t+=this.sizeLongString(r.value);break;case 2:t+=this.sizeVSBuffer(r.value);break;case 3:t+=this.sizeUInt32,t+=this.sizeLongString(r.value);for(let e=0;e<r.buffers.length;++e)t+=this.sizeVSBuffer(r.buffers[e])}}return t}writeMixedArray(e){this._buff.writeUInt8(e.length,this._offset),this._offset+=1;for(let t=0,i=e.length;t<i;t++){const i=e[t];switch(i.type){case 1:this.writeUInt8(1),this.writeLongString(i.value);break;case 2:this.writeUInt8(2),this.writeVSBuffer(i.value);break;case 3:this.writeUInt8(3),this.writeUInt32(i.buffers.length),this.writeLongString(i.value);for(let e=0;e<i.buffers.length;++e)this.writeBuffer(i.buffers[e]);break;case 4:this.writeUInt8(4)}}}readMixedArray(){const e=this._buff.readUInt8(this._offset);this._offset+=1;const t=new Array(e);for(let i=0;i<e;i++){switch(this.readUInt8()){case 1:t[i]=this.readLongString();break;case 2:t[i]=this.readVSBuffer();break;case 3:{const e=this.readUInt32(),r=this.readLongString(),n=[];for(let t=0;t<e;++t)n.push(this.readVSBuffer());t[i]=new It(Tr(r,n,null));break}case 4:t[i]=void 0}}return t}}class Or{static _useMixedArgSerialization(e){for(let t=0,i=e.length;t<i;t++){if(e[t]instanceof I)return!0;if(e[t]instanceof It)return!0;if(void 0===e[t])return!0}return!1}static serializeRequestArguments(e,t){if(this._useMixedArgSerialization(e)){const i=[];for(let r=0,n=e.length;r<n;r++){const n=e[r];if(n instanceof I)i[r]={type:2,value:n};else if(void 0===n)i[r]={type:4};else if(n instanceof It){const{jsonString:e,referencedBuffers:s}=Ir(n.value,t);i[r]={type:3,value:I.fromString(e),buffers:s}}else i[r]={type:1,value:I.fromString(Pr(n,t))}}return{type:1,args:i}}return{type:0,args:Pr(e,t)}}static serializeRequest(e,t,i,r,n){switch(r.type){case 0:return this._requestJSONArgs(e,t,i,r.args,n);case 1:return this._requestMixedArgs(e,t,i,r.args,n)}}static _requestJSONArgs(e,t,i,r,n){const s=I.fromString(i),o=I.fromString(r);let a=0;a+=Lr.sizeUInt8(),a+=Lr.sizeShortString(s),a+=Lr.sizeLongString(o);const l=Lr.alloc(n?2:1,e,a);return l.writeUInt8(t),l.writeShortString(s),l.writeLongString(o),l.buffer}static deserializeRequestJSONArgs(e){const t=e.readUInt8(),i=e.readShortString(),r=e.readLongString();return{rpcId:t,method:i,args:JSON.parse(r)}}static _requestMixedArgs(e,t,i,r,n){const s=I.fromString(i);let o=0;o+=Lr.sizeUInt8(),o+=Lr.sizeShortString(s),o+=Lr.sizeMixedArray(r);const a=Lr.alloc(n?4:3,e,o);return a.writeUInt8(t),a.writeShortString(s),a.writeMixedArray(r),a.buffer}static deserializeRequestMixedArgs(e){const t=e.readUInt8(),i=e.readShortString(),r=e.readMixedArray(),n=new Array(r.length);for(let s=0,o=r.length;s<o;s++){const e=r[s];n[s]="string"==typeof e?JSON.parse(e):e}return{rpcId:t,method:i,args:n}}static serializeAcknowledged(e){return Lr.alloc(5,e,0).buffer}static serializeCancel(e){return Lr.alloc(6,e,0).buffer}static serializeReplyOK(e,t,i){if(void 0===t)return this._serializeReplyOKEmpty(e);if(t instanceof I)return this._serializeReplyOKVSBuffer(e,t);if(t instanceof It){const{jsonString:r,referencedBuffers:n}=Ir(t.value,i,!0);return this._serializeReplyOKJSONWithBuffers(e,r,n)}return this._serializeReplyOKJSON(e,Sr(t,i))}static _serializeReplyOKEmpty(e){return Lr.alloc(7,e,0).buffer}static _serializeReplyOKVSBuffer(e,t){let i=0;i+=Lr.sizeVSBuffer(t);const r=Lr.alloc(8,e,i);return r.writeVSBuffer(t),r.buffer}static deserializeReplyOKVSBuffer(e){return e.readVSBuffer()}static _serializeReplyOKJSON(e,t){const i=I.fromString(t);let r=0;r+=Lr.sizeLongString(i);const n=Lr.alloc(9,e,r);return n.writeLongString(i),n.buffer}static _serializeReplyOKJSONWithBuffers(e,t,i){const r=I.fromString(t);let n=0;n+=Lr.sizeUInt32,n+=Lr.sizeLongString(r);for(const o of i)n+=Lr.sizeVSBuffer(o);const s=Lr.alloc(10,e,n);s.writeUInt32(i.length),s.writeLongString(r);for(const o of i)s.writeBuffer(o);return s.buffer}static deserializeReplyOKJSON(e){const t=e.readLongString();return JSON.parse(t)}static deserializeReplyOKJSONWithBuffers(e,t){const i=e.readUInt32(),r=e.readLongString(),n=[];for(let s=0;s<i;++s)n.push(e.readVSBuffer());return new It(Tr(r,n,t))}static serializeReplyErr(e,t){const i=t?Sr(s(t),null):void 0;if("string"!=typeof i)return this._serializeReplyErrEmpty(e);const r=I.fromString(i);let n=0;n+=Lr.sizeLongString(r);const o=Lr.alloc(11,e,n);return o.writeLongString(r),o.buffer}static deserializeReplyErrError(e){const t=e.readLongString();return JSON.parse(t)}static _serializeReplyErrEmpty(e){return Lr.alloc(12,e,0).buffer}}function Mr(e,t,i=((e,t)=>e===t)){if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;r++)if(!i(e[r],t[r]))return!1;return!0}function Nr(e,t,i){const r=[];function n(e,t,i){if(0===t&&0===i.length)return;const n=r[r.length-1];n&&n.start+n.deleteCount===e?(n.deleteCount+=t,n.toInsert.push(...i)):r.push({start:e,deleteCount:t,toInsert:i})}let s=0,o=0;for(;;){if(s===e.length){n(s,0,t.slice(o));break}if(o===t.length){n(s,e.length-s,[]);break}const r=e[s],a=t[o],l=i(r,a);0===l?(s+=1,o+=1):l<0?(n(s,1,[]),s+=1):l>0&&(n(s,0,[a]),o+=1)}return r}function Hr(e){return e.filter((e=>!!e))}function Ur(e){return!Array.isArray(e)||0===e.length}function Br(e){return Array.isArray(e)&&e.length>0}function Vr(e,t=(e=>e)){const i=new Set;return e.filter((e=>{const r=t(e);return!i.has(r)&&(i.add(r),!0)}))}function Wr(e){return[].concat(...e)}function zr(e,t){let i;if("number"==typeof t){let e=t;i=()=>{const t=179426549*Math.sin(e++);return t-Math.floor(t)}}else i=Math.random;for(let r=e.length-1;r>0;r-=1){const t=Math.floor(i()*(r+1)),n=e[r];e[r]=e[t],e[t]=n}}function jr(e,t){return Array.isArray(e)?e.map(t):t(e)}function qr(e){return Array.isArray(e)?e:[e]}function Kr(e,t){for(const i of e){const e=t(i);if(void 0!==e)return e}}var Gr;function Qr(e,t){return t&&(e.stack||e.stacktrace)?J(0,"{0}: {1}",Zr(e),Jr(e.stack)||Jr(e.stacktrace)):Zr(e)}function Jr(e){return Array.isArray(e)?e.join("\n"):e}function Zr(e){return"ERR_UNC_HOST_NOT_ALLOWED"===e.code?`${e.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:"string"==typeof e.code&&"number"==typeof e.errno&&"string"==typeof e.syscall?J(0,"A system error occurred ({0})",e.message):e.message||J(0,"An unknown error occurred. Please consult the log for more details.")}function Yr(e=null,t=!1){if(!e)return J(0,"An unknown error occurred. Please consult the log for more details.");if(Array.isArray(e)){const i=Hr(e),r=Yr(i[0],t);return i.length>1?J(0,"{0} ({1} errors in total)",r,i.length):r}if(hi(e))return e;if(e.detail){const i=e.detail;if(i.error)return Qr(i.error,t);if(i.exception)return Qr(i.exception,t)}return e.stack?Qr(e,t):e.message?e.message:J(0,"An unknown error occurred. Please consult the log for more details.")}function Xr(e){return en(e,0)}function en(e,t){switch(typeof e){case"object":return null===e?tn(349,t):Array.isArray(e)?(i=e,r=tn(104579,r=t),i.reduce(((e,t)=>en(t,e)),r)):function(e,t){return t=tn(181387,t),Object.keys(e).sort().reduce(((t,i)=>(t=rn(i,t),en(e[i],t))),t)}(e,t);case"string":return rn(e,t);case"boolean":return function(e,t){return tn(e?433:863,t)}(e,t);case"number":return tn(e,t);case"undefined":return tn(937,t);default:return tn(617,t)}var i,r}function tn(e,t){return(t<<5)-t+e|0}function rn(e,t){t=tn(149417,t);for(let i=0,r=e.length;i<r;i++)t=tn(e.charCodeAt(i),t);return t}function nn(...e){switch(e.length){case 1:return J(0,"Did you mean {0}?",e[0]);case 2:return J(0,"Did you mean {0} or {1}?",e[0],e[1]);case 3:return J(0,"Did you mean {0}, {1} or {2}?",e[0],e[1],e[2]);default:return}}!function(e){e.isLessThan=function(e){return e<0},e.isLessThanOrEqual=function(e){return e<=0},e.isGreaterThan=function(e){return e>0},e.isNeitherLessOrGreaterThan=function(e){return 0===e},e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0}(Gr||(Gr={}));const sn=J(0,"Did you forget to open or close the quote?"),on=J(0,"Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");class an{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:case 8:return">=";case 9:return"=~";case 10:case 17:case 18:case 19:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 20:return"EOF";default:throw d(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}get errors(){return this._errors}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();){this._start=this._current;switch(this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const e=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:e})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const e=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:e})}else this._match(126)?this._addToken(9):this._error(nn("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(nn("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(nn("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return!this._isAtEnd()&&(this._input.charCodeAt(this._current)===e&&(this._current++,!0))}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,i=this._input.substring(this._start,this._current),r={type:19,offset:this._start,lexeme:i};this._errors.push({offset:t,lexeme:i,additionalInfo:e}),this._tokens.push(r)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),i=an._keywords.get(t);i?this._addToken(i):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;39!==this._peek()&&!this._isAtEnd();)this._advance();this._isAtEnd()?this._error(sn):(this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1}))}_regex(){let e=this._current,t=!1,i=!1;for(;;){if(e>=this._input.length)return this._current=e,void this._error(on);const r=this._input.charCodeAt(e);if(t)t=!1;else{if(47===r&&!i){e++;break}91===r?i=!0:92===r?t=!0:93===r&&(i=!1)}e++}for(;e<this._input.length&&an._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const r=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:r,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}}var ln;an._regexFlags=new Set(["i","g","s","m","y","u"].map((e=>e.charCodeAt(0)))),an._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]),function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies",e.getServiceDependencies=function(t){return t[e.DI_DEPENDENCIES]||[]}}(ln||(ln={}));const cn=un("instantiationService");function un(e){if(ln.serviceIds.has(e))return ln.serviceIds.get(e);const t=function(e,i,r){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");!function(e,t,i){t[ln.DI_TARGET]===t?t[ln.DI_DEPENDENCIES].push({id:e,index:i}):(t[ln.DI_DEPENDENCIES]=[{id:e,index:i}],t[ln.DI_TARGET]=t)}(t,e,r)};return t.toString=()=>e,ln.serviceIds.set(e,t),t}const dn=new Map;dn.set("false",!1),dn.set("true",!0),dn.set("isMac",fe),dn.set("isLinux",me),dn.set("isWindows",ge),dn.set("isWeb",_e),dn.set("isMacNative",fe&&!_e),dn.set("isEdge",Re),dn.set("isFirefox",Pe),dn.set("isChrome",Te),dn.set("isSafari",Ae);const hn=Object.prototype.hasOwnProperty,pn={regexParsingWithErrorRecovery:!0},gn=J(0,"Empty context key expression"),fn=J(0,"Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),mn=J(0,"'in' after 'not'."),vn=J(0,"closing parenthesis ')'"),_n=J(0,"Unexpected token"),yn=J(0,"Did you forget to put && or || before the token?"),wn=J(0,"Unexpected end of expression"),bn=J(0,"Did you forget to put a context key?");class xn{get lexingErrors(){return this._scanner.errors}get parsingErrors(){return this._parsingErrors}constructor(e=pn){this._config=e,this._scanner=new an,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(""!==e){this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const e=this._expr();if(!this._isAtEnd()){const e=this._peek(),t=17===e.type?yn:void 0;throw this._parsingErrors.push({message:_n,offset:e.offset,lexeme:an.getLexeme(e),additionalInfo:t}),xn._parseError}return e}catch(_C){if(_C!==xn._parseError)throw _C;return}}else this._parsingErrors.push({message:gn,offset:0,lexeme:"",additionalInfo:fn})}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return 1===e.length?e[0]:Cn.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return 1===e.length?e[0]:Cn.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),En.INSTANCE;case 12:return this._advance(),kn.INSTANCE;case 0:{this._advance();const e=this._expr();return this._consume(1,vn),null==e?void 0:e.negate()}case 17:return this._advance(),Fn.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),Cn.true();case 12:return this._advance(),Cn.false();case 0:{this._advance();const e=this._expr();return this._consume(1,vn),e}case 17:{const i=e.lexeme;if(this._advance(),this._matchOne(9)){const e=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),10!==e.type)throw this._errExpectedButGot("REGEX",e);const t=e.lexeme,r=t.lastIndexOf("/"),n=r===t.length-1?void 0:this._removeFlagsGY(t.substring(r+1));let s;try{s=new RegExp(t.substring(1,r),n)}catch(_C){throw this._errExpectedButGot("REGEX",e)}return Hn.create(i,s)}switch(e.type){case 10:case 19:{const t=[e.lexeme];this._advance();let r=this._peek(),n=0;for(let i=0;i<e.lexeme.length;i++)40===e.lexeme.charCodeAt(i)?n++:41===e.lexeme.charCodeAt(i)&&n--;for(;!this._isAtEnd()&&15!==r.type&&16!==r.type;){switch(r.type){case 0:n++;break;case 1:n--;break;case 10:case 18:for(let t=0;t<r.lexeme.length;t++)40===r.lexeme.charCodeAt(t)?n++:41===e.lexeme.charCodeAt(t)&&n--}if(n<0)break;t.push(an.getLexeme(r)),this._advance(),r=this._peek()}const s=t.join(""),o=s.lastIndexOf("/"),a=o===s.length-1?void 0:this._removeFlagsGY(s.substring(o+1));let l;try{l=new RegExp(s.substring(1,o),a)}catch(_C){throw this._errExpectedButGot("REGEX",e)}return Cn.regex(i,l)}case 18:{const r=e.lexeme;this._advance();let n=null;if(!Ut(r)){const i=r.indexOf("/"),s=r.lastIndexOf("/");if(i!==s&&i>=0){const o=r.slice(i+1,s),a="i"===r[s+1]?"i":"";try{n=new RegExp(o,a)}catch(t){throw this._errExpectedButGot("REGEX",e)}}}if(null===n)throw this._errExpectedButGot("REGEX",e);return Hn.create(i,n)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,mn);const e=this._value();return Cn.notIn(i,e)}switch(this._peek().type){case 3:{this._advance();const e=this._value();if(18===this._previous().type)return Cn.equals(i,e);switch(e){case"true":return Cn.has(i);case"false":return Cn.not(i);default:return Cn.equals(i,e)}}case 4:{this._advance();const e=this._value();if(18===this._previous().type)return Cn.notEquals(i,e);switch(e){case"true":return Cn.not(i);case"false":return Cn.has(i);default:return Cn.notEquals(i,e)}}case 5:return this._advance(),Mn.create(i,this._value());case 6:return this._advance(),Nn.create(i,this._value());case 7:return this._advance(),Ln.create(i,this._value());case 8:return this._advance(),On.create(i,this._value());case 13:return this._advance(),Cn.in(i,this._value());default:return Cn.has(i)}}case 20:throw this._parsingErrors.push({message:wn,offset:e.offset,lexeme:"",additionalInfo:bn}),xn._parseError;default:throw this._errExpectedButGot("true | false | KEY \n\t| KEY '=~' REGEX \n\t| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value",this._peek())}}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return!!this._check(e)&&(this._advance(),!0)}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,i){const r=J(0,"Expected: {0}\nReceived: '{1}'.",e,an.getLexeme(t)),n=t.offset,s=an.getLexeme(t);return this._parsingErrors.push({message:r,offset:n,lexeme:s,additionalInfo:i}),xn._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return 20===this._peek().type}}xn._parseError=new Error;class Cn{static false(){return En.INSTANCE}static true(){return kn.INSTANCE}static has(e){return In.create(e)}static equals(e,t){return Tn.create(e,t)}static notEquals(e,t){return Rn.create(e,t)}static regex(e,t){return Hn.create(e,t)}static in(e,t){return Pn.create(e,t)}static notIn(e,t){return An.create(e,t)}static not(e){return Fn.create(e)}static and(...e){return Vn.create(e,null,!0)}static or(...e){return Wn.create(e,null,!0)}static greater(e,t){return Ln.create(e,t)}static greaterEquals(e,t){return On.create(e,t)}static smaller(e,t){return Mn.create(e,t)}static smallerEquals(e,t){return Nn.create(e,t)}static deserialize(e){if(null==e)return;return this._parser.parse(e)}}function Dn(e){const t=new xn({regexParsingWithErrorRecovery:!1});return e.map((e=>(t.parse(e),t.lexingErrors.length>0?t.lexingErrors.map((e=>({errorMessage:e.additionalInfo?J(0,"Unexpected token. Hint: {0}",e.additionalInfo):J(0,"Unexpected token."),offset:e.offset,length:e.lexeme.length}))):t.parsingErrors.length>0?t.parsingErrors.map((e=>({errorMessage:e.additionalInfo?`${e.message}. ${e.additionalInfo}`:e.message,offset:e.offset,length:e.lexeme.length}))):[])))}function Sn(e,t){return e.cmp(t)}Cn._parser=new xn({regexParsingWithErrorRecovery:!1});class En{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return kn.INSTANCE}}En.INSTANCE=new En;class kn{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return En.INSTANCE}}kn.INSTANCE=new kn;class In{static create(e,t=null){const i=dn.get(e);return"boolean"==typeof i?i?kn.INSTANCE:En.INSTANCE:new In(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:jn(this.key,e.key)}equals(e){return e.type===this.type&&this.key===e.key}substituteConstants(){const e=dn.get(this.key);return"boolean"==typeof e?e?kn.INSTANCE:En.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(e){return e.mapDefined(this.key)}negate(){return this.negated||(this.negated=Fn.create(this.key,this)),this.negated}}class Tn{static create(e,t,i=null){if("boolean"==typeof t)return t?In.create(e,i):Fn.create(e,i);const r=dn.get(e);if("boolean"==typeof r){return t===(r?"true":"false")?kn.INSTANCE:En.INSTANCE}return new Tn(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:qn(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){const e=dn.get(this.key);if("boolean"==typeof e){const t=e?"true":"false";return this.value===t?kn.INSTANCE:En.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(e){return e.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Rn.create(this.key,this.value,this)),this.negated}}class Pn{static create(e,t){return new Pn(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:qn(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type&&(this.key===e.key&&this.valueKey===e.valueKey)}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),i=e.getValue(this.key);return Array.isArray(t)?t.includes(i):"string"==typeof i&&"object"==typeof t&&null!==t&&hn.call(t,i)}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(e){return e.mapIn(this.key,this.valueKey)}negate(){return this.negated||(this.negated=An.create(this.key,this.valueKey)),this.negated}}class An{static create(e,t){return new An(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=Pn.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type&&this._negated.equals(e._negated)}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}map(e){return e.mapNotIn(this.key,this.valueKey)}negate(){return this._negated}}class Rn{static create(e,t,i=null){if("boolean"==typeof t)return t?Fn.create(e,i):In.create(e,i);const r=dn.get(e);if("boolean"==typeof r){return t===(r?"true":"false")?En.INSTANCE:kn.INSTANCE}return new Rn(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:qn(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){const e=dn.get(this.key);if("boolean"==typeof e){const t=e?"true":"false";return this.value===t?En.INSTANCE:kn.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(e){return e.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Tn.create(this.key,this.value,this)),this.negated}}class Fn{static create(e,t=null){const i=dn.get(e);return"boolean"==typeof i?i?En.INSTANCE:kn.INSTANCE:new Fn(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:jn(this.key,e.key)}equals(e){return e.type===this.type&&this.key===e.key}substituteConstants(){const e=dn.get(this.key);return"boolean"==typeof e?e?En.INSTANCE:kn.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(e){return e.mapNot(this.key)}negate(){return this.negated||(this.negated=In.create(this.key,this)),this.negated}}function $n(e,t){if("string"==typeof e){const t=parseFloat(e);isNaN(t)||(e=t)}return"string"==typeof e||"number"==typeof e?t(e):En.INSTANCE}class Ln{static create(e,t,i=null){return $n(t,(t=>new Ln(e,t,i)))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:qn(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreater(this.key,this.value)}negate(){return this.negated||(this.negated=Nn.create(this.key,this.value,this)),this.negated}}class On{static create(e,t,i=null){return $n(t,(t=>new On(e,t,i)))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:qn(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreaterEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Mn.create(this.key,this.value,this)),this.negated}}class Mn{static create(e,t,i=null){return $n(t,(t=>new Mn(e,t,i)))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:qn(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmaller(this.key,this.value)}negate(){return this.negated||(this.negated=On.create(this.key,this.value,this)),this.negated}}class Nn{static create(e,t,i=null){return $n(t,(t=>new Nn(e,t,i)))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:qn(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmallerEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Ln.create(this.key,this.value,this)),this.negated}}class Hn{static create(e,t){return new Hn(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return t<i?-1:t>i?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return this.key===e.key&&t===i}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return!!this.regexp&&this.regexp.test(t)}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}map(e){return e.mapRegex(this.key,this.regexp)}negate(){return this.negated||(this.negated=Un.create(this)),this.negated}}class Un{static create(e){return new Un(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type&&this._actual.equals(e._actual)}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}map(e){return new Un(this._actual.map(e))}negate(){return this._actual}}function Bn(e){let t=null;for(let i=0,r=e.length;i<r;i++){const r=e[i].substituteConstants();if(e[i]!==r&&null===t){t=[];for(let r=0;r<i;r++)t[r]=e[r]}null!==t&&(t[i]=r)}return null===t?e:t}class Vn{static create(e,t,i){return Vn._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const i=Sn(this.expr[t],e.expr[t]);if(0!==i)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=Bn(this.expr);return e===this.expr?this:Vn.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,i){const r=[];let n=!1;for(const s of e)if(s)if(1!==s.type){if(0===s.type)return En.INSTANCE;6!==s.type?r.push(s):r.push(...s.expr)}else n=!0;if(0===r.length&&n)return kn.INSTANCE;if(0!==r.length){if(1===r.length)return r[0];r.sort(Sn);for(let e=1;e<r.length;e++)r[e-1].equals(r[e])&&(r.splice(e,1),e--);if(1===r.length)return r[0];for(;r.length>1;){const e=r[r.length-1];if(9!==e.type)break;r.pop();const t=r.pop(),n=0===r.length,s=Wn.create(e.expr.map((e=>Vn.create([e,t],null,i))),null,n);s&&(r.push(s),r.sort(Sn))}if(1===r.length)return r[0];if(i){for(let e=0;e<r.length;e++)for(let t=e+1;t<r.length;t++)if(r[e].negate().equals(r[t]))return En.INSTANCE;if(1===r.length)return r[0]}return new Vn(r,t)}}serialize(){return this.expr.map((e=>e.serialize())).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}map(e){return new Vn(this.expr.map((t=>t.map(e))),null)}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=Wn.create(e,this,!0)}return this.negated}}class Wn{static create(e,t,i){return Wn._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const i=Sn(this.expr[t],e.expr[t]);if(0!==i)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=Bn(this.expr);return e===this.expr?this:Wn.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,i){let r=[],n=!1;if(e){for(let t=0,i=e.length;t<i;t++){const i=e[t];if(i)if(0!==i.type){if(1===i.type)return kn.INSTANCE;9!==i.type?r.push(i):r=r.concat(i.expr)}else n=!0}if(0===r.length&&n)return En.INSTANCE;r.sort(Sn)}if(0!==r.length){if(1===r.length)return r[0];for(let e=1;e<r.length;e++)r[e-1].equals(r[e])&&(r.splice(e,1),e--);if(1===r.length)return r[0];if(i){for(let e=0;e<r.length;e++)for(let t=e+1;t<r.length;t++)if(r[e].negate().equals(r[t]))return kn.INSTANCE;if(1===r.length)return r[0]}return new Wn(r,t)}}serialize(){return this.expr.map((e=>e.serialize())).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}map(e){return new Wn(this.expr.map((t=>t.map(e))),null)}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),i=e.shift(),r=[];for(const e of Kn(t))for(const t of Kn(i))r.push(Vn.create([e,t],null,!1));e.unshift(Wn.create(r,null,!1))}this.negated=Wn.create(e,this,!0)}return this.negated}}class zn extends In{static all(){return zn._info.values()}constructor(e,t,i){super(e,null),this._defaultValue=t,"object"==typeof i?zn._info.push(Object.assign(Object.assign({},i),{key:e})):!0!==i&&zn._info.push({key:e,description:i,type:null!=t?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return Tn.create(this.key,e)}notEqualsTo(e){return Rn.create(this.key,e)}}function jn(e,t){return e<t?-1:e>t?1:0}function qn(e,t,i,r){return e<i?-1:e>i?1:t<r?-1:t>r?1:0}function Kn(e){return 9===e.type?e.expr:[e]}zn._info=[],un("contextKeyService");const Gn=un("logService"),Qn=un("loggerService");var Jn;!function(e){e[e.Off=0]="Off",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"}(Jn||(Jn={}));const Zn=Jn.Info;function Yn(e,t=!1){let i="";for(let r=0;r<e.length;r++){let n=e[r];if(n instanceof Error&&(n=Yr(n,t)),"object"==typeof n)try{n=JSON.stringify(n)}catch(_C){}i+=(r>0?" ":"")+n}return i}class Xn extends x{constructor(){super(...arguments),this.level=Zn,this._onDidChangeLogLevel=this._register(new B),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==Jn.Off&&this.level<=e}}class es extends Xn{constructor(e){super(),this.logAlways=e}checkLogLevel(e){return this.logAlways||super.checkLogLevel(e)}trace(e,...t){this.checkLogLevel(Jn.Trace)&&this.log(Jn.Trace,Yn([e,...t],!0))}debug(e,...t){this.checkLogLevel(Jn.Debug)&&this.log(Jn.Debug,Yn([e,...t]))}info(e,...t){this.checkLogLevel(Jn.Info)&&this.log(Jn.Info,Yn([e,...t]))}warn(e,...t){this.checkLogLevel(Jn.Warning)&&this.log(Jn.Warning,Yn([e,...t]))}error(e,...t){if(this.checkLogLevel(Jn.Error))if(e instanceof Error){const t=Array.prototype.slice.call(arguments);t[0]=e.stack,this.log(Jn.Error,Yn(t))}else this.log(Jn.Error,Yn([e,...t]))}flush(){}}class ts extends Xn{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.loggers)i.trace(e,...t)}debug(e,...t){for(const i of this.loggers)i.debug(e,...t)}info(e,...t){for(const i of this.loggers)i.info(e,...t)}warn(e,...t){for(const i of this.loggers)i.warn(e,...t)}error(e,...t){for(const i of this.loggers)i.error(e,...t)}flush(){for(const e of this.loggers)e.flush()}dispose(){for(const e of this.loggers)e.dispose()}}class is extends x{constructor(e,t,i){if(super(),this.logLevel=e,this.logsHome=t,this._loggers=new Li,this._onDidChangeLoggers=this._register(new B),this.onDidChangeLoggers=this._onDidChangeLoggers.event,this._onDidChangeLogLevel=this._register(new B),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event,this._onDidChangeVisibility=this._register(new B),this.onDidChangeVisibility=this._onDidChangeVisibility.event,i)for(const r of i)this._loggers.set(r.resource,{logger:void 0,info:r})}getLoggerEntry(e){return hi(e)?[...this._loggers.values()].find((t=>t.info.id===e)):this._loggers.get(e)}getLogger(e){var t;return null===(t=this.getLoggerEntry(e))||void 0===t?void 0:t.logger}createLogger(e,t){var i,r,n;const s=this.toResource(e),o=hi(e)?e:null!==(i=null==t?void 0:t.id)&&void 0!==i?i:Xr(s.toString()).toString(16);let a=null===(r=this._loggers.get(s))||void 0===r?void 0:r.logger;const l="always"===(null==t?void 0:t.logLevel)?Jn.Trace:null==t?void 0:t.logLevel;a||(a=this.doCreateLogger(s,null!==(n=null!=l?l:this.getLogLevel(s))&&void 0!==n?n:this.logLevel,Object.assign(Object.assign({},t),{id:o})));const c={logger:a,info:{resource:s,id:o,logLevel:l,name:null==t?void 0:t.name,hidden:null==t?void 0:t.hidden,extensionId:null==t?void 0:t.extensionId,when:null==t?void 0:t.when}};return this.registerLogger(c.info),this._loggers.set(s,c),a}toResource(e){return hi(e)?Zi(this.logsHome,`${e}.log`):e}setLogLevel(e,t){var i,r,n;if(pt.isUri(e)){const r=e,n=t,s=this._loggers.get(r);s&&n!==s.info.logLevel&&(s.info.logLevel=n===this.logLevel?void 0:n,null===(i=s.logger)||void 0===i||i.setLevel(n),this._loggers.set(s.info.resource,s),this._onDidChangeLogLevel.fire([r,n]))}else{this.logLevel=e;for(const[e,t]of this._loggers.entries())void 0===(null===(r=this._loggers.get(e))||void 0===r?void 0:r.info.logLevel)&&(null===(n=t.logger)||void 0===n||n.setLevel(this.logLevel));this._onDidChangeLogLevel.fire(this.logLevel)}}setVisibility(e,t){const i=this.getLoggerEntry(e);i&&t!==!i.info.hidden&&(i.info.hidden=!t,this._loggers.set(i.info.resource,i),this._onDidChangeVisibility.fire([i.info.resource,t]))}getLogLevel(e){var t;let i;return e&&(i=null===(t=this._loggers.get(e))||void 0===t?void 0:t.info.logLevel),null!=i?i:this.logLevel}registerLogger(e){const t=this._loggers.get(e.resource);t?t.info.hidden!==e.hidden&&this.setVisibility(e.resource,!e.hidden):(this._loggers.set(e.resource,{info:e,logger:void 0}),this._onDidChangeLoggers.fire({added:[e],removed:[]}))}deregisterLogger(e){const t=this._loggers.get(e);t&&(t.logger&&t.logger.dispose(),this._loggers.delete(e),this._onDidChangeLoggers.fire({added:[],removed:[t.info]}))}*getRegisteredLoggers(){for(const e of this._loggers.values())yield e.info}getRegisteredLogger(e){var t;return null===(t=this._loggers.get(e))||void 0===t?void 0:t.info}dispose(){this._loggers.forEach((e=>{var t;return null===(t=e.logger)||void 0===t?void 0:t.dispose()})),this._loggers.clear(),super.dispose()}}new zn("logLevel",function(e){switch(e){case Jn.Trace:return"trace";case Jn.Debug:return"debug";case Jn.Info:return"info";case Jn.Warning:return"warn";case Jn.Error:return"error";case Jn.Off:return"off"}}(Jn.Info));class rs{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}const ns=[];function ss(e,t,i){t instanceof rs||(t=new rs(t,[],Boolean(i))),ns.push([e,t])}class os{constructor(...e){this._entries=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}const as=un("IExtHostInitDataService");class ls{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}}class cs{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())0===t.outgoing.size&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),r=this.lookupOrInsertNode(t);i.outgoing.set(r.key,r),r.incoming.set(i.key,i)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const i of this._nodes.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes.get(t);return i||(i=new ls(t,e),this._nodes.set(t,i)),i}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return 0===this._nodes.size}toString(){const e=[];for(const[t,i]of this._nodes)e.push(`${t}\n\t(-> incoming)[${[...i.incoming.keys()].join(", ")}]\n\t(outgoing ->)[${[...i.outgoing.keys()].join(",")}]\n`);return e.join("\n")}findCycleSlow(){for(const[e,t]of this._nodes){const i=new Set([e]),r=this._findCycle(t,i);if(r)return r}}_findCycle(e,t){for(const[i,r]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const e=this._findCycle(r,t);if(e)return e;t.delete(i)}}}class us extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=null!==(t=e.findCycleSlow())&&void 0!==t?t:`UNABLE to detect cycle, dumping graph: \n${e.toString()}`}}class ds{constructor(e=new os,t=!1,i,r=false){var n;this._services=e,this._strict=t,this._parent=i,this._enableTracing=r,this._activeInstantiations=new Set,this._services.set(cn,this),this._globalGraph=r?null!==(n=null==i?void 0:i._globalGraph)&&void 0!==n?n:new cs((e=>e)):void 0}createChild(e){return new ds(e,this._strict,this,this._enableTracing)}invokeFunction(e,...t){const i=hs.traceInvocation(this._enableTracing,e);let r=!1;try{const n={get:e=>{if(r)throw d("service accessor is only valid during the invocation of its target method");const t=this._getOrCreateServiceInstance(e,i);if(!t)throw new Error(`[invokeFunction] unknown service '${e}'`);return t}};return e(n,...t)}finally{r=!0,i.stop()}}createInstance(e,...t){let i,r;return e instanceof rs?(i=hs.traceCreation(this._enableTracing,e.ctor),r=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=hs.traceCreation(this._enableTracing,e),r=this._createInstance(e,t,i)),i.stop(),r}_createInstance(e,t=[],i){const r=ln.getServiceDependencies(e).sort(((e,t)=>e.index-t.index)),n=[];for(const o of r){const t=this._getOrCreateServiceInstance(o.id,i);t||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${o.id}.`,!1),n.push(t)}const s=r.length>0?r[0].index:t.length;if(t.length!==s){console.trace(`[createInstance] First service dependency of ${e.name} at position ${s+1} conflicts with ${t.length} static arguments`);const i=s-t.length;t=i>0?t.concat(new Array(i)):t.slice(0,s)}return Reflect.construct(e,t.concat(n))}_setServiceInstance(e,t){if(this._services.get(e)instanceof rs)this._services.set(e,t);else{if(!this._parent)throw new Error("illegalState - setting UNKNOWN service instance");this._parent._setServiceInstance(e,t)}}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const i=this._getServiceInstanceOrDescriptor(e);return i instanceof rs?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){var r;const n=new cs((e=>e.id.toString()));let s=0;const o=[{id:e,desc:t,_trace:i}];for(;o.length;){const t=o.pop();if(n.lookupOrInsertNode(t),s++>1e3)throw new us(n);for(const i of ln.getServiceDependencies(t.desc.ctor)){const s=this._getServiceInstanceOrDescriptor(i.id);if(s||this._throwIfStrict(`[createInstance] ${e} depends on ${i.id} which is NOT registered.`,!0),null===(r=this._globalGraph)||void 0===r||r.insertEdge(String(t.id),String(i.id)),s instanceof rs){const e={id:i.id,desc:s,_trace:t._trace.branch(i.id,!0)};n.insertEdge(t,e),o.push(e)}}}for(;;){const e=n.roots();if(0===e.length){if(!n.isEmpty())throw new us(n);break}for(const{data:t}of e){if(this._getServiceInstanceOrDescriptor(t.id)instanceof rs){const e=this._createServiceInstanceWithOwner(t.id,t.desc.ctor,t.desc.staticArguments,t.desc.supportsDelayedInstantiation,t._trace);this._setServiceInstance(t.id,e)}n.removeNode(t)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],r,n){if(this._services.get(e)instanceof rs)return this._createServiceInstance(e,t,i,r,n);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,r,n);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,i=[],r,n){if(r){const r=new ds(void 0,this._strict,this,this._enableTracing);r._globalGraphImplicitDependency=String(e);const s=new Map,o=new mr((()=>{const e=r._createInstance(t,i,n);for(const[t,i]of s){const r=e[t];if("function"==typeof r)for(const t of i)r.apply(e,t)}return s.clear(),e}));return new Proxy(Object.create(null),{get(e,t){if(!o.isInitialized&&"string"==typeof t&&(t.startsWith("onDid")||t.startsWith("onWill"))){let e=s.get(t);e||(e=new A,s.set(t,e));return(t,i,r)=>w(e.push([t,i,r]))}if(t in e)return e[t];const i=o.value;let r=i[t];return"function"!=typeof r||(r=r.bind(i),e[t]=r),r},set:(e,t,i)=>(o.value[t]=i,!0),getPrototypeOf:e=>t.prototype})}return this._createInstance(t,i,n)}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}class hs{static traceInvocation(e,t){return e?new hs(2,t.name||(new Error).stack.split("\n").slice(3,4).join("\n")):hs._None}static traceCreation(e,t){return e?new hs(1,t.name):hs._None}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const i=new hs(3,e.toString());return this._dep.push([e,t,i]),i}stop(){const e=Date.now()-this._start;hs._totals+=e;let t=!1;const i=[`${1===this.type?"CREATE":"CALL"} ${this.name}`,`${function e(i,r){const n=[],s=new Array(i+1).join("\t");for(const[o,a,l]of r._dep)if(a&&l){t=!0,n.push(`${s}CREATES -> ${o}`);const r=e(i+1,l);r&&n.push(r)}else n.push(`${s}uses -> ${o}`);return n.join("\n")}(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${hs._totals.toFixed(2)}ms)`];(e>2||t)&&hs.all.add(i.join("\n"))}}hs.all=new Set,hs._None=new class extends hs{constructor(){super(0,null)}stop(){}branch(){return this}},hs._totals=0;const ps=un("IExtHostRpcService");class gs{constructor(e){this.getProxy=e.getProxy.bind(e),this.set=e.set.bind(e),this.dispose=e.dispose.bind(e),this.assertRegistered=e.assertRegistered.bind(e),this.drain=e.drain.bind(e)}}const fs=un("IURITransformerService");class ms{constructor(e){e?(this.transformIncoming=e.transformIncoming.bind(e),this.transformOutgoing=e.transformOutgoing.bind(e),this.transformOutgoingURI=e.transformOutgoingURI.bind(e),this.transformOutgoingScheme=e.transformOutgoingScheme.bind(e)):(this.transformIncoming=e=>e,this.transformOutgoing=e=>e,this.transformOutgoingURI=e=>e,this.transformOutgoingScheme=e=>e)}}function vs(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o}function _s(e,t){return function(i,r){t(i,r,e)}}class ys{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){return e.charCodeAt(0)-this._value.charCodeAt(this._pos)}value(){return this._value[this._pos]}}class ws{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){if(46===this._value.charCodeAt(this._to)){if(!e)break;this._from++}else e=!1}return this}cmp(e){return this._caseSensitive?Qt(e,this._value,0,e.length,this._from,this._to):Zt(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class bs{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const e=this._value.charCodeAt(t);if(!(47===e||this._splitOnBackslash&&92===e))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(47===t||this._splitOnBackslash&&92===t){if(!e)break;this._from++}else e=!1}return this}cmp(e){return this._caseSensitive?Qt(e,this._value,0,e.length,this._from,this._to):Zt(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class xs{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new bs(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return 3===this._states[this._stateIdx]&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return 3===this._states[this._stateIdx]&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(1===this._states[this._stateIdx])return Jt(e,this._value.scheme);if(2===this._states[this._stateIdx])return Jt(e,this._value.authority);if(3===this._states[this._stateIdx])return this._pathIterator.cmp(e);if(4===this._states[this._stateIdx])return Gt(e,this._value.query);if(5===this._states[this._stateIdx])return Gt(e,this._value.fragment);throw new Error}value(){if(1===this._states[this._stateIdx])return this._value.scheme;if(2===this._states[this._stateIdx])return this._value.authority;if(3===this._states[this._stateIdx])return this._pathIterator.value();if(4===this._states[this._stateIdx])return this._value.query;if(5===this._states[this._stateIdx])return this._value.fragment;throw new Error}}class Cs{constructor(){this.height=1}isEmpty(){return!(this.left||this.mid||this.right||this.value)}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return null!==(t=null===(e=this.left)||void 0===e?void 0:e.height)&&void 0!==t?t:0}get heightRight(){var e,t;return null!==(t=null===(e=this.right)||void 0===e?void 0:e.height)&&void 0!==t?t:0}}class Ds{static forUris(e=(()=>!1),t=(()=>!1)){return new Ds(new xs(e,t))}static forPaths(e=!1){return new Ds(new bs(void 0,!e))}static forStrings(){return new Ds(new ys)}static forConfigKeys(){return new Ds(new ws)}constructor(e){this._iter=e}clear(){this._root=void 0}fill(e,t){if(t){const i=t.slice(0);zr(i);for(const t of i)this.set(t,e)}else{const t=e.slice(0);zr(t);for(const e of t)this.set(e[0],e[1])}}set(e,t){const i=this._iter.reset(e);let r;this._root||(this._root=new Cs,this._root.segment=i.value());const n=[];for(r=this._root;;){const e=i.cmp(r.segment);if(e>0)r.left||(r.left=new Cs,r.left.segment=i.value()),n.push([-1,r]),r=r.left;else if(e<0)r.right||(r.right=new Cs,r.right.segment=i.value()),n.push([1,r]),r=r.right;else{if(!i.hasNext())break;i.next(),r.mid||(r.mid=new Cs,r.mid.segment=i.value()),n.push([0,r]),r=r.mid}}const s=r.value;r.value=t,r.key=e;for(let o=n.length-1;o>=0;o--){const e=n[o][1];e.updateHeight();const t=e.balanceFactor();if(t<-1||t>1){const t=n[o][0],i=n[o+1][0];if(1===t&&1===i)n[o][1]=e.rotateLeft();else if(-1===t&&-1===i)n[o][1]=e.rotateRight();else if(1===t&&-1===i)e.right=n[o+1][1]=n[o+1][1].rotateRight(),n[o][1]=e.rotateLeft();else{if(-1!==t||1!==i)throw new Error;e.left=n[o+1][1]=n[o+1][1].rotateLeft(),n[o][1]=e.rotateRight()}if(o>0)switch(n[o-1][0]){case-1:n[o-1][1].left=n[o][1];break;case 1:n[o-1][1].right=n[o][1];break;case 0:n[o-1][1].mid=n[o][1]}else this._root=n[0][1]}}return s}get(e){var t;return null===(t=this._getNode(e))||void 0===t?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const e=t.cmp(i.segment);if(e>0)i=i.left;else if(e<0)i=i.right;else{if(!t.hasNext())break;t.next(),i=i.mid}}return i}has(e){const t=this._getNode(e);return!(void 0===(null==t?void 0:t.value)&&void 0===(null==t?void 0:t.mid))}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var i;const r=this._iter.reset(e),n=[];let s=this._root;for(;s;){const e=r.cmp(s.segment);if(e>0)n.push([-1,s]),s=s.left;else if(e<0)n.push([1,s]),s=s.right;else{if(!r.hasNext())break;r.next(),n.push([0,s]),s=s.mid}}if(s){if(t?(s.left=void 0,s.mid=void 0,s.right=void 0,s.height=1):(s.key=void 0,s.value=void 0),!s.mid&&!s.value)if(s.left&&s.right){const e=this._min(s.right);if(e.key){const{key:t,value:i,segment:r}=e;this._delete(e.key,!1),s.key=t,s.value=i,s.segment=r}}else{const e=null!==(i=s.left)&&void 0!==i?i:s.right;if(n.length>0){const[t,i]=n[n.length-1];switch(t){case-1:i.left=e;break;case 0:i.mid=e;break;case 1:i.right=e}}else this._root=e}for(let e=n.length-1;e>=0;e--){const t=n[e][1];t.updateHeight();const i=t.balanceFactor();if(i>1?(t.right.balanceFactor()>=0||(t.right=t.right.rotateRight()),n[e][1]=t.rotateLeft()):i<-1&&(t.left.balanceFactor()<=0||(t.left=t.left.rotateLeft()),n[e][1]=t.rotateRight()),e>0)switch(n[e-1][0]){case-1:n[e-1][1].left=n[e][1];break;case 1:n[e-1][1].right=n[e][1];break;case 0:n[e-1][1].mid=n[e][1]}else this._root=n[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let i,r=this._root;for(;r;){const e=t.cmp(r.segment);if(e>0)r=r.left;else if(e<0)r=r.right;else{if(!t.hasNext())break;t.next(),i=r.value||i,r=r.mid}}return r&&r.value||i}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const i=this._iter.reset(e);let r=this._root;for(;r;){const e=i.cmp(r.segment);if(e>0)r=r.left;else if(e<0)r=r.right;else{if(!i.hasNext())return r.mid?this._entries(r.mid):t?r.value:void 0;i.next(),r=r.mid}}}hasElementOrSubtree(e){return void 0!==this._findSuperstrOrElement(e,!0)}forEach(e){for(const[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}_isBalanced(){const e=t=>{if(!t)return!0;const i=t.balanceFactor();return!(i<-1||i>1)&&(e(t.left)&&e(t.right))};return e(this._root)}}function Ss(e){if(!e||"object"!=typeof e)return e;if(e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach((([e,i])=>{t[e]=i&&"object"==typeof i?Ss(i):i})),t}function Es(e){if(!e||"object"!=typeof e)return e;const t=[e];for(;t.length>0;){const e=t.shift();Object.freeze(e);for(const i in e)if(ks.call(e,i)){const r=e[i];"object"!=typeof r||Object.isFrozen(r)||gi(r)||t.push(r)}}return e}const ks=Object.prototype.hasOwnProperty;function Is(e,t){return Ts(e,t,new Set)}function Ts(e,t,i){if(_i(e))return e;const r=t(e);if(void 0!==r)return r;if(Array.isArray(e)){const r=[];for(const n of e)r.push(Ts(n,t,i));return r}if(pi(e)){if(i.has(e))throw new Error("Cannot clone recursive data-structure");i.add(e);const r={};for(const n in e)ks.call(e,n)&&(r[n]=Ts(e[n],t,i));return i.delete(e),r}return e}function Ps(e,t,i=!0){return pi(e)?(pi(t)&&Object.keys(t).forEach((r=>{r in e?i&&(pi(e[r])&&pi(t[r])?Ps(e[r],t[r],i):e[r]=t[r]):e[r]=t[r]})),e):t}function As(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;let i,r;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(!As(e[i],t[i]))return!1}else{const n=[];for(r in e)n.push(r);n.sort();const s=[];for(r in t)s.push(r);if(s.sort(),!As(n,s))return!1;for(i=0;i<n.length;i++)if(!As(e[n[i]],t[n[i]]))return!1}return!0}function Rs(e,t){const i=Object.create(null);for(const[r,n]of Object.entries(e))t(r,n)&&(i[r]=n);return i}class Fs{constructor(){this._next=0}getNext(){return this._next++}}var $s;!function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}($s||($s={})),function(e){const t="error",i="warning",r="info";e.fromValue=function(n){return n?Xt(t,n)?e.Error:Xt(i,n)||Xt("warn",n)?e.Warning:Xt(r,n)?e.Info:e.Ignore:e.Ignore},e.toString=function(n){switch(n){case e.Error:return t;case e.Warning:return i;case e.Info:return r;default:return"ignore"}}}($s||($s={}));var Ls,Os,Ms,Ns=$s,Hs=Ns;un("notificationService"),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SILENT=1]="SILENT",e[e.URGENT=2]="URGENT"}(Ls||(Ls={})),function(e){e[e.WORKSPACE=0]="WORKSPACE",e[e.PROFILE=1]="PROFILE",e[e.APPLICATION=2]="APPLICATION"}(Os||(Os={})),function(e){e[e.OFF=0]="OFF",e[e.SILENT=1]="SILENT",e[e.ERROR=2]="ERROR"}(Ms||(Ms={}));const Us=un("contextService");class Bs{constructor(e,t,i,r,n){this._id=e,this._transient=i,this._configuration=r,this._ignorePathCasing=n,this._foldersMap=Ds.forUris(this._ignorePathCasing,(()=>!0)),this.folders=t}update(e){this._id=e.id,this._configuration=e.configuration,this._transient=e.transient,this._ignorePathCasing=e._ignorePathCasing,this.folders=e.folders}get folders(){return this._folders}set folders(e){this._folders=e,this.updateFoldersMap()}get id(){return this._id}get transient(){return this._transient}get configuration(){return this._configuration}set configuration(e){this._configuration=e}getFolder(e){return e&&this._foldersMap.findSubstr(e)||null}updateFoldersMap(){this._foldersMap=Ds.forUris(this._ignorePathCasing,(()=>!0));for(const e of this.folders)this._foldersMap.set(e.uri,e)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}}class Vs{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return Zi(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}function Ws(e){return new Vs({uri:e,index:0,name:Gi(e)},{uri:e.toString()})}J(0,"Code Workspace");const zs=un("IExtHostFileSystemInfo"),js=function(){if("object"==typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID.bind(crypto);let e;e="object"==typeof crypto&&"function"==typeof crypto.getRandomValues?crypto.getRandomValues.bind(crypto):function(e){for(let t=0;t<e.length;t++)e[t]=Math.floor(256*Math.random());return e};const t=new Uint8Array(16),i=[];for(let r=0;r<256;r++)i.push(r.toString(16).padStart(2,"0"));return function(){e(t),t[6]=15&t[6]|64,t[8]=63&t[8]|128;let r=0,n="";return n+=i[t[r++]],n+=i[t[r++]],n+=i[t[r++]],n+=i[t[r++]],n+="-",n+=i[t[r++]],n+=i[t[r++]],n+="-",n+=i[t[r++]],n+=i[t[r++]],n+="-",n+=i[t[r++]],n+=i[t[r++]],n+="-",n+=i[t[r++]],n+=i[t[r++]],n+=i[t[r++]],n+=i[t[r++]],n+=i[t[r++]],n+=i[t[r++]],n}}(),qs=Object.freeze({create:e=>Vr(e.map((e=>e.toString()))).join("\r\n"),split:e=>e.split("\r\n"),parse:e=>qs.split(e).filter((e=>!e.startsWith("#")))});function Ks(e,t,i){if(!i||i.length<t.length)return null;let r;return r=e?ei(i,t):0===i.indexOf(t),r?t.length>0?[{start:0,end:t.length}]:[]:null}Ks.bind(void 0,!1),Ks.bind(void 0,!0);const Gs=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach((e=>Gs.add(e.charCodeAt(0)))),new Ni(1e4);function Qs(){const e=[],t=[];for(let i=0;i<=128;i++)t[i]=0;for(let i=0;i<=128;i++)e.push(t.slice(0));return e}var Js;Qs(),Qs(),Qs(),function(e){e.Default=[-100,0],e.isDefault=function(e){return!e||2===e.length&&-100===e[0]&&0===e[1]}}(Js||(Js={}));const Zs=Object.create(null);function Ys(e,t){if(hi(t)){const i=Zs[t];if(void 0===i)throw new Error(`${e} references an unknown codicon: ${t}`);t=i}return Zs[e]=t,{id:e}}const Xs={add:Ys("add",6e4),plus:Ys("plus",6e4),gistNew:Ys("gist-new",6e4),repoCreate:Ys("repo-create",6e4),lightbulb:Ys("lightbulb",60001),lightBulb:Ys("light-bulb",60001),repo:Ys("repo",60002),repoDelete:Ys("repo-delete",60002),gistFork:Ys("gist-fork",60003),repoForked:Ys("repo-forked",60003),gitPullRequest:Ys("git-pull-request",60004),gitPullRequestAbandoned:Ys("git-pull-request-abandoned",60004),recordKeys:Ys("record-keys",60005),keyboard:Ys("keyboard",60005),tag:Ys("tag",60006),tagAdd:Ys("tag-add",60006),tagRemove:Ys("tag-remove",60006),gitPullRequestLabel:Ys("git-pull-request-label",60006),person:Ys("person",60007),personFollow:Ys("person-follow",60007),personOutline:Ys("person-outline",60007),personFilled:Ys("person-filled",60007),gitBranch:Ys("git-branch",60008),gitBranchCreate:Ys("git-branch-create",60008),gitBranchDelete:Ys("git-branch-delete",60008),sourceControl:Ys("source-control",60008),mirror:Ys("mirror",60009),mirrorPublic:Ys("mirror-public",60009),star:Ys("star",60010),starAdd:Ys("star-add",60010),starDelete:Ys("star-delete",60010),starEmpty:Ys("star-empty",60010),comment:Ys("comment",60011),commentAdd:Ys("comment-add",60011),alert:Ys("alert",60012),warning:Ys("warning",60012),search:Ys("search",60013),searchSave:Ys("search-save",60013),logOut:Ys("log-out",60014),signOut:Ys("sign-out",60014),logIn:Ys("log-in",60015),signIn:Ys("sign-in",60015),eye:Ys("eye",60016),eyeUnwatch:Ys("eye-unwatch",60016),eyeWatch:Ys("eye-watch",60016),circleFilled:Ys("circle-filled",60017),primitiveDot:Ys("primitive-dot",60017),closeDirty:Ys("close-dirty",60017),debugBreakpoint:Ys("debug-breakpoint",60017),debugBreakpointDisabled:Ys("debug-breakpoint-disabled",60017),debugHint:Ys("debug-hint",60017),primitiveSquare:Ys("primitive-square",60018),edit:Ys("edit",60019),pencil:Ys("pencil",60019),info:Ys("info",60020),issueOpened:Ys("issue-opened",60020),gistPrivate:Ys("gist-private",60021),gitForkPrivate:Ys("git-fork-private",60021),lock:Ys("lock",60021),mirrorPrivate:Ys("mirror-private",60021),close:Ys("close",60022),removeClose:Ys("remove-close",60022),x:Ys("x",60022),repoSync:Ys("repo-sync",60023),sync:Ys("sync",60023),clone:Ys("clone",60024),desktopDownload:Ys("desktop-download",60024),beaker:Ys("beaker",60025),microscope:Ys("microscope",60025),vm:Ys("vm",60026),deviceDesktop:Ys("device-desktop",60026),file:Ys("file",60027),fileText:Ys("file-text",60027),more:Ys("more",60028),ellipsis:Ys("ellipsis",60028),kebabHorizontal:Ys("kebab-horizontal",60028),mailReply:Ys("mail-reply",60029),reply:Ys("reply",60029),organization:Ys("organization",60030),organizationFilled:Ys("organization-filled",60030),organizationOutline:Ys("organization-outline",60030),newFile:Ys("new-file",60031),fileAdd:Ys("file-add",60031),newFolder:Ys("new-folder",60032),fileDirectoryCreate:Ys("file-directory-create",60032),trash:Ys("trash",60033),trashcan:Ys("trashcan",60033),history:Ys("history",60034),clock:Ys("clock",60034),folder:Ys("folder",60035),fileDirectory:Ys("file-directory",60035),symbolFolder:Ys("symbol-folder",60035),logoGithub:Ys("logo-github",60036),markGithub:Ys("mark-github",60036),github:Ys("github",60036),terminal:Ys("terminal",60037),console:Ys("console",60037),repl:Ys("repl",60037),zap:Ys("zap",60038),symbolEvent:Ys("symbol-event",60038),error:Ys("error",60039),stop:Ys("stop",60039),variable:Ys("variable",60040),symbolVariable:Ys("symbol-variable",60040),array:Ys("array",60042),symbolArray:Ys("symbol-array",60042),symbolModule:Ys("symbol-module",60043),symbolPackage:Ys("symbol-package",60043),symbolNamespace:Ys("symbol-namespace",60043),symbolObject:Ys("symbol-object",60043),symbolMethod:Ys("symbol-method",60044),symbolFunction:Ys("symbol-function",60044),symbolConstructor:Ys("symbol-constructor",60044),symbolBoolean:Ys("symbol-boolean",60047),symbolNull:Ys("symbol-null",60047),symbolNumeric:Ys("symbol-numeric",60048),symbolNumber:Ys("symbol-number",60048),symbolStructure:Ys("symbol-structure",60049),symbolStruct:Ys("symbol-struct",60049),symbolParameter:Ys("symbol-parameter",60050),symbolTypeParameter:Ys("symbol-type-parameter",60050),symbolKey:Ys("symbol-key",60051),symbolText:Ys("symbol-text",60051),symbolReference:Ys("symbol-reference",60052),goToFile:Ys("go-to-file",60052),symbolEnum:Ys("symbol-enum",60053),symbolValue:Ys("symbol-value",60053),symbolRuler:Ys("symbol-ruler",60054),symbolUnit:Ys("symbol-unit",60054),activateBreakpoints:Ys("activate-breakpoints",60055),archive:Ys("archive",60056),arrowBoth:Ys("arrow-both",60057),arrowDown:Ys("arrow-down",60058),arrowLeft:Ys("arrow-left",60059),arrowRight:Ys("arrow-right",60060),arrowSmallDown:Ys("arrow-small-down",60061),arrowSmallLeft:Ys("arrow-small-left",60062),arrowSmallRight:Ys("arrow-small-right",60063),arrowSmallUp:Ys("arrow-small-up",60064),arrowUp:Ys("arrow-up",60065),bell:Ys("bell",60066),bold:Ys("bold",60067),book:Ys("book",60068),bookmark:Ys("bookmark",60069),debugBreakpointConditionalUnverified:Ys("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:Ys("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:Ys("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:Ys("debug-breakpoint-data-unverified",60072),debugBreakpointData:Ys("debug-breakpoint-data",60073),debugBreakpointDataDisabled:Ys("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:Ys("debug-breakpoint-log-unverified",60074),debugBreakpointLog:Ys("debug-breakpoint-log",60075),debugBreakpointLogDisabled:Ys("debug-breakpoint-log-disabled",60075),briefcase:Ys("briefcase",60076),broadcast:Ys("broadcast",60077),browser:Ys("browser",60078),bug:Ys("bug",60079),calendar:Ys("calendar",60080),caseSensitive:Ys("case-sensitive",60081),check:Ys("check",60082),checklist:Ys("checklist",60083),chevronDown:Ys("chevron-down",60084),dropDownButton:Ys("drop-down-button",60084),chevronLeft:Ys("chevron-left",60085),chevronRight:Ys("chevron-right",60086),chevronUp:Ys("chevron-up",60087),chromeClose:Ys("chrome-close",60088),chromeMaximize:Ys("chrome-maximize",60089),chromeMinimize:Ys("chrome-minimize",60090),chromeRestore:Ys("chrome-restore",60091),circle:Ys("circle",60092),circleOutline:Ys("circle-outline",60092),debugBreakpointUnverified:Ys("debug-breakpoint-unverified",60092),circleSlash:Ys("circle-slash",60093),circuitBoard:Ys("circuit-board",60094),clearAll:Ys("clear-all",60095),clippy:Ys("clippy",60096),closeAll:Ys("close-all",60097),cloudDownload:Ys("cloud-download",60098),cloudUpload:Ys("cloud-upload",60099),code:Ys("code",60100),collapseAll:Ys("collapse-all",60101),colorMode:Ys("color-mode",60102),commentDiscussion:Ys("comment-discussion",60103),compareChanges:Ys("compare-changes",60157),creditCard:Ys("credit-card",60105),dash:Ys("dash",60108),dashboard:Ys("dashboard",60109),database:Ys("database",60110),debugContinue:Ys("debug-continue",60111),debugDisconnect:Ys("debug-disconnect",60112),debugPause:Ys("debug-pause",60113),debugRestart:Ys("debug-restart",60114),debugStart:Ys("debug-start",60115),debugStepInto:Ys("debug-step-into",60116),debugStepOut:Ys("debug-step-out",60117),debugStepOver:Ys("debug-step-over",60118),debugStop:Ys("debug-stop",60119),debug:Ys("debug",60120),deviceCameraVideo:Ys("device-camera-video",60121),deviceCamera:Ys("device-camera",60122),deviceMobile:Ys("device-mobile",60123),diffAdded:Ys("diff-added",60124),diffIgnored:Ys("diff-ignored",60125),diffModified:Ys("diff-modified",60126),diffRemoved:Ys("diff-removed",60127),diffRenamed:Ys("diff-renamed",60128),diff:Ys("diff",60129),discard:Ys("discard",60130),editorLayout:Ys("editor-layout",60131),emptyWindow:Ys("empty-window",60132),exclude:Ys("exclude",60133),extensions:Ys("extensions",60134),eyeClosed:Ys("eye-closed",60135),fileBinary:Ys("file-binary",60136),fileCode:Ys("file-code",60137),fileMedia:Ys("file-media",60138),filePdf:Ys("file-pdf",60139),fileSubmodule:Ys("file-submodule",60140),fileSymlinkDirectory:Ys("file-symlink-directory",60141),fileSymlinkFile:Ys("file-symlink-file",60142),fileZip:Ys("file-zip",60143),files:Ys("files",60144),filter:Ys("filter",60145),flame:Ys("flame",60146),foldDown:Ys("fold-down",60147),foldUp:Ys("fold-up",60148),fold:Ys("fold",60149),folderActive:Ys("folder-active",60150),folderOpened:Ys("folder-opened",60151),gear:Ys("gear",60152),gift:Ys("gift",60153),gistSecret:Ys("gist-secret",60154),gist:Ys("gist",60155),gitCommit:Ys("git-commit",60156),gitCompare:Ys("git-compare",60157),gitMerge:Ys("git-merge",60158),githubAction:Ys("github-action",60159),githubAlt:Ys("github-alt",60160),globe:Ys("globe",60161),grabber:Ys("grabber",60162),graph:Ys("graph",60163),gripper:Ys("gripper",60164),heart:Ys("heart",60165),home:Ys("home",60166),horizontalRule:Ys("horizontal-rule",60167),hubot:Ys("hubot",60168),inbox:Ys("inbox",60169),issueClosed:Ys("issue-closed",60324),issueReopened:Ys("issue-reopened",60171),issues:Ys("issues",60172),italic:Ys("italic",60173),jersey:Ys("jersey",60174),json:Ys("json",60175),bracket:Ys("bracket",60175),kebabVertical:Ys("kebab-vertical",60176),key:Ys("key",60177),law:Ys("law",60178),lightbulbAutofix:Ys("lightbulb-autofix",60179),linkExternal:Ys("link-external",60180),link:Ys("link",60181),listOrdered:Ys("list-ordered",60182),listUnordered:Ys("list-unordered",60183),liveShare:Ys("live-share",60184),loading:Ys("loading",60185),location:Ys("location",60186),mailRead:Ys("mail-read",60187),mail:Ys("mail",60188),markdown:Ys("markdown",60189),megaphone:Ys("megaphone",60190),mention:Ys("mention",60191),milestone:Ys("milestone",60192),gitPullRequestMilestone:Ys("git-pull-request-milestone",60192),mortarBoard:Ys("mortar-board",60193),move:Ys("move",60194),multipleWindows:Ys("multiple-windows",60195),mute:Ys("mute",60196),noNewline:Ys("no-newline",60197),note:Ys("note",60198),octoface:Ys("octoface",60199),openPreview:Ys("open-preview",60200),package_:Ys("package",60201),paintcan:Ys("paintcan",60202),pin:Ys("pin",60203),play:Ys("play",60204),run:Ys("run",60204),plug:Ys("plug",60205),preserveCase:Ys("preserve-case",60206),preview:Ys("preview",60207),project:Ys("project",60208),pulse:Ys("pulse",60209),question:Ys("question",60210),quote:Ys("quote",60211),radioTower:Ys("radio-tower",60212),reactions:Ys("reactions",60213),references:Ys("references",60214),refresh:Ys("refresh",60215),regex:Ys("regex",60216),remoteExplorer:Ys("remote-explorer",60217),remote:Ys("remote",60218),remove:Ys("remove",60219),replaceAll:Ys("replace-all",60220),replace:Ys("replace",60221),repoClone:Ys("repo-clone",60222),repoForcePush:Ys("repo-force-push",60223),repoPull:Ys("repo-pull",60224),repoPush:Ys("repo-push",60225),report:Ys("report",60226),requestChanges:Ys("request-changes",60227),rocket:Ys("rocket",60228),rootFolderOpened:Ys("root-folder-opened",60229),rootFolder:Ys("root-folder",60230),rss:Ys("rss",60231),ruby:Ys("ruby",60232),saveAll:Ys("save-all",60233),saveAs:Ys("save-as",60234),save:Ys("save",60235),screenFull:Ys("screen-full",60236),screenNormal:Ys("screen-normal",60237),searchStop:Ys("search-stop",60238),server:Ys("server",60240),settingsGear:Ys("settings-gear",60241),settings:Ys("settings",60242),shield:Ys("shield",60243),smiley:Ys("smiley",60244),sortPrecedence:Ys("sort-precedence",60245),splitHorizontal:Ys("split-horizontal",60246),splitVertical:Ys("split-vertical",60247),squirrel:Ys("squirrel",60248),starFull:Ys("star-full",60249),starHalf:Ys("star-half",60250),symbolClass:Ys("symbol-class",60251),symbolColor:Ys("symbol-color",60252),symbolCustomColor:Ys("symbol-customcolor",60252),symbolConstant:Ys("symbol-constant",60253),symbolEnumMember:Ys("symbol-enum-member",60254),symbolField:Ys("symbol-field",60255),symbolFile:Ys("symbol-file",60256),symbolInterface:Ys("symbol-interface",60257),symbolKeyword:Ys("symbol-keyword",60258),symbolMisc:Ys("symbol-misc",60259),symbolOperator:Ys("symbol-operator",60260),symbolProperty:Ys("symbol-property",60261),wrench:Ys("wrench",60261),wrenchSubaction:Ys("wrench-subaction",60261),symbolSnippet:Ys("symbol-snippet",60262),tasklist:Ys("tasklist",60263),telescope:Ys("telescope",60264),textSize:Ys("text-size",60265),threeBars:Ys("three-bars",60266),thumbsdown:Ys("thumbsdown",60267),thumbsup:Ys("thumbsup",60268),tools:Ys("tools",60269),triangleDown:Ys("triangle-down",60270),triangleLeft:Ys("triangle-left",60271),triangleRight:Ys("triangle-right",60272),triangleUp:Ys("triangle-up",60273),twitter:Ys("twitter",60274),unfold:Ys("unfold",60275),unlock:Ys("unlock",60276),unmute:Ys("unmute",60277),unverified:Ys("unverified",60278),verified:Ys("verified",60279),versions:Ys("versions",60280),vmActive:Ys("vm-active",60281),vmOutline:Ys("vm-outline",60282),vmRunning:Ys("vm-running",60283),watch:Ys("watch",60284),whitespace:Ys("whitespace",60285),wholeWord:Ys("whole-word",60286),window:Ys("window",60287),wordWrap:Ys("word-wrap",60288),zoomIn:Ys("zoom-in",60289),zoomOut:Ys("zoom-out",60290),listFilter:Ys("list-filter",60291),listFlat:Ys("list-flat",60292),listSelection:Ys("list-selection",60293),selection:Ys("selection",60293),listTree:Ys("list-tree",60294),debugBreakpointFunctionUnverified:Ys("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:Ys("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:Ys("debug-breakpoint-function-disabled",60296),debugStackframeActive:Ys("debug-stackframe-active",60297),circleSmallFilled:Ys("circle-small-filled",60298),debugStackframeDot:Ys("debug-stackframe-dot",60298),debugStackframe:Ys("debug-stackframe",60299),debugStackframeFocused:Ys("debug-stackframe-focused",60299),debugBreakpointUnsupported:Ys("debug-breakpoint-unsupported",60300),symbolString:Ys("symbol-string",60301),debugReverseContinue:Ys("debug-reverse-continue",60302),debugStepBack:Ys("debug-step-back",60303),debugRestartFrame:Ys("debug-restart-frame",60304),callIncoming:Ys("call-incoming",60306),callOutgoing:Ys("call-outgoing",60307),menu:Ys("menu",60308),expandAll:Ys("expand-all",60309),feedback:Ys("feedback",60310),gitPullRequestReviewer:Ys("git-pull-request-reviewer",60310),groupByRefType:Ys("group-by-ref-type",60311),ungroupByRefType:Ys("ungroup-by-ref-type",60312),account:Ys("account",60313),gitPullRequestAssignee:Ys("git-pull-request-assignee",60313),bellDot:Ys("bell-dot",60314),debugConsole:Ys("debug-console",60315),library:Ys("library",60316),output:Ys("output",60317),runAll:Ys("run-all",60318),syncIgnored:Ys("sync-ignored",60319),pinned:Ys("pinned",60320),githubInverted:Ys("github-inverted",60321),debugAlt:Ys("debug-alt",60305),serverProcess:Ys("server-process",60322),serverEnvironment:Ys("server-environment",60323),pass:Ys("pass",60324),stopCircle:Ys("stop-circle",60325),playCircle:Ys("play-circle",60326),record:Ys("record",60327),debugAltSmall:Ys("debug-alt-small",60328),vmConnect:Ys("vm-connect",60329),cloud:Ys("cloud",60330),merge:Ys("merge",60331),exportIcon:Ys("export",60332),graphLeft:Ys("graph-left",60333),magnet:Ys("magnet",60334),notebook:Ys("notebook",60335),redo:Ys("redo",60336),checkAll:Ys("check-all",60337),pinnedDirty:Ys("pinned-dirty",60338),passFilled:Ys("pass-filled",60339),circleLargeFilled:Ys("circle-large-filled",60340),circleLarge:Ys("circle-large",60341),circleLargeOutline:Ys("circle-large-outline",60341),combine:Ys("combine",60342),gather:Ys("gather",60342),table:Ys("table",60343),variableGroup:Ys("variable-group",60344),typeHierarchy:Ys("type-hierarchy",60345),typeHierarchySub:Ys("type-hierarchy-sub",60346),typeHierarchySuper:Ys("type-hierarchy-super",60347),gitPullRequestCreate:Ys("git-pull-request-create",60348),runAbove:Ys("run-above",60349),runBelow:Ys("run-below",60350),notebookTemplate:Ys("notebook-template",60351),debugRerun:Ys("debug-rerun",60352),workspaceTrusted:Ys("workspace-trusted",60353),workspaceUntrusted:Ys("workspace-untrusted",60354),workspaceUnspecified:Ys("workspace-unspecified",60355),terminalCmd:Ys("terminal-cmd",60356),terminalDebian:Ys("terminal-debian",60357),terminalLinux:Ys("terminal-linux",60358),terminalPowershell:Ys("terminal-powershell",60359),terminalTmux:Ys("terminal-tmux",60360),terminalUbuntu:Ys("terminal-ubuntu",60361),terminalBash:Ys("terminal-bash",60362),arrowSwap:Ys("arrow-swap",60363),copy:Ys("copy",60364),personAdd:Ys("person-add",60365),filterFilled:Ys("filter-filled",60366),wand:Ys("wand",60367),debugLineByLine:Ys("debug-line-by-line",60368),inspect:Ys("inspect",60369),layers:Ys("layers",60370),layersDot:Ys("layers-dot",60371),layersActive:Ys("layers-active",60372),compass:Ys("compass",60373),compassDot:Ys("compass-dot",60374),compassActive:Ys("compass-active",60375),azure:Ys("azure",60376),issueDraft:Ys("issue-draft",60377),gitPullRequestClosed:Ys("git-pull-request-closed",60378),gitPullRequestDraft:Ys("git-pull-request-draft",60379),debugAll:Ys("debug-all",60380),debugCoverage:Ys("debug-coverage",60381),runErrors:Ys("run-errors",60382),folderLibrary:Ys("folder-library",60383),debugContinueSmall:Ys("debug-continue-small",60384),beakerStop:Ys("beaker-stop",60385),graphLine:Ys("graph-line",60386),graphScatter:Ys("graph-scatter",60387),pieChart:Ys("pie-chart",60388),bracketDot:Ys("bracket-dot",60389),bracketError:Ys("bracket-error",60390),lockSmall:Ys("lock-small",60391),azureDevops:Ys("azure-devops",60392),verifiedFilled:Ys("verified-filled",60393),newLine:Ys("newline",60394),layout:Ys("layout",60395),layoutActivitybarLeft:Ys("layout-activitybar-left",60396),layoutActivitybarRight:Ys("layout-activitybar-right",60397),layoutPanelLeft:Ys("layout-panel-left",60398),layoutPanelCenter:Ys("layout-panel-center",60399),layoutPanelJustify:Ys("layout-panel-justify",60400),layoutPanelRight:Ys("layout-panel-right",60401),layoutPanel:Ys("layout-panel",60402),layoutSidebarLeft:Ys("layout-sidebar-left",60403),layoutSidebarRight:Ys("layout-sidebar-right",60404),layoutStatusbar:Ys("layout-statusbar",60405),layoutMenubar:Ys("layout-menubar",60406),layoutCentered:Ys("layout-centered",60407),layoutSidebarRightOff:Ys("layout-sidebar-right-off",60416),layoutPanelOff:Ys("layout-panel-off",60417),layoutSidebarLeftOff:Ys("layout-sidebar-left-off",60418),target:Ys("target",60408),indent:Ys("indent",60409),recordSmall:Ys("record-small",60410),errorSmall:Ys("error-small",60411),arrowCircleDown:Ys("arrow-circle-down",60412),arrowCircleLeft:Ys("arrow-circle-left",60413),arrowCircleRight:Ys("arrow-circle-right",60414),arrowCircleUp:Ys("arrow-circle-up",60415),heartFilled:Ys("heart-filled",60420),map:Ys("map",60421),mapFilled:Ys("map-filled",60422),circleSmall:Ys("circle-small",60423),bellSlash:Ys("bell-slash",60424),bellSlashDot:Ys("bell-slash-dot",60425),commentUnresolved:Ys("comment-unresolved",60426),gitPullRequestGoToChanges:Ys("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:Ys("git-pull-request-new-changes",60428),searchFuzzy:Ys("search-fuzzy",60429),commentDraft:Ys("comment-draft",60430),send:Ys("send",60431),sparkle:Ys("sparkle",60432),insert:Ys("insert",60433),mic:Ys("mic",60434),dialogError:Ys("dialog-error","error"),dialogWarning:Ys("dialog-warning","warning"),dialogInfo:Ys("dialog-info","info"),dialogClose:Ys("dialog-close","close"),treeItemExpanded:Ys("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:Ys("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:Ys("tree-filter-on-type-off","list-selection"),treeFilterClear:Ys("tree-filter-clear","close"),treeItemLoading:Ys("tree-item-loading","loading"),menuSelection:Ys("menu-selection","check"),menuSubmenu:Ys("menu-submenu","chevron-right"),menuBarMore:Ys("menubar-more","more"),scrollbarButtonLeft:Ys("scrollbar-button-left","triangle-left"),scrollbarButtonRight:Ys("scrollbar-button-right","triangle-right"),scrollbarButtonUp:Ys("scrollbar-button-up","triangle-up"),scrollbarButtonDown:Ys("scrollbar-button-down","triangle-down"),toolBarMore:Ys("toolbar-more","more"),quickInputBack:Ys("quick-input-back","arrow-left")};var eo,to;!function(e){e.isThemeColor=function(e){return e&&"object"==typeof e&&"string"==typeof e.id}}(eo||(eo={})),function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";const t=new RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function i(e){const r=t.exec(e.id);if(!r)return i(Xs.error);const[,n,s]=r,o=["codicon","codicon-"+n];return s&&o.push("codicon-modifier-"+s.substring(1)),o}e.asClassNameArray=i,e.asClassName=function(e){return i(e).join(" ")},e.asCSSSelector=function(e){return"."+i(e).join(".")},e.isThemeIcon=function(e){return e&&"object"==typeof e&&"string"==typeof e.id&&(void 0===e.color||eo.isThemeColor(e.color))};const r=new RegExp(`^\\$\\((${e.iconNameExpression}(?:${e.iconModifierExpression})?)\\)$`);e.fromString=function(e){const t=r.exec(e);if(!t)return;const[,i]=t;return{id:i}},e.fromId=function(e){return{id:e}},e.modify=function(e,t){let i=e.id;const r=i.lastIndexOf("~");return-1!==r&&(i=i.substring(0,r)),t&&(i=`${i}~${t}`),{id:i}},e.getModifier=function(e){const t=e.id.lastIndexOf("~");if(-1!==t)return e.id.substring(t+1)},e.isEqual=function(e,t){var i,r;return e.id===t.id&&(null===(i=e.color)||void 0===i?void 0:i.id)===(null===(r=t.color)||void 0===r?void 0:r.id)}}(to||(to={}));const io=new RegExp(`\\$\\(${to.iconNameExpression}(?:${to.iconModifierExpression})?\\)`,"g"),ro=new RegExp(`(\\\\)?${io.source}`,"g");new RegExp(`\\\\${io.source}`,"g"),new RegExp(`(\\s)?(\\\\)?${io.source}(\\s)?`,"g"),new RegExp(`\\$\\(${to.iconNameCharacter}+\\)`,"g");let no=class{constructor(e="",t=!1){var i,r,n;if(this.value=e,"string"!=typeof this.value)throw u("value");"boolean"==typeof t?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=null!==(i=t.isTrusted)&&void 0!==i?i:void 0,this.supportThemeIcons=null!==(r=t.supportThemeIcons)&&void 0!==r&&r,this.supportHtml=null!==(n=t.supportHtml)&&void 0!==n&&n)}appendText(e,t=0){var i;return this.value+=function(e){return e.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}(this.supportThemeIcons?(i=e,i.replace(ro,((e,t)=>t?e:`\\${e}`))):e).replace(/([ \t]+)/g,((e,t)=>"&nbsp;".repeat(t.length))).replace(/\>/gm,"\\>").replace(/\n/g,1===t?"\\\n":"\n\n"),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n```",this.value+=e,this.value+="\n",this.value+=t,this.value+="\n```\n",this}appendLink(e,t,i){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),i&&(this.value+=` "${this._escape(this._escape(i,'"'),")")}"`),this.value+=")",this}_escape(e,t){const i=new RegExp(Wt(t),"g");return e.replace(i,((t,i)=>"\\"!==e.charAt(i-1)?`\\${t}`:t))}};function so(e){return e instanceof no||!(!e||"object"!=typeof e)&&!("string"!=typeof e.value||"boolean"!=typeof e.isTrusted&&"object"!=typeof e.isTrusted&&void 0!==e.isTrusted||"boolean"!=typeof e.supportThemeIcons&&void 0!==e.supportThemeIcons)}let oo={};!function(){function e(e,t){t(oo)}e.amd=!0,function(t,i){e.amd?e(0,i):"object"==typeof exports&&"undefined"!=typeof module?i(exports):i((t="undefined"!=typeof globalThis?globalThis:t||self).marked={})}(this,(function(e){function t(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function r(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}e.defaults={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};var s=/[&<>"']/,o=/[&<>"']/g,a=/[<>"']|&(?!#?\w+;)/,l=/[<>"']|&(?!#?\w+;)/g,c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},u=function(e){return c[e]};function d(e,t){if(t){if(s.test(e))return e.replace(o,u)}else if(a.test(e))return e.replace(l,u);return e}var h=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function p(e){return e.replace(h,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}var g=/(^|[^\[])\^/g;function f(e,t){e="string"==typeof e?e:e.source,t=t||"";var i={replace:function(t,r){return r=(r=r.source||r).replace(g,"$1"),e=e.replace(t,r),i},getRegex:function(){return new RegExp(e,t)}};return i}var m=/[^\w:]/g,v=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function _(e,t,i){if(e){var r;try{r=decodeURIComponent(p(i)).replace(m,"").toLowerCase()}catch(_C){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}t&&!v.test(i)&&(i=function(e,t){y[" "+e]||(w.test(e)?y[" "+e]=e+"/":y[" "+e]=E(e,"/",!0));e=y[" "+e];var i=-1===e.indexOf(":");return"//"===t.substring(0,2)?i?t:e.replace(b,"$1")+t:"/"===t.charAt(0)?i?t:e.replace(x,"$1")+t:e+t}(t,i));try{i=encodeURI(i).replace(/%25/g,"%")}catch(_C){return null}return i}var y={},w=/^[^:]+:\/*[^/]*$/,b=/^([^:]+:)[\s\S]*$/,x=/^([^:]+:\/*[^/]*)[\s\S]*$/;var C={exec:function(){}};function D(e){for(var t,i,r=1;r<arguments.length;r++)for(i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}function S(e,t){var i=e.replace(/\|/g,(function(e,t,i){for(var r=!1,n=t;--n>=0&&"\\"===i[n];)r=!r;return r?"|":" |"})).split(/ \|/),r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function E(e,t,i){var r=e.length;if(0===r)return"";for(var n=0;n<r;){var s=e.charAt(r-n-1);if(s!==t||i){if(s===t||!i)break;n++}else n++}return e.slice(0,r-n)}function k(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function I(e,t){if(t<1)return"";for(var i="";t>1;)1&t&&(i+=e),t>>=1,e+=e;return i+e}function T(e,t,i,r){var n=t.href,s=t.title?d(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){r.state.inLink=!0;var a={type:"link",raw:i,href:n,title:s,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:i,href:n,title:s,text:d(o)}}var P=function(){function t(t){this.options=t||e.defaults}var i=t.prototype;return i.space=function(e){var t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}},i.code=function(e){var t=this.rules.block.code.exec(e);if(t){var i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:E(i,"\n")}}},i.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var i=t[0],r=function(e,t){var i=e.match(/^(\s+)(?:```)/);if(null===i)return t;var r=i[1];return t.split("\n").map((function(e){var t=e.match(/^\s+/);return null===t?e:t[0].length>=r.length?e.slice(r.length):e})).join("\n")}(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim():t[2],text:r}}},i.heading=function(e){var t=this.rules.block.heading.exec(e);if(t){var i=t[2].trim();if(/#$/.test(i)){var r=E(i,"#");this.options.pedantic?i=r.trim():r&&!/ $/.test(r)||(i=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:this.lexer.inline(i)}}},i.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},i.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var i=t[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(i,[]),text:i}}},i.list=function(e){var t=this.rules.block.list.exec(e);if(t){var i,n,s,o,a,l,c,u,d,h,p,g,f=t[1].trim(),m=f.length>1,v={type:"list",raw:"",ordered:m,start:m?+f.slice(0,-1):"",loose:!1,items:[]};f=m?"\\d{1,9}\\"+f.slice(-1):"\\"+f,this.options.pedantic&&(f=m?f:"[*+-]");for(var _=new RegExp("^( {0,3}"+f+")((?:[\t ][^\\n]*)?(?:\\n|$))");e&&(g=!1,t=_.exec(e))&&!this.rules.block.hr.test(e);){if(i=t[0],e=e.substring(i.length),u=t[2].split("\n",1)[0],d=e.split("\n",1)[0],this.options.pedantic?(o=2,p=u.trimLeft()):(o=(o=t[2].search(/[^ ]/))>4?1:o,p=u.slice(o),o+=t[1].length),l=!1,!u&&/^ *$/.test(d)&&(i+=d+"\n",e=e.substring(d.length+1),g=!0),!g)for(var y=new RegExp("^ {0,"+Math.min(3,o-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),w=new RegExp("^ {0,"+Math.min(3,o-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),b=new RegExp("^ {0,"+Math.min(3,o-1)+"}(?:```|~~~)"),x=new RegExp("^ {0,"+Math.min(3,o-1)+"}#");e&&(u=h=e.split("\n",1)[0],this.options.pedantic&&(u=u.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!b.test(u))&&!x.test(u)&&!y.test(u)&&!w.test(e);){if(u.search(/[^ ]/)>=o||!u.trim())p+="\n"+u.slice(o);else{if(l)break;p+="\n"+u}l||u.trim()||(l=!0),i+=h+"\n",e=e.substring(h.length+1)}v.loose||(c?v.loose=!0:/\n *\n *$/.test(i)&&(c=!0)),this.options.gfm&&(n=/^\[[ xX]\] /.exec(p))&&(s="[ ] "!==n[0],p=p.replace(/^\[[ xX]\] +/,"")),v.items.push({type:"list_item",raw:i,task:!!n,checked:s,loose:!1,text:p}),v.raw+=i}v.items[v.items.length-1].raw=i.trimRight(),v.items[v.items.length-1].text=p.trimRight(),v.raw=v.raw.trimRight();var C=v.items.length;for(a=0;a<C;a++){this.lexer.state.top=!1,v.items[a].tokens=this.lexer.blockTokens(v.items[a].text,[]);var D=v.items[a].tokens.filter((function(e){return"space"===e.type})),S=D.every((function(e){for(var t,i=0,n=r(e.raw.split(""));!(t=n()).done;){if("\n"===t.value&&(i+=1),i>1)return!0}return!1}));!v.loose&&D.length&&S&&(v.loose=!0,v.items[a].loose=!0)}return v}},i.html=function(e){var t=this.rules.block.html.exec(e);if(t){var i={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};if(this.options.sanitize){var r=this.options.sanitizer?this.options.sanitizer(t[0]):d(t[0]);i.type="paragraph",i.text=r,i.tokens=this.lexer.inline(r)}return i}},i.def=function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}},i.table=function(e){var t=this.rules.block.table.exec(e);if(t){var i={type:"table",header:S(t[1]).map((function(e){return{text:e}})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){i.raw=t[0];var r,n,s,o,a=i.align.length;for(r=0;r<a;r++)/^ *-+: *$/.test(i.align[r])?i.align[r]="right":/^ *:-+: *$/.test(i.align[r])?i.align[r]="center":/^ *:-+ *$/.test(i.align[r])?i.align[r]="left":i.align[r]=null;for(a=i.rows.length,r=0;r<a;r++)i.rows[r]=S(i.rows[r],i.header.length).map((function(e){return{text:e}}));for(a=i.header.length,n=0;n<a;n++)i.header[n].tokens=this.lexer.inline(i.header[n].text);for(a=i.rows.length,n=0;n<a;n++)for(o=i.rows[n],s=0;s<o.length;s++)o[s].tokens=this.lexer.inline(o[s].text);return i}}},i.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}},i.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t){var i="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:i,tokens:this.lexer.inline(i)}}},i.text=function(e){var t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}},i.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:d(t[1])}},i.tag=function(e){var t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):d(t[0]):t[0]}},i.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;var r=E(i.slice(0,-1),"\\");if((i.length-r.length)%2==0)return}else{var n=function(e,t){if(-1===e.indexOf(t[1]))return-1;for(var i=e.length,r=0,n=0;n<i;n++)if("\\"===e[n])n++;else if(e[n]===t[0])r++;else if(e[n]===t[1]&&--r<0)return n;return-1}(t[2],"()");if(n>-1){var s=(0===t[0].indexOf("!")?5:4)+t[1].length+n;t[2]=t[2].substring(0,n),t[0]=t[0].substring(0,s).trim(),t[3]=""}}var o=t[2],a="";if(this.options.pedantic){var l=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);l&&(o=l[1],a=l[3])}else a=t[3]?t[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(o=this.options.pedantic&&!/>$/.test(i)?o.slice(1):o.slice(1,-1)),T(t,{href:o?o.replace(this.rules.inline._escapes,"$1"):o,title:a?a.replace(this.rules.inline._escapes,"$1"):a},t[0],this.lexer)}},i.reflink=function(e,t){var i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){var r=(i[2]||i[1]).replace(/\s+/g," ");if(!(r=t[r.toLowerCase()])||!r.href){var n=i[0].charAt(0);return{type:"text",raw:n,text:n}}return T(i,r,i[0],this.lexer)}},i.emStrong=function(e,t,i){void 0===i&&(i="");var r=this.rules.inline.emStrong.lDelim.exec(e);if(r&&(!r[3]||!i.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var n=r[1]||r[2]||"";if(!n||n&&(""===i||this.rules.inline.punctuation.exec(i))){var s,o,a=r[0].length-1,l=a,c=0,u="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+a);null!=(r=u.exec(t));)if(s=r[1]||r[2]||r[3]||r[4]||r[5]||r[6])if(o=s.length,r[3]||r[4])l+=o;else if(!((r[5]||r[6])&&a%3)||(a+o)%3){if(!((l-=o)>0)){if(o=Math.min(o,o+l+c),Math.min(a,o)%2){var d=e.slice(1,a+r.index+o);return{type:"em",raw:e.slice(0,a+r.index+o+1),text:d,tokens:this.lexer.inlineTokens(d)}}var h=e.slice(2,a+r.index+o-1);return{type:"strong",raw:e.slice(0,a+r.index+o+1),text:h,tokens:this.lexer.inlineTokens(h)}}}else c+=o}}},i.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var i=t[2].replace(/\n/g," "),r=/[^ ]/.test(i),n=/^ /.test(i)&&/ $/.test(i);return r&&n&&(i=i.substring(1,i.length-1)),i=d(i,!0),{type:"codespan",raw:t[0],text:i}}},i.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},i.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}},i.autolink=function(e,t){var i,r,n=this.rules.inline.autolink.exec(e);if(n)return r="@"===n[2]?"mailto:"+(i=d(this.options.mangle?t(n[1]):n[1])):i=d(n[1]),{type:"link",raw:n[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}},i.url=function(e,t){var i;if(i=this.rules.inline.url.exec(e)){var r,n;if("@"===i[2])n="mailto:"+(r=d(this.options.mangle?t(i[0]):i[0]));else{var s;do{s=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0]}while(s!==i[0]);r=d(i[0]),n="www."===i[1]?"http://"+r:r}return{type:"link",raw:i[0],text:r,href:n,tokens:[{type:"text",raw:r,text:r}]}}},i.inlineText=function(e,t){var i,r=this.rules.inline.text.exec(e);if(r)return i=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):d(r[0]):r[0]:d(this.options.smartypants?t(r[0]):r[0]),{type:"text",raw:r[0],text:i}},t}(),A={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:C,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};A.def=f(A.def).replace("label",A._label).replace("title",A._title).getRegex(),A.bullet=/(?:[*+-]|\d{1,9}[.)])/,A.listItemStart=f(/^( *)(bull) */).replace("bull",A.bullet).getRegex(),A.list=f(A.list).replace(/bull/g,A.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+A.def.source+")").getRegex(),A._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",A._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,A.html=f(A.html,"i").replace("comment",A._comment).replace("tag",A._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),A.paragraph=f(A._paragraph).replace("hr",A.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",A._tag).getRegex(),A.blockquote=f(A.blockquote).replace("paragraph",A.paragraph).getRegex(),A.normal=D({},A),A.gfm=D({},A.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),A.gfm.table=f(A.gfm.table).replace("hr",A.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",A._tag).getRegex(),A.gfm.paragraph=f(A._paragraph).replace("hr",A.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",A.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",A._tag).getRegex(),A.pedantic=D({},A.normal,{html:f("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",A._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:C,paragraph:f(A.normal._paragraph).replace("hr",A.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",A.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var R={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:C,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:C,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function F(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function $(e){var t,i,r="",n=e.length;for(t=0;t<n;t++)i=e.charCodeAt(t),Math.random()>.5&&(i="x"+i.toString(16)),r+="&#"+i+";";return r}R._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",R.punctuation=f(R.punctuation).replace(/punctuation/g,R._punctuation).getRegex(),R.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,R.escapedEmSt=/\\\*|\\_/g,R._comment=f(A._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),R.emStrong.lDelim=f(R.emStrong.lDelim).replace(/punct/g,R._punctuation).getRegex(),R.emStrong.rDelimAst=f(R.emStrong.rDelimAst,"g").replace(/punct/g,R._punctuation).getRegex(),R.emStrong.rDelimUnd=f(R.emStrong.rDelimUnd,"g").replace(/punct/g,R._punctuation).getRegex(),R._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,R._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,R._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,R.autolink=f(R.autolink).replace("scheme",R._scheme).replace("email",R._email).getRegex(),R._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,R.tag=f(R.tag).replace("comment",R._comment).replace("attribute",R._attribute).getRegex(),R._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,R._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,R._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,R.link=f(R.link).replace("label",R._label).replace("href",R._href).replace("title",R._title).getRegex(),R.reflink=f(R.reflink).replace("label",R._label).replace("ref",A._label).getRegex(),R.nolink=f(R.nolink).replace("ref",A._label).getRegex(),R.reflinkSearch=f(R.reflinkSearch,"g").replace("reflink",R.reflink).replace("nolink",R.nolink).getRegex(),R.normal=D({},R),R.pedantic=D({},R.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:f(/^!?\[(label)\]\((.*?)\)/).replace("label",R._label).getRegex(),reflink:f(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",R._label).getRegex()}),R.gfm=D({},R.normal,{escape:f(R.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),R.gfm.url=f(R.gfm.url,"i").replace("email",R.gfm._extended_email).getRegex(),R.breaks=D({},R.gfm,{br:f(R.br).replace("{2,}","*").getRegex(),text:f(R.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var L=function(){function i(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||e.defaults,this.options.tokenizer=this.options.tokenizer||new P,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var i={block:A.normal,inline:R.normal};this.options.pedantic?(i.block=A.pedantic,i.inline=R.pedantic):this.options.gfm&&(i.block=A.gfm,this.options.breaks?i.inline=R.breaks:i.inline=R.gfm),this.tokenizer.rules=i}i.lex=function(e,t){return new i(t).lex(e)},i.lexInline=function(e,t){return new i(t).inlineTokens(e)};var r,n,s,o=i.prototype;return o.lex=function(e){var t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens},o.blockTokens=function(e,t){var i,r,n,s,o=this;for(void 0===t&&(t=[]),e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(function(e,t,i){return t+"    ".repeat(i.length)}));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((function(r){return!!(i=r.call({lexer:o},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)}))))if(i=this.tokenizer.space(e))e=e.substring(i.raw.length),1===i.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(i);else if(i=this.tokenizer.code(e))e=e.substring(i.raw.length),!(r=t[t.length-1])||"paragraph"!==r.type&&"text"!==r.type?t.push(i):(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(i=this.tokenizer.fences(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.heading(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.hr(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.blockquote(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.list(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.html(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.def(e))e=e.substring(i.raw.length),!(r=t[t.length-1])||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(r.raw+="\n"+i.raw,r.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(i=this.tokenizer.table(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.lheading(e))e=e.substring(i.raw.length),t.push(i);else if(n=e,this.options.extensions&&this.options.extensions.startBlock&&function(){var t=1/0,i=e.slice(1),r=void 0;o.options.extensions.startBlock.forEach((function(e){"number"==typeof(r=e.call({lexer:this},i))&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(n=e.substring(0,t+1))}(),this.state.top&&(i=this.tokenizer.paragraph(n)))r=t[t.length-1],s&&"paragraph"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i),s=n.length!==e.length,e=e.substring(i.raw.length);else if(i=this.tokenizer.text(e))e=e.substring(i.raw.length),(r=t[t.length-1])&&"text"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i);else if(e){var a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}return this.state.top=!0,t},o.inline=function(e,t){return void 0===t&&(t=[]),this.inlineQueue.push({src:e,tokens:t}),t},o.inlineTokens=function(e,t){var i,r,n,s=this;void 0===t&&(t=[]);var o,a,l,c=e;if(this.tokens.links){var u=Object.keys(this.tokens.links);if(u.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(c));)u.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(c=c.slice(0,o.index)+"["+I("a",o[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(c));)c=c.slice(0,o.index)+"["+I("a",o[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.escapedEmSt.exec(c));)c=c.slice(0,o.index)+"++"+c.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(a||(l=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((function(r){return!!(i=r.call({lexer:s},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)}))))if(i=this.tokenizer.escape(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.tag(e))e=e.substring(i.raw.length),(r=t[t.length-1])&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);else if(i=this.tokenizer.link(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(i.raw.length),(r=t[t.length-1])&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);else if(i=this.tokenizer.emStrong(e,c,l))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.codespan(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.br(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.del(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.autolink(e,$))e=e.substring(i.raw.length),t.push(i);else if(this.state.inLink||!(i=this.tokenizer.url(e,$))){if(n=e,this.options.extensions&&this.options.extensions.startInline&&function(){var t=1/0,i=e.slice(1),r=void 0;s.options.extensions.startInline.forEach((function(e){"number"==typeof(r=e.call({lexer:this},i))&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(n=e.substring(0,t+1))}(),i=this.tokenizer.inlineText(n,F))e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(l=i.raw.slice(-1)),a=!0,(r=t[t.length-1])&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);else if(e){var d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}throw new Error(d)}}else e=e.substring(i.raw.length),t.push(i);return t},r=i,s=[{key:"rules",get:function(){return{block:A,inline:R}}}],(n=null)&&t(r.prototype,n),s&&t(r,s),Object.defineProperty(r,"prototype",{writable:!1}),i}(),O=function(){function t(t){this.options=t||e.defaults}var i=t.prototype;return i.code=function(e,t,i){var r=(t||"").match(/\S*/)[0];if(this.options.highlight){var n=this.options.highlight(e,r);null!=n&&n!==e&&(i=!0,e=n)}return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+d(r,!0)+'">'+(i?e:d(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:d(e,!0))+"</code></pre>\n"},i.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},i.html=function(e){return e},i.heading=function(e,t,i,r){return this.options.headerIds?"<h"+t+' id="'+(this.options.headerPrefix+r.slug(i))+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},i.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.list=function(e,t,i){var r=t?"ol":"ul";return"<"+r+(t&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+r+">\n"},i.listitem=function(e){return"<li>"+e+"</li>\n"},i.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},i.paragraph=function(e){return"<p>"+e+"</p>\n"},i.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},i.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},i.tablecell=function(e,t){var i=t.header?"th":"td";return(t.align?"<"+i+' align="'+t.align+'">':"<"+i+">")+e+"</"+i+">\n"},i.strong=function(e){return"<strong>"+e+"</strong>"},i.em=function(e){return"<em>"+e+"</em>"},i.codespan=function(e){return"<code>"+e+"</code>"},i.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.del=function(e){return"<del>"+e+"</del>"},i.link=function(e,t,i){if(null===(e=_(this.options.sanitize,this.options.baseUrl,e)))return i;var r='<a href="'+d(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+i+"</a>"},i.image=function(e,t,i){if(null===(e=_(this.options.sanitize,this.options.baseUrl,e)))return i;var r='<img src="'+e+'" alt="'+i+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},i.text=function(e){return e},t}(),M=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,i){return""+i},t.image=function(e,t,i){return""+i},t.br=function(){return""},e}(),N=function(){function e(){this.seen={}}var t=e.prototype;return t.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},t.getNextSafeSlug=function(e,t){var i=e,r=0;if(this.seen.hasOwnProperty(i)){r=this.seen[e];do{i=e+"-"+ ++r}while(this.seen.hasOwnProperty(i))}return t||(this.seen[e]=r,this.seen[i]=0),i},t.slug=function(e,t){void 0===t&&(t={});var i=this.serialize(e);return this.getNextSafeSlug(i,t.dryrun)},e}(),H=function(){function t(t){this.options=t||e.defaults,this.options.renderer=this.options.renderer||new O,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new M,this.slugger=new N}t.parse=function(e,i){return new t(i).parse(e)},t.parseInline=function(e,i){return new t(i).parseInline(e)};var i=t.prototype;return i.parse=function(e,t){void 0===t&&(t=!0);var i,r,n,s,o,a,l,c,u,d,h,g,f,m,v,_,y,w,b,x="",C=e.length;for(i=0;i<C;i++)if(d=e[i],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[d.type])||!1===(b=this.options.extensions.renderers[d.type].call({parser:this},d))&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(d.type))switch(d.type){case"space":continue;case"hr":x+=this.renderer.hr();continue;case"heading":x+=this.renderer.heading(this.parseInline(d.tokens),d.depth,p(this.parseInline(d.tokens,this.textRenderer)),this.slugger);continue;case"code":x+=this.renderer.code(d.text,d.lang,d.escaped);continue;case"table":for(c="",l="",s=d.header.length,r=0;r<s;r++)l+=this.renderer.tablecell(this.parseInline(d.header[r].tokens),{header:!0,align:d.align[r]});for(c+=this.renderer.tablerow(l),u="",s=d.rows.length,r=0;r<s;r++){for(l="",o=(a=d.rows[r]).length,n=0;n<o;n++)l+=this.renderer.tablecell(this.parseInline(a[n].tokens),{header:!1,align:d.align[n]});u+=this.renderer.tablerow(l)}x+=this.renderer.table(c,u);continue;case"blockquote":u=this.parse(d.tokens),x+=this.renderer.blockquote(u);continue;case"list":for(h=d.ordered,g=d.start,f=d.loose,s=d.items.length,u="",r=0;r<s;r++)_=(v=d.items[r]).checked,y=v.task,m="",v.task&&(w=this.renderer.checkbox(_),f?v.tokens.length>0&&"paragraph"===v.tokens[0].type?(v.tokens[0].text=w+" "+v.tokens[0].text,v.tokens[0].tokens&&v.tokens[0].tokens.length>0&&"text"===v.tokens[0].tokens[0].type&&(v.tokens[0].tokens[0].text=w+" "+v.tokens[0].tokens[0].text)):v.tokens.unshift({type:"text",text:w}):m+=w),m+=this.parse(v.tokens,f),u+=this.renderer.listitem(m,y,_);x+=this.renderer.list(u,h,g);continue;case"html":x+=this.renderer.html(d.text);continue;case"paragraph":x+=this.renderer.paragraph(this.parseInline(d.tokens));continue;case"text":for(u=d.tokens?this.parseInline(d.tokens):d.text;i+1<C&&"text"===e[i+1].type;)u+="\n"+((d=e[++i]).tokens?this.parseInline(d.tokens):d.text);x+=t?this.renderer.paragraph(u):u;continue;default:var D='Token with "'+d.type+'" type was not found.';if(this.options.silent)return void console.error(D);throw new Error(D)}else x+=b||"";return x},i.parseInline=function(e,t){t=t||this.renderer;var i,r,n,s="",o=e.length;for(i=0;i<o;i++)if(r=e[i],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type])||!1===(n=this.options.extensions.renderers[r.type].call({parser:this},r))&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type))switch(r.type){case"escape":case"text":s+=t.text(r.text);break;case"html":s+=t.html(r.text);break;case"link":s+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break;case"image":s+=t.image(r.href,r.title,r.text);break;case"strong":s+=t.strong(this.parseInline(r.tokens,t));break;case"em":s+=t.em(this.parseInline(r.tokens,t));break;case"codespan":s+=t.codespan(r.text);break;case"br":s+=t.br();break;case"del":s+=t.del(this.parseInline(r.tokens,t));break;default:var a='Token with "'+r.type+'" type was not found.';if(this.options.silent)return void console.error(a);throw new Error(a)}else s+=n||"";return s},t}();function U(e,t,i){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(i=t,t=null),k(t=D({},U.defaults,t||{})),i){var r,n=t.highlight;try{r=L.lex(e,t)}catch(_C){return i(_C)}var s=function(e){var s;if(!e)try{t.walkTokens&&U.walkTokens(r,t.walkTokens),s=H.parse(r,t)}catch(_C){e=_C}return t.highlight=n,e?i(e):i(null,s)};if(!n||n.length<3)return s();if(delete t.highlight,!r.length)return s();var o=0;return U.walkTokens(r,(function(e){"code"===e.type&&(o++,setTimeout((function(){n(e.text,e.lang,(function(t,i){if(t)return s(t);null!=i&&i!==e.text&&(e.text=i,e.escaped=!0),0===--o&&s()}))}),0))})),void(0===o&&s())}function a(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+d(e.message+"",!0)+"</pre>";throw e}try{var l=L.lex(e,t);if(t.walkTokens){if(t.async)return Promise.all(U.walkTokens(l,t.walkTokens)).then((function(){return H.parse(l,t)})).catch(a);U.walkTokens(l,t.walkTokens)}return H.parse(l,t)}catch(_C){a(_C)}}U.options=U.setOptions=function(t){var i;return D(U.defaults,t),i=U.defaults,e.defaults=i,U},U.getDefaults=n,U.defaults=e.defaults,U.use=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var r,n=D.apply(void 0,[{}].concat(t)),s=U.defaults.extensions||{renderers:{},childTokens:{}};t.forEach((function(e){if(e.extensions&&(r=!0,e.extensions.forEach((function(e){if(!e.name)throw new Error("extension name required");if(e.renderer){var t=s.renderers?s.renderers[e.name]:null;s.renderers[e.name]=t?function(){for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];var s=e.renderer.apply(this,r);return!1===s&&(s=t.apply(this,r)),s}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");s[e.level]?s[e.level].unshift(e.tokenizer):s[e.level]=[e.tokenizer],e.start&&("block"===e.level?s.startBlock?s.startBlock.push(e.start):s.startBlock=[e.start]:"inline"===e.level&&(s.startInline?s.startInline.push(e.start):s.startInline=[e.start]))}e.childTokens&&(s.childTokens[e.name]=e.childTokens)}))),e.renderer&&function(){var t=U.defaults.renderer||new O,i=function(i){var r=t[i];t[i]=function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];var a=e.renderer[i].apply(t,s);return!1===a&&(a=r.apply(t,s)),a}};for(var r in e.renderer)i(r);n.renderer=t}(),e.tokenizer&&function(){var t=U.defaults.tokenizer||new P,i=function(i){var r=t[i];t[i]=function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];var a=e.tokenizer[i].apply(t,s);return!1===a&&(a=r.apply(t,s)),a}};for(var r in e.tokenizer)i(r);n.tokenizer=t}(),e.walkTokens){var t=U.defaults.walkTokens;n.walkTokens=function(i){var r=[];return r.push(e.walkTokens.call(this,i)),t&&(r=r.concat(t.call(this,i))),r}}r&&(n.extensions=s),U.setOptions(n)}))},U.walkTokens=function(e,t){for(var i,n=[],s=function(){var e=i.value;switch(n=n.concat(t.call(U,e)),e.type){case"table":for(var s,o=r(e.header);!(s=o()).done;){var a=s.value;n=n.concat(U.walkTokens(a.tokens,t))}for(var l,c=r(e.rows);!(l=c()).done;)for(var u,d=r(l.value);!(u=d()).done;){var h=u.value;n=n.concat(U.walkTokens(h.tokens,t))}break;case"list":n=n.concat(U.walkTokens(e.items,t));break;default:U.defaults.extensions&&U.defaults.extensions.childTokens&&U.defaults.extensions.childTokens[e.type]?U.defaults.extensions.childTokens[e.type].forEach((function(i){n=n.concat(U.walkTokens(e[i],t))})):e.tokens&&(n=n.concat(U.walkTokens(e.tokens,t)))}},o=r(e);!(i=o()).done;)s();return n},U.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");k(t=D({},U.defaults,t||{}));try{var i=L.lexInline(e,t);return t.walkTokens&&U.walkTokens(i,t.walkTokens),H.parseInline(i,t)}catch(_C){if(_C.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+d(_C.message+"",!0)+"</pre>";throw _C}},U.Parser=H,U.parser=H.parse,U.Renderer=O,U.TextRenderer=M,U.Lexer=L,U.lexer=L.lex,U.Tokenizer=P,U.Slugger=N,U.parse=U;var B=U.options,V=U.setOptions,W=U.use,z=U.walkTokens,j=U.parseInline,q=U,K=H.parse,G=L.lex;e.Lexer=L,e.Parser=H,e.Renderer=O,e.Slugger=N,e.TextRenderer=M,e.Tokenizer=P,e.getDefaults=n,e.lexer=G,e.marked=U,e.options=B,e.parse=q,e.parseInline=j,e.parser=K,e.setOptions=V,e.use=W,e.walkTokens=z,Object.defineProperty(e,"__esModule",{value:!0})}))}(),oo.Lexer||exports.Lexer,oo.Parser||exports.Parser,oo.Renderer||exports.Renderer,oo.Slugger||exports.Slugger,oo.TextRenderer||exports.TextRenderer,oo.Tokenizer||exports.Tokenizer,oo.getDefaults||exports.getDefaults,oo.lexer||exports.lexer;var ao=oo.marked||exports.marked;function lo(e,t=0){if(!e||t>200)return e;if("object"==typeof e){switch(e.$mid){case 1:return pt.revive(e);case 2:return new RegExp(e.source,e.flags);case 16:return new Date(e.source)}if(e instanceof I||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let i=0;i<e.length;++i)e[i]=lo(e[i],t+1);else for(const i in e)Object.hasOwnProperty.call(e,i)&&(e[i]=lo(e[i],t+1))}return e}oo.options||exports.options,oo.parse||exports.parse,oo.parseInline||exports.parseInline,oo.parser||exports.parser,oo.setOptions||exports.setOptions,oo.use||exports.use,oo.walkTokens||exports.walkTokens;const co=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),uo=/^(.+)\/(.+?)(;.+)?$/;function ho(e,t){var i;const r=uo.exec(e);return r?`${r[1].toLowerCase()}/${r[2].toLowerCase()}${null!==(i=r[3])&&void 0!==i?i:""}`:t?void 0:e}let po=class e{constructor(e,t){this.lineNumber=e,this.column=t}with(t=this.lineNumber,i=this.column){return t===this.lineNumber&&i===this.column?this:new e(t,i)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(t){return e.equals(this,t)}static equals(e,t){return!e&&!t||!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(t){return e.isBefore(this,t)}static isBefore(e,t){return e.lineNumber<t.lineNumber||!(t.lineNumber<e.lineNumber)&&e.column<t.column}isBeforeOrEqual(t){return e.isBeforeOrEqual(this,t)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber||!(t.lineNumber<e.lineNumber)&&e.column<=t.column}static compare(e,t){const i=0|e.lineNumber,r=0|t.lineNumber;if(i===r){return(0|e.column)-(0|t.column)}return i-r}clone(){return new e(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(t){return new e(t.lineNumber,t.column)}static isIPosition(e){return e&&"number"==typeof e.lineNumber&&"number"==typeof e.column}},go=class e{constructor(e,t,i,r){e>i||e===i&&t>r?(this.startLineNumber=i,this.startColumn=r,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=r)}isEmpty(){return e.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(t){return e.containsPosition(this,t)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber)&&(!(t.lineNumber===e.startLineNumber&&t.column<e.startColumn)&&!(t.lineNumber===e.endLineNumber&&t.column>e.endColumn))}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber)&&(!(t.lineNumber===e.startLineNumber&&t.column<=e.startColumn)&&!(t.lineNumber===e.endLineNumber&&t.column>=e.endColumn))}containsRange(t){return e.containsRange(this,t)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber)&&(!(t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber)&&(!(t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn)&&!(t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)))}strictContainsRange(t){return e.strictContainsRange(this,t)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber)&&(!(t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber)&&(!(t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn)&&!(t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)))}plusRange(t){return e.plusRange(this,t)}static plusRange(t,i){let r,n,s,o;return i.startLineNumber<t.startLineNumber?(r=i.startLineNumber,n=i.startColumn):i.startLineNumber===t.startLineNumber?(r=i.startLineNumber,n=Math.min(i.startColumn,t.startColumn)):(r=t.startLineNumber,n=t.startColumn),i.endLineNumber>t.endLineNumber?(s=i.endLineNumber,o=i.endColumn):i.endLineNumber===t.endLineNumber?(s=i.endLineNumber,o=Math.max(i.endColumn,t.endColumn)):(s=t.endLineNumber,o=t.endColumn),new e(r,n,s,o)}intersectRanges(t){return e.intersectRanges(this,t)}static intersectRanges(t,i){let r=t.startLineNumber,n=t.startColumn,s=t.endLineNumber,o=t.endColumn;const a=i.startLineNumber,l=i.startColumn,c=i.endLineNumber,u=i.endColumn;return r<a?(r=a,n=l):r===a&&(n=Math.max(n,l)),s>c?(s=c,o=u):s===c&&(o=Math.min(o,u)),r>s||r===s&&n>o?null:new e(r,n,s,o)}equalsRange(t){return e.equalsRange(this,t)}static equalsRange(e,t){return!e&&!t||!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return e.getEndPosition(this)}static getEndPosition(e){return new po(e.endLineNumber,e.endColumn)}getStartPosition(){return e.getStartPosition(this)}static getStartPosition(e){return new po(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(t,i){return new e(this.startLineNumber,this.startColumn,t,i)}setStartPosition(t,i){return new e(t,i,this.endLineNumber,this.endColumn)}collapseToStart(){return e.collapseToStart(this)}static collapseToStart(t){return new e(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn)}collapseToEnd(){return e.collapseToEnd(this)}static collapseToEnd(t){return new e(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn)}delta(t){return new e(this.startLineNumber+t,this.startColumn,this.endLineNumber+t,this.endColumn)}static fromPositions(t,i=t){return new e(t.lineNumber,t.column,i.lineNumber,i.column)}static lift(t){return t?new e(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):null}static isIRange(e){return e&&"number"==typeof e.startLineNumber&&"number"==typeof e.startColumn&&"number"==typeof e.endLineNumber&&"number"==typeof e.endColumn}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn)&&!(t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn)&&!(t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const i=0|e.startLineNumber,r=0|t.startLineNumber;if(i===r){const i=0|e.startColumn,r=0|t.startColumn;if(i===r){const i=0|e.endLineNumber,r=0|t.endLineNumber;if(i===r){return(0|e.endColumn)-(0|t.endColumn)}return i-r}return i-r}return i-r}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};var fo,mo,vo,_o,yo,wo=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{l(r.next(e))}catch(_C){s(_C)}}function a(e){try{l(r.throw(e))}catch(_C){s(_C)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};class bo extends x{get isResolved(){return this._isResolved}constructor(e,t,i){super(),this._registry=e,this._languageId=t,this._factory=i,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}resolve(){return wo(this,void 0,void 0,(function*(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}))}_create(){return wo(this,void 0,void 0,(function*(){const e=yield this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}))}}!function(e){const t=new Map;t.set(0,Xs.symbolMethod),t.set(1,Xs.symbolFunction),t.set(2,Xs.symbolConstructor),t.set(3,Xs.symbolField),t.set(4,Xs.symbolVariable),t.set(5,Xs.symbolClass),t.set(6,Xs.symbolStruct),t.set(7,Xs.symbolInterface),t.set(8,Xs.symbolModule),t.set(9,Xs.symbolProperty),t.set(10,Xs.symbolEvent),t.set(11,Xs.symbolOperator),t.set(12,Xs.symbolUnit),t.set(13,Xs.symbolValue),t.set(15,Xs.symbolEnum),t.set(14,Xs.symbolConstant),t.set(15,Xs.symbolEnum),t.set(16,Xs.symbolEnumMember),t.set(17,Xs.symbolKeyword),t.set(27,Xs.symbolSnippet),t.set(18,Xs.symbolText),t.set(19,Xs.symbolColor),t.set(20,Xs.symbolFile),t.set(21,Xs.symbolReference),t.set(22,Xs.symbolCustomColor),t.set(23,Xs.symbolFolder),t.set(24,Xs.symbolTypeParameter),t.set(25,Xs.account),t.set(26,Xs.issues),e.toIcon=function(e){let i=t.get(e);return i||(console.info("No codicon found for CompletionItemKind "+e),i=Xs.symbolProperty),i};const i=new Map;i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26),e.fromString=function(e,t){let r=i.get(e);return void 0!==r||t||(r=9),r}}(fo||(fo={})),function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"}(mo||(mo={})),function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"}(vo||(vo={})),function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"}(_o||(_o={})),J(0,"array"),J(0,"boolean"),J(0,"class"),J(0,"constant"),J(0,"constructor"),J(0,"enumeration"),J(0,"enumeration member"),J(0,"event"),J(0,"field"),J(0,"file"),J(0,"function"),J(0,"interface"),J(0,"key"),J(0,"method"),J(0,"module"),J(0,"namespace"),J(0,"null"),J(0,"number"),J(0,"object"),J(0,"operator"),J(0,"package"),J(0,"property"),J(0,"string"),J(0,"struct"),J(0,"type parameter"),J(0,"variable"),function(e){const t=new Map;t.set(0,Xs.symbolFile),t.set(1,Xs.symbolModule),t.set(2,Xs.symbolNamespace),t.set(3,Xs.symbolPackage),t.set(4,Xs.symbolClass),t.set(5,Xs.symbolMethod),t.set(6,Xs.symbolProperty),t.set(7,Xs.symbolField),t.set(8,Xs.symbolConstructor),t.set(9,Xs.symbolEnum),t.set(10,Xs.symbolInterface),t.set(11,Xs.symbolFunction),t.set(12,Xs.symbolVariable),t.set(13,Xs.symbolConstant),t.set(14,Xs.symbolString),t.set(15,Xs.symbolNumber),t.set(16,Xs.symbolBoolean),t.set(17,Xs.symbolArray),t.set(18,Xs.symbolObject),t.set(19,Xs.symbolKey),t.set(20,Xs.symbolNull),t.set(21,Xs.symbolEnumMember),t.set(22,Xs.symbolStruct),t.set(23,Xs.symbolEvent),t.set(24,Xs.symbolOperator),t.set(25,Xs.symbolTypeParameter),e.toIcon=function(e){let i=t.get(e);return i||(console.info("No codicon found for SymbolKind "+e),i=Xs.symbolProperty),i}}(yo||(yo={}));let xo=class e{static fromValue(t){switch(t){case"comment":return e.Comment;case"imports":return e.Imports;case"region":return e.Region}return new e(t)}constructor(e){this.value=e}};var Co,Do,So,Eo,ko,Io,To,Po,Ao;function Ro(e,t){if(!e)throw new Error(t?`Assertion failed (${t})`:"Assertion Failed")}xo.Comment=new xo("comment"),xo.Imports=new xo("imports"),xo.Region=new xo("region"),function(e){e.is=function(e){return!(!e||"object"!=typeof e)&&("string"==typeof e.id&&"string"==typeof e.title)}}(Co||(Co={})),function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"}(Do||(Do={})),function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"}(So||(So={})),function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"}(Eo||(Eo={})),function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"}(ko||(ko={})),function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"}(Io||(Io={})),new class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new B,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),w((()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))}))}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){var i;null===(i=this._factories.get(e))||void 0===i||i.dispose();const r=new bo(this,e,t);return this._factories.set(e,r),w((()=>{const t=this._factories.get(e);t&&t===r&&(this._factories.delete(e),t.dispose())}))}getOrCreate(e){return wo(this,void 0,void 0,(function*(){const t=this.get(e);if(t)return t;const i=this._factories.get(e);return!i||i.isResolved?null:(yield i.resolve(),this.get(e))}))}isResolved(e){if(this.get(e))return!0;const t=this._factories.get(e);return!(t&&!t.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}},function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"}(To||(To={})),function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"}(Po||(Po={})),function(e){e.compare=function(e,t){return t-e};const t=Object.create(null);t[e.Error]=J(0,"Error"),t[e.Warning]=J(0,"Warning"),t[e.Info]=J(0,"Info"),e.toString=function(e){return t[e]||""},e.fromSeverity=function(t){switch(t){case Ns.Error:return e.Error;case Ns.Warning:return e.Warning;case Ns.Info:return e.Info;case Ns.Ignore:return e.Hint}},e.toSeverity=function(t){switch(t){case e.Error:return Ns.Error;case e.Warning:return Ns.Warning;case e.Info:return Ns.Info;case e.Hint:return Ns.Ignore}}}(Po||(Po={})),function(e){const t="";function i(e,i){const r=[t];return e.source?r.push(e.source.replace("¦","\\¦")):r.push(t),e.code?"string"==typeof e.code?r.push(e.code.replace("¦","\\¦")):r.push(e.code.value.replace("¦","\\¦")):r.push(t),void 0!==e.severity&&null!==e.severity?r.push(Po.toString(e.severity)):r.push(t),e.message&&i?r.push(e.message.replace("¦","\\¦")):r.push(t),void 0!==e.startLineNumber&&null!==e.startLineNumber?r.push(e.startLineNumber.toString()):r.push(t),void 0!==e.startColumn&&null!==e.startColumn?r.push(e.startColumn.toString()):r.push(t),void 0!==e.endLineNumber&&null!==e.endLineNumber?r.push(e.endLineNumber.toString()):r.push(t),void 0!==e.endColumn&&null!==e.endColumn?r.push(e.endColumn.toString()):r.push(t),r.push(t),r.join("¦")}e.makeKey=function(e){return i(e,!0)},e.makeKeyOptionalMessage=i}(Ao||(Ao={})),un("markerService");class Fo{static fromExtHostTestItem(e,t,i=e.parent){if(e._isRoot)return new Fo([t]);const r=[e.id];for(let n=i;n&&n.id!==t;n=n.parent)r.push(n.id);return r.push(t),new Fo(r.reverse())}static isRoot(e){return!e.includes("\0")}static root(e){const t=e.indexOf("\0");return-1===t?e:e.slice(0,t)}static fromString(e){return new Fo(e.split("\0"))}static join(e,t){return new Fo([...e.path,t])}static joinToString(e,t){return e.toString()+"\0"+t}static parentId(e){const t=e.lastIndexOf("\0");return-1===t?void 0:e.slice(0,t)}static localId(e){const t=e.lastIndexOf("\0");return-1===t?e:e.slice(t+1)}static isChild(e,t){return t.startsWith(e)&&"\0"===t[e.length]}static compare(e,t){return e===t?0:Fo.isChild(e,t)?2:Fo.isChild(t,e)?3:1}constructor(e,t=e.length){if(this.path=e,this.viewEnd=t,0===e.length||t<1)throw new Error("cannot create test with empty path")}get rootId(){return new Fo(this.path,1)}get parentId(){return this.viewEnd>1?new Fo(this.path,this.viewEnd-1):void 0}get localId(){return this.path[this.viewEnd-1]}get controllerId(){return this.path[0]}get isRoot(){return 1===this.viewEnd}*idsFromRoot(){for(let e=1;e<=this.viewEnd;e++)yield new Fo(this.path,e)}*idsToRoot(){for(let e=this.viewEnd;e>0;e--)yield new Fo(this.path,e)}compare(e){if("string"==typeof e)return Fo.compare(this.toString(),e);for(let t=0;t<e.viewEnd&&t<this.viewEnd;t++)if(e.path[t]!==this.path[t])return 1;return e.viewEnd>this.viewEnd?2:e.viewEnd<this.viewEnd?3:0}toJSON(){return this.toString()}toString(){if(!this.stringifed){this.stringifed=this.path[0];for(let e=1;e<this.viewEnd;e++)this.stringifed+="\0",this.stringifed+=this.path[e]}return this.stringifed}}var $o,Lo,Oo,Mo,No;!function(e){e.serialize=e=>({range:e.range.toJSON(),uri:e.uri.toJSON()}),e.deserialize=e=>({range:go.lift(e.range),uri:pt.revive(e.uri)})}($o||($o={})),function(e){e.serialize=e=>({message:e.message,type:0,expected:e.expected,actual:e.actual,contextValue:e.contextValue,location:e.location&&$o.serialize(e.location)}),e.deserialize=e=>({message:e.message,type:0,expected:e.expected,actual:e.actual,contextValue:e.contextValue,location:e.location&&$o.deserialize(e.location)})}(Lo||(Lo={})),function(e){e.serialize=e=>({message:e.message,type:1,offset:e.offset,length:e.length,location:e.location&&$o.serialize(e.location)}),e.deserialize=e=>({message:e.message,type:1,offset:e.offset,length:e.length,location:e.location&&$o.deserialize(e.location)})}(Oo||(Oo={})),function(e){e.serialize=e=>0===e.type?Lo.serialize(e):Oo.serialize(e),e.deserialize=e=>0===e.type?Lo.deserialize(e):Oo.deserialize(e)}(Mo||(Mo={})),function(e){e.serializeWithoutMessages=e=>({state:e.state,duration:e.duration,messages:[]}),e.serialize=e=>({state:e.state,duration:e.duration,messages:e.messages.map(Mo.serialize)}),e.deserialize=e=>({state:e.state,duration:e.duration,messages:e.messages.map(Mo.deserialize)})}(No||(No={}));const Ho=(e,t)=>e+"\0"+t,Uo=e=>{const t=e.indexOf("\0");return{ctrlId:e.slice(0,t),tagId:e.slice(t+1)}};var Bo,Vo,Wo;!function(e){e.serialize=e=>({extId:e.extId,label:e.label,tags:e.tags,busy:e.busy,children:void 0,uri:e.uri?.toJSON(),range:e.range?.toJSON()||null,description:e.description,error:e.error,sortText:e.sortText}),e.deserialize=e=>({extId:e.extId,label:e.label,tags:e.tags,busy:e.busy,children:void 0,uri:e.uri?pt.revive(e.uri):void 0,range:e.range?go.lift(e.range):null,description:e.description,error:e.error,sortText:e.sortText})}(Bo||(Bo={})),function(e){e.serialize=e=>({expand:e.expand,item:Bo.serialize(e.item)}),e.deserialize=e=>({controllerId:Fo.root(e.item.extId),expand:e.expand,item:Bo.deserialize(e.item)})}(Vo||(Vo={})),function(e){e.serialize=e=>{let t;return e.item&&(t={},void 0!==e.item.label&&(t.label=e.item.label),void 0!==e.item.tags&&(t.tags=e.item.tags),void 0!==e.item.busy&&(t.busy=e.item.busy),void 0!==e.item.uri&&(t.uri=e.item.uri?.toJSON()),void 0!==e.item.range&&(t.range=e.item.range?.toJSON()),void 0!==e.item.description&&(t.description=e.item.description),void 0!==e.item.error&&(t.error=e.item.error),void 0!==e.item.sortText&&(t.sortText=e.item.sortText)),{extId:e.extId,expand:e.expand,item:t}},e.deserialize=e=>{let t;return e.item&&(t={},void 0!==e.item.label&&(t.label=e.item.label),void 0!==e.item.tags&&(t.tags=e.item.tags),void 0!==e.item.busy&&(t.busy=e.item.busy),void 0!==e.item.range&&(t.range=e.item.range?go.lift(e.item.range):null),void 0!==e.item.description&&(t.description=e.item.description),void 0!==e.item.error&&(t.error=e.item.error),void 0!==e.item.sortText&&(t.sortText=e.item.sortText)),{extId:e.extId,expand:e.expand,item:t}}}(Wo||(Wo={}));const zo=(e,t)=>{void 0!==t.expand&&(e.expand=t.expand),void 0!==t.item&&(e.item=e.item?Object.assign(e.item,t.item):t.item)};var jo,qo;!function(e){e.serializeWithoutMessages=e=>({...Vo.serialize(e),ownComputedState:e.ownComputedState,computedState:e.computedState,tasks:e.tasks.map(No.serializeWithoutMessages)}),e.serialize=e=>({...Vo.serialize(e),ownComputedState:e.ownComputedState,computedState:e.computedState,tasks:e.tasks.map(No.serialize)}),e.deserialize=e=>({...Vo.deserialize(e),ownComputedState:e.ownComputedState,computedState:e.computedState,tasks:e.tasks.map(No.deserialize),retired:!0})}(jo||(jo={})),function(e){e.deserialize=e=>0===e.op?{op:e.op,item:Vo.deserialize(e.item)}:1===e.op?{op:e.op,item:Wo.deserialize(e.item)}:2===e.op?{op:e.op,uri:pt.revive(e.uri),docv:e.docv}:e,e.serialize=e=>0===e.op?{op:e.op,item:Vo.serialize(e.item)}:1===e.op?{op:e.op,item:Wo.serialize(e.item)}:e}(qo||(qo={}));class Ko{constructor(){this._tags=new Map,this.items=new Map,this.roots=new Set,this.busyControllerCount=0,this.pendingRootCount=0,this.tags=this._tags}apply(e){const t=this.createChangeCollector();for(const i of e)switch(i.op){case 0:this.add(Vo.deserialize(i.item),t);break;case 1:this.update(Wo.deserialize(i.item),t);break;case 3:this.remove(i.itemId,t);break;case 5:this.retireTest(i.itemId);break;case 4:this.updatePendingRoots(i.amount);break;case 6:this._tags.set(i.tag.id,i.tag);break;case 7:this._tags.delete(i.id)}t.complete?.()}add(e,t){const i=Fo.parentId(e.item.extId)?.toString();let r;if(i){if(!this.items.has(i))return void console.error(`Test with unknown parent ID: ${JSON.stringify(e)}`);{const t=this.items.get(i);t.children.add(e.item.extId),r=this.createItem(e,t),this.items.set(e.item.extId,r)}}else r=this.createItem(e),this.roots.add(r),this.items.set(e.item.extId,r);return t.add?.(r),2===e.expand&&this.busyControllerCount++,r}update(e,t){const i=this.items.get(e.extId);if(i)return void 0!==e.expand&&(2===i.expand&&this.busyControllerCount--,2===e.expand&&this.busyControllerCount++),zo(i,e),t.update?.(i),i}remove(e,t){const i=this.items.get(e);if(!i)return;const r=Fo.parentId(i.item.extId)?.toString();if(r){this.items.get(r).children.delete(i.item.extId)}else this.roots.delete(i);const n=[[e]];for(;n.length;)for(const e of n.pop()){const r=this.items.get(e);r&&(n.push(r.children),this.items.delete(e),t.remove?.(r,r!==i),2===r.expand&&this.busyControllerCount--)}}retireTest(e){}updatePendingRoots(e){this.pendingRootCount+=e}createChangeCollector(){return{}}}const Go=(e,t)=>e===t,Qo={range:(e,t)=>e===t||!(!e||!t)&&e.equalsRange(t),busy:Go,label:Go,description:Go,error:Go,sortText:Go,tags:(e,t)=>e.length===t.length&&!e.some((e=>!t.includes(e)))},Jo=Object.entries(Qo);class Zo extends x{get root(){return this.options.root}constructor(e){super(),this.options=e,this.debounceSendDiff=this._register(new gr((()=>this.flushDiff()),200)),this.diffOpEmitter=this._register(new B),this.tree=new Map,this.tags=new Map,this.diff=[],this.onDidGenerateDiff=this.diffOpEmitter.event,this.root.canResolveChildren=!0,this.upsertItem(this.root,void 0)}set resolveHandler(e){this._resolveHandler=e;for(const t of this.tree.values())this.updateExpandability(t)}get resolveHandler(){return this._resolveHandler}collectDiff(){const e=this.diff;return this.diff=[],e}pushDiff(e){switch(e.op){case 2:for(const t of this.diff)if(2===t.op&&t.uri===e.uri)return void(t.docv=e.docv);break;case 1:{const t=this.diff[this.diff.length-1];if(t){if(1===t.op&&t.item.extId===e.item.extId)return void zo(t.item,e.item);if(0===t.op&&t.item.item.extId===e.item.extId)return void zo(t.item,e.item)}break}}this.diff.push(e),this.debounceSendDiff.isScheduled()||this.debounceSendDiff.schedule()}expand(e,t){const i=this.tree.get(e);if(i){if((void 0===i.expandLevels||t>i.expandLevels)&&(i.expandLevels=t),1===i.expand){const e=this.resolveChildren(i);return e.isOpen()?this.expandChildren(i,t-1):e.wait().then((()=>this.expandChildren(i,t-1)))}return 3===i.expand?!1===i.resolveBarrier?.isOpen()?i.resolveBarrier.wait().then((()=>this.expandChildren(i,t-1))):this.expandChildren(i,t-1):void 0}}dispose(){for(const e of this.tree.values())this.options.getApiFor(e.actual).listener=void 0;this.tree.clear(),this.diff=[],super.dispose()}onTestItemEvent(e,t){switch(t.op){case 3:this.removeItem(Fo.joinToString(e.fullId,t.id));break;case 0:this.upsertItem(t.item,e);break;case 5:for(const i of t.ops)this.onTestItemEvent(e,i);break;case 1:this.diffTagRefs(t.new,t.old,e.fullId.toString());break;case 2:this.updateExpandability(e);break;case 4:this.pushDiff({op:1,item:{extId:e.fullId.toString(),item:t.update}});break;case 6:this.documentSynced(e.actual.uri);break;default:!function(e,t="Unreachable"){throw new Error(t)}()}}documentSynced(e){e&&this.pushDiff({op:2,uri:e,docv:this.options.getDocumentVersion(e)})}upsertItem(e,t){const i=Fo.fromExtHostTestItem(e,this.root.id,t?.actual),r=this.options.getApiFor(e);r.parent&&r.parent!==t?.actual&&this.options.getChildren(r.parent).delete(e.id);let n=this.tree.get(i.toString());if(!n)return n={fullId:i,actual:e,expandLevels:t?.expandLevels?t.expandLevels-1:void 0,expand:0},e.tags.forEach(this.incrementTagRefs,this),this.tree.set(n.fullId.toString(),n),this.setItemParent(e,t),this.pushDiff({op:0,item:{controllerId:this.options.controllerId,expand:n.expand,item:this.options.toITestItem(e)}}),void this.connectItemAndChildren(e,n,t);if(n.actual===e)return void this.connectItem(e,n,t);if(n.actual.uri?.toString()!==e.uri?.toString())return this.removeItem(i.toString()),this.upsertItem(e,t);const s=this.options.getChildren(n.actual),o=n.actual,a=((e,t)=>{let i;for(const[r,n]of Jo)n(e[r],t[r])||(i?i[r]=t[r]:i={[r]:t[r]});return i})(this.options.toITestItem(o),this.options.toITestItem(e));this.options.getApiFor(o).listener=void 0,n.actual=e,n.expand=0,a&&(a.hasOwnProperty("tags")&&(this.diffTagRefs(e.tags,o.tags,i.toString()),delete a.tags),this.onTestItemEvent(n,{op:4,update:a})),this.connectItemAndChildren(e,n,t);for(const[l,c]of s)this.options.getChildren(e).get(c.id)||this.removeItem(Fo.joinToString(i,c.id));this.documentSynced(n.actual.uri)}diffTagRefs(e,t,i){const r=new Set(t.map((e=>e.id)));for(const n of e)r.delete(n.id)||this.incrementTagRefs(n);this.pushDiff({op:1,item:{extId:i,item:{tags:e.map((e=>Ho(this.options.controllerId,e.id)))}}}),r.forEach(this.decrementTagRefs,this)}incrementTagRefs(e){const t=this.tags.get(e.id);t?t.refCount++:(this.tags.set(e.id,{refCount:1}),this.pushDiff({op:6,tag:{id:Ho(this.options.controllerId,e.id)}}))}decrementTagRefs(e){const t=this.tags.get(e);t&&! --t.refCount&&(this.tags.delete(e),this.pushDiff({op:7,id:Ho(this.options.controllerId,e)}))}setItemParent(e,t){this.options.getApiFor(e).parent=t&&t.actual!==this.root?t.actual:void 0}connectItem(e,t,i){this.setItemParent(e,i);const r=this.options.getApiFor(e);r.parent=i?.actual,r.listener=e=>this.onTestItemEvent(t,e),this.updateExpandability(t)}connectItemAndChildren(e,t,i){this.connectItem(e,t,i);for(const[r,n]of this.options.getChildren(e))this.upsertItem(n,t)}updateExpandability(e){let t;t=this._resolveHandler?e.resolveBarrier?e.resolveBarrier.isOpen()?3:2:e.actual.canResolveChildren?1:0:0,t!==e.expand&&(e.expand=t,this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:t}}),1===t&&void 0!==e.expandLevels&&this.resolveChildren(e))}expandChildren(e,t){if(t<0)return;const i=[];for(const[r,n]of this.options.getChildren(e.actual)){const r=this.expand(Fo.joinToString(e.fullId,n.id),t);sr(r)&&i.push(r)}return i.length?Promise.all(i).then((()=>{})):void 0}resolveChildren(e){if(e.resolveBarrier)return e.resolveBarrier;if(!this._resolveHandler){const e=new lr;return e.open(),e}e.expand=2,this.pushExpandStateUpdate(e);const t=e.resolveBarrier=new lr,i=e=>{console.error(`Unhandled error in resolveHandler of test controller "${this.options.controllerId}"`,e)};let r;try{r=this._resolveHandler(e.actual===this.root?void 0:e.actual)}catch(n){i(n)}return sr(r)?r.catch(i).then((()=>{t.open(),this.updateExpandability(e)})):(t.open(),this.updateExpandability(e)),e.resolveBarrier}pushExpandStateUpdate(e){this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:e.expand}})}removeItem(e){const t=this.tree.get(e);if(!t)throw new Error("attempting to remove non-existent child");this.pushDiff({op:3,itemId:e});const i=[t];for(;i.length;){const e=i.pop();if(e){this.options.getApiFor(e.actual).listener=void 0;for(const t of e.actual.tags)this.decrementTagRefs(t.id);this.tree.delete(e.fullId.toString());for(const[t,r]of this.options.getChildren(e.actual))i.push(this.tree.get(Fo.joinToString(e.fullId,r.id)))}}}flushDiff(){const e=this.collectDiff();e.length&&this.diffOpEmitter.fire(e)}}class Yo extends Error{constructor(e){super(`Attempted to insert a duplicate test item ID ${e}`)}}class Xo extends Error{constructor(e){super(`TestItem with ID "${e}" is invalid. Make sure to create it from the createTestItem method.`)}}class ea extends Error{constructor(e,t,i){super(`TestItem with ID "${e}" is from controller "${t}" and cannot be added as a child of an item from controller "${i}".`)}}const ta=(e,t,i)=>{let r=new Map;return{get size(){return r.size},forEach(e,t){for(const i of r.values())e.call(t,i,this)},[Symbol.iterator]:()=>r.entries(),replace(n){const s=new Map,o=new Set(r.keys()),a={op:5,ops:[]};for(const r of n){if(!(r instanceof i))throw new Xo(r.id);const n=t(r).controllerId;if(n!==e.controllerId)throw new ea(r.id,n,e.controllerId);if(s.has(r.id))throw new Yo(r.id);s.set(r.id,r),o.delete(r.id),a.ops.push({op:0,item:r})}for(const e of o.keys())a.ops.push({op:3,id:e});e.listener?.(a),r=s},add(t){if(!(t instanceof i))throw new Xo(t.id);r.set(t.id,t),e.listener?.({op:0,item:t})},delete(t){r.delete(t)&&e.listener?.({op:3,id:t})},get:e=>r.get(e),toJSON:()=>Array.from(r.values())}},ia=new WeakMap,ra=e=>{const t=ia.get(e);if(!t)throw new Xo(e?.id||"<unknown>");return t};const na=new class{constructor(){this.data=new Map}add(e,t){Ro(hi(e)),Ro(pi(t)),Ro(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}knows(e){return this.data.has(e)}as(e){return this.data.get(e)||null}};var sa,oa,aa,la;un("fileService"),function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"}(sa||(sa={})),function(e){e[e.Readonly=1]="Readonly",e[e.Locked=2]="Locked"}(oa||(oa={})),function(e){e.FileExists="EntryExists",e.FileNotFound="EntryNotFound",e.FileNotADirectory="EntryNotADirectory",e.FileIsADirectory="EntryIsADirectory",e.FileExceedsStorageQuota="EntryExceedsStorageQuota",e.FileTooLarge="EntryTooLarge",e.FileWriteLocked="EntryWriteLocked",e.NoPermissions="NoPermissions",e.Unavailable="Unavailable",e.Unknown="Unknown"}(aa||(aa={}));class ca extends Error{static create(e,t){const i=new ca(e.toString(),t);return ua(i,t),i}constructor(e,t){super(e),this.code=t}}function ua(e,t){return e.name=t?`${t} (FileSystemError)`:"FileSystemError",e}function da(e){if(!e)return aa.Unknown;if(e instanceof ca)return e.code;const t=/^(.+) \(FileSystemError\)$/.exec(e.name);if(!t)return aa.Unknown;switch(t[1]){case aa.FileExists:return aa.FileExists;case aa.FileIsADirectory:return aa.FileIsADirectory;case aa.FileNotADirectory:return aa.FileNotADirectory;case aa.FileNotFound:return aa.FileNotFound;case aa.FileTooLarge:return aa.FileTooLarge;case aa.FileWriteLocked:return aa.FileWriteLocked;case aa.NoPermissions:return aa.NoPermissions;case aa.Unavailable:return aa.Unavailable}return aa.Unknown}class ha extends Error{constructor(e,t,i){super(e),this.fileOperationResult=t,this.options=i}}!function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"}(la||(la={}));function pa(e){if("number"==typeof e.size&&"number"==typeof e.mtime)return e.mtime.toString(29)+e.size.toString(31)}var ga=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{l(r.next(e))}catch(_C){s(_C)}}function a(e){try{l(r.throw(e))}catch(_C){s(_C)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};class fa extends x{constructor(e,t="",i="",r=!0,n){super(),this._onDidChange=this._register(new B),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=i,this._enabled=r,this._actionCallback=n}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return ga(this,void 0,void 0,(function*(){this._actionCallback&&(yield this._actionCallback(e))}))}}class ma extends fa{constructor(){super(ma.ID,J(0,"(empty)"),void 0,!1)}}ma.ID="vs.actions.empty";const va="default";J(0,"Text Editor"),J(0,"Built-in");var _a,ya,wa,ba,xa,Ca,Da,Sa,Ea,ka;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.REPLACE=1]="REPLACE",e[e.MOVE=2]="MOVE",e[e.UNPIN=3]="UNPIN"}(_a||(_a={})),function(e){e[e.PRIMARY=1]="PRIMARY",e[e.SECONDARY=2]="SECONDARY",e[e.BOTH=3]="BOTH",e[e.ANY=4]="ANY"}(ya||(ya={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.KEYBOARD=1]="KEYBOARD",e[e.MOUSE=2]="MOUSE"}(wa||(wa={})),function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"}(ba||(ba={}));na.add("workbench.contributions.editor.inputFactories",new class{constructor(){this.editorSerializerConstructors=new Map,this.editorSerializerInstances=new Map}start(e){const t=this.instantiationService=e.get(cn);for(const[i,r]of this.editorSerializerConstructors)this.createEditorSerializer(i,r,t);this.editorSerializerConstructors.clear()}createEditorSerializer(e,t,i){const r=i.createInstance(t);this.editorSerializerInstances.set(e,r)}registerFileEditorFactory(e){if(this.fileEditorFactory)throw new Error("Can only register one file editor factory.");this.fileEditorFactory=e}getFileEditorFactory(){return yi(this.fileEditorFactory)}registerEditorSerializer(e,t){if(this.editorSerializerConstructors.has(e)||this.editorSerializerInstances.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.instantiationService?this.createEditorSerializer(e,t,this.instantiationService):this.editorSerializerConstructors.set(e,t),w((()=>{this.editorSerializerConstructors.delete(e),this.editorSerializerInstances.delete(e)}))}getEditorSerializer(e){return this.editorSerializerInstances.get("string"==typeof e?e:e.typeId)}}),function(e){e[e.MOST_RECENTLY_ACTIVE=0]="MOST_RECENTLY_ACTIVE",e[e.SEQUENTIAL=1]="SEQUENTIAL"}(xa||(xa={})),function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"}(Ca||(Ca={})),function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"}(Da||(Da={})),function(e){e[e.ModelChange=1]="ModelChange",e[e.Move=2]="Move",e[e.ChangeCellLanguage=5]="ChangeCellLanguage",e[e.Initialize=6]="Initialize",e[e.ChangeCellMetadata=7]="ChangeCellMetadata",e[e.Output=8]="Output",e[e.OutputItem=9]="OutputItem",e[e.ChangeCellContent=10]="ChangeCellContent",e[e.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",e[e.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",e[e.ChangeCellMime=13]="ChangeCellMime",e[e.Unknown=100]="Unknown"}(Sa||(Sa={})),function(e){e[e.Handle=0]="Handle",e[e.Index=1]="Index"}(Ea||(Ea={})),function(e){e.scheme=Fi.vscodeNotebookCell;const t=["W","X","Y","Z","a","b","c","d","e","f"],i=new RegExp(`^[${t.join("")}]+`);e.generate=function(i,r){const n=r.toString(7),s=`${n.length<t.length?t[n.length-1]:"z"}${n}s${T(I.fromString(i.scheme),!0,!0)}`;return i.with({scheme:e.scheme,fragment:s})},e.parse=function(t){if(t.scheme!==e.scheme)return;const r=t.fragment.indexOf("s");if(r<0)return;const n=parseInt(t.fragment.substring(0,r).replace(i,""),7),s=function(e){let t=0,i=0,r=0;const n=new Uint8Array(Math.floor(e.length/4*3)),s=e=>{switch(i){case 3:n[r++]=t|e,i=0;break;case 2:n[r++]=t|e>>>2,t=e<<6,i=3;break;case 1:n[r++]=t|e>>>4,t=e<<4,i=2;break;default:t=e<<2,i=1}};for(let a=0;a<e.length;a++){const t=e.charCodeAt(a);if(t>=65&&t<=90)s(t-65);else if(t>=97&&t<=122)s(t-97+26);else if(t>=48&&t<=57)s(t-48+52);else if(43===t||45===t)s(62);else{if(47!==t&&95!==t){if(61===t)break;throw new SyntaxError(`Unexpected base64 character ${e[a]}`)}s(63)}}const o=r;for(;i>0;)s(0);return I.wrap(n).slice(0,o)}(t.fragment.substring(r+1)).toString();return isNaN(n)?void 0:{handle:n,notebook:t.with({scheme:s,fragment:null})}},e.generateCellOutputUri=function(e,t){return e.with({scheme:Fi.vscodeNotebookCellOutput,fragment:`op${t??""},${e.scheme!==Fi.file?e.scheme:""}`})},e.parseCellOutputUri=function(e){if(e.scheme!==Fi.vscodeNotebookCellOutput)return;const t=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(e.fragment);if(!t)return;const i=t[1]&&""!==t[1]?t[1]:void 0,r=t[2];return{outputId:i,notebook:e.with({scheme:r||Fi.file,fragment:null})}},e.generateCellPropertyUri=function(t,i,r){return e.generate(t,i).with({scheme:r})},e.parseCellPropertyUri=function(t,i){if(t.scheme===i)return e.parse(t.with({scheme:e.scheme}))}}(ka||(ka={}));class Ia{static{this._prefix="notebook/"}static create(e){return`${Ia._prefix}${e}`}static parse(e){if(e.startsWith(Ia._prefix))return e.substring(Ia._prefix.length)}}function Ta(e){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(e)}const Pa=new TextDecoder;function Aa(e){const t=[];let i=!1;for(const o of e)(0===t.length||i)&&(t.push(o),i=!0);let r=function(e){let t=!1;return e.forEach(((i,r)=>{if(0===r||i.length<Ra.length)return;const n=e[r-1],s=i.subarray(0,Ra.length);if(s[0]===Fa[0]&&s[1]===Fa[1]&&s[2]===Fa[2]){const s=n.lastIndexOf($a);if(-1===s)return;t=!0,e[r-1]=n.subarray(0,s),e[r]=i.subarray(Ra.length)}})),t}(t);const n=I.concat(t.map((e=>I.wrap(e)))),s=function(e){if(!e.buffer.includes(La)&&!e.buffer.includes(Oa))return e;return I.fromString(function(e){e=e.replace(/\r+\n/gm,"\n");for(;e.search(/\r[^$]/g)>-1;){const t=e.match(/^(.*)\r+/m)[1];let i=e.match(/\r+(.*)$/m)[1];i+=t.slice(i.length,t.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,i)}return e}(function(e){let t=e;do{t=(e=t).replace(/[^\n]\x08/gm,"")}while(t.length<e.length);return e}(Pa.decode(e.buffer))))}(n);return r=r||s.byteLength!==n.byteLength,{data:s,didCompression:r}}const Ra=`${String.fromCharCode(27)}[A`,Fa=Ra.split("").map((e=>e.charCodeAt(0))),$a=10;const La="\b".charCodeAt(0),Oa="\r".charCodeAt(0);const Ma=un("editorGroupsService");var Na,Ha,Ua,Ba,Va,Wa;!function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"}(Na||(Na={})),function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"}(Ha||(Ha={})),function(e){e[e.FIRST=0]="FIRST",e[e.LAST=1]="LAST",e[e.NEXT=2]="NEXT",e[e.PREVIOUS=3]="PREVIOUS"}(Ua||(Ua={})),function(e){e[e.MAXIMIZE=0]="MAXIMIZE",e[e.EVEN=1]="EVEN",e[e.TOGGLE=2]="TOGGLE"}(Ba||(Ba={})),function(e){e[e.COPY_EDITORS=0]="COPY_EDITORS",e[e.MOVE_EDITORS=1]="MOVE_EDITORS"}(Va||(Va={})),function(e){e[e.CREATION_TIME=0]="CREATION_TIME",e[e.MOST_RECENTLY_ACTIVE=1]="MOST_RECENTLY_ACTIVE",e[e.GRID_APPEARANCE=2]="GRID_APPEARANCE"}(Wa||(Wa={})),un("editorService");function za(e){if(!e)return;const t=e.indexOf("+");return t<0?e:e.substr(0,t)}class ja{constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(null==e)return null==t;if(null==t)return!1;if("string"==typeof e||"string"==typeof t){return Xt("string"==typeof e?e:e.value,"string"==typeof t?t:t.value)}return e._lower===t._lower}static toKey(e){return"string"==typeof e?e.toLowerCase():e._lower}}class qa{get size(){return this._set.size}constructor(e){if(this._set=new Set,e)for(const t of e)this.add(t)}add(e){this._set.add(ja.toKey(e))}delete(e){return this._set.delete(ja.toKey(e))}has(e){return this._set.has(ja.toKey(e))}}class Ka{constructor(){this._map=new Map}clear(){this._map.clear()}delete(e){this._map.delete(ja.toKey(e))}get(e){return this._map.get(ja.toKey(e))}has(e){return this._map.has(ja.toKey(e))}set(e,t){this._map.set(ja.toKey(e),t)}values(){return this._map.values()}forEach(e){this._map.forEach(e)}[Symbol.iterator](){return this._map[Symbol.iterator]()}}un("IBuiltinExtensionsScannerService"),un("remoteAuthorityResolverService");class Ga{constructor(e){this.id=e,this.type=1}toString(){return`Managed(${this.id})`}}class Qa{constructor(e,t){this.host=e,this.port=t,this.type=0}toString(){return`WebSocket(${this.host}:${this.port})`}}var Ja,Za,Ya,Xa,el,tl,il,rl,nl,sl,ol,al,ll,cl,ul,dl,hl,pl,gl,fl;function ml(e){const t=e.indexOf("+");return-1===t?e:e.substring(0,t)}function vl(e){const t={apply:function(){const t=1===arguments.length?[]:arguments[1];return Reflect.construct(e,t,arguments[0].constructor)},call:function(){if(0===arguments.length)return Reflect.construct(e,[]);{const[t,...i]=arguments;return Reflect.construct(e,i,t.constructor)}}};return Object.assign(e,t)}!function(e){e.Unknown="Unknown",e.NotAvailable="NotAvailable",e.TemporarilyNotAvailable="TemporarilyNotAvailable",e.NoResolverFound="NoResolverFound",e.InvalidAuthority="InvalidAuthority"}(Ja||(Ja={})),function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"}(fl||(fl={}));let _l=Za=class{static from(...e){let t=e;return new Za((function(){if(t){for(const e of t)e&&"function"==typeof e.dispose&&e.dispose();t=void 0}}))}#e;constructor(e){this.#e=e}dispose(){"function"==typeof this.#e&&(this.#e(),this.#e=void 0)}};_l=Za=vs([vl],_l);let yl=Ya=class{static Min(...e){if(0===e.length)throw new TypeError;let t=e[0];for(let i=1;i<e.length;i++){const r=e[i];r.isBefore(t)&&(t=r)}return t}static Max(...e){if(0===e.length)throw new TypeError;let t=e[0];for(let i=1;i<e.length;i++){const r=e[i];r.isAfter(t)&&(t=r)}return t}static isPosition(e){if(!e)return!1;if(e instanceof Ya)return!0;const{line:t,character:i}=e;return"number"==typeof t&&"number"==typeof i}static of(e){if(e instanceof Ya)return e;if(this.isPosition(e))return new Ya(e.line,e.character);throw new Error("Invalid argument, is NOT a position-like object")}get line(){return this._line}get character(){return this._character}constructor(e,t){if(e<0)throw u("line must be non-negative");if(t<0)throw u("character must be non-negative");this._line=e,this._character=t}isBefore(e){return this._line<e._line||!(e._line<this._line)&&this._character<e._character}isBeforeOrEqual(e){return this._line<e._line||!(e._line<this._line)&&this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,t=0){if(null===e||null===t)throw u();let i;return void 0===e?i=0:"number"==typeof e?i=e:(i="number"==typeof e.lineDelta?e.lineDelta:0,t="number"==typeof e.characterDelta?e.characterDelta:0),0===i&&0===t?this:new Ya(this.line+i,this.character+t)}with(e,t=this.character){if(null===e||null===t)throw u();let i;return void 0===e?i=this.line:"number"==typeof e?i=e:(i="number"==typeof e.line?e.line:this.line,t="number"==typeof e.character?e.character:this.character),i===this.line&&t===this.character?this:new Ya(i,t)}toJSON(){return{line:this.line,character:this.character}}};yl=Ya=vs([vl],yl);let wl=Xa=class{static isRange(e){return e instanceof Xa||!!e&&(yl.isPosition(e.start)&&yl.isPosition(e.end))}static of(e){if(e instanceof Xa)return e;if(this.isRange(e))return new Xa(e.start,e.end);throw new Error("Invalid argument, is NOT a range-like object")}get start(){return this._start}get end(){return this._end}constructor(e,t,i,r){let n,s;if("number"==typeof e&&"number"==typeof t&&"number"==typeof i&&"number"==typeof r?(n=new yl(e,t),s=new yl(i,r)):yl.isPosition(e)&&yl.isPosition(t)&&(n=yl.of(e),s=yl.of(t)),!n||!s)throw new Error("Invalid arguments");n.isBefore(s)?(this._start=n,this._end=s):(this._start=s,this._end=n)}contains(e){return Xa.isRange(e)?this.contains(e.start)&&this.contains(e.end):!!yl.isPosition(e)&&(!yl.of(e).isBefore(this._start)&&!this._end.isBefore(e))}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){const t=yl.Max(e.start,this._start),i=yl.Min(e.end,this._end);if(!t.isAfter(i))return new Xa(t,i)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;const t=yl.Min(e.start,this._start),i=yl.Max(e.end,this.end);return new Xa(t,i)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,t=this.end){if(null===e||null===t)throw u();let i;return e?yl.isPosition(e)?i=e:(i=e.start||this.start,t=e.end||this.end):i=this.start,i.isEqual(this._start)&&t.isEqual(this.end)?this:new Xa(i,t)}toJSON(){return[this.start,this.end]}};wl=Xa=vs([vl],wl);let bl=el=class extends wl{static isSelection(e){return e instanceof el||!!e&&(wl.isRange(e)&&yl.isPosition(e.anchor)&&yl.isPosition(e.active)&&"boolean"==typeof e.isReversed)}get anchor(){return this._anchor}get active(){return this._active}constructor(e,t,i,r){let n,s;if("number"==typeof e&&"number"==typeof t&&"number"==typeof i&&"number"==typeof r?(n=new yl(e,t),s=new yl(i,r)):yl.isPosition(e)&&yl.isPosition(t)&&(n=yl.of(e),s=yl.of(t)),!n||!s)throw new Error("Invalid arguments");super(n,s),this._anchor=n,this._active=s}get isReversed(){return this._anchor===this._end}toJSON(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}}};bl=el=vs([vl],bl);const xl=e=>{if("string"!=typeof e||0===e.length||!/^[0-9A-Za-z_\-]+$/.test(e))throw u("connectionToken")};class Cl{static isResolvedAuthority(e){return e&&"object"==typeof e&&"string"==typeof e.host&&"number"==typeof e.port&&(void 0===e.connectionToken||"string"==typeof e.connectionToken)}constructor(e,t,i){if("string"!=typeof e||0===e.length)throw u("host");if("number"!=typeof t||0===t||Math.round(t)!==t)throw u("port");void 0!==i&&xl(i),this.host=e,this.port=Math.round(t),this.connectionToken=i}}class Dl{static isManagedResolvedAuthority(e){return e&&"object"==typeof e&&"function"==typeof e.makeConnection&&(void 0===e.connectionToken||"string"==typeof e.connectionToken)}constructor(e,t){this.makeConnection=e,this.connectionToken=t,void 0!==t&&xl(t)}}class Sl extends Error{static NotAvailable(e,t){return new Sl(e,Ja.NotAvailable,t)}static TemporarilyNotAvailable(e){return new Sl(e,Ja.TemporarilyNotAvailable)}constructor(e,t=Ja.Unknown,i){super(e),this._message=e,this._code=t,this._detail=i,Object.setPrototypeOf(this,Sl.prototype)}}var El,kl;!function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"}(El||(El={})),function(e){e[e.Replace=1]="Replace",e[e.Append=2]="Append",e[e.Prepend=3]="Prepend"}(kl||(kl={}));let Il=tl=class{static isTextEdit(e){return e instanceof tl||!!e&&(wl.isRange(e)&&"string"==typeof e.newText)}static replace(e,t){return new tl(e,t)}static insert(e,t){return tl.replace(new wl(e,e),t)}static delete(e){return tl.replace(e,"")}static setEndOfLine(e){const t=new tl(new wl(new yl(0,0),new yl(0,0)),"");return t.newEol=e,t}get range(){return this._range}set range(e){if(e&&!wl.isRange(e))throw u("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&"string"!=typeof e)throw u("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&"number"!=typeof e)throw u("newEol");this._newEol=e}constructor(e,t){this._range=e,this._newText=t}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};Il=tl=vs([vl],Il);let Tl=il=class{static isNotebookCellEdit(e){return e instanceof il||!!e&&(Ku.isNotebookRange(e)&&Array.isArray(e.newCells))}static replaceCells(e,t){return new il(e,t)}static insertCells(e,t){return new il(new Ku(e,e),t)}static deleteCells(e){return new il(e,[])}static updateCellMetadata(e,t){const i=new il(new Ku(e,e),[]);return i.newCellMetadata=t,i}static updateNotebookMetadata(e){const t=new il(new Ku(0,0),[]);return t.newNotebookMetadata=e,t}constructor(e,t){this.range=e,this.newCells=t}};Tl=il=vs([vl],Tl);class Pl{static isSnippetTextEdit(e){return e instanceof Pl||!!e&&(wl.isRange(e.range)&&Rl.isSnippetString(e.snippet))}static replace(e,t){return new Pl(e,t)}static insert(e,t){return Pl.replace(new wl(e,e),t)}constructor(e,t){this.range=e,this.snippet=t}}let Al=class{constructor(){this._edits=[]}_allEntries(){return this._edits}renameFile(e,t,i,r){this._edits.push({_type:1,from:e,to:t,options:i,metadata:r})}createFile(e,t,i){this._edits.push({_type:1,from:void 0,to:e,options:t,metadata:i})}deleteFile(e,t,i){this._edits.push({_type:1,from:e,to:void 0,options:t,metadata:i})}replaceNotebookMetadata(e,t,i){this._edits.push({_type:3,metadata:i,uri:e,edit:{editType:5,metadata:t},notebookMetadata:t})}replaceNotebookCells(e,t,i,r){const n=t.start,s=t.end;(n!==s||i.length>0)&&this._edits.push({_type:5,uri:e,index:n,count:s-n,cells:i,metadata:r})}replaceNotebookCellMetadata(e,t,i,r){this._edits.push({_type:3,metadata:r,uri:e,edit:{editType:3,index:t,metadata:i}})}replace(e,t,i,r){this._edits.push({_type:2,uri:e,edit:new Il(t,i),metadata:r})}insert(e,t,i,r){this.replace(e,new wl(t,t),i,r)}delete(e,t,i){this.replace(e,t,"",i)}has(e){return this._edits.some((t=>2===t._type&&t.uri.toString()===e.toString()))}set(e,t){if(t)for(const i of t){if(!i)continue;let t,r;Array.isArray(i)?(t=i[0],r=i[1]):t=i,Tl.isNotebookCellEdit(t)?t.newCellMetadata?this.replaceNotebookCellMetadata(e,t.range.start,t.newCellMetadata,r):t.newNotebookMetadata?this.replaceNotebookMetadata(e,t.newNotebookMetadata,r):this.replaceNotebookCells(e,t.range,t.newCells,r):Pl.isSnippetTextEdit(t)?this._edits.push({_type:6,uri:e,range:t.range,edit:t.snippet,metadata:r}):this._edits.push({_type:2,uri:e,edit:t,metadata:r})}else{for(let t=0;t<this._edits.length;t++){const i=this._edits[t];switch(i._type){case 2:case 6:case 3:case 5:i.uri.toString()===e.toString()&&(this._edits[t]=void 0)}}!function(e){let t=0;for(let i=0;i<e.length;i++)e[i]&&(e[t]=e[i],t+=1);e.length=t}(this._edits)}}get(e){const t=[];for(const i of this._edits)2===i._type&&i.uri.toString()===e.toString()&&t.push(i.edit);return t}entries(){const e=new Li;for(const t of this._edits)if(2===t._type){let i=e.get(t.uri);i||(i=[t.uri,[]],e.set(t.uri,i)),i[1].push(t.edit)}return[...e.values()]}get size(){return this.entries().length}toJSON(){return this.entries()}};Al=vs([vl],Al);let Rl=rl=class{static isSnippetString(e){return e instanceof rl||!!e&&"string"==typeof e.value}static _escape(e){return e.replace(/\$|}|\\/g,"\\$&")}constructor(e){this._tabstop=1,this.value=e||""}appendText(e){return this.value+=rl._escape(e),this}appendTabstop(e=this._tabstop++){return this.value+="$",this.value+=e,this}appendPlaceholder(e,t=this._tabstop++){if("function"==typeof e){const t=new rl;t._tabstop=this._tabstop,e(t),this._tabstop=t._tabstop,e=t.value}else e=rl._escape(e);return this.value+="${",this.value+=t,this.value+=":",this.value+=e,this.value+="}",this}appendChoice(e,t=this._tabstop++){const i=e.map((e=>e.replace(/\$|}|\\|,/g,"\\$&"))).join(",");return this.value+="${",this.value+=t,this.value+="|",this.value+=i,this.value+="|}",this}appendVariable(e,t){if("function"==typeof t){const e=new rl;e._tabstop=this._tabstop,t(e),this._tabstop=e._tabstop,t=e.value}else"string"==typeof t&&(t=t.replace(/\$|}/g,"\\$&"));return this.value+="${",this.value+=e,t&&(this.value+=":",this.value+=t),this.value+="}",this}};var Fl,$l;Rl=rl=vs([vl],Rl),function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"}(Fl||(Fl={})),function(e){e[e.Hint=3]="Hint",e[e.Information=2]="Information",e[e.Warning=1]="Warning",e[e.Error=0]="Error"}($l||($l={}));let Ll=nl=class{static isLocation(e){return e instanceof nl||!!e&&(wl.isRange(e.range)&&pt.isUri(e.uri))}constructor(e,t){if(this.uri=e,t)if(wl.isRange(t))this.range=wl.of(t);else{if(!yl.isPosition(t))throw new Error("Illegal argument");this.range=new wl(t,t)}else;}toJSON(){return{uri:this.uri,range:this.range}}};Ll=nl=vs([vl],Ll);let Ol=class{static is(e){return!!e&&("string"==typeof e.message&&e.location&&wl.isRange(e.location.range)&&pt.isUri(e.location.uri))}constructor(e,t){this.location=e,this.message=t}static isEqual(e,t){return e===t||!(!e||!t)&&(e.message===t.message&&e.location.range.isEqual(t.location.range)&&e.location.uri.toString()===t.location.uri.toString())}};Ol=vs([vl],Ol);let Ml=class{constructor(e,t,i=$l.Error){if(!wl.isRange(e))throw new TypeError("range must be set");if(!t)throw new TypeError("message must be set");this.range=e,this.message=t,this.severity=i}toJSON(){return{severity:$l[this.severity],message:this.message,range:this.range,source:this.source,code:this.code}}static isEqual(e,t){return e===t||!(!e||!t)&&(e.message===t.message&&e.severity===t.severity&&e.code===t.code&&e.severity===t.severity&&e.source===t.source&&e.range.isEqual(t.range)&&Mr(e.tags,t.tags)&&Mr(e.relatedInformation,t.relatedInformation,Ol.isEqual))}};Ml=vs([vl],Ml);let Nl=class{constructor(e,t){if(!e)throw new Error("Illegal argument, contents must be defined");Array.isArray(e)?this.contents=e:this.contents=[e],this.range=t}};var Hl;Nl=vs([vl],Nl),function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"}(Hl||(Hl={}));let Ul=class{constructor(e,t=Hl.Text){this.range=e,this.kind=t}toJSON(){return{range:this.range,kind:Hl[this.kind]}}};var Bl,Vl;Ul=vs([vl],Ul),function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"}(Bl||(Bl={})),function(e){e[e.Deprecated=1]="Deprecated"}(Vl||(Vl={}));let Wl=sl=class{static validate(e){if(!e.name)throw new Error("name must not be falsy")}constructor(e,t,i,r,n){this.name=e,this.kind=t,this.containerName=n,"string"==typeof i&&(this.containerName=i),r instanceof Ll?this.location=r:i instanceof wl&&(this.location=new Ll(r,i)),sl.validate(this)}toJSON(){return{name:this.name,kind:Bl[this.kind],location:this.location,containerName:this.containerName}}};Wl=sl=vs([vl],Wl);let zl=ol=class{static validate(e){if(!e.name)throw new Error("name must not be falsy");if(!e.range.contains(e.selectionRange))throw new Error("selectionRange must be contained in fullRange");e.children?.forEach(ol.validate)}constructor(e,t,i,r,n){this.name=e,this.detail=t,this.kind=i,this.range=r,this.selectionRange=n,this.children=[],ol.validate(this)}};var jl;zl=ol=vs([vl],zl),function(e){e[e.Invoke=1]="Invoke",e[e.Automatic=2]="Automatic"}(jl||(jl={}));let ql=class{constructor(e,t){this.title=e,this.kind=t}};ql=vs([vl],ql);let Kl=class{static{al=this}static{this.sep="."}constructor(e){this.value=e}append(e){return new al(this.value?this.value+al.sep+e:e)}intersects(e){return this.contains(e)||e.contains(this)}contains(e){return this.value===e.value||e.value.startsWith(this.value+al.sep)}};Kl=al=vs([vl],Kl);class Gl extends Kl{constructor(e){super(e),this.value=e}}Kl.Empty=new Kl(""),Kl.QuickFix=Kl.Empty.append("quickfix"),Kl.Refactor=Kl.Empty.append("refactor"),Kl.RefactorExtract=Kl.Refactor.append("extract"),Kl.RefactorInline=Kl.Refactor.append("inline"),Kl.RefactorMove=Kl.Refactor.append("move"),Kl.RefactorRewrite=Kl.Refactor.append("rewrite"),Kl.Source=Kl.Empty.append("source"),Kl.SourceOrganizeImports=Kl.Source.append("organizeImports"),Kl.SourceFixAll=Kl.Source.append("fixAll"),Kl.Notebook=Kl.Empty.append("notebook");let Ql=class{constructor(e,t){if(this.range=e,this.parent=t,t&&!t.range.contains(this.range))throw new Error("Invalid argument: parent must contain this range")}};Ql=vs([vl],Ql);let Jl=class{constructor(e,t,i,r,n,s){this.kind=e,this.name=t,this.detail=i,this.uri=r,this.range=n,this.selectionRange=s}},Zl=class{constructor(e,t){this.fromRanges=t,this.from=e}},Yl=class{constructor(e,t){this.fromRanges=t,this.to=e}};var Xl;!function(e){e[e.Information=0]="Information",e[e.Warning=1]="Warning",e[e.Error=2]="Error"}(Xl||(Xl={}));let ec=class{constructor(e,t){this.range=e,this.command=t}get isResolved(){return!!this.command}};ec=vs([vl],ec);let tc=ll=class{#t;static isMarkdownString(e){return e instanceof ll||e&&e.appendCodeblock&&e.appendMarkdown&&e.appendText&&void 0!==e.value}constructor(e,t=!1){this.#t=new no(e,{supportThemeIcons:t})}get value(){return this.#t.value}set value(e){this.#t.value=e}get isTrusted(){return this.#t.isTrusted}set isTrusted(e){this.#t.isTrusted=e}get supportThemeIcons(){return this.#t.supportThemeIcons}set supportThemeIcons(e){this.#t.supportThemeIcons=e}get supportHtml(){return this.#t.supportHtml}set supportHtml(e){this.#t.supportHtml=e}get baseUri(){return this.#t.baseUri}set baseUri(e){this.#t.baseUri=e}appendText(e){return this.#t.appendText(e),this}appendMarkdown(e){return this.#t.appendMarkdown(e),this}appendCodeblock(e,t){return this.#t.appendCodeblock(t??"",e),this}};tc=ll=vs([vl],tc);let ic=class{constructor(e,t){this.label=e,this.documentation=t}};ic=vs([vl],ic);let rc=class{constructor(e,t){this.label=e,this.documentation=t,this.parameters=[]}};rc=vs([vl],rc);let nc=class{constructor(){this.activeSignature=0,this.activeParameter=0,this.signatures=[]}};var sc,oc;nc=vs([vl],nc),function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"}(sc||(sc={})),function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"}(oc||(oc={}));let ac=class{constructor(e){this.value=e}};ac=vs([vl],ac);let lc=class{constructor(e,t,i){this.position=e,this.label=t,this.kind=i}};var cc,uc,dc;lc=vs([vl],lc),function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"}(cc||(cc={})),function(e){e[e.Text=0]="Text",e[e.Method=1]="Method",e[e.Function=2]="Function",e[e.Constructor=3]="Constructor",e[e.Field=4]="Field",e[e.Variable=5]="Variable",e[e.Class=6]="Class",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Unit=10]="Unit",e[e.Value=11]="Value",e[e.Enum=12]="Enum",e[e.Keyword=13]="Keyword",e[e.Snippet=14]="Snippet",e[e.Color=15]="Color",e[e.File=16]="File",e[e.Reference=17]="Reference",e[e.Folder=18]="Folder",e[e.EnumMember=19]="EnumMember",e[e.Constant=20]="Constant",e[e.Struct=21]="Struct",e[e.Event=22]="Event",e[e.Operator=23]="Operator",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue"}(uc||(uc={})),function(e){e[e.Deprecated=1]="Deprecated"}(dc||(dc={}));let hc=class{constructor(e,t){this.label=e,this.kind=t}toJSON(){return{label:this.label,kind:this.kind&&uc[this.kind],detail:this.detail,documentation:this.documentation,sortText:this.sortText,filterText:this.filterText,preselect:this.preselect,insertText:this.insertText,textEdit:this.textEdit}}};hc=vs([vl],hc);let pc=class{constructor(e=[],t=!1){this.items=e,this.isIncomplete=t}};pc=vs([vl],pc);let gc=class{constructor(e,t,i){this.insertText=e,this.range=t,this.command=i}};gc=vs([vl],gc);let fc=class{constructor(e){this.commands=void 0,this.suppressSuggestions=void 0,this.items=e}};var mc,vc,_c,yc,wc,bc,xc,Cc;fc=vs([vl],fc),function(e){e[e.Active=-1]="Active",e[e.Beside=-2]="Beside",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Nine=9]="Nine"}(mc||(mc={})),function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"}(vc||(vc={})),function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative"}(_c||(_c={})),function(e){e[e.Manual=1]="Manual",e[e.AfterDelay=2]="AfterDelay",e[e.FocusOut=3]="FocusOut"}(yc||(yc={})),function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"}(wc||(wc={})),function(e){e[e.Keyboard=1]="Keyboard",e[e.Mouse=2]="Mouse",e[e.Command=3]="Command"}(bc||(bc={})),function(e){e[e.Undo=1]="Undo",e[e.Redo=2]="Redo"}(xc||(xc={})),function(e){e[e.OpenOpen=0]="OpenOpen",e[e.ClosedClosed=1]="ClosedClosed",e[e.OpenClosed=2]="OpenClosed",e[e.ClosedOpen=3]="ClosedOpen"}(Cc||(Cc={})),function(e){e.fromValue=function(t){switch(t){case"keyboard":return e.Keyboard;case"mouse":return e.Mouse;case"api":return e.Command}}}(bc||(bc={}));let Dc=class{constructor(e,t){if(t&&!pt.isUri(t))throw u("target");if(!wl.isRange(e)||e.isEmpty)throw u("range");this.range=e,this.target=t}};Dc=vs([vl],Dc);let Sc=class{constructor(e,t,i,r){this.red=e,this.green=t,this.blue=i,this.alpha=r}};Sc=vs([vl],Sc);let Ec=class{constructor(e,t){if(t&&!(t instanceof Sc))throw u("color");if(!wl.isRange(e)||e.isEmpty)throw u("range");this.range=e,this.color=t}};Ec=vs([vl],Ec);let kc=class{constructor(e){if(!e||"string"!=typeof e)throw u("label");this.label=e}};var Ic,Tc,Pc,Ac,Rc;kc=vs([vl],kc),function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Information=2]="Information"}(Ic||(Ic={})),function(e){e[e.Unknown=0]="Unknown",e[e.Shutdown=1]="Shutdown",e[e.Process=2]="Process",e[e.User=3]="User",e[e.Extension=4]="Extension"}(Tc||(Tc={}));class Fc{constructor(e,t,i){if(this.startIndex=e,this.length=t,this.tooltip=i,"number"!=typeof e||e<0)throw u("startIndex");if("number"!=typeof t||t<1)throw u("length");if(void 0!==i&&"string"!=typeof i)throw u("tooltip")}}class $c{constructor(e){this.uri=e}}class Lc{constructor(e){this.terminalCommand=e}}!function(e){e[e.Panel=1]="Panel",e[e.Editor=2]="Editor"}(Pc||(Pc={}));class Oc{constructor(e){if(this.options=e,"object"!=typeof e)throw u("options")}}!function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"}(Ac||(Ac={})),function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"}(Rc||(Rc={}));let Mc=class{static{cl=this}static{this.Clean=new cl("clean","Clean")}static{this.Build=new cl("build","Build")}static{this.Rebuild=new cl("rebuild","Rebuild")}static{this.Test=new cl("test","Test")}static from(e){switch(e){case"clean":return cl.Clean;case"build":return cl.Build;case"rebuild":return cl.Rebuild;case"test":return cl.Test;default:return}}constructor(e,t){if(this.label=t,"string"!=typeof e)throw u("name");if("string"!=typeof t)throw u("name");this._id=e}get id(){return this._id}};function Nc(e){let t="";for(let i=0;i<e.length;i++)t+=e[i].replace(/,/g,",,")+",";return t}Mc=cl=vs([vl],Mc);let Hc=class{constructor(e,t,i){if("string"!=typeof e)throw u("process");this._args=[],this._process=e,void 0!==t&&(Array.isArray(t)?(this._args=t,this._options=i):this._options=t)}get process(){return this._process}set process(e){if("string"!=typeof e)throw u("process");this._process=e}get args(){return this._args}set args(e){Array.isArray(e)||(e=[]),this._args=e}get options(){return this._options}set options(e){this._options=e}computeId(){const e=[];if(e.push("process"),void 0!==this._process&&e.push(this._process),this._args&&this._args.length>0)for(const t of this._args)e.push(t);return Nc(e)}};Hc=vs([vl],Hc);let Uc=class{constructor(e,t,i){if(this._args=[],Array.isArray(t)){if(!e)throw u("command can't be undefined or null");if("string"!=typeof e&&"string"!=typeof e.value)throw u("command");this._command=e,this._args=t,this._options=i}else{if("string"!=typeof e)throw u("commandLine");this._commandLine=e,this._options=t}}get commandLine(){return this._commandLine}set commandLine(e){if("string"!=typeof e)throw u("commandLine");this._commandLine=e}get command(){return this._command?this._command:""}set command(e){if("string"!=typeof e&&"string"!=typeof e.value)throw u("command");this._command=e}get args(){return this._args}set args(e){this._args=e||[]}get options(){return this._options}set options(e){this._options=e}computeId(){const e=[];if(e.push("shell"),void 0!==this._commandLine&&e.push(this._commandLine),void 0!==this._command&&e.push("string"==typeof this._command?this._command:this._command.value),this._args&&this._args.length>0)for(const t of this._args)e.push("string"==typeof t?t:t.value);return Nc(e)}};var Bc,Vc;Uc=vs([vl],Uc),function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"}(Bc||(Bc={})),function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace"}(Vc||(Vc={}));class Wc{constructor(e){this._callback=e}computeId(){return"customExecution"+js()}set callback(e){this._callback=e}get callback(){return this._callback}}let zc=class{static{ul=this}static{this.ExtensionCallbackType="customExecution"}static{this.ProcessType="process"}static{this.ShellType="shell"}static{this.EmptyType="$empty"}constructor(e,t,i,r,n,s){let o;this.__deprecated=!1,this._definition=this.definition=e,"string"==typeof t?(this._name=this.name=t,this._source=this.source=i,this.execution=r,o=n,this.__deprecated=!0):(t===Vc.Global||Vc.Workspace,this.target=t,this._name=this.name=i,this._source=this.source=r,this.execution=n,o=s),"string"==typeof o?(this._problemMatchers=[o],this._hasDefinedMatchers=!0):Array.isArray(o)?(this._problemMatchers=o,this._hasDefinedMatchers=!0):(this._problemMatchers=[],this._hasDefinedMatchers=!1),this._isBackground=!1,this._presentationOptions=Object.create(null),this._runOptions=Object.create(null)}get _id(){return this.__id}set _id(e){this.__id=e}get _deprecated(){return this.__deprecated}clear(){void 0!==this.__id&&(this.__id=void 0,this._scope=void 0,this.computeDefinitionBasedOnExecution())}computeDefinitionBasedOnExecution(){this._execution instanceof Hc?this._definition={type:ul.ProcessType,id:this._execution.computeId()}:this._execution instanceof Uc?this._definition={type:ul.ShellType,id:this._execution.computeId()}:this._execution instanceof Wc?this._definition={type:ul.ExtensionCallbackType,id:this._execution.computeId()}:this._definition={type:ul.EmptyType,id:js()}}get definition(){return this._definition}set definition(e){if(null==e)throw u("Kind can't be undefined or null");this.clear(),this._definition=e}get scope(){return this._scope}set target(e){this.clear(),this._scope=e}get name(){return this._name}set name(e){if("string"!=typeof e)throw u("name");this.clear(),this._name=e}get execution(){return this._execution}set execution(e){null===e&&(e=void 0),this.clear(),this._execution=e;const t=this._definition.type;ul.EmptyType!==t&&ul.ProcessType!==t&&ul.ShellType!==t&&ul.ExtensionCallbackType!==t||this.computeDefinitionBasedOnExecution()}get problemMatchers(){return this._problemMatchers}set problemMatchers(e){if(!Array.isArray(e))return this.clear(),this._problemMatchers=[],void(this._hasDefinedMatchers=!1);this.clear(),this._problemMatchers=e,this._hasDefinedMatchers=!0}get hasDefinedMatchers(){return this._hasDefinedMatchers}get isBackground(){return this._isBackground}set isBackground(e){!0!==e&&!1!==e&&(e=!1),this.clear(),this._isBackground=e}get source(){return this._source}set source(e){if("string"!=typeof e||0===e.length)throw u("source must be a string of length > 0");this.clear(),this._source=e}get group(){return this._group}set group(e){null===e&&(e=void 0),this.clear(),this._group=e}get detail(){return this._detail}set detail(e){null===e&&(e=void 0),this._detail=e}get presentationOptions(){return this._presentationOptions}set presentationOptions(e){null==e&&(e=Object.create(null)),this.clear(),this._presentationOptions=e}get runOptions(){return this._runOptions}set runOptions(e){null==e&&(e=Object.create(null)),this.clear(),this._runOptions=e}};var jc,qc;zc=ul=vs([vl],zc),function(e){e[e.SourceControl=1]="SourceControl",e[e.Window=10]="Window",e[e.Notification=15]="Notification"}(jc||(jc={})),function(e){e.isViewBadge=function(e){const t=e;return fi(t.value)?!(t.tooltip&&!hi(t.tooltip))||(console.log("INVALID view badge, invalid tooltip",t.tooltip),!1):(console.log("INVALID view badge, invalid value",t.value),!1)}}(qc||(qc={}));let Kc=dl=class{static isTreeItem(e,t){const i=e;if(void 0!==i.checkboxState){const e=fi(i.checkboxState)?i.checkboxState:pi(i.checkboxState)&&fi(i.checkboxState.state)?i.checkboxState.state:void 0,t=!fi(i.checkboxState)&&pi(i.checkboxState)?i.checkboxState.tooltip:void 0;if(void 0===e||e!==Qc.Checked&&e!==Qc.Unchecked||void 0!==t&&!hi(t))return console.log("INVALID tree item, invalid checkboxState",i.checkboxState),!1}if(e instanceof dl)return!0;if(void 0!==i.label&&!hi(i.label)&&!i.label?.label)return console.log("INVALID tree item, invalid label",i.label),!1;if(void 0!==i.id&&!hi(i.id))return console.log("INVALID tree item, invalid id",i.id),!1;if(!(void 0===i.iconPath||hi(i.iconPath)||pt.isUri(i.iconPath)||i.iconPath&&hi(i.iconPath.id))){const e=i.iconPath;if(!e||!hi(e.light)&&!pt.isUri(e.light)&&!hi(e.dark)&&!pt.isUri(e.dark))return console.log("INVALID tree item, invalid iconPath",i.iconPath),!1}return void 0===i.description||hi(i.description)||"boolean"==typeof i.description?void 0===i.resourceUri||pt.isUri(i.resourceUri)?void 0===i.tooltip||hi(i.tooltip)||i.tooltip instanceof tc?void 0===i.command||i.command.command?void 0!==i.collapsibleState&&i.collapsibleState<Gc.None&&i.collapsibleState>Gc.Expanded?(console.log("INVALID tree item, invalid collapsibleState",i.collapsibleState),!1):void 0===i.contextValue||hi(i.contextValue)?!(void 0!==i.accessibilityInformation&&!i.accessibilityInformation?.label)||(console.log("INVALID tree item, invalid accessibilityInformation",i.accessibilityInformation),!1):(console.log("INVALID tree item, invalid contextValue",i.contextValue),!1):(console.log("INVALID tree item, invalid command",i.command),!1):(console.log("INVALID tree item, invalid tooltip",i.tooltip),!1):(console.log("INVALID tree item, invalid resourceUri",i.resourceUri),!1):(console.log("INVALID tree item, invalid description",i.description),!1)}constructor(e,t=Gc.None){this.collapsibleState=t,pt.isUri(e)?this.resourceUri=e:this.label=e}};var Gc,Qc;Kc=dl=vs([vl],Kc),function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"}(Gc||(Gc={})),function(e){e[e.Unchecked=0]="Unchecked",e[e.Checked=1]="Checked"}(Qc||(Qc={}));let Jc=class{async asString(){return"string"==typeof this.value?this.value:JSON.stringify(this.value)}asFile(){}constructor(e){this.value=e}};Jc=vs([vl],Jc);class Zc extends Jc{}class Yc extends Zc{#i;constructor(e){super(""),this.#i=e}asFile(){return this.#i}}class Xc{constructor(e,t,i,r){this.name=e,this.uri=t,this._itemId=i,this._getData=r}data(){return this._getData()}}let eu=class{#r=new Map;constructor(e){for(const[t,i]of e??[]){const e=this.#r.get(this.#n(t));e?e.push(i):this.#r.set(this.#n(t),[i])}}get(e){return this.#r.get(this.#n(e))?.[0]}set(e,t){this.#r.set(this.#n(e),[t])}forEach(e,t){for(const[i,r]of this.#r)for(const n of r)e.call(t,n,i,this)}*[Symbol.iterator](){for(const[e,t]of this.#r)for(const i of t)yield[e,i]}#n(e){return e.toLowerCase()}};eu=vs([vl],eu);let tu=class{constructor(e){this.insertText=e}};tu=vs([vl],tu);let iu=class{constructor(e,t){this.label=t,this.insertText=e}};iu=vs([vl],iu);let ru=class{constructor(e,t){this.id=e,this.color=t}static isThemeIcon(e){return"string"==typeof e.id||(console.log("INVALID ThemeIcon, invalid id",e.id),!1)}};ru=vs([vl],ru),ru.File=new ru("file"),ru.Folder=new ru("folder");let nu=class{constructor(e){this.id=e}};var su;nu=vs([vl],nu),function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.WorkspaceFolder=3]="WorkspaceFolder"}(su||(su={}));let ou=class{get base(){return this._base}set base(e){this._base=e,this._baseUri=pt.file(e)}get baseUri(){return this._baseUri}set baseUri(e){this._baseUri=e,this._base=e.fsPath}constructor(e,t){if("string"!=typeof e&&(!e||!pt.isUri(e)&&!pt.isUri(e.uri)))throw u("base");if("string"!=typeof t)throw u("pattern");"string"==typeof e?this.baseUri=pt.file(e):pt.isUri(e)?this.baseUri=e:this.baseUri=e.uri,this.pattern=t}toJSON(){return{pattern:this.pattern,base:this.base,baseUri:this.baseUri.toJSON()}}};ou=vs([vl],ou);const au=new WeakMap;function lu(e,t){au.set(e,t)}let cu=class{constructor(e,t,i,r){this.enabled="boolean"!=typeof e||e,"string"==typeof t&&(this.condition=t),"string"==typeof i&&(this.hitCondition=i),"string"==typeof r&&(this.logMessage=r)}get id(){return this._id||(this._id=au.get(this)??js()),this._id}};cu=vs([vl],cu);let uu=class extends cu{constructor(e,t,i,r,n){if(super(t,i,r,n),null===e)throw u("location");this.location=e}};uu=vs([vl],uu);let du=class extends cu{constructor(e,t,i,r,n){super(t,i,r,n),this.functionName=e}};du=vs([vl],du);let hu=class extends cu{constructor(e,t,i,r,n,s,o){if(super(r,n,s,o),!t)throw u("dataId");this.label=e,this.dataId=t,this.canPersist=i}};hu=vs([vl],hu);let pu=class{constructor(e,t,i){this.command=e,this.args=t||[],this.options=i}};pu=vs([vl],pu);let gu=class{constructor(e,t){this.port=e,this.host=t}};gu=vs([vl],gu);let fu=class{constructor(e){this.path=e}};fu=vs([vl],fu);let mu=class{constructor(e){this.implementation=e}};mu=vs([vl],mu);let vu=class{constructor(e,t,i){this.session=e,this.threadId=t,this.frameId=i}};vu=vs([vl],vu);let _u=class{constructor(e,t){this.session=e,this.threadId=t}};_u=vs([vl],_u);let yu=class{constructor(e,t){this.range=e,this.expression=t}};var wu;yu=vs([vl],yu),function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"}(wu||(wu={}));let bu=class{constructor(e,t){this.range=e,this.text=t}};bu=vs([vl],bu);let xu=class{constructor(e,t,i=!0){this.range=e,this.variableName=t,this.caseSensitiveLookup=i}};xu=vs([vl],xu);let Cu=class{constructor(e,t){this.range=e,this.expression=t}};Cu=vs([vl],Cu);let Du=class{constructor(e,t){this.frameId=e,this.stoppedLocation=t}};var Su;Du=vs([vl],Du),function(e){e[e.Changed=1]="Changed",e[e.Created=2]="Created",e[e.Deleted=3]="Deleted"}(Su||(Su={}));let Eu=hl=class extends Error{static FileExists(e){return new hl(e,aa.FileExists,hl.FileExists)}static FileNotFound(e){return new hl(e,aa.FileNotFound,hl.FileNotFound)}static FileNotADirectory(e){return new hl(e,aa.FileNotADirectory,hl.FileNotADirectory)}static FileIsADirectory(e){return new hl(e,aa.FileIsADirectory,hl.FileIsADirectory)}static NoPermissions(e){return new hl(e,aa.NoPermissions,hl.NoPermissions)}static Unavailable(e){return new hl(e,aa.Unavailable,hl.Unavailable)}constructor(e,t=aa.Unknown,i){super(pt.isUri(e)?e.toString(!0):e),this.code=i?.name??"Unknown",ua(this,t),Object.setPrototypeOf(this,hl.prototype),"function"==typeof Error.captureStackTrace&&"function"==typeof i&&Error.captureStackTrace(this,i)}};Eu=hl=vs([vl],Eu);let ku=class{constructor(e,t,i){this.start=e,this.end=t,this.kind=i}};var Iu,Tu,Pu,Au,Ru,Fu;ku=vs([vl],ku),function(e){e[e.Comment=1]="Comment",e[e.Imports=2]="Imports",e[e.Region=3]="Region"}(Iu||(Iu={})),function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"}(Tu||(Tu={})),function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"}(Pu||(Pu={})),function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"}(Au||(Au={})),function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"}(Ru||(Ru={}));class $u{constructor(e,t=[]){this.tokenTypes=e,this.tokenModifiers=t}}function Lu(e){return void 0===e||(t=e,Array.isArray(t)&&t.every((e=>hi(e))));var t}class Ou{constructor(e){if(this._prevLine=0,this._prevChar=0,this._dataIsSortedAndDeltaEncoded=!0,this._data=[],this._dataLen=0,this._tokenTypeStrToInt=new Map,this._tokenModifierStrToInt=new Map,this._hasLegend=!1,e){this._hasLegend=!0;for(let t=0,i=e.tokenTypes.length;t<i;t++)this._tokenTypeStrToInt.set(e.tokenTypes[t],t);for(let t=0,i=e.tokenModifiers.length;t<i;t++)this._tokenModifierStrToInt.set(e.tokenModifiers[t],t)}}push(e,t,i,r,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof i&&"number"==typeof r&&("number"==typeof n||void 0===n))return void 0===n&&(n=0),this._pushEncoded(e,t,i,r,n);if(wl.isRange(e)&&"string"==typeof t&&Lu(i))return this._push(e,t,i);throw u()}_push(e,t,i){if(!this._hasLegend)throw new Error("Legend must be provided in constructor");if(e.start.line!==e.end.line)throw new Error("`range` cannot span multiple lines");if(!this._tokenTypeStrToInt.has(t))throw new Error("`tokenType` is not in the provided legend");const r=e.start.line,n=e.start.character,s=e.end.character-e.start.character,o=this._tokenTypeStrToInt.get(t);let a=0;if(i)for(const l of i){if(!this._tokenModifierStrToInt.has(l))throw new Error("`tokenModifier` is not in the provided legend");a|=1<<this._tokenModifierStrToInt.get(l)>>>0}this._pushEncoded(r,n,s,o,a)}_pushEncoded(e,t,i,r,n){if(this._dataIsSortedAndDeltaEncoded&&(e<this._prevLine||e===this._prevLine&&t<this._prevChar)){this._dataIsSortedAndDeltaEncoded=!1;const e=this._data.length/5|0;let t=0,i=0;for(let r=0;r<e;r++){let e=this._data[5*r],n=this._data[5*r+1];0===e?(e=t,n+=i):e+=t,this._data[5*r]=e,this._data[5*r+1]=n,t=e,i=n}}let s=e,o=t;this._dataIsSortedAndDeltaEncoded&&this._dataLen>0&&(s-=this._prevLine,0===s&&(o-=this._prevChar)),this._data[this._dataLen++]=s,this._data[this._dataLen++]=o,this._data[this._dataLen++]=i,this._data[this._dataLen++]=r,this._data[this._dataLen++]=n,this._prevLine=e,this._prevChar=t}static _sortAndDeltaEncode(e){const t=[],i=e.length/5|0;for(let o=0;o<i;o++)t[o]=o;t.sort(((t,i)=>{const r=e[5*t],n=e[5*i];if(r===n){return e[5*t+1]-e[5*i+1]}return r-n}));const r=new Uint32Array(e.length);let n=0,s=0;for(let o=0;o<i;o++){const i=5*t[o],a=e[i+0],l=e[i+1],c=e[i+2],u=e[i+3],d=e[i+4],h=a-n,p=0===h?l-s:l,g=5*o;r[g+0]=h,r[g+1]=p,r[g+2]=c,r[g+3]=u,r[g+4]=d,n=a,s=l}return r}build(e){return this._dataIsSortedAndDeltaEncoded?new Mu(new Uint32Array(this._data),e):new Mu(Ou._sortAndDeltaEncode(this._data),e)}}class Mu{constructor(e,t){this.resultId=t,this.data=e}}class Nu{constructor(e,t,i){this.start=e,this.deleteCount=t,this.data=i}}class Hu{constructor(e,t){this.resultId=t,this.edits=e}}!function(e){e[e.Separate=0]="Separate",e[e.MergeWithParent=1]="MergeWithParent"}(Fu||(Fu={}));let Uu=class{static{this.Back={iconPath:new ru("arrow-left")}}constructor(){}};var Bu,Vu,Wu;Uu=vs([vl],Uu),function(e){e[e.Separator=-1]="Separator",e[e.Default=0]="Default"}(Bu||(Bu={})),function(e){e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(Vu||(Vu={})),function(e){e[e.UI=1]="UI",e[e.Workspace=2]="Workspace"}(Wu||(Wu={}));class zu{static validate(e){if("string"==typeof e.badge){let t=ai(e.badge,0);if(t<e.badge.length&&(t+=ai(e.badge,t)),e.badge.length>t)throw new Error("The 'badge'-property must be undefined or a short character")}else if(e.badge&&!ru.isThemeIcon(e.badge))throw new Error("The 'badge'-property is not a valid ThemeIcon");if(!e.color&&!e.badge&&!e.tooltip)throw new Error("The decoration is empty");return!0}constructor(e,t,i){this.badge=e,this.tooltip=t,this.color=i}}let ju=class{constructor(e){this.kind=e}};var qu;ju=vs([vl],ju),function(e){e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.HighContrast=3]="HighContrast",e[e.HighContrastLight=4]="HighContrastLight"}(qu||(qu={}));let Ku=class e{static isNotebookRange(t){return t instanceof e||!!t&&("number"==typeof t.start&&"number"==typeof t.end)}get start(){return this._start}get end(){return this._end}get isEmpty(){return this._start===this._end}constructor(e,t){if(e<0)throw u("start must be positive");if(t<0)throw u("end must be positive");e<=t?(this._start=e,this._end=t):(this._start=t,this._end=e)}with(t){let i=this._start,r=this._end;return void 0!==t.start&&(i=t.start),void 0!==t.end&&(r=t.end),i===this._start&&r===this._end?this:new e(i,r)}},Gu=class e{static validate(e){if("number"!=typeof e.kind)throw new Error("NotebookCellData MUST have 'kind' property");if("string"!=typeof e.value)throw new Error("NotebookCellData MUST have 'value' property");if("string"!=typeof e.languageId)throw new Error("NotebookCellData MUST have 'languageId' property")}static isNotebookCellDataArray(t){return Array.isArray(t)&&t.every((t=>e.isNotebookCellData(t)))}static isNotebookCellData(e){return!0}constructor(t,i,r,n,s,o,a){this.kind=t,this.value=i,this.languageId=r,this.mime=n,this.outputs=s??[],this.metadata=o,this.executionSummary=a,e.validate(this)}},Qu=class{constructor(e){this.cells=e}},Ju=class e{static isNotebookCellOutputItem(t){return t instanceof e||!!t&&("string"==typeof t.mime&&t.data instanceof Uint8Array)}static error(t){const i={name:t.name,message:t.message,stack:t.stack};return e.json(i,"application/vnd.code.notebook.error")}static stdout(t){return e.text(t,"application/vnd.code.notebook.stdout")}static stderr(t){return e.text(t,"application/vnd.code.notebook.stderr")}static bytes(t,i="application/octet-stream"){return new e(t,i)}static#s=new TextEncoder;static text(t,i=co.text){const r=e.#s.encode(String(t));return new e(r,i)}static json(t,i="text/x-json"){const r=JSON.stringify(t,void 0,"\t");return e.text(r,i)}constructor(e,t){this.data=e,this.mime=t;const i=ho(t,!0);if(!i)throw new Error(`INVALID mime type: ${t}. Must be in the format "type/subtype[;optionalparameter]"`);this.mime=i}},Zu=class e{static isNotebookCellOutput(t){return t instanceof e||!(!t||"object"!=typeof t)&&("string"==typeof t.id&&Array.isArray(t.items))}static ensureUniqueMimeTypes(e,t=!1){const i=new Set,r=new Set;for(let n=0;n<e.length;n++){const s=e[n],o=ho(s.mime);i.has(o)&&!Ta(o)?(r.add(n),t&&console.warn(`DUPLICATED mime type '${s.mime}' will be dropped`)):i.add(o)}return 0===r.size?e:e.filter(((e,t)=>!r.has(t)))}constructor(t,i,r){this.items=e.ensureUniqueMimeTypes(t,!0),"string"==typeof i?(this.id=i,this.metadata=r):(this.id=js(),this.metadata=i??r)}};var Yu,Xu,ed,td,id,rd;!function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"}(Yu||(Yu={})),function(e){e[e.Idle=1]="Idle",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"}(Xu||(Xu={})),function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"}(ed||(ed={})),function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"}(td||(td={}));class nd{constructor(e,t){this.text=e,this.alignment=t}}!function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred"}(id||(id={})),function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred",e[e.Hidden=-1]="Hidden"}(rd||(rd={}));let sd=class{constructor(e,t=[]){this.uri=e,this.provides=qr(t)}},od=class{constructor(e){this.label=e}},ad=class{constructor(e,t){this.label=e,this.timestamp=t}};var ld,cd,ud,dd,hd;ad=vs([vl],ad),function(e){e[e.Production=1]="Production",e[e.Development=2]="Development",e[e.Test=3]="Test"}(ld||(ld={})),function(e){e[e.Node=1]="Node",e[e.Webworker=2]="Webworker"}(cd||(cd={})),function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"}(ud||(ud={}));class pd{constructor(e,t){this.ranges=e,this.wordPattern=t}}class gd{constructor(e){this._autoForwardAction=e}get autoForwardAction(){return this._autoForwardAction}}!function(e){e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"}(dd||(dd={})),function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"}(hd||(hd={}));let fd=class{constructor(e=void 0,t=void 0,i=void 0,r=!1){this.include=e,this.exclude=t,this.profile=i,this.continuous=r}};fd=vs([vl],fd);let md=pl=class{static diff(e,t,i){const r=new pl(e);return r.expectedOutput=t,r.actualOutput=i,r}constructor(e){this.message=e}};md=pl=vs([vl],md);let vd=class{constructor(e){this.id=e}};vd=vs([vl],vd);let _d=class{constructor(e,t){this.covered=e,this.total=t}};_d=vs([vl],_d);let yd=gl=class{static fromDetails(e,t){const i=new _d(0,0),r=new _d(0,0),n=new _d(0,0);for(const o of t)if("branches"in o){i.total+=1,i.covered+=o.executionCount>0?1:0;for(const e of o.branches)r.total+=1,r.covered+=e.executionCount>0?1:0}else n.total+=1,n.covered+=o.executionCount>0?1:0;const s=new gl(e,i,r.total>0?r:void 0,n.total>0?n:void 0);return s.detailedCoverage=t,s}constructor(e,t,i,r){this.uri=e,this.statementCoverage=t,this.branchCoverage=i,this.functionCoverage=r}};yd=gl=vs([vl],yd);let wd=class{constructor(e,t,i=[]){this.executionCount=e,this.location=t,this.branches=i}};wd=vs([vl],wd);let bd=class{constructor(e,t){this.executionCount=e,this.location=t}};bd=vs([vl],bd);let xd=class{constructor(e,t){this.executionCount=e,this.location=t}};var Cd,Dd,Sd;xd=vs([vl],xd),function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"}(Cd||(Cd={})),function(e){e[e.Untrusted=0]="Untrusted",e[e.Trusted=1]="Trusted",e[e.Unspecified=2]="Unspecified"}(Dd||(Dd={})),function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"}(Sd||(Sd={}));let Ed=class{constructor(e,t,i,r,n,s){this.kind=e,this.name=t,this.detail=i,this.uri=r,this.range=n,this.selectionRange=s}};class kd{constructor(e){this.uri=e}}class Id{constructor(e,t){this.original=e,this.modified=t}}class Td{constructor(e,t,i,r){this.base=e,this.input1=t,this.input2=i,this.result=r}}class Pd{constructor(e,t){this.uri=e,this.viewType=t}}class Ad{constructor(e){this.viewType=e}}class Rd{constructor(e,t){this.uri=e,this.notebookType=t}}class Fd{constructor(e,t,i){this.original=e,this.modified=t,this.notebookType=i}}class $d{constructor(){}}class Ld{constructor(e,t){this.uri=e,this.inputBoxUri=t}}var Od,Md,Nd,Hd,Ud;!function(e){e[e.Up=1]="Up",e[e.Down=2]="Down"}(Od||(Od={})),function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"}(Md||(Md={})),function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful",e[e.Undone=2]="Undone",e[e.Accepted=3]="Accepted"}(Nd||(Nd={})),function(e){e[e.System=0]="System",e[e.User=1]="User",e[e.Assistant=2]="Assistant",e[e.Function=3]="Function"}(Hd||(Hd={})),function(e){e[e.Short=1]="Short",e[e.Medium=2]="Medium",e[e.Full=3]="Full"}(Ud||(Ud={}));let Bd=class{constructor(e,t){this.role=e,this.content=t}};var Vd,Wd,zd,jd,qd,Kd,Gd,Qd,Jd,Zd,Yd,Xd,eh,th,ih,rh,nh,sh,oh,ah,lh,ch,uh,dh,hh,ph,gh,fh,mh,vh,_h,yh,wh,bh,xh,Ch,Dh,Sh,Eh,kh,Ih,Th,Ph,Ah,Rh,Fh,$h,Lh,Oh,Mh,Nh,Hh,Uh,Bh,Vh,Wh,zh,jh,qh,Kh,Gh,Qh,Jh,Zh,Yh,Xh,ep,tp,ip,rp,np,sp,op,ap,lp,cp,up,dp,hp,pp,gp,fp,mp,vp,_p,yp,wp;function bp(e){return 0===e.length||!!function(e){return void 0!==e.range}(e[0])}function xp(e){return void 0===e?e:"string"==typeof e?pt.file(e):e}!function(e){e[e.SymbolInformation=1]="SymbolInformation",e[e.CommandInformation=2]="CommandInformation",e[e.SearchInformation=3]="SearchInformation",e[e.SettingInformation=4]="SettingInformation"}(Vd||(Vd={})),function(e){e.to=function(e){const{selectionStartLineNumber:t,selectionStartColumn:i,positionLineNumber:r,positionColumn:n}=e,s=new yl(t-1,i-1),o=new yl(r-1,n-1);return new bl(s,o)},e.from=function(e){const{anchor:t,active:i}=e;return{selectionStartLineNumber:t.line+1,selectionStartColumn:t.character+1,positionLineNumber:i.line+1,positionColumn:i.character+1}}}(Wd||(Wd={})),function(e){e.from=function(e){if(!e)return;const{start:t,end:i}=e;return{startLineNumber:t.line+1,startColumn:t.character+1,endLineNumber:i.line+1,endColumn:i.character+1}},e.to=function(e){if(!e)return;const{startLineNumber:t,startColumn:i,endLineNumber:r,endColumn:n}=e;return new wl(t-1,i-1,r-1,n-1)}}(zd||(zd={})),function(e){e.to=function(e){switch(e){case 1:return ud.Comment;case 0:return ud.Other;case 3:return ud.RegEx;case 2:return ud.String}}}(jd||(jd={})),function(e){e.to=function(e){return new yl(e.lineNumber-1,e.column-1)},e.from=function(e){return{lineNumber:e.line+1,column:e.character+1}}}(qd||(qd={})),function(e){function t(e,t){return t&&"string"==typeof e?t.transformOutgoingScheme(e):e}e.from=function(e,i,r){return Hr(qr(e).map((e=>function(e,i,r){if("string"==typeof e)return{$serialized:!0,language:e,isBuiltin:r?.isBuiltin};if(e)return{$serialized:!0,language:e.language,scheme:t(e.scheme,i),pattern:Vh.from(e.pattern)??void 0,exclusive:e.exclusive,notebookType:e.notebookType,isBuiltin:r?.isBuiltin};return}(e,i,r))))}}(Kd||(Kd={})),function(e){e.from=function(e){switch(e){case Fl.Unnecessary:return 1;case Fl.Deprecated:return 2}},e.to=function(e){switch(e){case 1:return Fl.Unnecessary;case 2:return Fl.Deprecated;default:return}}}(Gd||(Gd={})),function(e){e.from=function(e){let t;return e.code&&(t=hi(e.code)||fi(e.code)?String(e.code):{value:String(e.code.value),target:e.code.target}),{...zd.from(e.range),message:e.message,source:e.source,code:t,severity:Zd.from(e.severity),relatedInformation:e.relatedInformation&&e.relatedInformation.map(Jd.from),tags:Array.isArray(e.tags)?Hr(e.tags.map(Gd.from)):void 0}},e.to=function(e){const t=new Ml(zd.to(e),e.message,Zd.to(e.severity));return t.source=e.source,t.code=hi(e.code)?e.code:e.code?.value,t.relatedInformation=e.relatedInformation&&e.relatedInformation.map(Jd.to),t.tags=e.tags&&Hr(e.tags.map(Gd.to)),t}}(Qd||(Qd={})),function(e){e.from=function(e){return{...zd.from(e.location.range),message:e.message,resource:e.location.uri}},e.to=function(e){return new Ol(new Ll(e.resource,zd.to(e)),e.message)}}(Jd||(Jd={})),function(e){e.from=function(e){switch(e){case $l.Error:return Po.Error;case $l.Warning:return Po.Warning;case $l.Information:return Po.Info;case $l.Hint:return Po.Hint}return Po.Error},e.to=function(e){switch(e){case Po.Info:return $l.Information;case Po.Warning:return $l.Warning;case Po.Error:return $l.Error;case Po.Hint:return $l.Hint;default:return $l.Error}}}(Zd||(Zd={})),function(e){e.from=function(e){return"number"==typeof e&&e>=mc.One?e-1:e===mc.Beside?-2:-1},e.to=function(e){if("number"==typeof e&&e>=0)return e+1;throw new Error("invalid 'EditorGroupColumn'")}}(Yd||(Yd={})),function(e){function t(e,t){if(!e)return e;let i;try{i=function(e){let t=JSON.parse(e);return t=lo(t),t}(e)}catch(_C){}if(!i)return e;let r=!1;return i=Is(i,(e=>{if(pt.isUri(e)){const i=`__uri_${Math.random().toString(16).slice(2,8)}`;return t[i]=e,r=!0,i}})),r?JSON.stringify(i):e}e.fromMany=function(t){return t.map(e.from)},e.from=function(e){let i;if((r=e)&&"object"==typeof r&&"string"==typeof r.language&&"string"==typeof r.value){const{language:t,value:r}=e;i={value:"```"+t+"\n"+r+"\n```\n"}}else i=tc.isMarkdownString(e)?{value:e.value,isTrusted:e.isTrusted,supportThemeIcons:e.supportThemeIcons,supportHtml:e.supportHtml,baseUri:e.baseUri}:"string"==typeof e?{value:e}:{value:""};var r;const n=Object.create(null);i.uris=n;const s=e=>{try{let i=pt.parse(e,!0);i=i.with({query:t(i.query,n)}),n[e]=i}catch(_C){}return""},o=new ao.Renderer;return o.link=s,o.image=e=>"string"==typeof e?s(function(e){const t=[],i=e.split("|").map((e=>e.trim()));e=i[0];const r=i[1];if(r){const e=/height=(\d+)/.exec(r),i=/width=(\d+)/.exec(r),n=e?e[1]:"",s=i?i[1]:"",o=isFinite(parseInt(s)),a=isFinite(parseInt(n));o&&t.push(`width="${s}"`),a&&t.push(`height="${n}"`)}return{href:e,dimensions:t}}(e).href):"",ao(i.value,{renderer:o}),i},e.to=function(e){const t=new tc(e.value,e.supportThemeIcons);return t.isTrusted=e.isTrusted,t.supportHtml=e.supportHtml,t.baseUri=e.baseUri?pt.from(e.baseUri):void 0,t},e.fromStrict=function(t){if(t)return"string"==typeof t?t:e.from(t)}}(Xd||(Xd={})),function(e){e.from=function(e){return void 0===e?e:{contentText:e.contentText,contentIconPath:e.contentIconPath?xp(e.contentIconPath):void 0,border:e.border,borderColor:e.borderColor,fontStyle:e.fontStyle,fontWeight:e.fontWeight,textDecoration:e.textDecoration,color:e.color,backgroundColor:e.backgroundColor,margin:e.margin,width:e.width,height:e.height}}}(eh||(eh={})),function(e){e.from=function(e){return void 0===e?e:{backgroundColor:e.backgroundColor,outline:e.outline,outlineColor:e.outlineColor,outlineStyle:e.outlineStyle,outlineWidth:e.outlineWidth,border:e.border,borderColor:e.borderColor,borderRadius:e.borderRadius,borderSpacing:e.borderSpacing,borderStyle:e.borderStyle,borderWidth:e.borderWidth,fontStyle:e.fontStyle,fontWeight:e.fontWeight,textDecoration:e.textDecoration,cursor:e.cursor,color:e.color,opacity:e.opacity,letterSpacing:e.letterSpacing,gutterIconPath:e.gutterIconPath?xp(e.gutterIconPath):void 0,gutterIconSize:e.gutterIconSize,overviewRulerColor:e.overviewRulerColor,before:e.before?eh.from(e.before):void 0,after:e.after?eh.from(e.after):void 0}}}(th||(th={})),function(e){e.from=function(e){if(void 0===e)return e;switch(e){case Cc.OpenOpen:return 0;case Cc.ClosedClosed:return 1;case Cc.OpenClosed:return 2;case Cc.ClosedOpen:return 3}}}(ih||(ih={})),function(e){e.from=function(e){return{isWholeLine:e.isWholeLine,rangeBehavior:e.rangeBehavior?ih.from(e.rangeBehavior):void 0,overviewRulerLane:e.overviewRulerLane,light:e.light?th.from(e.light):void 0,dark:e.dark?th.from(e.dark):void 0,backgroundColor:e.backgroundColor,outline:e.outline,outlineColor:e.outlineColor,outlineStyle:e.outlineStyle,outlineWidth:e.outlineWidth,border:e.border,borderColor:e.borderColor,borderRadius:e.borderRadius,borderSpacing:e.borderSpacing,borderStyle:e.borderStyle,borderWidth:e.borderWidth,fontStyle:e.fontStyle,fontWeight:e.fontWeight,textDecoration:e.textDecoration,cursor:e.cursor,color:e.color,opacity:e.opacity,letterSpacing:e.letterSpacing,gutterIconPath:e.gutterIconPath?xp(e.gutterIconPath):void 0,gutterIconSize:e.gutterIconSize,overviewRulerColor:e.overviewRulerColor,before:e.before?eh.from(e.before):void 0,after:e.after?eh.from(e.after):void 0}}}(rh||(rh={})),function(e){e.from=function(e){return{text:e.newText,eol:e.newEol&&Mh.from(e.newEol),range:zd.from(e.range)}},e.to=function(e){const t=new Il(zd.to(e.range),e.text);return t.newEol=void 0===e.eol?void 0:Mh.to(e.eol),t}}(nh||(nh={})),function(e){e.from=function(e,t){const i={edits:[]};if(e instanceof Al){const r=new Oi;for(const t of e._allEntries())1===t._type&&pt.isUri(t.to)&&void 0===t.from&&r.add(t.to);for(const n of e._allEntries())if(1===n._type){let e;n.options?.contents&&(e=ArrayBuffer.isView(n.options.contents)?{type:"base64",value:T(I.wrap(n.options.contents))}:{type:"dataTransferItem",id:n.options.contents._itemId}),i.edits.push({oldResource:n.from,newResource:n.to,options:{...n.options,contents:e},metadata:n.metadata})}else 2===n._type?i.edits.push({resource:n.uri,textEdit:nh.from(n.edit),versionId:r.has(n.uri)?void 0:t?.getTextDocumentVersion(n.uri),metadata:n.metadata}):6===n._type?i.edits.push({resource:n.uri,textEdit:{range:zd.from(n.range),text:n.edit.value,insertAsSnippet:!0},versionId:r.has(n.uri)?void 0:t?.getTextDocumentVersion(n.uri),metadata:n.metadata}):3===n._type?i.edits.push({metadata:n.metadata,resource:n.uri,cellEdit:n.edit,notebookMetadata:n.notebookMetadata,notebookVersionId:t?.getNotebookDocumentVersion(n.uri)}):5===n._type&&i.edits.push({metadata:n.metadata,resource:n.uri,notebookVersionId:t?.getNotebookDocumentVersion(n.uri),cellEdit:{editType:1,index:n.index,count:n.count,cells:n.cells.map(Jh.from)}})}return i},e.to=function(e){const t=new Al,i=new Li;for(const r of e.edits)if(r.textEdit){const e=r,t=pt.revive(e.resource),n=zd.to(e.textEdit.range),s=e.textEdit.text;let o;o=e.textEdit.insertAsSnippet?Pl.replace(n,new Rl(s)):Il.replace(n,s);const a=i.get(t);a?a.push(o):i.set(t,[o])}else t.renameFile(pt.revive(r.oldResource),pt.revive(r.newResource),r.options);for(const[r,n]of i)t.set(r,n);return t}}(sh||(sh={})),function(e){const t=Object.create(null);t[Bl.File]=0,t[Bl.Module]=1,t[Bl.Namespace]=2,t[Bl.Package]=3,t[Bl.Class]=4,t[Bl.Method]=5,t[Bl.Property]=6,t[Bl.Field]=7,t[Bl.Constructor]=8,t[Bl.Enum]=9,t[Bl.Interface]=10,t[Bl.Function]=11,t[Bl.Variable]=12,t[Bl.Constant]=13,t[Bl.String]=14,t[Bl.Number]=15,t[Bl.Boolean]=16,t[Bl.Array]=17,t[Bl.Object]=18,t[Bl.Key]=19,t[Bl.Null]=20,t[Bl.EnumMember]=21,t[Bl.Struct]=22,t[Bl.Event]=23,t[Bl.Operator]=24,t[Bl.TypeParameter]=25,e.from=function(e){return"number"==typeof t[e]?t[e]:6},e.to=function(e){for(const i in t)if(t[i]===e)return Number(i);return Bl.Property}}(oh||(oh={})),function(e){e.from=function(e){if(e===Vl.Deprecated)return 1},e.to=function(e){if(1===e)return Vl.Deprecated}}(ah||(ah={})),function(e){e.from=function(e){return{name:e.name,kind:oh.from(e.kind),tags:e.tags&&e.tags.map(ah.from),containerName:e.containerName,location:ph.from(e.location)}},e.to=function(e){const t=new Wl(e.name,oh.to(e.kind),e.containerName,ph.to(e.location));return t.tags=e.tags&&e.tags.map(ah.to),t}}(lh||(lh={})),function(e){e.from=function e(t){const i={name:t.name||"!!MISSING: name!!",detail:t.detail,range:zd.from(t.range),selectionRange:zd.from(t.selectionRange),kind:oh.from(t.kind),tags:t.tags?.map(ah.from)??[]};return t.children&&(i.children=t.children.map(e)),i},e.to=function e(t){const i=new zl(t.name,t.detail,oh.to(t.kind),zd.to(t.range),zd.to(t.selectionRange));return Br(t.tags)&&(i.tags=t.tags.map(ah.to)),t.children&&(i.children=t.children.map(e)),i}}(ch||(ch={})),function(e){e.to=function(e){const t=new Jl(oh.to(e.kind),e.name,e.detail||"",pt.revive(e.uri),zd.to(e.range),zd.to(e.selectionRange));return t._sessionId=e._sessionId,t._itemId=e._itemId,t},e.from=function(e,t,i){if(t=t??e._sessionId,i=i??e._itemId,void 0===t||void 0===i)throw new Error("invalid item");return{_sessionId:t,_itemId:i,name:e.name,detail:e.detail,kind:oh.from(e.kind),uri:e.uri,range:zd.from(e.range),selectionRange:zd.from(e.selectionRange),tags:e.tags?.map(ah.from)}}}(uh||(uh={})),function(e){e.to=function(e){return new Zl(uh.to(e.from),e.fromRanges.map((e=>zd.to(e))))}}(dh||(dh={})),function(e){e.to=function(e){return new Yl(uh.to(e.to),e.fromRanges.map((e=>zd.to(e))))}}(hh||(hh={})),function(e){e.from=function(e){return{range:e.range&&zd.from(e.range),uri:e.uri}},e.to=function(e){return new Ll(pt.revive(e.uri),zd.to(e.range))}}(ph||(ph={})),function(e){e.from=function(e){const t=e,i=e;return{originSelectionRange:t.originSelectionRange?zd.from(t.originSelectionRange):void 0,uri:t.targetUri?t.targetUri:i.uri,range:zd.from(t.targetRange?t.targetRange:i.range),targetSelectionRange:t.targetSelectionRange?zd.from(t.targetSelectionRange):void 0}},e.to=function(e){return{targetUri:pt.revive(e.uri),targetRange:zd.to(e.range),targetSelectionRange:e.targetSelectionRange?zd.to(e.targetSelectionRange):void 0,originSelectionRange:e.originSelectionRange?zd.to(e.originSelectionRange):void 0}}}(gh||(gh={})),function(e){e.from=function(e){return{range:zd.from(e.range),contents:Xd.fromMany(e.contents)}},e.to=function(e){return new Nl(e.contents.map(Xd.to),zd.to(e.range))}}(fh||(fh={})),function(e){e.from=function(e){return{range:zd.from(e.range),expression:e.expression}},e.to=function(e){return new yu(zd.to(e.range),e.expression)}}(mh||(mh={})),function(e){e.from=function(e){if(e instanceof bu)return{type:"text",range:zd.from(e.range),text:e.text};if(e instanceof xu)return{type:"variable",range:zd.from(e.range),variableName:e.variableName,caseSensitiveLookup:e.caseSensitiveLookup};if(e instanceof Cu)return{type:"expression",range:zd.from(e.range),expression:e.expression};throw new Error("Unknown 'InlineValue' type")},e.to=function(e){switch(e.type){case"text":return{range:zd.to(e.range),text:e.text};case"variable":return{range:zd.to(e.range),variableName:e.variableName,caseSensitiveLookup:e.caseSensitiveLookup};case"expression":return{range:zd.to(e.range),expression:e.expression}}}}(vh||(vh={})),function(e){e.from=function(e){return{frameId:e.frameId,stoppedLocation:zd.from(e.stoppedLocation)}},e.to=function(e){return new Du(e.frameId,zd.to(e.stoppedLocation))}}(_h||(_h={})),function(e){e.from=function(e){return{range:zd.from(e.range),kind:e.kind}},e.to=function(e){return new Ul(zd.to(e.range),e.kind)}}(yh||(yh={})),function(e){e.to=function(e){switch(e){case 1:return cc.TriggerCharacter;case 2:return cc.TriggerForIncompleteCompletions;default:return cc.Invoke}}}(wh||(wh={})),function(e){e.to=function(e){return{triggerKind:wh.to(e.triggerKind),triggerCharacter:e.triggerCharacter}}}(bh||(bh={})),function(e){e.from=function(e){if(e===dc.Deprecated)return 1},e.to=function(e){if(1===e)return dc.Deprecated}}(xh||(xh={})),function(e){const t=new Map([[uc.Method,0],[uc.Function,1],[uc.Constructor,2],[uc.Field,3],[uc.Variable,4],[uc.Class,5],[uc.Interface,7],[uc.Struct,6],[uc.Module,8],[uc.Property,9],[uc.Unit,12],[uc.Value,13],[uc.Constant,14],[uc.Enum,15],[uc.EnumMember,16],[uc.Keyword,17],[uc.Snippet,27],[uc.Text,18],[uc.Color,19],[uc.File,20],[uc.Reference,21],[uc.Folder,23],[uc.Event,10],[uc.Operator,11],[uc.TypeParameter,24],[uc.Issue,26],[uc.User,25]]);e.from=function(e){return t.get(e)??9};const i=new Map([[0,uc.Method],[1,uc.Function],[2,uc.Constructor],[3,uc.Field],[4,uc.Variable],[5,uc.Class],[7,uc.Interface],[6,uc.Struct],[8,uc.Module],[9,uc.Property],[12,uc.Unit],[13,uc.Value],[14,uc.Constant],[15,uc.Enum],[16,uc.EnumMember],[17,uc.Keyword],[27,uc.Snippet],[18,uc.Text],[19,uc.Color],[20,uc.File],[21,uc.Reference],[23,uc.Folder],[10,uc.Event],[11,uc.Operator],[24,uc.TypeParameter],[25,uc.User],[26,uc.Issue]]);e.to=function(e){return i.get(e)??uc.Property}}(Ch||(Ch={})),function(e){e.to=function(e,t){const i=new hc(e.label);return i.insertText=e.insertText,i.kind=Ch.to(e.kind),i.tags=e.tags?.map(xh.to),i.detail=e.detail,i.documentation=so(e.documentation)?Xd.to(e.documentation):e.documentation,i.sortText=e.sortText,i.filterText=e.filterText,i.preselect=e.preselect,i.commitCharacters=e.commitCharacters,go.isIRange(e.range)?i.range=zd.to(e.range):"object"==typeof e.range&&(i.range={inserting:zd.to(e.range.insert),replacing:zd.to(e.range.replace)}),i.keepWhitespace=void 0!==e.insertTextRules&&Boolean(1&e.insertTextRules),void 0!==e.insertTextRules&&4&e.insertTextRules?i.insertText=new Rl(e.insertText):(i.insertText=e.insertText,i.textEdit=i.range instanceof wl?new Il(i.range,i.insertText):void 0),e.additionalTextEdits&&e.additionalTextEdits.length>0&&(i.additionalTextEdits=e.additionalTextEdits.map((e=>nh.to(e)))),i.command=t&&e.command?t.fromInternal(e.command):void 0,i}}(Dh||(Dh={})),function(e){e.from=function(e){if("string"!=typeof e.label&&!Array.isArray(e.label))throw new TypeError("Invalid label");return{label:e.label,documentation:Xd.fromStrict(e.documentation)}},e.to=function(e){return{label:e.label,documentation:so(e.documentation)?Xd.to(e.documentation):e.documentation}}}(Sh||(Sh={})),function(e){e.from=function(e){return{label:e.label,documentation:Xd.fromStrict(e.documentation),parameters:Array.isArray(e.parameters)?e.parameters.map(Sh.from):[],activeParameter:e.activeParameter}},e.to=function(e){return{label:e.label,documentation:so(e.documentation)?Xd.to(e.documentation):e.documentation,parameters:Array.isArray(e.parameters)?e.parameters.map(Sh.to):[],activeParameter:e.activeParameter}}}(Eh||(Eh={})),function(e){e.from=function(e){return{activeSignature:e.activeSignature,activeParameter:e.activeParameter,signatures:Array.isArray(e.signatures)?e.signatures.map(Eh.from):[]}},e.to=function(e){return{activeSignature:e.activeSignature,activeParameter:e.activeParameter,signatures:Array.isArray(e.signatures)?e.signatures.map(Eh.to):[]}}}(kh||(kh={})),function(e){e.to=function(e,t){const i=new lc(qd.to(t.position),"string"==typeof t.label?t.label:t.label.map(Th.to.bind(void 0,e)),t.kind&&Ph.to(t.kind));return i.textEdits=t.textEdits&&t.textEdits.map(nh.to),i.tooltip=so(t.tooltip)?Xd.to(t.tooltip):t.tooltip,i.paddingLeft=t.paddingLeft,i.paddingRight=t.paddingRight,i}}(Ih||(Ih={})),function(e){e.to=function(e,t){const i=new ac(t.label);return i.tooltip=so(t.tooltip)?Xd.to(t.tooltip):t.tooltip,Co.is(t.command)&&(i.command=e.fromInternal(t.command)),t.location&&(i.location=ph.to(t.location)),i}}(Th||(Th={})),function(e){e.from=function(e){return e},e.to=function(e){return e}}(Ph||(Ph={})),function(e){e.from=function(e){return{range:zd.from(e.range),url:e.target,tooltip:e.tooltip}},e.to=function(e){let t;if(e.url)try{t="string"==typeof e.url?pt.parse(e.url,!0):pt.revive(e.url)}catch(i){}return new Dc(zd.to(e.range),t)}}(Ah||(Ah={})),function(e){e.to=function(e){const t=new kc(e.label);return e.textEdit&&(t.textEdit=nh.to(e.textEdit)),e.additionalTextEdits&&(t.additionalTextEdits=e.additionalTextEdits.map((e=>nh.to(e)))),t},e.from=function(e){return{label:e.label,textEdit:e.textEdit?nh.from(e.textEdit):void 0,additionalTextEdits:e.additionalTextEdits?e.additionalTextEdits.map((e=>nh.from(e))):void 0}}}(Rh||(Rh={})),function(e){e.to=function(e){return new Sc(e[0],e[1],e[2],e[3])},e.from=function(e){return[e.red,e.green,e.blue,e.alpha]}}(Fh||(Fh={})),function(e){e.from=function(e){return{range:zd.from(e.range)}},e.to=function(e){return new Ql(zd.to(e.range))}}($h||($h={})),function(e){e.to=function(e){switch(e){case 2:return yc.AfterDelay;case 1:return yc.Manual;case 3:case 4:return yc.FocusOut}}}(Lh||(Lh={})),function(e){e.from=function(e){switch(e){case _c.Off:return 0;case _c.Relative:return 2;case _c.On:default:return 1}},e.to=function(e){switch(e){case 0:return _c.Off;case 2:return _c.Relative;default:return _c.On}}}(Oh||(Oh={})),function(e){e.from=function(e){return e===El.CRLF?1:e===El.LF?0:void 0},e.to=function(e){return 1===e?El.CRLF:0===e?El.LF:void 0}}(Mh||(Mh={})),function(e){e.from=function(e){if("object"==typeof e)return e.viewId;switch(e){case jc.SourceControl:return 3;case jc.Window:return 10;case jc.Notification:return 15}throw new Error("Unknown 'ProgressLocation'")}}(Nh||(Nh={})),function(e){e.from=function(e){const t={start:e.start+1,end:e.end+1};return e.kind&&(t.kind=Uh.from(e.kind)),t},e.to=function(e){const t={start:e.start-1,end:e.end-1};return e.kind&&(t.kind=Uh.to(e.kind)),t}}(Hh||(Hh={})),function(e){e.from=function(e){if(e)switch(e){case Iu.Comment:return xo.Comment;case Iu.Imports:return xo.Imports;case Iu.Region:return xo.Region}},e.to=function(e){if(e)switch(e.value){case xo.Comment.value:return Iu.Comment;case xo.Imports.value:return Iu.Imports;case xo.Region.value:return Iu.Region}}}(Uh||(Uh={})),function(e){e.from=function(e){if(e)return{pinned:"boolean"==typeof e.preview?!e.preview:void 0,inactive:e.background,preserveFocus:e.preserveFocus,selection:"object"==typeof e.selection?zd.from(e.selection):void 0,override:"boolean"==typeof e.override?va:void 0}}}(Bh||(Bh={})),function(e){e.from=function(e){return e instanceof ou?e.toJSON():"string"==typeof e?e:function(e){const t=e;if(!t)return!1;return pt.isUri(t.baseUri)&&"string"==typeof t.pattern}(e)||function(e){const t=e;if(!t)return!1;return"string"==typeof t.base&&"string"==typeof t.pattern}(e)?new ou(e.baseUri??e.base,e.pattern).toJSON():e},e.to=function(e){return"string"==typeof e?e:new ou(pt.revive(e.baseUri),e.pattern)}}(Vh||(Vh={})),function(e){e.from=function e(t){if(t){if(Array.isArray(t))return t.map(e);if("string"==typeof t)return t;{const e=t;return{language:e.language,scheme:e.scheme,pattern:Vh.from(e.pattern),exclusive:e.exclusive,notebookType:e.notebookType}}}}}(Wh||(Wh={})),function(e){e.is=function(e){return!!e&&"object"==typeof e&&"selections"in e&&Array.isArray(e.selections)&&e.selections.every((e=>e instanceof bl))&&"related"in e&&Array.isArray(e.related)&&e.related.every((e=>e&&"object"==typeof e&&pt.isUri(e.uri)&&e.range instanceof wl))},e.from=function(e){return{selections:e.selections.map((e=>Wd.from(e))),related:e.related.map((e=>({uri:pt.from(e.uri),range:zd.from(e.range)})))}}}(zh||(zh={})),function(e){e.from=function(e){return{start:e.start,end:e.end}},e.to=function(e){return new Ku(e.start,e.end)}}(jh||(jh={})),function(e){e.to=function(e){return{timing:"number"==typeof e.runStartTime&&"number"==typeof e.runEndTime?{startTime:e.runStartTime,endTime:e.runEndTime}:void 0,executionOrder:e.executionOrder,success:e.lastRunSuccess}},e.from=function(e){return{lastRunSuccess:e.success,runStartTime:e.timing?.startTime,runEndTime:e.timing?.endTime,executionOrder:e.executionOrder}}}(qh||(qh={})),function(e){e.to=function(e){if(e===Da.Unconfirmed)return Xu.Pending;if(e!==Da.Pending){if(e===Da.Executing)return Xu.Executing;throw new Error(`Unknown state: ${e}`)}}}(Kh||(Kh={})),function(e){e.from=function(e){switch(e){case Yu.Markup:return Ca.Markup;case Yu.Code:default:return Ca.Code}},e.to=function(e){switch(e){case Ca.Markup:return Yu.Markup;case Ca.Code:default:return Yu.Code}}}(Gh||(Gh={})),function(e){e.from=function(e){const t={metadata:e.metadata??Object.create(null),cells:[]};for(const i of e.cells)Gu.validate(i),t.cells.push(Jh.from(i));return t},e.to=function(e){const t=new Qu(e.cells.map(Jh.to));return function(e){if(!pi(e))return!1;for(const t in e)if(wi.call(e,t))return!1;return!0}(e.metadata)||(t.metadata=e.metadata),t}}(Qh||(Qh={})),function(e){e.from=function(e){return{cellKind:Gh.from(e.kind),language:e.languageId,mime:e.mime,source:e.value,metadata:e.metadata,internalMetadata:qh.from(e.executionSummary??{}),outputs:e.outputs?e.outputs.map(Yh.from):[]}},e.to=function(e){return new Gu(Gh.to(e.cellKind),e.source,e.language,e.mime,e.outputs?e.outputs.map(Yh.to):void 0,e.metadata,e.internalMetadata?qh.to(e.internalMetadata):void 0)}}(Jh||(Jh={})),function(e){e.from=function(e){return{mime:e.mime,valueBytes:I.wrap(e.data)}},e.to=function(e){return new Ju(e.valueBytes.buffer,e.mime)}}(Zh||(Zh={})),function(e){e.from=function(e){return{outputId:e.id,items:e.items.map(Zh.from),metadata:e.metadata}},e.to=function(e){const t=e.items.map(Zh.to);return new Zu(t,e.outputId,e.metadata)}}(Yh||(Yh={})),function(e){function t(e){const t=e;return!!t&&(!_i(t.include)&&!_i(t.exclude))}e.from=function(e){return t(e)?{include:Vh.from(e.include)??void 0,exclude:Vh.from(e.exclude)??void 0}:Vh.from(e)??void 0},e.to=function(e){return t(e)?{include:Vh.to(e.include),exclude:Vh.to(e.exclude)}:Vh.to(e)}}(Xh||(Xh={})),function(e){e.from=function(e,t,i){const r="string"==typeof e.command?{title:"",command:e.command}:e.command;return{alignment:e.alignment===ed.Left?1:2,command:t.toInternal(r,i),text:e.text,tooltip:e.tooltip,accessibilityInformation:e.accessibilityInformation,priority:e.priority}}}(ep||(ep={})),function(e){e.from=function(e,t,i){const r="string"==typeof e.command?{title:"",command:e.command}:e.command;return{command:t.toInternal(r,i),label:e.label,description:e.description,detail:e.detail,documentation:e.documentation}}}(tp||(tp={})),function(e){e.from=function(e){return{transientOutputs:e?.transientOutputs??!1,transientCellMetadata:e?.transientCellMetadata??{},transientDocumentMetadata:e?.transientDocumentMetadata??{},cellContentMetadata:e?.cellContentMetadata??{}}}}(ip||(ip={})),function(e){e.from=function(e){return{uri:e.uri,provides:e.provides}},e.to=function(e){return new sd(pt.revive(e.uri),e.provides)}}(rp||(rp={})),function(e){e.from=function(e){return{message:Xd.fromStrict(e.message)||"",type:0,expected:e.expectedOutput,actual:e.actualOutput,contextValue:e.contextValue,location:e.location&&{range:zd.from(e.location.range),uri:e.location.uri}}},e.to=function(e){const t=new md("string"==typeof e.message?e.message:Xd.to(e.message));return t.actualOutput=e.actual,t.expectedOutput=e.expected,t.contextValue=e.contextValue,t.location=e.location?ph.to(e.location):void 0,t}}(np||(np={})),function(e){e.namespace=Ho,e.denamespace=Uo}(sp||(sp={})),function(e){e.from=function(e){const t=ra(e).controllerId;return{extId:Fo.fromExtHostTestItem(e,t).toString(),label:e.label,uri:pt.revive(e.uri),busy:e.busy,tags:e.tags.map((e=>sp.namespace(t,e.id))),range:go.lift(zd.from(e.range)),description:e.description||null,sortText:e.sortText||null,error:e.error&&Xd.fromStrict(e.error)||null}},e.toPlain=function(e){return{parent:void 0,error:void 0,id:Fo.fromString(e.extId).localId,label:e.label,uri:pt.revive(e.uri),tags:(e.tags||[]).map((e=>{const{tagId:t}=sp.denamespace(e);return new vd(t)})),children:{add:()=>{},delete:()=>{},forEach:()=>{},*[Symbol.iterator](){},get:()=>{},replace:()=>{},size:0},range:zd.to(e.range||void 0),canResolveChildren:!1,busy:e.busy,description:e.description||void 0,sortText:e.sortText||void 0}}}(op||(op={})),function(e){e.from=function(e){return{id:e.id}},e.to=function(e){return new vd(e.id)}}(sp||(sp={})),function(e){const t=(e,i)=>{const r=[];for(const[t,s]of i)2===Fo.compare(s.item.extId,t)&&(i.delete(t),r.push(s));const n={...op.toPlain(e.item),parent:void 0,taskStates:e.tasks.map((e=>({state:e.state,duration:e.duration,messages:e.messages.filter((e=>0===e.type)).map(np.to)}))),children:r.map((e=>t(e,i)))};for(const t of n.children)t.parent=n;return n};e.to=function(e){const i=[],r=new Map;for(const t of e.items){r.set(t.item.extId,t);const n=Fo.root(t.item.extId);e.request.targets.some((e=>e.controllerId===n&&e.testIds.includes(t.item.extId)))&&i.push(t)}return{completedAt:e.completedAt,results:i.map((e=>t(e,r)))}}}(ap||(ap={})),function(e){function t(e){return{covered:e.covered,total:e.covered}}function i(e){return"line"in e?qd.from(e):zd.from(e)}function r(e){return"branches"in e?{count:e.executionCount,location:i(e.location),type:1,branches:e.branches.length?e.branches.map((e=>({count:e.executionCount,location:e.location&&i(e.location)}))):void 0}:{type:0,count:e.executionCount,location:i(e.location)}}e.fromDetailed=r,e.fromFile=function(e){return{uri:e.uri,statement:t(e.statementCoverage),branch:e.branchCoverage&&t(e.branchCoverage),function:e.functionCoverage&&t(e.functionCoverage),details:e.detailedCoverage?.map(r)}}}(lp||(lp={})),function(e){e.to=function(e){switch(e){case 1:return jl.Invoke;case 2:return jl.Automatic}}}(cp||(cp={})),function(e){e.to=function(e){const t=new Ed(oh.to(e.kind),e.name,e.detail||"",pt.revive(e.uri),zd.to(e.range),zd.to(e.selectionRange));return t._sessionId=e._sessionId,t._itemId=e._itemId,t},e.from=function(e,t,i){if(t=t??e._sessionId,i=i??e._itemId,void 0===t||void 0===i)throw new Error("invalid item");return{_sessionId:t,_itemId:i,kind:oh.from(e.kind),name:e.name,detail:e.detail??"",uri:e.uri,range:zd.from(e.range),selectionRange:zd.from(e.selectionRange),tags:e.tags?.map(ah.from)}}}(up||(up={})),function(e){e.from=function(e){if(e)return{value:e.value,tooltip:e.tooltip}}}(dp||(dp={})),function(e){function t(e){return qs.split(e).map((e=>{if(e.startsWith("#"))return e;try{return pt.parse(e)}catch{}return e}))}e.to=function(e,t,i){const r=t.fileData;return r?new Yc(new Xc(r.name,pt.revive(r.uri),r.id,m((()=>i(r.id))))):e===co.uriList&&t.uriListData?new Zc((n=t.uriListData,qs.create(n.map((e=>"string"==typeof e?e:pt.revive(e)))))):new Zc(t.asString);var n},e.from=async function(e,i){const r=await i.asString();if(e===co.uriList)return{asString:r,fileData:void 0,uriListData:t(r)};const n=i.asFile();return{asString:r,fileData:n?{name:n.name,uri:n.uri,id:n._itemId??n.id}:void 0}}}(hp||(hp={})),function(e){e.toDataTransfer=function(e,t){const i=e.items.map((([e,i])=>[e,hp.to(e,i,t)]));return new eu(i)},e.from=async function(e){const t={items:[]},i=[];for(const[r,n]of e)i.push((async()=>{t.items.push([r,await hp.from(r,n)])})());return await Promise.all(i),t}}(pp||(pp={})),function(e){e.to=function(e){return{message:e.message,metadata:e.metadata,title:e.title,tooltip:e.tooltip}},e.from=function(e){return{kind:"reply",message:e.message,metadata:e.metadata,title:e.title,tooltip:e.tooltip}}}(gp||(gp={})),function(e){e.from=function(e){return"string"==typeof e?{title:e,message:e,kind:"reply"}:"commandId"in e?{kind:"command",title:e.title??"",commandId:e.commandId??"",when:e.when??"",args:e.args}:gp.from(e)}}(fp||(fp={})),function(e){e.to=function(e){const t=new Bd(vp.to(e.role),e.content);return t.name=e.name,t},e.from=function(e){return{role:vp.from(e.role),content:e.content,name:e.name}}}(mp||(mp={})),function(e){e.to=function(e){switch(e){case 0:return Hd.System;case 1:return Hd.User;case 2:return Hd.Assistant;case 3:return Hd.Function}},e.from=function(e){switch(e){case Hd.System:return 0;case Hd.Assistant:return 2;case Hd.Function:return 3;case Hd.User:default:return 1}}}(vp||(vp={})),function(e){e.to=function(e){return{level:yp.to(e.level),value:e.value,description:e.description}},e.from=function(e){return{level:yp.from(e.level),value:e.value,description:e.description}}}(_p||(_p={})),function(e){e.to=function(e){switch(e){case"short":return Ud.Short;case"medium":return Ud.Medium;default:return Ud.Full}},e.from=function(e){switch(e){case Ud.Short:return"short";case Ud.Medium:return"medium";case Ud.Full:default:return"full"}}}(yp||(yp={})),function(e){e.from=function(e,t,i){return"terminalCommand"in e?{terminalCommand:e.terminalCommand}:"uri"in e?{uri:e.uri}:t.toInternal(e,i)}}(wp||(wp={}));var Cp=function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{l(r.next(e))}catch(_C){s(_C)}}function a(e){try{l(r.throw(e))}catch(_C){s(_C)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};const Dp="**",Sp="/",Ep="[/\\\\]",kp="[^/\\\\]",Ip=/\//g;function Tp(e,t){switch(e){case 0:return"";case 1:return`${kp}*?`;default:return`(?:${Ep}|${kp}+${Ep}${t?`|${Ep}${kp}+`:""})*?`}}function Pp(e,t){if(!e)return[];const i=[];let r=!1,n=!1,s="";for(const o of e){switch(o){case t:if(!r&&!n){i.push(s),s="";continue}break;case"{":r=!0;break;case"}":r=!1;break;case"[":n=!0;break;case"]":n=!1}s+=o}return s&&i.push(s),i}function Ap(e){if(!e)return"";let t="";const i=Pp(e,Sp);if(i.every((e=>e===Dp)))t=".*";else{let e=!1;i.forEach(((r,n)=>{if(r===Dp){if(e)return;t+=Tp(2,n===i.length-1)}else{let e=!1,s="",o=!1,a="";for(const i of r)if("}"!==i&&e)s+=i;else if(!o||"]"===i&&a)switch(i){case"{":e=!0;continue;case"[":o=!0;continue;case"}":{const i=`(?:${Pp(s,",").map((e=>Ap(e))).join("|")})`;t+=i,e=!1,s="";break}case"]":t+="["+a+"]",o=!1,a="";break;case"?":t+=kp;continue;case"*":t+=Tp(1);continue;default:t+=Wt(i)}else{let e;e="-"===i?i:"^"!==i&&"!"!==i||a?i===Sp?"":Wt(i):"^",a+=e}n<i.length-1&&(i[n+1]!==Dp||n+2<i.length)&&(t+=Ep)}e=r===Dp}))}return t}const Rp=/^\*\*\/\*\.[\w\.-]+$/,Fp=/^\*\*\/([\w\.-]+)\/?$/,$p=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,Lp=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,Op=/^\*\*((\/[\w\.-]+)+)\/?$/,Mp=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,Np=new Ni(1e4),Hp=function(){return!1},Up=function(){return null};function Bp(e,t){if(!e)return Up;let i;i="string"!=typeof e?e.pattern:e,i=i.trim();const r=`${i}_${!!t.trimForExclusions}`;let n,s=Np.get(r);return s||(s=Rp.test(i)?function(e,t){return function(i,r){return"string"==typeof i&&i.endsWith(e)?t:null}}(i.substr(4),i):(n=Fp.exec(Wp(i,t)))?function(e,t){const i=`/${e}`,r=`\\${e}`,n=function(n,s){return"string"!=typeof n?null:s?s===e?t:null:n===e||n.endsWith(i)||n.endsWith(r)?t:null},s=[e];return n.basenames=s,n.patterns=[t],n.allBasenames=s,n}(n[1],i):(t.trimForExclusions?Lp:$p).test(i)?function(e,t){const i=Kp(e.slice(1,-1).split(",").map((e=>Bp(e,t))).filter((e=>e!==Up)),e),r=i.length;if(!r)return Up;if(1===r)return i[0];const n=function(t,r){for(let n=0,s=i.length;n<s;n++)if(i[n](t,r))return e;return null},s=i.find((e=>!!e.allBasenames));s&&(n.allBasenames=s.allBasenames);const o=i.reduce(((e,t)=>t.allPaths?e.concat(t.allPaths):e),[]);o.length&&(n.allPaths=o);return n}(i,t):(n=Op.exec(Wp(i,t)))?zp(n[1].substr(1),i,!0):(n=Mp.exec(Wp(i,t)))?zp(n[1],i,!1):function(e){try{const t=new RegExp(`^${Ap(e)}$`);return function(i){return t.lastIndex=0,"string"==typeof i&&t.test(i)?e:null}}catch(t){return Up}}(i),Np.set(r,s)),Vp(s,e)}function Vp(e,t){if("string"==typeof t)return e;const i=function(i,r){return Ii(i,t.base,!me)?e(function(e,t){if(!e||!t)return e;const i=t.length;if(0===i||0===e.length)return e;let r=0;for(;e.indexOf(t,r)===r;)r+=i;return e.substring(r)}(i.substr(t.base.length),ot),r):null};return i.allBasenames=e.allBasenames,i.allPaths=e.allPaths,i.basenames=e.basenames,i.patterns=e.patterns,i}function Wp(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function zp(e,t,i){const r=ot===Ze.sep,n=r?e:e.replace(Ip,ot),s=ot+n,o=Ze.sep+e;let a;return a=i?function(i,a){return"string"!=typeof i||i!==n&&!i.endsWith(s)&&(r||i!==e&&!i.endsWith(o))?null:t}:function(i,s){return"string"!=typeof i||i!==n&&(r||i!==e)?null:t},a.allPaths=[(i?"*/":"./")+e],a}function jp(e,t,i){return!(!e||"string"!=typeof t)&&qp(e)(t,void 0,i)}function qp(e,t={}){if(!e)return Hp;if("string"==typeof e||function(e){const t=e;if(!t)return!1;return"string"==typeof t.base&&"string"==typeof t.pattern}(e)){const i=Bp(e,t);if(i===Up)return Hp;const r=function(e,t){return!!i(e,t)};return i.allBasenames&&(r.allBasenames=i.allBasenames),i.allPaths&&(r.allPaths=i.allPaths),r}return function(e,t){const i=Kp(Object.getOwnPropertyNames(e).map((i=>function(e,t,i){if(!1===t)return Up;const r=Bp(e,i);if(r===Up)return Up;if("boolean"==typeof t)return r;if(t){const i=t.when;if("string"==typeof i){const t=(t,n,s,o)=>{if(!o||!r(t,n))return null;const a=o(i.replace("$(basename)",(()=>s)));return sr(a)?a.then((t=>t?e:null)):a?e:null};return t.requiresSiblings=!0,t}}return r}(i,e[i],t))).filter((e=>e!==Up))),r=i.length;if(!r)return Up;if(!i.some((e=>!!e.requiresSiblings))){if(1===r)return i[0];const e=function(e,t){let r;for(let n=0,s=i.length;n<s;n++){const s=i[n](e,t);if("string"==typeof s)return s;sr(s)&&(r||(r=[]),r.push(s))}return r?(()=>Cp(this,void 0,void 0,(function*(){for(const e of r){const t=yield e;if("string"==typeof t)return t}return null})))():null},t=i.find((e=>!!e.allBasenames));t&&(e.allBasenames=t.allBasenames);const n=i.reduce(((e,t)=>t.allPaths?e.concat(t.allPaths):e),[]);return n.length&&(e.allPaths=n),e}const n=function(e,t,r){let n,s;for(let o=0,a=i.length;o<a;o++){const a=i[o];a.requiresSiblings&&r&&(t||(t=nt(e)),n||(n=t.substr(0,t.length-st(e).length)));const l=a(e,t,n,r);if("string"==typeof l)return l;sr(l)&&(s||(s=[]),s.push(l))}return s?(()=>Cp(this,void 0,void 0,(function*(){for(const e of s){const t=yield e;if("string"==typeof t)return t}return null})))():null},s=i.find((e=>!!e.allBasenames));s&&(n.allBasenames=s.allBasenames);const o=i.reduce(((e,t)=>t.allPaths?e.concat(t.allPaths):e),[]);o.length&&(n.allPaths=o);return n}(e,t)}function Kp(e,t){const i=e.filter((e=>!!e.basenames));if(i.length<2)return e;const r=i.reduce(((e,t)=>{const i=t.basenames;return i?e.concat(i):e}),[]);let n;if(t){n=[];for(let e=0,i=r.length;e<i;e++)n.push(t)}else n=i.reduce(((e,t)=>{const i=t.patterns;return i?e.concat(i):e}),[]);const s=function(e,t){if("string"!=typeof e)return null;if(!t){let i;for(i=e.length;i>0;i--){const t=e.charCodeAt(i-1);if(47===t||92===t)break}t=e.substr(i)}const i=r.indexOf(t);return-1!==i?n[i]:null};s.basenames=r,s.patterns=n,s.allBasenames=r;const o=e.filter((e=>!e.basenames));return o.push(s),o}function Gp(e,t){return(!e.excludePattern||!jp(e.excludePattern,t))&&(!e.includePattern&&!e.usingSearchPaths||(!(!e.includePattern||!jp(e.includePattern,t))||!!e.usingSearchPaths&&(!!e.folderQueries&&e.folderQueries.some((e=>{const i=e.folder.fsPath;if(Ii(t,i)){const r=it(i,t);return!e.includePattern||!!jp(e.includePattern,r)}return!1})))))}var Qp;function Jp(e,t){const i={...e||{},...t||{}};return Object.keys(i).filter((e=>{const t=i[e];return"boolean"==typeof t&&t}))}un("searchService"),function(e){e[e.unknownEncoding=1]="unknownEncoding",e[e.regexParseError=2]="regexParseError",e[e.globParseError=3]="globParseError",e[e.invalidLiteral=4]="invalidLiteral",e[e.rgProcessError=5]="rgProcessError",e[e.other=6]="other",e[e.canceled=7]="canceled"}(Qp||(Qp={}));class Zp{constructor(e,t){this._parsedIncludeExpression=null,this._excludeExpression={...e.excludePattern||{},...t.excludePattern||{}},this._parsedExcludeExpression=qp(this._excludeExpression);let i=e.includePattern;t.includePattern&&(i=i?{...i,...t.includePattern}:t.includePattern),i&&(this._parsedIncludeExpression=qp(i))}matchesExcludesSync(e,t,i){return!(!this._parsedExcludeExpression||!this._parsedExcludeExpression(e,t,i))}includedInQuerySync(e,t,i){return(!this._parsedExcludeExpression||!this._parsedExcludeExpression(e,t,i))&&!(this._parsedIncludeExpression&&!this._parsedIncludeExpression(e,t,i))}includedInQuery(e,t,i){const r=this._parsedExcludeExpression(e,t,i),n=()=>!this._parsedIncludeExpression||!!this._parsedIncludeExpression(e,t,i);return sr(r)?r.then((e=>!e&&n())):n()}hasSiblingExcludeClauses(){return function(e){for(const t in e)if("boolean"!=typeof e[t])return!0;return!1}(this._excludeExpression)}}function Yp(e){const t={};for(const i of e)t[i]=!0;return t}function Xp(e,t,i){return new Wi((e=>rg(e,i))).isEqual(e,t)}function eg(e,t,i){return Xp(e.uri,t.uri,i)?0:Gt(e.uri.toString(),t.uri.toString())}function tg(e,t,i){return e.index!==t.index?e.index<t.index?-1:1:Xp(e.uri,t.uri,i)?Gt(e.name,t.name):Gt(e.uri.toString(),t.uri.toString())}function ig(e,t,i,r){return function(e,t,i){const r=Nr(e,t,i),n=[],s=[];for(const o of r)n.push(...e.slice(o.start,o.start+o.deleteCount)),s.push(...o.toInsert);return{removed:n,added:s}}(e.slice(0).sort(((e,t)=>i(e,t,r))),t.slice(0).sort(((e,t)=>i(e,t,r))),((e,t)=>i(e,t,r)))}function rg(e,t){const i=t.getCapabilities(e.scheme);return!(i&&1024&i)}class ng extends Bs{static toExtHostWorkspace(e,t,i,r){if(!e)return{workspace:null,added:[],removed:[]};const{id:n,name:s,folders:o,configuration:a,transient:l,isUntitled:c}=e,u=[],d=t;t?o.forEach(((e,n)=>{const s=pt.revive(e.uri),o=ng._findFolder(i||t,s,r);o?(o.name=e.name,o.index=e.index,u.push(o)):u.push({uri:s,name:e.name,index:n})})):u.push(...o.map((({uri:e,name:t,index:i})=>({uri:pt.revive(e),name:t,index:i})))),u.sort(((e,t)=>e.index<t.index?-1:1));const h=new ng(n,s,u,!!l,a?pt.revive(a):null,!!c,(e=>rg(e,r))),{added:p,removed:g}=ig(d?d.workspaceFolders:[],h.workspaceFolders,eg,r);return{workspace:h,added:p,removed:g}}static _findFolder(e,t,i){for(let r=0;r<e.folders.length;r++){const n=e.workspaceFolders[r];if(Xp(n.uri,t,i))return n}}constructor(e,t,i,r,n,s,o){super(e,i.map((e=>new Vs(e))),r,n,o),this._name=t,this._isUntitled=s,this._workspaceFolders=[],this._structure=Ds.forUris(o),i.forEach((e=>{this._workspaceFolders.push(e),this._structure.set(e.uri,e)}))}get name(){return this._name}get isUntitled(){return this._isUntitled}get workspaceFolders(){return this._workspaceFolders.slice(0)}getWorkspaceFolder(e,t){return t&&this._structure.get(e)&&(e=Ji(e)),this._structure.findSubstr(e)}resolveWorkspaceFolder(e){return this._structure.get(e)}}let sg=class{constructor(e,t,i,r,n){this._onDidChangeWorkspace=new B,this.onDidChangeWorkspace=this._onDidChangeWorkspace.event,this._onDidGrantWorkspaceTrust=new B,this.onDidGrantWorkspaceTrust=this._onDidGrantWorkspaceTrust.event,this._activeSearchCallbacks=[],this._trusted=!1,this._editSessionIdentityProviders=new Map,this._providerHandlePool=0,this._onWillCreateEditSessionIdentityEvent=new W,this._canonicalUriProviders=new Map,this._logService=r,this._extHostFileSystemInfo=i,this._uriTransformerService=n,this._requestIdProvider=new Fs,this._barrier=new lr,this._proxy=e.getProxy(Ft.MainThreadWorkspace),this._messageService=e.getProxy(Ft.MainThreadMessageService);const s=t.workspace;this._confirmedWorkspace=s?new ng(s.id,s.name,[],!!s.transient,s.configuration?pt.revive(s.configuration):null,!!s.isUntitled,(e=>rg(e,i))):void 0}$initializeWorkspace(e,t){this._trusted=t,this.$acceptWorkspaceData(e),this._barrier.open()}waitForInitializeCall(){return this._barrier.wait()}get workspace(){return this._actualWorkspace}get name(){return this._actualWorkspace?this._actualWorkspace.name:void 0}get workspaceFile(){if(this._actualWorkspace&&this._actualWorkspace.configuration)return this._actualWorkspace.isUntitled?pt.from({scheme:Fi.untitled,path:Qi(Ji(this._actualWorkspace.configuration))}):this._actualWorkspace.configuration}get _actualWorkspace(){return this._unconfirmedWorkspace||this._confirmedWorkspace}getWorkspaceFolders(){if(this._actualWorkspace)return this._actualWorkspace.workspaceFolders.slice(0)}async getWorkspaceFolders2(){if(await this._barrier.wait(),this._actualWorkspace)return this._actualWorkspace.workspaceFolders.slice(0)}updateWorkspaceFolders(e,t,i,...r){const n=[];if(Array.isArray(r)&&r.forEach((e=>{pt.isUri(e.uri)&&!n.some((t=>Xp(t.uri,e.uri,this._extHostFileSystemInfo)))&&n.push({uri:e.uri,name:e.name||Gi(e.uri)})})),this._unconfirmedWorkspace)return!1;if([t,i].some((e=>"number"!=typeof e||e<0)))return!1;if(0===i&&0===n.length)return!1;const s=this._actualWorkspace?this._actualWorkspace.workspaceFolders:[];if(t+i>s.length)return!1;const o=s.slice(0);o.splice(t,i,...n.map((e=>({uri:e.uri,name:e.name||Gi(e.uri),index:void 0}))));for(let c=0;c<o.length;c++){const e=o[c];if(o.some(((t,i)=>i!==c&&Xp(e.uri,t.uri,this._extHostFileSystemInfo))))return!1}o.forEach(((e,t)=>e.index=t));const{added:a,removed:l}=ig(s,o,tg,this._extHostFileSystemInfo);if(0===a.length&&0===l.length)return!1;if(this._proxy){const r=e.displayName||e.name;this._proxy.$updateWorkspaceFolders(r,t,i,n).then(void 0,(t=>{this._unconfirmedWorkspace=void 0;const i={source:{identifier:e.identifier,label:e.displayName||e.name}};this._messageService.$showMessage(Hs.Error,J(0,"Extension '{0}' failed to update workspace folders: {1}",r,t.toString()),i,[])}))}return this.trySetWorkspaceFolders(o),!0}getWorkspaceFolder(e,t){if(this._actualWorkspace)return this._actualWorkspace.getWorkspaceFolder(e,t)}async getWorkspaceFolder2(e,t){if(await this._barrier.wait(),this._actualWorkspace)return this._actualWorkspace.getWorkspaceFolder(e,t)}async resolveWorkspaceFolder(e){if(await this._barrier.wait(),this._actualWorkspace)return this._actualWorkspace.resolveWorkspaceFolder(e)}getPath(){if(!this._actualWorkspace)return;const{folders:e}=this._actualWorkspace;return 0!==e.length?e[0].uri.fsPath:void 0}getRelativePath(e,t){let i,r="";if("string"==typeof e?(i=pt.file(e),r=e):void 0!==e&&(i=e,r=e.fsPath),!i)return r;const n=this.getWorkspaceFolder(i,!0);if(!n)return r;void 0===t&&this._actualWorkspace&&(t=this._actualWorkspace.folders.length>1);let s=Yi(n.uri,i);return t&&n.name&&(s=`${n.name}/${s}`),s}trySetWorkspaceFolders(e){this._actualWorkspace&&(this._unconfirmedWorkspace=ng.toExtHostWorkspace({id:this._actualWorkspace.id,name:this._actualWorkspace.name,configuration:this._actualWorkspace.configuration,folders:e,isUntitled:this._actualWorkspace.isUntitled},this._actualWorkspace,void 0,this._extHostFileSystemInfo).workspace||void 0)}$acceptWorkspaceData(e){const{workspace:t,added:i,removed:r}=ng.toExtHostWorkspace(e,this._confirmedWorkspace,this._unconfirmedWorkspace,this._extHostFileSystemInfo);this._confirmedWorkspace=t||void 0,this._unconfirmedWorkspace=void 0,this._onDidChangeWorkspace.fire(Object.freeze({added:i,removed:r}))}findFiles(e,t,i,r,n=Ot.None){let s;if(this._logService.trace(`extHostWorkspace#findFiles: fileSearch, extension: ${r.value}, entryPoint: findFiles`),null===t?s=!1:t&&(s="string"==typeof t?t:t.pattern),n&&n.isCancellationRequested)return Promise.resolve([]);const{includePattern:o,folder:a}=ag(Vh.from(e));return this._proxy.$startFileSearch(o??null,a??null,s??null,i??null,n).then((e=>Array.isArray(e)?e.map((e=>pt.revive(e))):[]))}async findTextInFiles(e,t,i,r,n=Ot.None){this._logService.trace(`extHostWorkspace#findTextInFiles: textSearch, extension: ${r.value}, entryPoint: findTextInFiles`);const s=this._requestIdProvider.getNext(),o=void 0===t.previewOptions?{matchLines:100,charsPerLine:1e4}:t.previewOptions,{includePattern:a,folder:l}=ag(Vh.from(t.include)),c="string"==typeof t.exclude?t.exclude:t.exclude?t.exclude.pattern:void 0,u={ignoreSymlinks:"boolean"==typeof t.followSymlinks?!t.followSymlinks:void 0,disregardIgnoreFiles:"boolean"==typeof t.useIgnoreFiles?!t.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:"boolean"==typeof t.useGlobalIgnoreFiles?!t.useGlobalIgnoreFiles:void 0,disregardParentIgnoreFiles:"boolean"==typeof t.useParentIgnoreFiles?!t.useParentIgnoreFiles:void 0,disregardExcludeSettings:"boolean"!=typeof t.useDefaultExcludes||!t.useDefaultExcludes,fileEncoding:t.encoding,maxResults:t.maxResults,previewOptions:o,afterContext:t.afterContext,beforeContext:t.beforeContext,includePattern:a,excludePattern:c};if(this._activeSearchCallbacks[s]=e=>{const t=pt.revive(e.resource);e.results.forEach((e=>{!function(e){return!!e.preview}(e)?i({uri:t,text:e.text,lineNumber:e.lineNumber}):i({uri:t,preview:{text:e.preview.text,matches:jr(e.preview.matches,(e=>new wl(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn)))},ranges:jr(e.ranges,(e=>new wl(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn)))})}))},n.isCancellationRequested)return{};try{const t=await this._proxy.$startTextSearch(e,l??null,u,s,n);return delete this._activeSearchCallbacks[s],t||{}}catch(d){throw delete this._activeSearchCallbacks[s],d}}$handleTextSearchResult(e,t){this._activeSearchCallbacks[t]?.(e)}async save(e){const t=await this._proxy.$save(e,{saveAs:!1});return pt.revive(t)}async saveAs(e){const t=await this._proxy.$save(e,{saveAs:!0});return pt.revive(t)}saveAll(e){return this._proxy.$saveAll(e)}resolveProxy(e){return this._proxy.$resolveProxy(e)}get trusted(){return this._trusted}requestWorkspaceTrust(e){return this._proxy.$requestWorkspaceTrust(e)}$onDidGrantWorkspaceTrust(){this._trusted||(this._trusted=!0,this._onDidGrantWorkspaceTrust.fire())}registerEditSessionIdentityProvider(e,t){if(this._editSessionIdentityProviders.has(e))throw new Error(`A provider has already been registered for scheme ${e}`);this._editSessionIdentityProviders.set(e,t);const i=this._uriTransformerService.transformOutgoingScheme(e),r=this._providerHandlePool++;return this._proxy.$registerEditSessionIdentityProvider(r,i),w((()=>{this._editSessionIdentityProviders.delete(e),this._proxy.$unregisterEditSessionIdentityProvider(r)}))}async $getEditSessionIdentifier(e,t){this._logService.info("Getting edit session identifier for workspaceFolder",e);const i=await this.resolveWorkspaceFolder(pt.revive(e));if(!i)return void this._logService.warn("Unable to resolve workspace folder");this._logService.info("Invoking #provideEditSessionIdentity for workspaceFolder",i);const r=this._editSessionIdentityProviders.get(i.uri.scheme);if(this._logService.info(`Provider for scheme ${i.uri.scheme} is defined: `,!!r),!r)return;const n=await r.provideEditSessionIdentity(i,t);return this._logService.info("Provider returned edit session identifier: ",n),n||void 0}async $provideEditSessionIdentityMatch(e,t,i,r){this._logService.info("Getting edit session identifier for workspaceFolder",e);const n=await this.resolveWorkspaceFolder(pt.revive(e));if(!n)return void this._logService.warn("Unable to resolve workspace folder");this._logService.info("Invoking #provideEditSessionIdentity for workspaceFolder",n);const s=this._editSessionIdentityProviders.get(n.uri.scheme);if(this._logService.info(`Provider for scheme ${n.uri.scheme} is defined: `,!!s),!s)return;const o=await(s.provideEditSessionIdentityMatch?.(t,i,r));return this._logService.info("Provider returned edit session identifier match result: ",o),o||void 0}getOnWillCreateEditSessionIdentityEvent(e){return(t,i,r)=>{const n=function(e){t.call(i,e)};return n.extension=e,this._onWillCreateEditSessionIdentityEvent.event(n,void 0,r)}}async $onWillCreateEditSessionIdentity(e,t,i){const r=await this.resolveWorkspaceFolder(pt.revive(e));if(void 0===r)throw new Error("Unable to resolve workspace folder");await this._onWillCreateEditSessionIdentityEvent.fireAsync({workspaceFolder:r},t,(async(e,t)=>{const r=Date.now();await Promise.resolve(e),Date.now()-r>i&&this._logService.warn("SLOW edit session create-participant",t.extension.identifier)})),t.isCancellationRequested}registerCanonicalUriProvider(e,t){if(this._canonicalUriProviders.has(e))throw new Error(`A provider has already been registered for scheme ${e}`);this._canonicalUriProviders.set(e,t);const i=this._uriTransformerService.transformOutgoingScheme(e),r=this._providerHandlePool++;return this._proxy.$registerCanonicalUriProvider(r,i),w((()=>{this._canonicalUriProviders.delete(e),this._proxy.$unregisterCanonicalUriProvider(r)}))}async provideCanonicalUri(e,t,i){const r=this._canonicalUriProviders.get(e.scheme);if(!r)return;const n=await(r.provideCanonicalUri?.(pt.revive(e),t,i));return n||void 0}async $provideCanonicalUri(e,t,i){return this.provideCanonicalUri(pt.revive(e),{targetScheme:t},i)}};sg=vs([_s(0,ps),_s(1,as),_s(2,zs),_s(3,Gn),_s(4,fs)],sg);const og=un("IExtHostWorkspace");function ag(e){let t,i;return e&&("string"==typeof e?t=e:(t=e.pattern,i=pt.revive(e.baseUri))),{includePattern:t,folder:i}}var lg;function cg(e,t=!1){let i=0;const r=e.length;let n="",s=0,o=16,a=0;function l(t){let r=0,n=0;for(;r<t;){const t=e.charCodeAt(i);if(t>=48&&t<=57)n=16*n+t-48;else if(t>=65&&t<=70)n=16*n+t-65+10;else{if(!(t>=97&&t<=102))break;n=16*n+t-97+10}i++,r++}return r<t&&(n=-1),n}function c(){if(n="",a=0,s=i,i>=r)return s=r,o=17;let t=e.charCodeAt(i);if(ug(t)){do{i++,n+=String.fromCharCode(t),t=e.charCodeAt(i)}while(ug(t));return o=15}if(dg(t))return i++,n+=String.fromCharCode(t),13===t&&10===e.charCodeAt(i)&&(i++,n+="\n"),o=14;switch(t){case 123:return i++,o=1;case 125:return i++,o=2;case 91:return i++,o=3;case 93:return i++,o=4;case 58:return i++,o=6;case 44:return i++,o=5;case 34:return i++,n=function(){let t="",n=i;for(;;){if(i>=r){t+=e.substring(n,i),a=2;break}const s=e.charCodeAt(i);if(34===s){t+=e.substring(n,i),i++;break}if(92!==s){if(s>=0&&s<=31){if(dg(s)){t+=e.substring(n,i),a=2;break}a=6}i++}else{if(t+=e.substring(n,i),i++,i>=r){a=2;break}switch(e.charCodeAt(i++)){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+="\n";break;case 114:t+="\r";break;case 116:t+="\t";break;case 117:{const e=l(4);e>=0?t+=String.fromCharCode(e):a=4;break}default:a=5}n=i}}return t}(),o=10;case 47:{const s=i-1;if(47===e.charCodeAt(i+1)){for(i+=2;i<r&&!dg(e.charCodeAt(i));)i++;return n=e.substring(s,i),o=12}if(42===e.charCodeAt(i+1)){i+=2;const t=r-1;let l=!1;for(;i<t;){if(42===e.charCodeAt(i)&&47===e.charCodeAt(i+1)){i+=2,l=!0;break}i++}return l||(i++,a=1),n=e.substring(s,i),o=13}return n+=String.fromCharCode(t),i++,o=16}case 45:if(n+=String.fromCharCode(t),i++,i===r||!hg(e.charCodeAt(i)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return n+=function(){const t=i;if(48===e.charCodeAt(i))i++;else for(i++;i<e.length&&hg(e.charCodeAt(i));)i++;if(i<e.length&&46===e.charCodeAt(i)){if(i++,!(i<e.length&&hg(e.charCodeAt(i))))return a=3,e.substring(t,i);for(i++;i<e.length&&hg(e.charCodeAt(i));)i++}let r=i;if(i<e.length&&(69===e.charCodeAt(i)||101===e.charCodeAt(i)))if(i++,(i<e.length&&43===e.charCodeAt(i)||45===e.charCodeAt(i))&&i++,i<e.length&&hg(e.charCodeAt(i))){for(i++;i<e.length&&hg(e.charCodeAt(i));)i++;r=i}else a=3;return e.substring(t,r)}(),o=11;default:for(;i<r&&u(t);)i++,t=e.charCodeAt(i);if(s!==i){switch(n=e.substring(s,i),n){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return n+=String.fromCharCode(t),i++,o=16}}function u(e){if(ug(e)||dg(e))return!1;switch(e){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function(e){i=e,n="",s=0,o=16,a=0},getPosition:()=>i,scan:t?function(){let e;do{e=c()}while(e>=12&&e<=15);return e}:c,getToken:()=>o,getTokenValue:()=>n,getTokenOffset:()=>s,getTokenLength:()=>i-s,getTokenError:()=>a}}function ug(e){return 32===e||9===e||11===e||12===e||160===e||5760===e||e>=8192&&e<=8203||8239===e||8287===e||12288===e||65279===e}function dg(e){return 10===e||13===e||8232===e||8233===e}function hg(e){return e>=48&&e<=57}function pg(e,t,i=lg.DEFAULT){const r=cg(e,!1);function n(e){return e?()=>e(r.getTokenOffset(),r.getTokenLength()):()=>!0}function s(e){return e?t=>e(t,r.getTokenOffset(),r.getTokenLength()):()=>!0}const o=n(t.onObjectBegin),a=s(t.onObjectProperty),l=n(t.onObjectEnd),c=n(t.onArrayBegin),u=n(t.onArrayEnd),d=s(t.onLiteralValue),h=s(t.onSeparator),p=n(t.onComment),g=s(t.onError),f=i&&i.disallowComments,m=i&&i.allowTrailingComma;function v(){for(;;){const e=r.scan();switch(r.getTokenError()){case 4:_(14);break;case 5:_(15);break;case 3:_(13);break;case 1:f||_(11);break;case 2:_(12);break;case 6:_(16)}switch(e){case 12:case 13:f?_(10):p();break;case 16:_(1);break;case 15:case 14:break;default:return e}}}function _(e,t=[],i=[]){if(g(e),t.length+i.length>0){let e=r.getToken();for(;17!==e;){if(-1!==t.indexOf(e)){v();break}if(-1!==i.indexOf(e))break;e=v()}}}function y(e){const t=r.getTokenValue();return e?d(t):a(t),v(),!0}function w(){switch(r.getToken()){case 3:return function(){c(),v();let e=!1;for(;4!==r.getToken()&&17!==r.getToken();){if(5===r.getToken()){if(e||_(4,[],[]),h(","),v(),4===r.getToken()&&m)break}else e&&_(6,[],[]);w()||_(4,[],[4,5]),e=!0}return u(),4!==r.getToken()?_(8,[4],[]):v(),!0}();case 1:return function(){o(),v();let e=!1;for(;2!==r.getToken()&&17!==r.getToken();){if(5===r.getToken()){if(e||_(4,[],[]),h(","),v(),2===r.getToken()&&m)break}else e&&_(6,[],[]);(10!==r.getToken()?(_(3,[],[2,5]),0):(y(!1),6===r.getToken()?(h(":"),v(),w()||_(4,[],[2,5])):_(5,[],[2,5]),1))||_(4,[],[2,5]),e=!0}return l(),2!==r.getToken()?_(7,[2],[]):v(),!0}();case 10:return y(!0);default:return function(){switch(r.getToken()){case 11:{let e=0;try{e=JSON.parse(r.getTokenValue()),"number"!=typeof e&&(_(2),e=0)}catch(_C){_(2)}d(e);break}case 7:d(null);break;case 8:d(!0);break;case 9:d(!1);break;default:return!1}return v(),!0}()}}return v(),17===r.getToken()?!!i.allowEmptyContent||(_(4,[],[]),!1):w()?(17!==r.getToken()&&_(9,[],[]),!0):(_(4,[],[]),!1)}!function(e){e.DEFAULT={allowTrailingComma:!0}}(lg||(lg={}));const gg=un("configurationService");function fg(e,t){const i=Object.create(null);for(const r in e)mg(i,r,e[r],t);return i}function mg(e,t,i,r){const n=t.split("."),s=n.pop();let o=e;for(let a=0;a<n.length;a++){const e=n[a];let i=o[e];switch(typeof i){case"undefined":i=o[e]=Object.create(null);break;case"object":break;default:return void r(`Ignoring ${t} as ${n.slice(0,a+1).join(".")} is ${JSON.stringify(i)}`)}o=i}if("object"==typeof o&&null!==o)try{o[s]=i}catch(_C){r(`Ignoring ${t} as ${n.join(".")} is ${JSON.stringify(o)}`)}else r(`Ignoring ${t} as ${n.join(".")} is ${JSON.stringify(o)}`)}function vg(e,t){_g(e,t.split("."))}function _g(e,t){const i=t.shift();if(0!==t.length){if(-1!==Object.keys(e).indexOf(i)){const r=e[i];"object"!=typeof r||Array.isArray(r)||(_g(r,t),0===Object.keys(r).length&&delete e[i])}}else delete e[i]}function yg(e,t,i){const r=function(e,t){let i=e;for(const r of t){if("object"!=typeof i||null===i)return;i=i[r]}return i}(e,t.split("."));return void 0===r?i:r}const wg="base.contributions.json";const bg=new class{constructor(){this._onDidChangeSchema=new B,this.onDidChangeSchema=this._onDidChangeSchema.event,this.schemasById={}}registerSchema(e,t){this.schemasById[function(e){return e.length>0&&"#"===e.charAt(e.length-1)?e.substring(0,e.length-1):e}(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}getSchemaContributions(){return{schemas:this.schemasById}}};var xg;na.add(wg,bg),function(e){e.Multiline="multilineText",e.Singleline="singlelineText"}(xg||(xg={}));const Cg="base.contributions.configuration",Dg="vscode://schemas/settings/resourceLanguage",Sg=na.as(wg);const Eg="\\[([^\\]]+)\\]",kg=new RegExp(Eg,"g"),Ig=new RegExp(`^(${Eg})+$`);function Tg(e){const t=[];if(Ig.test(e)){let i=kg.exec(e);for(;null==i?void 0:i.length;){const r=i[1].trim();r&&t.push(r),i=kg.exec(e)}}return Vr(t)}const Pg=new class{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new B,this.onDidSchemaChange=this._onDidSchemaChange.event,this._onDidUpdateConfiguration=new B,this.onDidUpdateConfiguration=this._onDidUpdateConfiguration.event,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:J(0,"Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},Sg.registerSchema(Dg,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const i=new Set;this.doRegisterConfigurations(e,t,i),Sg.registerSchema(Dg,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i})}deregisterConfigurations(e){const t=new Set;this.doDeregisterConfigurations(e,t),Sg.registerSchema(Dg,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t})}updateConfigurations({add:e,remove:t}){const i=new Set;this.doDeregisterConfigurations(t,i),this.doRegisterConfigurations(e,!1,i),Sg.registerSchema(Dg,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){var i;const r=[];for(const{overrides:n,source:s}of e)for(const e in n)if(t.add(e),Ig.test(e)){const t=this.configurationDefaultsOverrides.get(e),o=null!==(i=null==t?void 0:t.valuesSources)&&void 0!==i?i:new Map;if(s)for(const i of Object.keys(n[e]))o.set(i,s);const a=Object.assign(Object.assign({},(null==t?void 0:t.value)||{}),n[e]);this.configurationDefaultsOverrides.set(e,{source:s,value:a,valuesSources:o});const l={type:"object",default:a,description:J(0,"Configure settings to be overridden for the {0} language.",e.replace(/[\[\]]/g,"")),$ref:Dg,defaultDefaultValue:a,source:hi(s)?void 0:s,defaultValueSource:s};r.push(...Tg(e)),this.configurationProperties[e]=l,this.defaultLanguageConfigurationOverridesNode.properties[e]=l}else{this.configurationDefaultsOverrides.set(e,{value:n[e],source:s});const t=this.configurationProperties[e];t&&(this.updatePropertyDefaultValue(e,t),this.updateSchema(e,t))}this.doRegisterOverrideIdentifiers(r)}deregisterDefaultConfigurations(e){const t=new Set;this.doDeregisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doDeregisterDefaultConfigurations(e,t){var i;for(const{overrides:r,source:n}of e)for(const e in r){const r=this.configurationDefaultsOverrides.get(e);if((hi(n)?n:null==n?void 0:n.id)===(hi(null==r?void 0:r.source)?null==r?void 0:r.source:null===(i=null==r?void 0:r.source)||void 0===i?void 0:i.id))if(t.add(e),this.configurationDefaultsOverrides.delete(e),Ig.test(e))delete this.configurationProperties[e],delete this.defaultLanguageConfigurationOverridesNode.properties[e];else{const t=this.configurationProperties[e];t&&(this.updatePropertyDefaultValue(e,t),this.updateSchema(e,t))}}this.updateOverridePropertyPatternKey()}deltaConfiguration(e){let t=!1;const i=new Set;e.removedDefaults&&(this.doDeregisterDefaultConfigurations(e.removedDefaults,i),t=!0),e.addedDefaults&&(this.doRegisterDefaultConfigurations(e.addedDefaults,i),t=!0),e.removedConfigurations&&this.doDeregisterConfigurations(e.removedConfigurations,i),e.addedConfigurations&&this.doRegisterConfigurations(e.addedConfigurations,!1,i),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this._onDidSchemaChange.fire()}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,i){e.forEach((e=>{this.validateAndRegisterProperties(e,t,e.extensionInfo,e.restrictedProperties,void 0,i),this.configurationContributors.push(e),this.registerJSONConfiguration(e)}))}doDeregisterConfigurations(e,t){const i=e=>{var r,n;if(e.properties)for(const i in e.properties){t.add(i);const n=this.configurationProperties[i];(null===(r=null==n?void 0:n.policy)||void 0===r?void 0:r.name)&&this.policyConfigurations.delete(n.policy.name),delete this.configurationProperties[i],this.removeFromSchema(i,e.properties[i])}null===(n=e.allOf)||void 0===n||n.forEach((e=>i(e)))};for(const r of e){i(r);const e=this.configurationContributors.indexOf(r);-1!==e&&this.configurationContributors.splice(e,1)}}validateAndRegisterProperties(e,t=!0,i,r,n=3,s){var o;n=_i(e.scope)?n:e.scope;const a=e.properties;if(a)for(const c in a){const e=a[c];t&&Ag(c,e)?delete a[c]:(e.source=i,e.defaultDefaultValue=a[c].default,this.updatePropertyDefaultValue(c,e),Ig.test(c)?e.scope=void 0:(e.scope=_i(e.scope)?n:e.scope,e.restricted=_i(e.restricted)?!!(null==r?void 0:r.includes(c)):e.restricted),!a[c].hasOwnProperty("included")||a[c].included?(this.configurationProperties[c]=a[c],(null===(o=a[c].policy)||void 0===o?void 0:o.name)&&this.policyConfigurations.set(a[c].policy.name,c),!a[c].deprecationMessage&&a[c].markdownDeprecationMessage&&(a[c].deprecationMessage=a[c].markdownDeprecationMessage),s.add(c)):(this.excludedConfigurationProperties[c]=a[c],delete a[c]))}const l=e.allOf;if(l)for(const c of l)this.validateAndRegisterProperties(c,t,i,r,n,s)}getConfigurations(){return this.configurationContributors}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}getConfigurationDefaultsOverrides(){return this.configurationDefaultsOverrides}registerJSONConfiguration(e){const t=e=>{const i=e.properties;if(i)for(const t in i)this.updateSchema(t,i[t]);const r=e.allOf;null==r||r.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:case 2:case 6:case 3:case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t}}removeFromSchema(e,t){switch(t.scope){case 1:case 2:case 6:case 3:break;case 4:case 5:delete this.resourceLanguageSettingsSchema.properties[e]}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,i={type:"object",description:J(0,"Configure editor settings to be overridden for a language."),errorMessage:J(0,"This setting does not support per-language configuration."),$ref:Dg};this.updatePropertyDefaultValue(t,i)}}registerOverridePropertyPatternKey(){J(0,"Configure editor settings to be overridden for a language."),J(0,"This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const i=this.configurationDefaultsOverrides.get(e);let r=null==i?void 0:i.value,n=null==i?void 0:i.source;mi(r)&&(r=t.defaultDefaultValue,n=void 0),mi(r)&&(r=function(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}(t.type)),t.default=r,t.defaultValueSource=n}};function Ag(e,t){var i,r,n,s;return e.trim()?Ig.test(e)?J(0,"Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",e):void 0!==Pg.getConfigurationProperties()[e]?J(0,"Cannot register '{0}'. This property is already registered.",e):(null===(i=t.policy)||void 0===i?void 0:i.name)&&void 0!==Pg.getPolicyConfigurations().get(null===(r=t.policy)||void 0===r?void 0:r.name)?J(0,"Cannot register '{0}'. The associated policy {1} is already registered with {2}.",e,null===(n=t.policy)||void 0===n?void 0:n.name,Pg.getPolicyConfigurations().get(null===(s=t.policy)||void 0===s?void 0:s.name)):null:J(0,"Cannot register an empty property")}function Rg(e){return Object.isFrozen(e)?e:Es(e)}na.add(Cg,Pg);class Fg{constructor(e={},t=[],i=[],r){this._contents=e,this._keys=t,this._overrides=i,this.raw=r,this.overrideConfigurations=new Map}get rawConfiguration(){var e;if(!this._rawConfiguration)if(null===(e=this.raw)||void 0===e?void 0:e.length){const e=this.raw.map((e=>{if(e instanceof Fg)return e;const t=new $g("");return t.parseRaw(e),t.configurationModel}));this._rawConfiguration=e.reduce(((e,t)=>t===e?t:e.merge(t)),e[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return 0===this._keys.length&&0===Object.keys(this._contents).length&&0===this._overrides.length}getValue(e){return e?yg(this.contents,e):this.contents}inspect(e,t){const i=this.rawConfiguration.getValue(e);return{value:i,override:t?this.rawConfiguration.getOverrideValue(e,t):void 0,merged:t?this.rawConfiguration.override(t).getValue(e):i}}getOverrideValue(e,t){const i=this.getContentsForOverrideIdentifer(t);return i?e?yg(i,e):i:void 0}getKeysForOverrideIdentifier(e){const t=[];for(const i of this.overrides)i.identifiers.includes(e)&&t.push(...i.keys);return Vr(t)}getAllOverrideIdentifiers(){const e=[];for(const t of this.overrides)e.push(...t.identifiers);return Vr(e)}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){var t,i;const r=Ss(this.contents),n=Ss(this.overrides),s=[...this.keys],o=(null===(t=this.raw)||void 0===t?void 0:t.length)?[...this.raw]:[this];for(const a of e)if(o.push(...(null===(i=a.raw)||void 0===i?void 0:i.length)?a.raw:[a]),!a.isEmpty()){this.mergeContents(r,a.contents);for(const e of a.overrides){const[t]=n.filter((t=>Mr(t.identifiers,e.identifiers)));t?(this.mergeContents(t.contents,e.contents),t.keys.push(...e.keys),t.keys=Vr(t.keys)):n.push(Ss(e))}for(const e of a.keys)-1===s.indexOf(e)&&s.push(e)}return new Fg(r,s,n,o.every((e=>e instanceof Fg))?void 0:o)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||"object"!=typeof t||!Object.keys(t).length)return this;const i={};for(const r of Vr([...Object.keys(this.contents),...Object.keys(t)])){let e=this.contents[r];const n=t[r];n&&("object"==typeof e&&"object"==typeof n?(e=Ss(e),this.mergeContents(e,n)):e=n),i[r]=e}return new Fg(i,this.keys,this.overrides)}mergeContents(e,t){for(const i of Object.keys(t))i in e&&pi(e[i])&&pi(t[i])?this.mergeContents(e[i],t[i]):e[i]=Ss(t[i])}getContentsForOverrideIdentifer(e){let t=null,i=null;const r=e=>{e&&(i?this.mergeContents(i,e):i=Ss(e))};for(const n of this.overrides)1===n.identifiers.length&&n.identifiers[0]===e?t=n.contents:n.identifiers.includes(e)&&r(n.contents);return r(t),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(e,t){this.updateValue(e,t,!0)}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);-1!==t&&(this.keys.splice(t,1),vg(this.contents,e),Ig.test(e)&&this.overrides.splice(this.overrides.findIndex((t=>Mr(t.identifiers,Tg(e)))),1))}updateValue(e,t,i){mg(this.contents,e,t,(e=>console.error(e))),(i=i||-1===this.keys.indexOf(e))&&this.keys.push(e),Ig.test(e)&&this.overrides.push({identifiers:Tg(e),keys:Object.keys(this.contents[e]),contents:fg(this.contents[e],(e=>console.error(e)))})}}class $g{constructor(e){this._name=e,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[],this._parseErrors=[]}get configurationModel(){return this._configurationModel||new Fg}get restrictedConfigurations(){return this._restrictedConfigurations}get errors(){return this._parseErrors}parse(e,t){if(!_i(e)){const i=this.doParseContent(e);this.parseRaw(i,t)}}reparse(e){this._raw&&this.parseRaw(this._raw,e)}parseRaw(e,t){this._raw=e;const{contents:i,keys:r,overrides:n,restricted:s,hasExcludedProperties:o}=this.doParseRaw(e,t);this._configurationModel=new Fg(i,r,n,o?[e]:void 0),this._restrictedConfigurations=s||[]}doParseContent(e){let t={},i=null,r=[];const n=[];function s(e){Array.isArray(r)?r.push(e):null!==i&&(r[i]=e)}const o={onObjectBegin:()=>{const e={};s(e),n.push(r),r=e,i=null},onObjectProperty:e=>{i=e},onObjectEnd:()=>{r=n.pop()},onArrayBegin:()=>{const e=[];s(e),n.push(r),r=e,i=null},onArrayEnd:()=>{r=n.pop()},onLiteralValue:s,onError:(e,t,i)=>{}};if(e)try{pg(e,o),t=r[0]||{}}catch(_C){console.error(`Error while parsing settings file ${this._name}: ${_C}`),this._parseErrors=[_C]}return t}doParseRaw(e,t){const i=na.as(Cg).getConfigurationProperties(),r=this.filter(e,i,!0,t);return{contents:fg(e=r.raw,(e=>console.error(`Conflict in settings file ${this._name}: ${e}`))),keys:Object.keys(e),overrides:this.toOverrides(e,(e=>console.error(`Conflict in settings file ${this._name}: ${e}`))),restricted:r.restricted,hasExcludedProperties:r.hasExcludedProperties}}filter(e,t,i,r){var n,s,o;let a=!1;if(!(null==r?void 0:r.scopes)&&!(null==r?void 0:r.skipRestricted)&&!(null===(n=null==r?void 0:r.exclude)||void 0===n?void 0:n.length))return{raw:e,restricted:[],hasExcludedProperties:a};const l={},c=[];for(const u in e)if(Ig.test(u)&&i){const i=this.filter(e[u],t,!1,r);l[u]=i.raw,a=a||i.hasExcludedProperties,c.push(...i.restricted)}else{const i=t[u],n=i?void 0!==i.scope?i.scope:3:void 0;(null==i?void 0:i.restricted)&&c.push(u),(null===(s=r.exclude)||void 0===s?void 0:s.includes(u))||!(null===(o=r.include)||void 0===o?void 0:o.includes(u))&&(void 0!==n&&void 0!==r.scopes&&!r.scopes.includes(n)||r.skipRestricted&&(null==i?void 0:i.restricted))?a=!0:l[u]=e[u]}return{raw:l,restricted:c,hasExcludedProperties:a}}toOverrides(e,t){const i=[];for(const r of Object.keys(e))if(Ig.test(r)){const n={};for(const t in e[r])n[t]=e[r][t];i.push({identifiers:Tg(r),keys:Object.keys(n),contents:fg(n,t)})}return i}}class Lg{constructor(e,t,i,r,n,s,o,a,l,c,u,d,h){this.key=e,this.overrides=t,this._value=i,this.overrideIdentifiers=r,this.defaultConfiguration=n,this.policyConfiguration=s,this.applicationConfiguration=o,this.userConfiguration=a,this.localUserConfiguration=l,this.remoteUserConfiguration=c,this.workspaceConfiguration=u,this.folderConfigurationModel=d,this.memoryConfigurationModel=h}get value(){return Rg(this._value)}inspect(e,t,i){const r=e.inspect(t,i);return{get value(){return Rg(r.value)},get override(){return Rg(r.override)},get merged(){return Rg(r.merged)}}}get defaultInspectValue(){return this._defaultInspectValue||(this._defaultInspectValue=this.inspect(this.defaultConfiguration,this.key,this.overrides.overrideIdentifier)),this._defaultInspectValue}get defaultValue(){return this.defaultInspectValue.merged}get default(){return void 0!==this.defaultInspectValue.value||void 0!==this.defaultInspectValue.override?{value:this.defaultInspectValue.value,override:this.defaultInspectValue.override}:void 0}get policyInspectValue(){return void 0===this._policyInspectValue&&(this._policyInspectValue=this.policyConfiguration?this.inspect(this.policyConfiguration,this.key):null),this._policyInspectValue}get policyValue(){var e;return null===(e=this.policyInspectValue)||void 0===e?void 0:e.merged}get policy(){var e;return void 0!==(null===(e=this.policyInspectValue)||void 0===e?void 0:e.value)?{value:this.policyInspectValue.value}:void 0}get applicationInspectValue(){return void 0===this._applicationInspectValue&&(this._applicationInspectValue=this.applicationConfiguration?this.inspect(this.applicationConfiguration,this.key):null),this._applicationInspectValue}get applicationValue(){var e;return null===(e=this.applicationInspectValue)||void 0===e?void 0:e.merged}get application(){var e,t;return void 0!==(null===(e=this.applicationInspectValue)||void 0===e?void 0:e.value)||void 0!==(null===(t=this.applicationInspectValue)||void 0===t?void 0:t.override)?{value:this.applicationInspectValue.value,override:this.applicationInspectValue.override}:void 0}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.inspect(this.userConfiguration,this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get userValue(){return this.userInspectValue.merged}get user(){return void 0!==this.userInspectValue.value||void 0!==this.userInspectValue.override?{value:this.userInspectValue.value,override:this.userInspectValue.override}:void 0}get userLocalInspectValue(){return this._userLocalInspectValue||(this._userLocalInspectValue=this.inspect(this.localUserConfiguration,this.key,this.overrides.overrideIdentifier)),this._userLocalInspectValue}get userLocalValue(){return this.userLocalInspectValue.merged}get userLocal(){return void 0!==this.userLocalInspectValue.value||void 0!==this.userLocalInspectValue.override?{value:this.userLocalInspectValue.value,override:this.userLocalInspectValue.override}:void 0}get userRemoteInspectValue(){return this._userRemoteInspectValue||(this._userRemoteInspectValue=this.inspect(this.remoteUserConfiguration,this.key,this.overrides.overrideIdentifier)),this._userRemoteInspectValue}get userRemoteValue(){return this.userRemoteInspectValue.merged}get userRemote(){return void 0!==this.userRemoteInspectValue.value||void 0!==this.userRemoteInspectValue.override?{value:this.userRemoteInspectValue.value,override:this.userRemoteInspectValue.override}:void 0}get workspaceInspectValue(){return void 0===this._workspaceInspectValue&&(this._workspaceInspectValue=this.workspaceConfiguration?this.inspect(this.workspaceConfiguration,this.key,this.overrides.overrideIdentifier):null),this._workspaceInspectValue}get workspaceValue(){var e;return null===(e=this.workspaceInspectValue)||void 0===e?void 0:e.merged}get workspace(){var e,t;return void 0!==(null===(e=this.workspaceInspectValue)||void 0===e?void 0:e.value)||void 0!==(null===(t=this.workspaceInspectValue)||void 0===t?void 0:t.override)?{value:this.workspaceInspectValue.value,override:this.workspaceInspectValue.override}:void 0}get workspaceFolderInspectValue(){return void 0===this._workspaceFolderInspectValue&&(this._workspaceFolderInspectValue=this.folderConfigurationModel?this.inspect(this.folderConfigurationModel,this.key,this.overrides.overrideIdentifier):null),this._workspaceFolderInspectValue}get workspaceFolderValue(){var e;return null===(e=this.workspaceFolderInspectValue)||void 0===e?void 0:e.merged}get workspaceFolder(){var e,t;return void 0!==(null===(e=this.workspaceFolderInspectValue)||void 0===e?void 0:e.value)||void 0!==(null===(t=this.workspaceFolderInspectValue)||void 0===t?void 0:t.override)?{value:this.workspaceFolderInspectValue.value,override:this.workspaceFolderInspectValue.override}:void 0}get memoryInspectValue(){return void 0===this._memoryInspectValue&&(this._memoryInspectValue=this.inspect(this.memoryConfigurationModel,this.key,this.overrides.overrideIdentifier)),this._memoryInspectValue}get memoryValue(){return this.memoryInspectValue.merged}get memory(){return void 0!==this.memoryInspectValue.value||void 0!==this.memoryInspectValue.override?{value:this.memoryInspectValue.value,override:this.memoryInspectValue.override}:void 0}}class Og{constructor(e,t,i,r,n=new Fg,s=new Fg,o=new Li,a=new Fg,l=new Li){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=i,this._localUserConfiguration=r,this._remoteUserConfiguration=n,this._workspaceConfiguration=s,this._folderConfigurations=o,this._memoryConfiguration=a,this._memoryConfigurationByResource=l,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new Li,this._userConfiguration=null}getValue(e,t,i){return this.getConsolidatedConfigurationModel(e,t,i).getValue(e)}updateValue(e,t,i={}){let r;i.resource?(r=this._memoryConfigurationByResource.get(i.resource),r||(r=new Fg,this._memoryConfigurationByResource.set(i.resource,r))):r=this._memoryConfiguration,void 0===t?r.removeValue(e):r.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,i){const r=this.getConsolidatedConfigurationModel(e,t,i),n=this.getFolderConfigurationModelForResource(t.resource,i),s=t.resource&&this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration,o=new Set;for(const a of r.overrides)for(const t of a.identifiers)void 0!==r.getOverrideValue(e,t)&&o.add(t);return new Lg(e,t,r.getValue(e),o.size?[...o]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this._workspaceConfiguration:void 0,n||void 0,s)}keys(e){const t=this.getFolderConfigurationModelForResource(void 0,e);return{default:this._defaultConfiguration.keys.slice(0),user:this.userConfiguration.keys.slice(0),workspace:this._workspaceConfiguration.keys.slice(0),workspaceFolder:t?t.keys.slice(0):[]}}updateDefaultConfiguration(e){this._defaultConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updatePolicyConfiguration(e){this._policyConfiguration=e}updateApplicationConfiguration(e){this._applicationConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateLocalUserConfiguration(e){this._localUserConfiguration=e,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateRemoteUserConfiguration(e){this._remoteUserConfiguration=e,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateWorkspaceConfiguration(e){this._workspaceConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateFolderConfiguration(e,t){this._folderConfigurations.set(e,t),this._foldersConsolidatedConfigurations.delete(e)}deleteFolderConfiguration(e){this.folderConfigurations.delete(e),this._foldersConsolidatedConfigurations.delete(e)}compareAndUpdateDefaultConfiguration(e,t){const i=[];if(!t){const{added:i,updated:r,removed:n}=Ng(this._defaultConfiguration,e);t=[...i,...r,...n]}for(const r of t)for(const t of Tg(r)){const r=this._defaultConfiguration.getKeysForOverrideIdentifier(t),n=e.getKeysForOverrideIdentifier(t),s=[...n.filter((e=>-1===r.indexOf(e))),...r.filter((e=>-1===n.indexOf(e))),...r.filter((i=>!As(this._defaultConfiguration.override(t).getValue(i),e.override(t).getValue(i))))];i.push([t,s])}return this.updateDefaultConfiguration(e),{keys:t,overrides:i}}compareAndUpdatePolicyConfiguration(e){const{added:t,updated:i,removed:r}=Ng(this._policyConfiguration,e),n=[...t,...i,...r];return n.length&&this.updatePolicyConfiguration(e),{keys:n,overrides:[]}}compareAndUpdateApplicationConfiguration(e){const{added:t,updated:i,removed:r,overrides:n}=Ng(this.applicationConfiguration,e),s=[...t,...i,...r];return s.length&&this.updateApplicationConfiguration(e),{keys:s,overrides:n}}compareAndUpdateLocalUserConfiguration(e){const{added:t,updated:i,removed:r,overrides:n}=Ng(this.localUserConfiguration,e),s=[...t,...i,...r];return s.length&&this.updateLocalUserConfiguration(e),{keys:s,overrides:n}}compareAndUpdateRemoteUserConfiguration(e){const{added:t,updated:i,removed:r,overrides:n}=Ng(this.remoteUserConfiguration,e),s=[...t,...i,...r];return s.length&&this.updateRemoteUserConfiguration(e),{keys:s,overrides:n}}compareAndUpdateWorkspaceConfiguration(e){const{added:t,updated:i,removed:r,overrides:n}=Ng(this.workspaceConfiguration,e),s=[...t,...i,...r];return s.length&&this.updateWorkspaceConfiguration(e),{keys:s,overrides:n}}compareAndUpdateFolderConfiguration(e,t){const i=this.folderConfigurations.get(e),{added:r,updated:n,removed:s,overrides:o}=Ng(i,t),a=[...r,...n,...s];return!a.length&&i||this.updateFolderConfiguration(e,t),{keys:a,overrides:o}}compareAndDeleteFolderConfiguration(e){const t=this.folderConfigurations.get(e);if(!t)throw new Error("Unknown folder");this.deleteFolderConfiguration(e);const{added:i,updated:r,removed:n,overrides:s}=Ng(t,void 0);return{keys:[...i,...r,...n],overrides:s}}get defaults(){return this._defaultConfiguration}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}get workspaceConfiguration(){return this._workspaceConfiguration}get folderConfigurations(){return this._folderConfigurations}getConsolidatedConfigurationModel(e,t,i){let r=this.getConsolidatedConfigurationModelForResource(t,i);return t.overrideIdentifier&&(r=r.override(t.overrideIdentifier)),this._policyConfiguration.isEmpty()||void 0===this._policyConfiguration.getValue(e)||(r=r.merge(this._policyConfiguration)),r}getConsolidatedConfigurationModelForResource({resource:e},t){let i=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const r=t.getFolder(e);r&&(i=this.getFolderConsolidatedConfiguration(r.uri)||i);const n=this._memoryConfigurationByResource.get(e);n&&(i=i.merge(n))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const i=this.getWorkspaceConsolidatedConfiguration(),r=this._folderConfigurations.get(e);r?(t=i.merge(r),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const i=t.getFolder(e);if(i)return this._folderConfigurations.get(i.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce(((e,t)=>{const{contents:i,overrides:r,keys:n}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:r,keys:n}]),e}),[])}}allKeys(){const e=new Set;return this._defaultConfiguration.keys.forEach((t=>e.add(t))),this.userConfiguration.keys.forEach((t=>e.add(t))),this._workspaceConfiguration.keys.forEach((t=>e.add(t))),this._folderConfigurations.forEach((t=>t.keys.forEach((t=>e.add(t))))),[...e.values()]}allOverrideIdentifiers(){const e=new Set;return this._defaultConfiguration.getAllOverrideIdentifiers().forEach((t=>e.add(t))),this.userConfiguration.getAllOverrideIdentifiers().forEach((t=>e.add(t))),this._workspaceConfiguration.getAllOverrideIdentifiers().forEach((t=>e.add(t))),this._folderConfigurations.forEach((t=>t.getAllOverrideIdentifiers().forEach((t=>e.add(t))))),[...e.values()]}getAllKeysForOverrideIdentifier(e){const t=new Set;return this._defaultConfiguration.getKeysForOverrideIdentifier(e).forEach((e=>t.add(e))),this.userConfiguration.getKeysForOverrideIdentifier(e).forEach((e=>t.add(e))),this._workspaceConfiguration.getKeysForOverrideIdentifier(e).forEach((e=>t.add(e))),this._folderConfigurations.forEach((i=>i.getKeysForOverrideIdentifier(e).forEach((e=>t.add(e))))),[...t.values()]}static parse(e){const t=this.parseConfigurationModel(e.defaults),i=this.parseConfigurationModel(e.policy),r=this.parseConfigurationModel(e.application),n=this.parseConfigurationModel(e.user),s=this.parseConfigurationModel(e.workspace),o=e.folders.reduce(((e,t)=>(e.set(pt.revive(t[0]),this.parseConfigurationModel(t[1])),e)),new Li);return new Og(t,i,r,n,new Fg,s,o,new Fg,new Li)}static parseConfigurationModel(e){return new Fg(e.contents,e.keys,e.overrides)}}class Mg{constructor(e,t,i,r){this.change=e,this.previous=t,this.currentConfiguraiton=i,this.currentWorkspace=r,this._marker="\n",this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=".".charCodeAt(0),this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const n of e.keys)this.affectedKeys.add(n);for(const[,n]of e.overrides)for(const e of n)this.affectedKeys.add(e);this._affectsConfigStr=this._marker;for(const n of this.affectedKeys)this._affectsConfigStr+=n+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=Og.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var i;const r=this._marker+e,n=this._affectsConfigStr.indexOf(r);if(n<0)return!1;const s=n+r.length;if(s>=this._affectsConfigStr.length)return!1;const o=this._affectsConfigStr.charCodeAt(s);if(o!==this._markerCode1&&o!==this._markerCode2)return!1;if(t){return!As(this.previousConfiguration?this.previousConfiguration.getValue(e,t,null===(i=this.previous)||void 0===i?void 0:i.workspace):void 0,this.currentConfiguraiton.getValue(e,t,this.currentWorkspace))}return!0}}function Ng(e,t){const{added:i,removed:r,updated:n}=Hg(null==t?void 0:t.rawConfiguration,null==e?void 0:e.rawConfiguration),s=[],o=(null==e?void 0:e.getAllOverrideIdentifiers())||[],a=(null==t?void 0:t.getAllOverrideIdentifiers())||[];if(t){const e=a.filter((e=>!o.includes(e)));for(const i of e)s.push([i,t.getKeysForOverrideIdentifier(i)])}if(e){const t=o.filter((e=>!a.includes(e)));for(const i of t)s.push([i,e.getKeysForOverrideIdentifier(i)])}if(t&&e)for(const l of o)if(a.includes(l)){const i=Hg({contents:e.getOverrideValue(void 0,l)||{},keys:e.getKeysForOverrideIdentifier(l)},{contents:t.getOverrideValue(void 0,l)||{},keys:t.getKeysForOverrideIdentifier(l)});s.push([l,[...i.added,...i.removed,...i.updated]])}return{added:i,removed:r,updated:n,overrides:s}}function Hg(e,t){const i=e?t?e.keys.filter((e=>-1===t.keys.indexOf(e))):[...e.keys]:[],r=t?e?t.keys.filter((t=>-1===e.keys.indexOf(t))):[...t.keys]:[],n=[];if(e&&t)for(const s of t.keys)if(-1!==e.keys.indexOf(s)){As(yg(t.contents,s),yg(e.contents,s))||n.push(s)}return{added:i,removed:r,updated:n}}function Ug(e,t){if(t){const i=t.split(".");let r=e;for(let e=0;r&&e<i.length;e++)r=r[i[e]];return r}}function Bg(e){return e instanceof pt?{resource:e}:function(e){return e&&e.uri instanceof pt&&e.languageId&&"string"==typeof e.languageId}(e)?{resource:e.uri,overrideIdentifier:e.languageId}:function(e){return e&&!e.uri&&e.languageId&&"string"==typeof e.languageId}(e)?{overrideIdentifier:e.languageId}:function(e){return e&&e.uri instanceof pt&&(!e.name||"string"==typeof e.name)&&(!e.index||"number"==typeof e.index)}(e)?{resource:e.uri}:null===e?{resource:null}:void 0}let Vg=class{constructor(e,t,i){this._proxy=e.getProxy(Ft.MainThreadConfiguration),this._extHostWorkspace=t,this._logService=i,this._barrier=new lr,this._actual=null}getConfigProvider(){return this._barrier.wait().then((e=>this._actual))}$initializeConfiguration(e){this._actual=new Wg(this._proxy,this._extHostWorkspace,e,this._logService),this._barrier.open()}$acceptConfigurationChanged(e,t){this.getConfigProvider().then((i=>i.$acceptConfigurationChanged(e,t)))}};Vg=vs([_s(0,ps),_s(1,og),_s(2,Gn)],Vg);class Wg{constructor(e,t,i,r){this._onDidChangeConfiguration=new B,this._proxy=e,this._logService=r,this._extHostWorkspace=t,this._configuration=Og.parse(i),this._configurationScopes=this._toMap(i.configurationScopes)}get onDidChangeConfiguration(){return this._onDidChangeConfiguration&&this._onDidChangeConfiguration.event}$acceptConfigurationChanged(e,t){const i={data:this._configuration.toData(),workspace:this._extHostWorkspace.workspace};this._configuration=Og.parse(e),this._configurationScopes=this._toMap(e.configurationScopes),this._onDidChangeConfiguration.fire(this._toConfigurationChangeEvent(t,i))}getConfiguration(e,t,i){const r=Bg(t)||{},n=this._toReadonlyValue(e?Ug(this._configuration.getValue(void 0,r,this._extHostWorkspace.workspace),e):this._configuration.getValue(void 0,r,this._extHostWorkspace.workspace));e&&this._validateConfigurationAccess(e,r,i?.identifier);const s={has:e=>void 0!==Ug(n,e),get:(t,s)=>{this._validateConfigurationAccess(e?`${e}.${t}`:t,r,i?.identifier);let o=Ug(n,t);if(void 0===o)o=s;else{let e;const i=(t,r)=>{if(pi(t)){let s;const o=()=>{e=e||Ss(n),s=s||Ug(e,r)};return new Proxy(t,{get:(t,n)=>{if("string"==typeof n&&"tojson"===n.toLowerCase())return o(),()=>s;if(e)return s=s||Ug(e,r),s[n];const a=t[n];return"string"==typeof n?i(a,`${r}.${n}`):a},set:(e,t,i)=>(o(),s&&(s[t]=i),!0),deleteProperty:(e,t)=>(o(),s&&delete s[t],!0),defineProperty:(e,t,i)=>(o(),s&&Object.defineProperty(s,t,i),!0)})}return Array.isArray(t)?Ss(t):t};o=i(o,t)}return o},update:(t,i,n,s)=>{t=e?`${e}.${t}`:t;const o=function(e){if(null==e)return null;if("boolean"==typeof e)return e?2:5;switch(e){case su.Global:return 2;case su.Workspace:return 5;case su.WorkspaceFolder:return 6}}(n);return void 0!==i?this._proxy.$updateConfigurationOption(o,t,i,r,s):this._proxy.$removeConfigurationOption(o,t,r,s)},inspect:t=>{t=e?`${e}.${t}`:t;const i=this._configuration.inspect(t,r,this._extHostWorkspace.workspace);if(i)return{key:t,defaultValue:Ss(i.policy?.value??i.default?.value),globalValue:Ss(i.user?.value??i.application?.value),workspaceValue:Ss(i.workspace?.value),workspaceFolderValue:Ss(i.workspaceFolder?.value),defaultLanguageValue:Ss(i.default?.override),globalLanguageValue:Ss(i.user?.override??i.application?.override),workspaceLanguageValue:Ss(i.workspace?.override),workspaceFolderLanguageValue:Ss(i.workspaceFolder?.override),languageIds:Ss(i.overrideIdentifiers)}}};return"object"==typeof n&&Ps(s,n,!1),Object.freeze(s)}_toReadonlyValue(e){const t=e=>pi(e)?new Proxy(e,{get:(e,i)=>t(e[i]),set:(e,t,i)=>{throw new Error(`TypeError: Cannot assign to read only property '${String(t)}' of object`)},deleteProperty:(e,t)=>{throw new Error(`TypeError: Cannot delete read only property '${String(t)}' of object`)},defineProperty:(e,t)=>{throw new Error(`TypeError: Cannot define property '${String(t)}' for a readonly object`)},setPrototypeOf:e=>{throw new Error("TypeError: Cannot set prototype for a readonly object")},isExtensible:()=>!1,preventExtensions:()=>!0}):e;return t(e)}_validateConfigurationAccess(e,t,i){const r=Ig.test(e)?4:this._configurationScopes.get(e),n=i?`[${i.value}] `:"";4!==r?3!==r||t?.resource&&this._logService.warn(`${n}Accessing a window scoped configuration for a resource is not expected. To associate '${e}' to a resource, define its scope to 'resource' in configuration contributions in 'package.json'.`):void 0===t?.resource&&this._logService.warn(`${n}Accessing a resource scoped configuration without providing a resource is not expected. To get the effective value for '${e}', provide the URI of a resource or 'null' for any resource.`)}_toConfigurationChangeEvent(e,t){const i=new Mg(e,t,this._configuration,this._extHostWorkspace.workspace);return Object.freeze({affectsConfiguration:(e,t)=>i.affectsConfiguration(e,Bg(t))})}_toMap(e){return e.reduce(((e,t)=>(e.set(t[0],t[1]),e)),new Map)}}const zg=un("IExtHostConfiguration");class jg{constructor(e){this.removedDueToLooping=e}}class qg{static isHostExtension(e,t,i){if(t.getExtensionDescription(e))return!1;const r=i.getExtensionDescription(e);return!!r&&!(!r.main&&!r.browser||"none"!==r.api)}constructor(e,t){this._activationEventsReader=e,this._onDidChange=new B,this.onDidChange=this._onDidChange.event,this._extensionDescriptions=t,this._initialize()}_initialize(){this._extensionDescriptions.sort(Kg),this._extensionsMap=new Ka,this._extensionsArr=[],this._activationMap=new Map;for(const e of this._extensionDescriptions){if(this._extensionsMap.has(e.identifier)){console.error("Extension `"+e.identifier.value+"` is already registered");continue}this._extensionsMap.set(e.identifier,e),this._extensionsArr.push(e);const t=this._activationEventsReader.readActivationEvents(e);if(Array.isArray(t))for(let i of t)"onUri"===i&&(i=`onUri:${ja.toKey(e.identifier)}`),this._activationMap.has(i)||this._activationMap.set(i,[]),this._activationMap.get(i).push(e)}}set(e){this._extensionDescriptions=e,this._initialize(),this._onDidChange.fire(void 0)}deltaExtensions(e,t){this._extensionDescriptions=Gg(this._extensionDescriptions,t),this._extensionDescriptions=this._extensionDescriptions.concat(e);const i=qg._findLoopingExtensions(this._extensionDescriptions);return this._extensionDescriptions=Gg(this._extensionDescriptions,i.map((e=>e.identifier))),this._initialize(),this._onDidChange.fire(void 0),new jg(i)}static _findLoopingExtensions(e){const t=new class{constructor(){this._arcs=new Map,this._nodesSet=new Set,this._nodesArr=[]}addNode(e){this._nodesSet.has(e)||(this._nodesSet.add(e),this._nodesArr.push(e))}addArc(e,t){this.addNode(e),this.addNode(t),this._arcs.has(e)?this._arcs.get(e).push(t):this._arcs.set(e,[t])}getArcs(e){return this._arcs.has(e)?this._arcs.get(e):[]}hasOnlyGoodArcs(e,i){const r=t.getArcs(e);for(let t=0;t<r.length;t++)if(!i.has(r[t]))return!1;return!0}getNodes(){return this._nodesArr}},i=new Ka;for(const o of e)if(i.set(o.identifier,o),o.extensionDependencies)for(const e of o.extensionDependencies)t.addArc(ja.toKey(o.identifier),ja.toKey(e));const r=new Set;t.getNodes().filter((e=>0===t.getArcs(e).length)).forEach((e=>r.add(e)));const n=t.getNodes().filter((e=>!r.has(e)));let s;do{s=!1;for(let e=0;e<n.length;e++){const i=n[e];t.hasOnlyGoodArcs(i,r)&&(n.splice(e,1),e--,r.add(i),s=!0)}}while(s);return n.map((e=>i.get(e)))}containsActivationEvent(e){return this._activationMap.has(e)}containsExtension(e){return this._extensionsMap.has(e)}getExtensionDescriptionsForActivationEvent(e){const t=this._activationMap.get(e);return t?t.slice(0):[]}getAllExtensionDescriptions(){return this._extensionsArr.slice(0)}getExtensionDescription(e){const t=this._extensionsMap.get(e);return t||void 0}getExtensionDescriptionByUUID(e){for(const t of this._extensionsArr)if(t.uuid===e)return t}getExtensionDescriptionByIdOrUUID(e,t){return this.getExtensionDescription(e)??(t?this.getExtensionDescriptionByUUID(t):void 0)}}function Kg(e,t){const i=e.isBuiltin?0:e.isUnderDevelopment?2:1,r=t.isBuiltin?0:t.isUnderDevelopment?2:1;if(i!==r)return i-r;const n=Ze.basename(e.extensionLocation.path),s=Ze.basename(t.extensionLocation.path);return n<s?-1:n>s?1:0}function Gg(e,t){const i=new qa(t);return e.filter((e=>!i.has(e.identifier)))}const Qg=Object.freeze({identifier:new ja("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:pt.parse("void:location"),isBuiltin:!1,targetPlatform:"undefined",isUserBuiltin:!1,isUnderDevelopment:!1});un("extensionService");class Jg{constructor(e){this.dependency=e}}function Zg(e,t){return!!e.enabledApiProposals&&e.enabledApiProposals.includes(t)}function Yg(e,t){if(!Zg(e,t))throw new Error(`Extension '${e.identifier.value}' CANNOT use API proposal: ${t}.\nIts package.json#enabledApiProposals-property declares: ${e.enabledApiProposals?.join(", ")??"[]"} but NOT ${t}.\n The missing proposal MUST be added and you must start in extension development mode or use the following command line switch: --enable-proposed-api ${e.identifier.value}`)}class Xg{static{this.NONE=new Xg(!1,-1,-1,-1)}constructor(e,t,i,r){this.startup=e,this.codeLoadingTime=t,this.activateCallTime=i,this.activateResolvedTime=r}}class ef{constructor(e){this._startup=e,this._codeLoadingStart=-1,this._codeLoadingStop=-1,this._activateCallStart=-1,this._activateCallStop=-1,this._activateResolveStart=-1,this._activateResolveStop=-1}_delta(e,t){return-1===e||-1===t?-1:t-e}build(){return new Xg(this._startup,this._delta(this._codeLoadingStart,this._codeLoadingStop),this._delta(this._activateCallStart,this._activateCallStop),this._delta(this._activateResolveStart,this._activateResolveStop))}codeLoadingStart(){this._codeLoadingStart=Date.now()}codeLoadingStop(){this._codeLoadingStop=Date.now()}activateCallStart(){this._activateCallStart=Date.now()}activateCallStop(){this._activateCallStop=Date.now()}activateResolveStart(){this._activateResolveStart=Date.now()}activateResolveStop(){this._activateResolveStop=Date.now()}}class tf{constructor(e,t,i,r,n,s){this.activationFailed=e,this.activationFailedError=t,this.activationTimes=i,this.module=r,this.exports=n,this.subscriptions=s}}class rf extends tf{constructor(e){super(!1,null,e,{activate:void 0,deactivate:void 0},void 0,[])}}class nf extends tf{constructor(){super(!1,null,Xg.NONE,{activate:void 0,deactivate:void 0},void 0,[])}}class sf extends tf{constructor(e){super(!0,e,Xg.NONE,{activate:void 0,deactivate:void 0},void 0,[])}}let of=class{constructor(e,t,i,r){this._logService=r,this._registry=e,this._globalRegistry=t,this._host=i,this._operations=new Ka,this._alreadyActivatedEvents=Object.create(null)}dispose(){for(const[e,t]of this._operations)t.dispose()}async waitForActivatingExtensions(){const e=[];for(const[t,i]of this._operations)e.push(i.wait());await Promise.all(e)}isActivated(e){const t=this._operations.get(e);return Boolean(t&&t.value)}getActivatedExtension(e){const t=this._operations.get(e);if(!t||!t.value)throw new Error(`Extension '${e.value}' is not known or not activated`);return t.value}async activateByEvent(e,t){if(this._alreadyActivatedEvents[e])return;const i=this._registry.getExtensionDescriptionsForActivationEvent(e);await this._activateExtensions(i.map((i=>({id:i.identifier,reason:{startup:t,extensionId:i.identifier,activationEvent:e}})))),this._alreadyActivatedEvents[e]=!0}activateById(e,t){const i=this._registry.getExtensionDescription(e);if(!i)throw new Error(`Extension '${e}' is not known`);return this._activateExtensions([{id:i.identifier,reason:t}])}async _activateExtensions(e){const t=e.filter((e=>!this.isActivated(e.id))).map((e=>this._handleActivationRequest(e)));await Promise.all(t.map((e=>e.wait())))}_handleActivationRequest(e){if(this._operations.has(e.id))return this._operations.get(e.id);if(this._isHostExtension(e.id))return this._createAndSaveOperation(e,null,[],null);const t=this._registry.getExtensionDescription(e.id);if(!t){const t=new Error(`Cannot activate unknown extension '${e.id.value}'`),i=this._createAndSaveOperation(e,null,[],new sf(t));return this._host.onExtensionActivationError(e.id,t,new Jg(e.id.value)),i}const i=[],r=void 0===t.extensionDependencies?[]:t.extensionDependencies;for(const n of r){if(this._isResolvedExtension(n))continue;const r=this._operations.get(n);if(r){i.push(r);continue}if(this._isHostExtension(n)){i.push(this._handleActivationRequest({id:this._globalRegistry.getExtensionDescription(n).identifier,reason:e.reason}));continue}const s=this._registry.getExtensionDescription(n);if(s){if(!s.main&&!s.browser)continue;i.push(this._handleActivationRequest({id:s.identifier,reason:e.reason}));continue}const o=t.displayName||t.identifier.value,a=new Error(`Cannot activate the '${o}' extension because it depends on unknown extension '${n}'`),l=this._createAndSaveOperation(e,t.displayName,[],new sf(a));return this._host.onExtensionActivationError(t.identifier,a,new Jg(n)),l}return this._createAndSaveOperation(e,t.displayName,i,null)}_createAndSaveOperation(e,t,i,r){const n=new af(e.id,t,e.reason,i,r,this._host,this._logService);return this._operations.set(e.id,n),n}_isHostExtension(e){return qg.isHostExtension(e,this._registry,this._globalRegistry)}_isResolvedExtension(e){const t=this._globalRegistry.getExtensionDescription(e);return!!t&&(!t.main&&!t.browser)}};of=vs([_s(3,Gn)],of);let af=class{get value(){return this._value}get friendlyName(){return this._displayName||this._id.value}constructor(e,t,i,r,n,s,o){this._id=e,this._displayName=t,this._reason=i,this._deps=r,this._value=n,this._host=s,this._logService=o,this._barrier=new lr,this._isDisposed=!1,this._initialize()}dispose(){this._isDisposed=!0}wait(){return this._barrier.wait()}async _initialize(){await this._waitForDepsThenActivate(),this._barrier.open()}async _waitForDepsThenActivate(){if(!this._value){for(;this._deps.length>0;){for(let e=0;e<this._deps.length;e++){const t=this._deps[e];if(!t.value||t.value.activationFailed){if(t.value&&t.value.activationFailed){const e=new Error(`Cannot activate the '${this.friendlyName}' extension because its dependency '${t.friendlyName}' failed to activate`);return e.detail=t.value.activationFailedError,this._value=new sf(e),void this._host.onExtensionActivationError(this._id,e,null)}}else this._deps.splice(e,1),e--}this._deps.length>0&&await Promise.race(this._deps.map((e=>e.wait())))}await this._activate()}}async _activate(){try{this._value=await this._host.actualActivateExtension(this._id,this._reason)}catch(e){const t=new Error;if(e&&e.name&&(t.name=e.name),e&&e.message?t.message=`Activating extension '${this._id.value}' failed: ${e.message}.`:t.message=`Activating extension '${this._id.value}' failed: ${e}.`,e&&e.stack&&(t.stack=e.stack),this._value=new sf(t),this._isDisposed&&a(e))return;this._host.onExtensionActivationError(this._id,t,null),this._logService.error(`Activating extension ${this._id.value} failed due to an error:`),this._logService.error(e)}}};af=vs([_s(6,Gn)],af);class lf{constructor(e,t){this._logService=t,this._onDidChangeStorage=new B,this.onDidChangeStorage=this._onDidChangeStorage.event,this._proxy=e.getProxy(Ft.MainThreadStorage)}registerExtensionStorageKeysToSync(e,t){this._proxy.$registerExtensionStorageKeysToSync(e,t)}async initializeExtensionStorage(e,t,i){const r=await this._proxy.$initializeExtensionStorage(e,t);let n;return r&&(n=this.safeParseValue(e,t,r)),n||i}setValue(e,t,i){return this._proxy.$setValue(e,t,i)}$acceptValue(e,t,i){const r=this.safeParseValue(e,t,i);r&&this._onDidChangeStorage.fire({shared:e,key:t,value:r})}safeParseValue(e,t,i){try{return JSON.parse(i)}catch(r){this._logService.error(`[extHostStorage] unexpected error parsing storage contents (extensionId: ${t}, global: ${e}): ${r}`)}}}const cf=un("IExtHostStorage");class uf{constructor(e,t,i){this._deferredPromises=new Map,this._id=e,this._shared=t,this._storage=i,this._init=this._storage.initializeExtensionStorage(this._shared,this._id,Object.create(null)).then((e=>(this._value=e,this))),this._storageListener=this._storage.onDidChangeStorage((e=>{e.shared===this._shared&&e.key===this._id&&(this._value=e.value)})),this._scheduler=new gr((()=>{const e=this._deferredPromises;this._deferredPromises=new Map,(async()=>{try{await this._storage.setValue(this._shared,this._id,this._value);for(const t of e.values())t.complete()}catch(_C){for(const i of e.values())i.error(_C)}})()}),0)}keys(){return Object.entries(this._value??{}).filter((([,e])=>void 0!==e)).map((([e])=>e))}get whenReady(){return this._init}get(e,t){let i=this._value[e];return void 0===i&&(i=t),i}update(e,t){this._value[e]=t;const i=this._deferredPromises.get(e);if(void 0!==i)return i.p;const r=new vr;return this._deferredPromises.set(e,r),this._scheduler.isScheduled()||this._scheduler.schedule(),r.p}dispose(){this._storageListener.dispose()}}class df extends uf{setKeysForSync(e){this._storage.registerExtensionStorageKeysToSync({id:this._id,version:this._extension.version},e)}constructor(e,t){super(e.identifier.value,!0,t),this._extension=e}}var hf;let pf=hf=class{constructor(e,t){this._fileSystemProvider=new Map,this._writeQueue=new hr,this._proxy=e.getProxy(Ft.MainThreadFileSystem);const i=this;this.value=Object.freeze({async stat(e){try{let t;const r=i._fileSystemProvider.get(e.scheme);return r?(await i._proxy.$ensureActivation(e.scheme),t=await r.impl.stat(e)):t=await i._proxy.$stat(e),{type:t.type,ctime:t.ctime,mtime:t.mtime,size:t.size,permissions:t.permissions===oa.Readonly?1:void 0}}catch(t){hf._handleError(t)}},async readDirectory(e){try{const t=i._fileSystemProvider.get(e.scheme);return t?(await i._proxy.$ensureActivation(e.scheme),(await t.impl.readDirectory(e)).slice()):await i._proxy.$readdir(e)}catch(t){return hf._handleError(t)}},async createDirectory(e){try{const t=i._fileSystemProvider.get(e.scheme);return t&&!t.isReadonly?(await i._proxy.$ensureActivation(e.scheme),await i.mkdirp(t.impl,t.extUri,e)):await i._proxy.$mkdir(e)}catch(t){return hf._handleError(t)}},async readFile(e){try{const t=i._fileSystemProvider.get(e.scheme);if(t)return await i._proxy.$ensureActivation(e.scheme),(await t.impl.readFile(e)).slice();return(await i._proxy.$readFile(e)).buffer}catch(t){return hf._handleError(t)}},async writeFile(e,t){try{const r=i._fileSystemProvider.get(e.scheme);return r&&!r.isReadonly?(await i._proxy.$ensureActivation(e.scheme),await i.mkdirp(r.impl,r.extUri,r.extUri.dirname(e)),await i._writeQueue.queueFor(e).queue((()=>Promise.resolve(r.impl.writeFile(e,t,{create:!0,overwrite:!0}))))):await i._proxy.$writeFile(e,I.wrap(t))}catch(r){return hf._handleError(r)}},async delete(e,t){try{const r=i._fileSystemProvider.get(e.scheme);return r&&!r.isReadonly?(await i._proxy.$ensureActivation(e.scheme),await r.impl.delete(e,{recursive:!1,...t})):await i._proxy.$delete(e,{recursive:!1,useTrash:!1,atomic:!1,...t})}catch(r){return hf._handleError(r)}},async rename(e,t,r){try{return await i._proxy.$rename(e,t,{overwrite:!1,...r})}catch(n){return hf._handleError(n)}},async copy(e,t,r){try{return await i._proxy.$copy(e,t,{overwrite:!1,...r})}catch(n){return hf._handleError(n)}},isWritableFileSystem(e){const i=t.getCapabilities(e);if("number"==typeof i)return!(2048&i)}})}async mkdirp(e,t,i){const r=[];for(;!t.isEqual(i,t.dirname(i));)try{if(0==((await e.stat(i)).type&sa.Directory))throw Eu.FileExists(`Unable to create folder '${i.scheme===Fi.file?i.fsPath:i.toString(!0)}' that already exists but is not a directory`);break}catch(n){if(da(n)!==aa.FileNotFound)throw n;r.push(t.basename(i)),i=t.dirname(i)}for(let s=r.length-1;s>=0;s--){i=t.joinPath(i,r[s]);try{await e.createDirectory(i)}catch(n){if(da(n)!==aa.FileExists)throw n}}}static _handleError(e){if(e instanceof Eu)throw e;if(e instanceof ca)switch(e.code){case aa.FileExists:throw Eu.FileExists(e.message);case aa.FileNotFound:throw Eu.FileNotFound(e.message);case aa.FileNotADirectory:throw Eu.FileNotADirectory(e.message);case aa.FileIsADirectory:throw Eu.FileIsADirectory(e.message);case aa.NoPermissions:throw Eu.NoPermissions(e.message);case aa.Unavailable:throw Eu.Unavailable(e.message);default:throw new Eu(e.message,e.name)}if(!(e instanceof Error))throw new Eu(String(e));if("ENOPRO"===e.name||e.message.includes("ENOPRO"))throw Eu.Unavailable(e.message);switch(e.name){case aa.FileExists:throw Eu.FileExists(e.message);case aa.FileNotFound:throw Eu.FileNotFound(e.message);case aa.FileNotADirectory:throw Eu.FileNotADirectory(e.message);case aa.FileIsADirectory:throw Eu.FileIsADirectory(e.message);case aa.NoPermissions:throw Eu.NoPermissions(e.message);case aa.Unavailable:throw Eu.Unavailable(e.message);default:throw new Eu(e.message,e.name)}}addFileSystemProvider(e,t,i){return this._fileSystemProvider.set(e,{impl:t,extUri:i?.isCaseSensitive?zi:qi,isReadonly:!!i?.isReadonly}),w((()=>this._fileSystemProvider.delete(e)))}getFileSystemProviderExtUri(e){return this._fileSystemProvider.get(e)?.extUri??zi}};pf=hf=vs([_s(0,ps),_s(1,zs)],pf);const gf=un("IExtHostConsumerFileSystem"),ff=un("IExtensionStoragePaths");let mf=class{constructor(e,t,i){this._logService=t,this._extHostFileSystem=i,this._workspace=e.workspace??void 0,this._environment=e.environment,this.whenReady=this._getOrCreateWorkspaceStoragePath().then((e=>this._value=e))}async _getWorkspaceStorageURI(e){return pt.joinPath(this._environment.workspaceStorageHome,e)}async _getOrCreateWorkspaceStoragePath(){if(!this._workspace)return Promise.resolve(void 0);const e=this._workspace.id,t=await this._getWorkspaceStorageURI(e);try{return await this._extHostFileSystem.value.stat(t),this._logService.trace("[ExtHostStorage] storage dir already exists",t),t}catch{}try{return this._logService.trace("[ExtHostStorage] creating dir and metadata-file",t),await this._extHostFileSystem.value.createDirectory(t),await this._extHostFileSystem.value.writeFile(pt.joinPath(t,"meta.json"),(new TextEncoder).encode(JSON.stringify({id:this._workspace.id,configuration:pt.revive(this._workspace.configuration)?.toString(),name:this._workspace.name},void 0,2))),t}catch(_C){return void this._logService.error("[ExtHostStorage]",_C)}}workspaceValue(e){if(this._value)return pt.joinPath(this._value,e.identifier.value)}globalValue(e){return pt.joinPath(this._environment.globalStorageHome,e.identifier.value.toLowerCase())}onWillDeactivateAll(){}};var vf,_f,yf,wf;mf=vs([_s(0,as),_s(1,Gn),_s(2,gf)],mf),un("tunnelService"),function(e){e.Http="http",e.Https="https"}(vf||(vf={})),function(e){e.ConstantPrivate="constantPrivate",e.Private="private",e.Public="public"}(_f||(_f={})),function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"}(yf||(yf={}));class bf{constructor(e,t,i){this.remoteAddress=e,this.localAddress=t,this._dispose=i,this._onDispose=new B,this.onDidDispose=this._onDispose.event}dispose(){return this._onDispose.fire(),this._dispose()}}class xf extends bf{}!function(e){e.fromApiTunnel=function(e){return{remoteAddress:e.remoteAddress,localAddress:e.localAddress,public:!!e.public,privacy:e.privacy??(e.public?_f.Public:_f.Private),protocol:e.protocol}},e.fromServiceTunnel=function(e){return{remoteAddress:{host:e.tunnelRemoteHost,port:e.tunnelRemotePort},localAddress:e.localAddress,public:e.privacy!==_f.ConstantPrivate&&e.privacy!==_f.ConstantPrivate,privacy:e.privacy,protocol:e.protocol}}}(wf||(wf={}));const Cf=un("IExtHostTunnelService");let Df=class extends x{constructor(e,t,i){super(),this.logService=i,this._showCandidatePort=()=>Promise.resolve(!0),this._extensionTunnels=new Map,this._onDidChangeTunnels=new B,this.onDidChangeTunnels=this._onDidChangeTunnels.event,this._providerHandleCounter=0,this._portAttributesProviders=new Map,this._proxy=e.getProxy(Ft.MainThreadTunnelService)}async openTunnel(e,t){this.logService.trace(`ForwardedPorts: (ExtHostTunnelService) ${e.identifier.value} called openTunnel API for ${t.remoteAddress.host}:${t.remoteAddress.port}.`);const i=await this._proxy.$openTunnel(t,e.displayName);if(i){const e=new xf(i.remoteAddress,i.localAddress,(()=>this._proxy.$closeTunnel(i.remoteAddress)));return this._register(e),e}}async getTunnels(){return this._proxy.$getTunnels()}nextPortAttributesProviderHandle(){return this._providerHandleCounter++}registerPortsAttributesProvider(e,t){const i=this.nextPortAttributesProviderHandle();return this._portAttributesProviders.set(i,{selector:e,provider:t}),this._proxy.$registerPortsAttributesProvider(e,i),new _l((()=>{this._portAttributesProviders.delete(i),this._proxy.$unregisterPortsAttributesProvider(i)}))}async $providePortAttributes(e,t,i,r,n){const s=[];for(const a of e){const e=this._portAttributesProviders.get(a);if(!e)return[];s.push(...await Promise.all(t.map((async t=>{let s;try{s=await e.provider.providePortAttributes({port:t,pid:i,commandLine:r},n)}catch(_C){s=await e.provider.providePortAttributes(t,i,r,n)}return{providedAttributes:s,port:t}}))))}const o=s.filter((e=>!!e.providedAttributes));return o.length>0?o.map((e=>({autoForwardAction:e.providedAttributes.autoForwardAction,port:e.port}))):[]}async $registerCandidateFinder(e){}registerTunnelProvider(e,t){if(this._forwardPortProvider)throw new Error("A tunnel provider has already been registered. Only the first tunnel provider to be registered will be used.");this._forwardPortProvider=async(t,i)=>await e.provideTunnel(t,i,(new Ht).token)??void 0;const i=t.tunnelFeatures?{elevation:!!t.tunnelFeatures?.elevation,privacyOptions:t.tunnelFeatures?.privacyOptions}:void 0;return this._proxy.$setTunnelProvider(i),Promise.resolve(w((()=>{this._forwardPortProvider=void 0,this._proxy.$setTunnelProvider(void 0)})))}async setTunnelFactory(e,t){if(e){void 0!==e.candidatePortSource&&this._proxy.$setCandidatePortSource(e.candidatePortSource),e.showCandidatePort&&(this._showCandidatePort=e.showCandidatePort,this._proxy.$setCandidateFilter());const i=e.tunnelFactory??(t?this.makeManagedTunnelFactory(t):void 0);if(i){this._forwardPortProvider=i;let t=e.tunnelFeatures?.privacyOptions??[];e.tunnelFeatures?.public&&0===t.length&&(t=[{id:"private",label:J(0,"Private"),themeIcon:"lock"},{id:"public",label:J(0,"Public"),themeIcon:"eye"}]);const r=e.tunnelFeatures?{elevation:!!e.tunnelFeatures?.elevation,public:!!e.tunnelFeatures?.public,privacyOptions:t}:void 0;this._proxy.$setTunnelProvider(r)}}else this._forwardPortProvider=void 0;return w((()=>{this._forwardPortProvider=void 0}))}makeManagedTunnelFactory(e){}async $closeTunnel(e,t){if(this._extensionTunnels.has(e.host)){const i=this._extensionTunnels.get(e.host);i.has(e.port)&&(t&&i.get(e.port).disposeListener.dispose(),await i.get(e.port).tunnel.dispose(),i.delete(e.port))}}async $onDidTunnelsChange(){this._onDidChangeTunnels.fire()}async $forwardPort(e,t){if(this._forwardPortProvider)try{this.logService.trace("ForwardedPorts: (ExtHostTunnelService) Getting tunnel from provider.");const i=this._forwardPortProvider(e,t);if(this.logService.trace("ForwardedPorts: (ExtHostTunnelService) Got tunnel promise from provider."),void 0!==i){const t=await i;if(this.logService.trace("ForwardedPorts: (ExtHostTunnelService) Successfully awaited tunnel from provider."),void 0===t)return void this.logService.error("ForwardedPorts: (ExtHostTunnelService) Resolved tunnel is undefined");this._extensionTunnels.has(e.remoteAddress.host)||this._extensionTunnels.set(e.remoteAddress.host,new Map);const r=this._register(t.onDidDispose((()=>(this.logService.trace("ForwardedPorts: (ExtHostTunnelService) Extension fired tunnel's onDidDispose."),this._proxy.$closeTunnel(t.remoteAddress)))));return this._extensionTunnels.get(e.remoteAddress.host).set(e.remoteAddress.port,{tunnel:t,disposeListener:r}),wf.fromApiTunnel(t)}this.logService.trace("ForwardedPorts: (ExtHostTunnelService) Tunnel is undefined")}catch(_C){if(this.logService.trace("ForwardedPorts: (ExtHostTunnelService) tunnel provider error"),_C instanceof Error)return _C.message}}async $applyCandidateFilter(e){const t=await Promise.all(e.map((e=>this._showCandidatePort(e.host,e.port,e.detail??"")))),i=e.filter(((e,i)=>t[i]));return this.logService.trace(`ForwardedPorts: (ExtHostTunnelService) filtered from ${e.map((e=>e.port)).join(", ")} to ${i.map((e=>e.port)).join(", ")}`),i}};Df=vs([_s(0,ps),_s(1,as),_s(2,Gn)],Df);class Sf{constructor(e){this._callback=e,this._terminalBufferMap=new Map}dispose(){for(const e of this._terminalBufferMap.values())e.dispose()}startBuffering(e,t,i=5){const r=t((t=>{const n="string"==typeof t?t:t.data;let s=this._terminalBufferMap.get(e);if(s)return void s.data.push(n);const o=setTimeout((()=>this.flushBuffer(e)),i);s={data:[n],timeoutId:o,dispose:()=>{clearTimeout(o),this.flushBuffer(e),r.dispose()}},this._terminalBufferMap.set(e,s)}));return r}stopBuffering(e){const t=this._terminalBufferMap.get(e);t?.dispose()}flushBuffer(e){const t=this._terminalBufferMap.get(e);t&&(this._terminalBufferMap.delete(e),this._callback(e,t.data.join("")))}}const Ef=(e,t,i,r)=>{let n=t;return{enumerable:!0,configurable:!1,get:()=>n,set(t){if(!i(n,t)){const i=n;n=t,e.listener?.(r(t,i))}}}},kf=(e,t)=>e===t,If=(e,t)=>e===t||!(!e||!t)&&e.isEqual(t),Tf=kf,Pf=kf,Af=kf,Rf=kf,Ff=kf,$f=kf,Lf=(e,t)=>e.length===t.length&&!e.some((e=>!t.find((t=>e.id===t.id)))),Of=e=>t=>({op:4,update:e(t)}),Mf=(e,t)=>({range:(()=>{let t;const i=Of((e=>({range:go.lift(zd.from(e))})));return{enumerable:!0,configurable:!1,get:()=>t,set(r){e.listener?.({op:6}),If(t,r)||(t=r,e.listener?.(i(r)))}}})(),label:Ef(e,t,Tf,Of((e=>({label:e})))),description:Ef(e,void 0,Pf,Of((e=>({description:e})))),sortText:Ef(e,void 0,Af,Of((e=>({sortText:e})))),canResolveChildren:Ef(e,!1,$f,(e=>({op:2,state:e}))),busy:Ef(e,!1,Rf,Of((e=>({busy:e})))),error:Ef(e,void 0,Ff,Of((e=>({error:Xd.fromStrict(e)||null})))),tags:Ef(e,[],Lf,((e,t)=>({op:1,new:e.map(sp.from),old:t.map(sp.from)})))}),Nf=e=>{const t=Fo.fromString(e.extId),i=new Hf(t.controllerId,t.localId,e.label,pt.revive(e.uri)||void 0);return i.range=zd.to(e.range||void 0),i.description=e.description||void 0,i.sortText=e.sortText||void 0,i.tags=e.tags.map((e=>sp.to({id:Uo(e).tagId}))),i};class Hf{constructor(e,t,i,r){if(t.includes("\0"))throw new Error(`Test IDs may not include the ${JSON.stringify(t)} symbol`);const n=((e,t)=>{const i={controllerId:t};return ia.set(e,i),i})(this,e);Object.defineProperties(this,{id:{value:t,enumerable:!0,writable:!1},uri:{value:r,enumerable:!0,writable:!1},parent:{enumerable:!1,get:()=>n.parent instanceof Uf?void 0:n.parent},children:{value:ta(n,ra,Hf),enumerable:!0,writable:!1},...Mf(n,i)})}}class Uf extends Hf{constructor(e,t){super(e,e,t,void 0),this._isRoot=!0}}class Bf extends Zo{constructor(e,t,i){super({controllerId:e,getDocumentVersion:e=>e&&i.getDocument(e)?.version,getApiFor:ra,getChildren:e=>e.children,root:new Uf(e,t),toITestItem:op.from})}}un("telemetryService"),un("customEndpointTelemetryService");class Vf{constructor(e){this.value=e,this.isTrustedTelemetryValue=!0}}const Wf=new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces","amlext"]);function zf(e,t){return Is(e,(e=>{if(e instanceof Vf||Object.hasOwnProperty.call(e,"isTrustedTelemetryValue"))return e.value;if("string"==typeof e){let i=e.replaceAll("%20"," ");i=function(e,t){if(!e||!e.includes("/")&&!e.includes("\\"))return e;let i=e;const r=[];for(const a of t)for(;;){const t=a.exec(e);if(!t)break;r.push([t.index,a.lastIndex])}const n=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,s=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let o=0;for(i="";;){const t=s.exec(e);if(!t)break;const a=r.some((([e,i])=>t.index<i&&e<s.lastIndex));n.test(t[0])||a||(i+=e.substring(o,t.index)+"<REDACTED: user-file-path>",o=s.lastIndex)}return o<e.length&&(i+=e.substr(o)),i}(i,t);for(const e of t)i=i.replace(e,"");return i=function(e){if(!e)return e;const t=[{label:"Google API Key",regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:"Slack Token",regex:/xox[pbar]\-[A-Za-z0-9]/},{label:"Generic Secret",regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/i},{label:"Email",regex:/@[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+/}];for(const i of t)if(i.regex.test(e))return`<REDACTED: ${i.label}>`;return e}(i),i}}))}let jf=class extends x{constructor(e,t){super(),this.initData=e,this.loggerService=t,this._onDidChangeTelemetryEnabled=this._register(new B),this.onDidChangeTelemetryEnabled=this._onDidChangeTelemetryEnabled.event,this._onDidChangeTelemetryConfiguration=this._register(new B),this.onDidChangeTelemetryConfiguration=this._onDidChangeTelemetryConfiguration.event,this._productConfig={usage:!0,error:!0},this._level=0,this._telemetryIsSupported=!1,this._inLoggingOnlyMode=!1,this._telemetryLoggers=new Map,this.extHostTelemetryLogFile=pt.revive(this.initData.environment.extensionTelemetryLogResource),this._inLoggingOnlyMode=this.initData.environment.isExtensionTelemetryLoggingOnly,this._outputLogger=t.createLogger(this.extHostTelemetryLogFile,{id:"extensionTelemetryLog",name:J(0,"Extension Telemetry{0}",this._inLoggingOnlyMode?" (Not Sent)":""),hidden:!0}),this._register(t.onDidChangeLogLevel((e=>{fi(e)&&this.updateLoggerVisibility()}))),this._outputLogger.info("Below are logs for extension telemetry events sent to the telemetry output channel API once the log level is set to trace."),this._outputLogger.info("===========================================================")}updateLoggerVisibility(){this.loggerService.setVisibility(this.extHostTelemetryLogFile,this._telemetryIsSupported&&this.loggerService.getLogLevel()===Jn.Trace)}getTelemetryConfiguration(){return 3===this._level}getTelemetryDetails(){return{isCrashEnabled:this._level>=1,isErrorsEnabled:!!this._productConfig.error&&this._level>=2,isUsageEnabled:!!this._productConfig.usage&&this._level>=3}}instantiateLogger(e,t,i){const r=this.getTelemetryDetails(),n=new qf(t,i,e,this._outputLogger,this._inLoggingOnlyMode,this.getBuiltInCommonProperties(e),{isUsageEnabled:r.isUsageEnabled,isErrorsEnabled:r.isErrorsEnabled}),s=this._telemetryLoggers.get(e.identifier.value)??[];return this._telemetryLoggers.set(e.identifier.value,[...s,n]),n.apiTelemetryLogger}$initializeTelemetryLevel(e,t,i){this._level=e,this._telemetryIsSupported=t,this._productConfig=i??{usage:!0,error:!0},this.updateLoggerVisibility()}getBuiltInCommonProperties(e){const t=Object.create(null);switch(t["common.extname"]=`${e.publisher}.${e.name}`,t["common.extversion"]=e.version,t["common.vscodemachineid"]=this.initData.telemetryInfo.machineId,t["common.vscodesessionid"]=this.initData.telemetryInfo.sessionId,t["common.vscodeversion"]=this.initData.version,t["common.isnewappinstall"]=Kf(this.initData.telemetryInfo.firstSessionDate),t["common.product"]=this.initData.environment.appHost,this.initData.uiKind){case q.Web:t["common.uikind"]="web";break;case q.Desktop:t["common.uikind"]="desktop";break;default:t["common.uikind"]="unknown"}return t["common.remotename"]=za(function(e){if(!e)return"none";const t=za(e);return Wf.has(t)?t:"other"}(this.initData.remote.authority)),t}$onDidChangeTelemetryLevel(e){this._oldTelemetryEnablement=this.getTelemetryConfiguration(),this._level=e;const t=this.getTelemetryDetails();this._telemetryLoggers.forEach(((e,t)=>{const i=e.filter((e=>!e.isDisposed));0===i.length?this._telemetryLoggers.delete(t):this._telemetryLoggers.set(t,i)})),this._telemetryLoggers.forEach((e=>{for(const i of e)i.updateTelemetryEnablements(t.isUsageEnabled,t.isErrorsEnabled)})),this._oldTelemetryEnablement!==this.getTelemetryConfiguration()&&this._onDidChangeTelemetryEnabled.fire(this.getTelemetryConfiguration()),this._onDidChangeTelemetryConfiguration.fire(this.getTelemetryDetails()),this.updateLoggerVisibility()}onExtensionError(e,t){const i=this._telemetryLoggers.get(e.value),r=i?.filter((e=>!e.isDisposed));if(!r)return this._telemetryLoggers.delete(e.value),!1;let n=!1;for(const s of r)s.ignoreUnhandledExtHostErrors||(s.logError(t),n=!0);return n}};jf=vs([_s(0,as),_s(1,Qn)],jf);class qf{static validateSender(e){if("object"!=typeof e)throw new TypeError("TelemetrySender argument is invalid");if("function"!=typeof e.sendEventData)throw new TypeError("TelemetrySender.sendEventData must be a function");if("function"!=typeof e.sendErrorData)throw new TypeError("TelemetrySender.sendErrorData must be a function");if(void 0!==e.flush&&"function"!=typeof e.flush)throw new TypeError("TelemetrySender.flush must be a function or undefined")}constructor(e,t,i,r,n,s,o){this._extension=i,this._logger=r,this._inLoggingOnlyMode=n,this._commonProperties=s,this._onDidChangeEnableStates=new B,this.ignoreUnhandledExtHostErrors=t?.ignoreUnhandledErrors??!1,this._ignoreBuiltinCommonProperties=t?.ignoreBuiltInCommonProperties??!1,this._additionalCommonProperties=t?.additionalCommonProperties,this._sender=e,this._telemetryEnablements={isUsageEnabled:o.isUsageEnabled,isErrorsEnabled:o.isErrorsEnabled}}updateTelemetryEnablements(e,t){this._apiObject&&(this._telemetryEnablements={isUsageEnabled:e,isErrorsEnabled:t},this._onDidChangeEnableStates.fire(this._apiObject))}mixInCommonPropsAndCleanData(e){let t="properties"in e?e.properties??{}:e;return t=zf(t,[]),this._additionalCommonProperties&&(t=Ps(t,this._additionalCommonProperties)),this._ignoreBuiltinCommonProperties||(t=Ps(t,this._commonProperties)),"properties"in e?e.properties=t:e=t,e}logEvent(e,t){this._sender&&(e="vscode"===this._extension.publisher?this._extension.name+"/"+e:this._extension.identifier.value+"/"+e,t=this.mixInCommonPropsAndCleanData(t||{}),this._inLoggingOnlyMode||this._sender?.sendEventData(e,t),this._logger.trace(e,t))}logUsage(e,t){this._telemetryEnablements.isUsageEnabled&&this.logEvent(e,t)}logError(e,t){if(this._telemetryEnablements.isErrorsEnabled&&this._sender)if("string"==typeof e)this.logEvent(e,t);else{const i=zf({name:e.name,message:e.message,stack:e.stack,cause:e.cause},[]),r=new Error(i.message,{cause:i.cause});r.stack=i.stack,r.name=i.name,t=this.mixInCommonPropsAndCleanData(t||{}),this._inLoggingOnlyMode||this._sender.sendErrorData(r,t),this._logger.trace("exception",t)}}get apiTelemetryLogger(){if(!this._apiObject){const e=this,t={logUsage:e.logUsage.bind(e),get isUsageEnabled(){return e._telemetryEnablements.isUsageEnabled},get isErrorsEnabled(){return e._telemetryEnablements.isErrorsEnabled},logError:e.logError.bind(e),dispose:e.dispose.bind(e),onDidChangeEnableStates:e._onDidChangeEnableStates.event.bind(e)};this._apiObject=Object.freeze(t)}return this._apiObject}get isDisposed(){return!this._sender}dispose(){if(this._sender?.flush){let e=this._sender;this._sender=void 0,Promise.resolve(e.flush()).then(e=void 0),this._apiObject=void 0}else this._sender=void 0}}function Kf(e){const t=Date.now()-new Date(e).getTime();return!isNaN(t)&&t<864e5}const Gf=un("IExtHostTelemetry");let Qf=class{#o;#a;#l;constructor(e,t,i){this._commands=new Map,this._apiCommands=new Map,this.#o=e.getProxy(Ft.MainThreadCommands),this._logService=t,this.#l=i,this.#a=e.getProxy(Ft.MainThreadTelemetry),this.converter=new Zf(this,(e=>{const t=this._apiCommands.get(e);return t?.result===Xf.Void?t:void 0}),t),this._argumentProcessors=[{processArgument:e=>lo(e)},{processArgument:e=>Is(e,(function(e){return go.isIRange(e)?zd.to(e):po.isIPosition(e)?qd.to(e):go.isIRange(e.range)&&pt.isUri(e.uri)?ph.to(e):e instanceof I?e.buffer.buffer:Array.isArray(e)?void 0:e}))}]}registerArgumentProcessor(e){this._argumentProcessors.push(e)}registerApiCommand(e){const t=this.registerCommand(!1,e.id,(async(...t)=>{const i=e.args.map(((i,r)=>{if(!i.validate(t[r]))throw new Error(`Invalid argument '${i.name}' when running '${e.id}', received: ${t[r]}`);return i.convert(t[r])})),r=await this.executeCommand(e.internalId,...i);return e.result.convert(r,t,this.converter)}),void 0,{description:e.description,args:e.args,returns:e.result.description});return this._apiCommands.set(e.id,e),new _l((()=>{t.dispose(),this._apiCommands.delete(e.id)}))}registerCommand(e,t,i,r,n,s){if(this._logService.trace("ExtHostCommands#registerCommand",t),!t.trim().length)throw new Error("invalid id");if(this._commands.has(t))throw new Error(`command '${t}' already exists`);return this._commands.set(t,{callback:i,thisArg:r,description:n,extension:s}),e&&this.#o.$registerCommand(t),new _l((()=>{this._commands.delete(t)&&e&&this.#o.$unregisterCommand(t)}))}executeCommand(e,...t){return this._logService.trace("ExtHostCommands#executeCommand",e),this._doExecuteCommand(e,t,!0)}async _doExecuteCommand(e,t,i){if(this._commands.has(e))return this.#o.$fireCommandActivationEvent(e),this._executeContributedCommand(e,t,!1);{let r=!1;const n=Is(t,(function(e){return e instanceof yl?qd.from(e):e instanceof wl?zd.from(e):e instanceof Ll?ph.from(e):Ku.isNotebookRange(e)?jh.from(e):e instanceof ArrayBuffer?(r=!0,I.wrap(new Uint8Array(e))):e instanceof Uint8Array?(r=!0,I.wrap(e)):e instanceof I?(r=!0,e):Array.isArray(e)?void 0:e}));try{return lo(await this.#o.$executeCommand(e,r?new It(n):n,i))}catch(_C){if(_C instanceof Error&&"$executeCommand:retry"===_C.message)return this._doExecuteCommand(e,t,!1);throw _C}}}async _executeContributedCommand(e,t,i){const r=this._commands.get(e);if(!r)throw new Error("Unknown command");const{callback:n,thisArg:s,description:o}=r;if(o)for(let c=0;c<o.args.length;c++)try{bi(t[c],o.args[c].constraint)}catch(l){throw new Error(`Running the contributed command: '${e}' failed. Illegal argument '${o.args[c].name}' - ${o.args[c].description}`)}const a=F.create();try{return await n.apply(s,t)}catch(l){if(e===this.converter.delegatingCommandId){const i=this.converter.getActualCommand(...t);i&&(e=i.command)}if(this._logService.error(l,e,r.extension?.identifier),!i)throw l;if(r.extension?.identifier){const e=this.#l.onExtensionError(r.extension.identifier,l);this._logService.trace("forwarded error to extension?",e,r.extension?.identifier)}throw new class extends Error{constructor(){super(Yr(l)),this.id=e,this.source=r.extension?.displayName??r.extension?.name}}}finally{this._reportTelemetry(r,e,a.elapsed())}}_reportTelemetry(e,t,i){e.extension&&this.#a.$publicLog2("Extension:ActionExecuted",{extensionId:e.extension.identifier.value,id:new Vf(t),duration:i})}$executeContributedCommand(e,...t){this._logService.trace("ExtHostCommands#$executeContributedCommand",e);const i=this._commands.get(e);return i?(t=t.map((e=>this._argumentProcessors.reduce(((e,t)=>t.processArgument(e,i.extension?.identifier)),e))),this._executeContributedCommand(e,t,!0)):Promise.reject(new Error(`Contributed command '${e}' does not exist.`))}getCommands(e=!1){return this._logService.trace("ExtHostCommands#getCommands",e),this.#o.$getCommands().then((t=>(e&&(t=t.filter((e=>"_"!==e[0]))),t)))}$getContributedCommandHandlerDescriptions(){const e=Object.create(null);for(const[t,i]of this._commands){const{description:r}=i;r&&(e[t]=r)}return Promise.resolve(e)}};Qf=vs([_s(0,ps),_s(1,Gn),_s(2,Gf)],Qf);const Jf=un("IExtHostCommands");class Zf{constructor(e,t,i){this._commands=e,this._lookupApiCommand=t,this._logService=i,this.delegatingCommandId=`__vsc${Date.now().toString(36)}`,this._cache=new Map,this._cachIdPool=0,this._commands.registerCommand(!0,this.delegatingCommandId,this._executeConvertedCommand,this)}toInternal(e,t){if(!e)return;const i={$ident:void 0,id:e.command,title:e.title,tooltip:e.tooltip};if(!e.command)return i;const r=this._lookupApiCommand(e.command);if(r)i.id=r.internalId,i.arguments=r.args.map(((t,i)=>t.convert(e.arguments&&e.arguments[i])));else if(Br(e.arguments)){const r=`${e.command}/${++this._cachIdPool}`;this._cache.set(r,e),t.add(w((()=>{this._cache.delete(r),this._logService.trace("CommandsConverter#DISPOSE",r)}))),i.$ident=r,i.id=this.delegatingCommandId,i.arguments=[r],this._logService.trace("CommandsConverter#CREATE",e.command,r)}return i}fromInternal(e){return"string"==typeof e.$ident?this._cache.get(e.$ident):{command:e.id,title:e.title,arguments:e.arguments}}getActualCommand(...e){return this._cache.get(e[0])}_executeConvertedCommand(...e){const t=this.getActualCommand(...e);return this._logService.trace("CommandsConverter#EXECUTE",e[0],t?t.command:"MISSING"),t?this._commands.executeCommand(t.command,...t.arguments||[]):Promise.reject(`Actual command not found, wanted to execute ${e[0]}`)}}class Yf{static{this.Uri=new Yf("uri","Uri of a text document",(e=>pt.isUri(e)),(e=>e))}static{this.Position=new Yf("position","A position in a text document",(e=>yl.isPosition(e)),qd.from)}static{this.Range=new Yf("range","A range in a text document",(e=>wl.isRange(e)),zd.from)}static{this.Selection=new Yf("selection","A selection in a text document",(e=>bl.isSelection(e)),Wd.from)}static{this.Number=new Yf("number","",(e=>"number"==typeof e),(e=>e))}static{this.String=new Yf("string","",(e=>"string"==typeof e),(e=>e))}static{this.StringArray=Yf.Arr(Yf.String)}static Arr(e){return new Yf(`${e.name}_array`,`Array of ${e.name}, ${e.description}`,(t=>Array.isArray(t)&&t.every((t=>e.validate(t)))),(t=>t.map((t=>e.convert(t)))))}static{this.CallHierarchyItem=new Yf("item","A call hierarchy item",(e=>e instanceof Jl),uh.from)}static{this.TypeHierarchyItem=new Yf("item","A type hierarchy item",(e=>e instanceof Ed),up.from)}static{this.TestItem=new Yf("testItem","A VS Code TestItem",(e=>e instanceof Hf),op.from)}constructor(e,t,i,r){this.name=e,this.description=t,this.validate=i,this.convert=r}optional(){return new Yf(this.name,`(optional) ${this.description}`,(e=>null==e||this.validate(e)),(e=>void 0===e?void 0:null===e?null:this.convert(e)))}with(e,t){return new Yf(e??this.name,t??this.description,this.validate,this.convert)}}class Xf{static{this.Void=new Xf("no result",(e=>e))}constructor(e,t){this.description=e,this.convert=t}}class em{constructor(e,t,i,r,n){this.id=e,this.internalId=t,this.description=i,this.args=r,this.result=n}}const tm=un("IExtHostTerminalService");class im{constructor(e,t,i,r){this._proxy=e,this._id=t,this._creationOptions=i,this._name=r,this._disposed=!1,this._state={isInteractedWith:!1},this.isOpen=!1,this._creationOptions=Object.freeze(this._creationOptions),this._pidPromise=new Promise((e=>this._pidPromiseComplete=e));const n=this;this.value={get name(){return n._name||""},get processId(){return n._pidPromise},get creationOptions(){return n._creationOptions},get exitStatus(){return n._exitStatus},get state(){return n._state},get selection(){return n._selection},sendText(e,t=!0){n._checkDisposed(),n._proxy.$sendText(n._id,e,t)},show(e){n._checkDisposed(),n._proxy.$show(n._id,e)},hide(){n._checkDisposed(),n._proxy.$hide(n._id)},dispose(){n._disposed||(n._disposed=!0,n._proxy.$dispose(n._id))},get dimensions(){if(void 0!==n._cols&&void 0!==n._rows)return{columns:n._cols,rows:n._rows}}}}async create(e,t){if("string"!=typeof this._id)throw new Error("Terminal has already been created");await this._proxy.$createTerminal(this._id,{name:e.name,shellPath:e.shellPath??void 0,shellArgs:e.shellArgs??void 0,cwd:e.cwd??void 0,env:e.env??void 0,icon:cm(e.iconPath)??void 0,color:eo.isThemeColor(e.color)?e.color.id:void 0,initialText:e.message??void 0,strictEnv:e.strictEnv??void 0,hideFromUser:e.hideFromUser??void 0,isFeatureTerminal:t?.isFeatureTerminal??void 0,isExtensionOwnedTerminal:!0,useShellEnvironment:t?.useShellEnvironment??void 0,location:t?.location||this._serializeParentTerminal(e.location,t?.resolvedExtHostIdentifier),isTransient:e.isTransient??void 0})}async createExtensionTerminal(e,t,i,r){if("string"!=typeof this._id)throw new Error("Terminal has already been created");if(await this._proxy.$createTerminal(this._id,{name:this._name,isExtensionCustomPtyTerminal:!0,icon:i,color:eo.isThemeColor(r)?r.id:void 0,location:this._serializeParentTerminal(e,t),isTransient:!0}),"string"==typeof this._id)throw new Error("Terminal creation failed");return this._id}_serializeParentTerminal(e,t){return"object"==typeof e?"parentTerminal"in e&&e.parentTerminal&&t?{parentTerminal:t}:"viewColumn"in e?{viewColumn:Yd.from(e.viewColumn),preserveFocus:e.preserveFocus}:void 0:e}_checkDisposed(){if(this._disposed)throw new Error("Terminal has already been disposed")}set name(e){this._name=e}setExitStatus(e,t){this._exitStatus=Object.freeze({code:e,reason:t})}setDimensions(e,t){return(e!==this._cols||t!==this._rows)&&(0!==e&&0!==t&&(this._cols=e,this._rows=t,!0))}setInteractedWith(){return!this._state.isInteractedWith&&(this._state={isInteractedWith:!0},!0)}setSelection(e){this._selection=e}_setProcessId(e){this._pidPromiseComplete?(this._pidPromiseComplete(e),this._pidPromiseComplete=void 0):this._pidPromise.then((t=>{t!==e&&(this._pidPromise=Promise.resolve(e))}))}}class rm{get onProcessReady(){return this._onProcessReady.event}constructor(e){this._pty=e,this.id=0,this.shouldPersist=!1,this._onProcessData=new B,this.onProcessData=this._onProcessData.event,this._onProcessReady=new B,this._onDidChangeProperty=new B,this.onDidChangeProperty=this._onDidChangeProperty.event,this._onProcessExit=new B,this.onProcessExit=this._onProcessExit.event}refreshProperty(e){throw new Error(`refreshProperty is not suppported in extension owned terminals. property: ${e}`)}updateProperty(e,t){throw new Error(`updateProperty is not suppported in extension owned terminals. property: ${e}, value: ${t}`)}async start(){}shutdown(){this._pty.close()}input(e){this._pty.handleInput?.(e)}resize(e,t){this._pty.setDimensions?.({columns:e,rows:t})}clearBuffer(){}async processBinary(e){}acknowledgeDataEvent(e){}async setUnicodeVersion(e){}getInitialCwd(){return Promise.resolve("")}getCwd(){return Promise.resolve("")}startSendingEvents(e){this._pty.onDidWrite((e=>this._onProcessData.fire(e))),this._pty.onDidClose?.(((e=void 0)=>{this._onProcessExit.fire(void 0===e?void 0:e)})),this._pty.onDidOverrideDimensions?.((e=>{e&&this._onDidChangeProperty.fire({type:"overrideDimensions",value:{cols:e.columns,rows:e.rows}})})),this._pty.onDidChangeName?.((e=>{this._onDidChangeProperty.fire({type:"title",value:e})})),this._pty.open(e||void 0),e&&this._pty.setDimensions?.(e),this._onProcessReady.fire({pid:-1,cwd:"",windowsPty:void 0})}}let nm=1,sm=class extends x{get activeTerminal(){return this._activeTerminal?.value}get terminals(){return this._terminals.map((e=>e.value))}constructor(e,t,i){super(),this._extHostCommands=t,this._terminals=[],this._terminalProcesses=new Map,this._terminalProcessDisposables={},this._extensionTerminalAwaitingStart={},this._getTerminalPromises={},this._environmentVariableCollections=new Map,this._lastQuickFixCommands=this._register(new C),this._linkProviders=new Set,this._profileProviders=new Map,this._quickFixProviders=new Map,this._terminalLinkCache=new Map,this._terminalLinkCancellationSource=new Map,this._onDidCloseTerminal=new B,this.onDidCloseTerminal=this._onDidCloseTerminal.event,this._onDidOpenTerminal=new B,this.onDidOpenTerminal=this._onDidOpenTerminal.event,this._onDidChangeActiveTerminal=new B,this.onDidChangeActiveTerminal=this._onDidChangeActiveTerminal.event,this._onDidChangeTerminalDimensions=new B,this.onDidChangeTerminalDimensions=this._onDidChangeTerminalDimensions.event,this._onDidChangeTerminalState=new B,this.onDidChangeTerminalState=this._onDidChangeTerminalState.event,this._onDidChangeShell=new B,this.onDidChangeShell=this._onDidChangeShell.event,this._onDidWriteTerminalData=new B({onWillAddFirstListener:()=>this._proxy.$startSendingDataEvents(),onDidRemoveLastListener:()=>this._proxy.$stopSendingDataEvents()}),this.onDidWriteTerminalData=this._onDidWriteTerminalData.event,this._onDidExecuteCommand=new B({onWillAddFirstListener:()=>this._proxy.$startSendingCommandEvents(),onDidRemoveLastListener:()=>this._proxy.$stopSendingCommandEvents()}),this.onDidExecuteTerminalCommand=this._onDidExecuteCommand.event,this._proxy=i.getProxy(Ft.MainThreadTerminalService),this._bufferer=new Sf(this._proxy.$sendProcessData),this._proxy.$registerProcessSupport(e),this._register({dispose:()=>{for(const[e,t]of this._terminalProcesses)t.shutdown(!0)}})}getDefaultShell(e){const t=e?this._defaultAutomationProfile:this._defaultProfile;return t?.path||""}getDefaultShellArgs(e){const t=e?this._defaultAutomationProfile:this._defaultProfile;return t?.args||[]}createExtensionTerminal(e,t){const i=new im(this._proxy,js(),e,e.name),r=new rm(e.pty);var n;return i.createExtensionTerminal(e.location,this._serializeParentTerminal(e,t).resolvedExtHostIdentifier,cm(e.iconPath),(n=e.color,eo.isThemeColor(n)?n:void 0)).then((e=>{const t=this._setupExtHostProcessListeners(e,r);this._terminalProcessDisposables[e]=t})),this._terminals.push(i),i.value}_serializeParentTerminal(e,t){if(t=t||{},e.location&&"object"==typeof e.location&&"parentTerminal"in e.location){const i=e.location.parentTerminal;if(i){const e=this._terminals.find((e=>e.value===i));e&&(t.resolvedExtHostIdentifier=e._id)}}else e.location&&"object"!=typeof e.location?t.location=e.location:t.location&&"object"==typeof t.location&&"splitActiveTerminal"in t.location&&(t.location={splitActiveTerminal:!0});return t}attachPtyToTerminal(e,t){if(!this._getTerminalById(e))throw new Error(`Cannot resolve terminal with id ${e} for virtual process`);const i=new rm(t),r=this._setupExtHostProcessListeners(e,i);this._terminalProcessDisposables[e]=r}async $acceptActiveTerminalChanged(e){const t=this._activeTerminal;if(null===e)return this._activeTerminal=void 0,void(t!==this._activeTerminal&&this._onDidChangeActiveTerminal.fire(this._activeTerminal));const i=this._getTerminalById(e);i&&(this._activeTerminal=i,t!==this._activeTerminal&&this._onDidChangeActiveTerminal.fire(this._activeTerminal.value))}async $acceptTerminalProcessData(e,t){const i=this._getTerminalById(e);i&&this._onDidWriteTerminalData.fire({terminal:i.value,data:t})}async $acceptTerminalDimensions(e,t,i){const r=this._getTerminalById(e);r&&r.setDimensions(t,i)&&this._onDidChangeTerminalDimensions.fire({terminal:r.value,dimensions:r.value.dimensions})}async $acceptDidExecuteCommand(e,t){const i=this._getTerminalById(e);i&&this._onDidExecuteCommand.fire({terminal:i.value,...t})}async $acceptTerminalMaximumDimensions(e,t,i){this._terminalProcesses.get(e)?.resize(t,i)}async $acceptTerminalTitleChange(e,t){const i=this._getTerminalById(e);i&&(i.name=t)}async $acceptTerminalClosed(e,t,i){const r=this._getTerminalObjectIndexById(this._terminals,e);if(null!==r){const e=this._terminals.splice(r,1)[0];e.setExitStatus(t,i),this._onDidCloseTerminal.fire(e.value)}}$acceptTerminalOpened(e,t,i,r){if(t){const i=this._getTerminalObjectIndexById(this._terminals,t);if(null!==i)return this._terminals[i]._id=e,this._onDidOpenTerminal.fire(this.terminals[i]),void(this._terminals[i].isOpen=!0)}const n={name:r.name,shellPath:r.executable,shellArgs:r.args,cwd:"string"==typeof r.cwd?r.cwd:pt.revive(r.cwd),env:r.env,hideFromUser:r.hideFromUser},s=new im(this._proxy,e,n,i);this._terminals.push(s),this._onDidOpenTerminal.fire(s.value),s.isOpen=!0}async $acceptTerminalProcessId(e,t){const i=this._getTerminalById(e);i?._setProcessId(t)}async $startExtensionTerminal(e,t){const i=this._getTerminalById(e);if(!i)return{message:J(0,"Could not find the terminal with id {0} on the extension host",e)};i.isOpen||await new Promise((e=>{const t=this.onDidOpenTerminal((async r=>{r===i.value&&(t.dispose(),e())}))}));const r=this._terminalProcesses.get(e);r?r.startSendingEvents(t):this._extensionTerminalAwaitingStart[e]={initialDimensions:t}}_setupExtHostProcessListeners(e,t){const i=new b;i.add(t.onProcessReady((t=>this._proxy.$sendProcessReady(e,t.pid,t.cwd,t.windowsPty)))),i.add(t.onDidChangeProperty((t=>this._proxy.$sendProcessProperty(e,t)))),this._bufferer.startBuffering(e,t.onProcessData),i.add(t.onProcessExit((t=>this._onProcessExit(e,t)))),this._terminalProcesses.set(e,t);const r=this._extensionTerminalAwaitingStart[e];return r&&t instanceof rm&&(t.startSendingEvents(r.initialDimensions),delete this._extensionTerminalAwaitingStart[e]),i}$acceptProcessAckDataEvent(e,t){this._terminalProcesses.get(e)?.acknowledgeDataEvent(t)}$acceptProcessInput(e,t){this._terminalProcesses.get(e)?.input(t)}$acceptTerminalInteraction(e){const t=this._getTerminalById(e);t?.setInteractedWith()&&this._onDidChangeTerminalState.fire(t.value)}$acceptTerminalSelection(e,t){this._getTerminalById(e)?.setSelection(t)}$acceptProcessResize(e,t,i){try{this._terminalProcesses.get(e)?.resize(t,i)}catch(r){if("EPIPE"!==r.code&&"ERR_IPC_CHANNEL_CLOSED"!==r.code)throw r}}$acceptProcessShutdown(e,t){this._terminalProcesses.get(e)?.shutdown(t)}$acceptProcessRequestInitialCwd(e){this._terminalProcesses.get(e)?.getInitialCwd().then((t=>this._proxy.$sendProcessProperty(e,{type:"initialCwd",value:t})))}$acceptProcessRequestCwd(e){this._terminalProcesses.get(e)?.getCwd().then((t=>this._proxy.$sendProcessProperty(e,{type:"cwd",value:t})))}$acceptProcessRequestLatency(e){return Promise.resolve(e)}registerLinkProvider(e){return this._linkProviders.add(e),1===this._linkProviders.size&&this._proxy.$startLinkProvider(),new _l((()=>{this._linkProviders.delete(e),0===this._linkProviders.size&&this._proxy.$stopLinkProvider()}))}registerProfileProvider(e,t,i){if(this._profileProviders.has(t))throw new Error(`Terminal profile provider "${t}" already registered`);return this._profileProviders.set(t,i),this._proxy.$registerProfileProvider(t,e.identifier.value),new _l((()=>{this._profileProviders.delete(t),this._proxy.$unregisterProfileProvider(t)}))}registerTerminalQuickFixProvider(e,t,i){if(this._quickFixProviders.has(e))throw new Error(`Terminal quick fix provider "${e}" is already registered`);return this._quickFixProviders.set(e,i),this._proxy.$registerQuickFixProvider(e,t),new _l((()=>{this._quickFixProviders.delete(e),this._proxy.$unregisterQuickFixProvider(e)}))}async $provideTerminalQuickFixes(e,t){const i=(new Ht).token;if(i.isCancellationRequested)return;const r=this._quickFixProviders.get(e);if(!r)return;const n=await r.provideTerminalQuickFixes(t,i);if(null===n||Array.isArray(n)&&0===n.length)return;const s=new b;if(this._lastQuickFixCommands.value=s,!Array.isArray(n))return n?wp.from(n,this._extHostCommands.converter,s):void 0;const o=[];for(const a of n){const e=wp.from(a,this._extHostCommands.converter,s);e&&o.push(e)}return o}async $createContributedProfileTerminal(e,t){const i=(new Ht).token;let r=await(this._profileProviders.get(e)?.provideTerminalProfile(i));if(!i.isCancellationRequested){if(r&&!("options"in r)&&(r={options:r}),!r||!("options"in r))throw new Error(`No terminal profile options provided for id "${e}"`);"pty"in r.options?this.createExtensionTerminal(r.options,t):this.createTerminalFromOptions(r.options,t)}}async $provideLinks(e,t){const i=this._getTerminalById(e);if(!i)return[];this._terminalLinkCache.delete(e);const r=this._terminalLinkCancellationSource.get(e);r?.dispose(!0);const n=new Ht;this._terminalLinkCancellationSource.set(e,n);const s=[],o={terminal:i.value,line:t},a=[];for(const u of this._linkProviders)a.push(_r.withAsyncBody((async e=>{n.token.onCancellationRequested((()=>e({provider:u,links:[]})));const t=await u.provideTerminalLinks(o,n.token)||[];n.token.isCancellationRequested||e({provider:u,links:t})})));const l=await Promise.all(a);if(n.token.isCancellationRequested)return[];const c=new Map;for(const u of l)u&&u.links.length>0&&s.push(...u.links.map((e=>{const t={id:nm++,startIndex:e.startIndex,length:e.length,label:e.tooltip};return c.set(t.id,{provider:u.provider,link:e}),t})));return this._terminalLinkCache.set(e,c),s}$activateLink(e,t){const i=this._terminalLinkCache.get(e)?.get(t);i&&i.provider.handleTerminalLink(i.link)}_onProcessExit(e,t){this._bufferer.stopBuffering(e),this._terminalProcesses.delete(e),delete this._extensionTerminalAwaitingStart[e];const i=this._terminalProcessDisposables[e];i&&(i.dispose(),delete this._terminalProcessDisposables[e]),this._proxy.$sendProcessExit(e,t)}_getTerminalById(e){return this._getTerminalObjectById(this._terminals,e)}_getTerminalObjectById(e,t){const i=this._getTerminalObjectIndexById(e,t);return null!==i?e[i]:null}_getTerminalObjectIndexById(e,t){const i=e.findIndex((e=>e._id===t));return-1===i?null:i}getEnvironmentVariableCollection(e){let t=this._environmentVariableCollections.get(e.identifier.value);return t||(t=new om,this._setEnvironmentVariableCollection(e.identifier.value,t)),t.getScopedEnvironmentVariableCollection(void 0)}_syncEnvironmentVariableCollection(e,t){const i=function(e){return[...e.entries()]}(t.map),r=(n=t.descriptionMap)?[...n.entries()]:[];var n;this._proxy.$setEnvironmentVariableCollection(e,t.persistent,0===i.length?void 0:i,r)}$initEnvironmentVariableCollections(e){e.forEach((e=>{const t=e[0],i=new om(e[1]);this._setEnvironmentVariableCollection(t,i)}))}$acceptDefaultProfile(e,t){const i=this._defaultProfile;this._defaultProfile=e,this._defaultAutomationProfile=t,i?.path!==e.path&&this._onDidChangeShell.fire(e.path)}_setEnvironmentVariableCollection(e,t){this._environmentVariableCollections.set(e,t),t.onDidChangeCollection((()=>{this._syncEnvironmentVariableCollection(e,t)}))}};sm=vs([_s(1,Jf),_s(2,ps)],sm);class om{get persistent(){return this._persistent}set persistent(e){this._persistent=e,this._onDidChangeCollection.fire()}get onDidChangeCollection(){return this._onDidChangeCollection&&this._onDidChangeCollection.event}constructor(e){this.map=new Map,this.scopedCollections=new Map,this.descriptionMap=new Map,this._persistent=!0,this._onDidChangeCollection=new B,this.map=new Map(e)}getScopedEnvironmentVariableCollection(e){const t=this.getScopeKey(e);let i=this.scopedCollections.get(t);return i||(i=new am(this,e),this.scopedCollections.set(t,i),i.onDidChangeCollection((()=>this._onDidChangeCollection.fire()))),i}replace(e,t,i,r){this._setIfDiffers(e,{value:t,type:kl.Replace,options:i??{applyAtProcessCreation:!0},scope:r})}append(e,t,i,r){this._setIfDiffers(e,{value:t,type:kl.Append,options:i??{applyAtProcessCreation:!0},scope:r})}prepend(e,t,i,r){this._setIfDiffers(e,{value:t,type:kl.Prepend,options:i??{applyAtProcessCreation:!0},scope:r})}_setIfDiffers(e,t){if(t.options&&!1===t.options.applyAtProcessCreation&&!t.options.applyAtShellIntegration)throw new Error("EnvironmentVariableMutatorOptions must apply at either process creation or shell integration");const i=this.getKey(e,t.scope),r=this.map.get(i),n=t.options?{applyAtProcessCreation:t.options.applyAtProcessCreation??!1,applyAtShellIntegration:t.options.applyAtShellIntegration??!1}:{applyAtProcessCreation:!0};if(!r||r.value!==t.value||r.type!==t.type||r.options?.applyAtProcessCreation!==n.applyAtProcessCreation||r.options?.applyAtShellIntegration!==n.applyAtShellIntegration||r.scope?.workspaceFolder?.index!==t.scope?.workspaceFolder?.index){const i=this.getKey(e,t.scope),r={variable:e,...t,options:n};this.map.set(i,r),this._onDidChangeCollection.fire()}}get(e,t){const i=this.getKey(e,t),r=this.map.get(i);return r?um(r):void 0}getKey(e,t){const i=this.getScopeKey(t);return i.length?`${e}:::${i}`:e}getScopeKey(e){return this.getWorkspaceKey(e?.workspaceFolder)??""}getWorkspaceKey(e){return e?e.uri.toString():void 0}getVariableMap(e){const t=new Map;for(const[i,r]of this.map)this.getScopeKey(r.scope)===this.getScopeKey(e)&&t.set(r.variable,um(r));return t}delete(e,t){const i=this.getKey(e,t);this.map.delete(i),this._onDidChangeCollection.fire()}clear(e){if(e?.workspaceFolder){for(const[t,i]of this.map)i.scope?.workspaceFolder?.index===e.workspaceFolder.index&&this.map.delete(t);this.clearDescription(e)}else this.map.clear(),this.descriptionMap.clear();this._onDidChangeCollection.fire()}setDescription(e,t){const i=this.getScopeKey(t),r=this.descriptionMap.get(i);if(!r||r.description!==e){let r;r="string"==typeof e?e:e?.value.split("\n\n")[0];const n={description:r,scope:t};this.descriptionMap.set(i,n),this._onDidChangeCollection.fire()}}getDescription(e){const t=this.getScopeKey(e);return this.descriptionMap.get(t)?.description}clearDescription(e){const t=this.getScopeKey(e);this.descriptionMap.delete(t)}}class am{get persistent(){return this.collection.persistent}set persistent(e){this.collection.persistent=e}get onDidChangeCollection(){return this._onDidChangeCollection&&this._onDidChangeCollection.event}constructor(e,t){this.collection=e,this.scope=t,this._onDidChangeCollection=new B}getScoped(e){return this.collection.getScopedEnvironmentVariableCollection(e)}replace(e,t,i){this.collection.replace(e,t,i,this.scope)}append(e,t,i){this.collection.append(e,t,i,this.scope)}prepend(e,t,i){this.collection.prepend(e,t,i,this.scope)}get(e){return this.collection.get(e,this.scope)}forEach(e,t){this.collection.getVariableMap(this.scope).forEach(((i,r)=>e.call(t,r,i,this)),this.scope)}[Symbol.iterator](){return this.collection.getVariableMap(this.scope).entries()}delete(e){this.collection.delete(e,this.scope),this._onDidChangeCollection.fire(void 0)}clear(){this.collection.clear(this.scope)}set description(e){this.collection.setDescription(e,this.scope)}get description(){return this.collection.getDescription(this.scope)}}let lm=class extends sm{constructor(e,t){super(!1,e,t)}createTerminal(e,t,i){throw new g}createTerminalFromOptions(e,t){throw new g}};function cm(e){if(e&&"string"!=typeof e)return"id"in e?{id:e.id,color:e.color}:e}function um(e){const t={...e};return delete t.scope,t.options=t.options??void 0,delete t.variable,t}lm=vs([_s(0,Jf),_s(1,ps)],lm);class dm{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){const i=this.map.get(e);i&&(i.delete(t),0===i.size&&this.map.delete(e))}forEach(e,t){const i=this.map.get(e);i&&i.forEach(t)}get(e){const t=this.map.get(e);return t||new Set}}function hm(e,t=ge){return function(e,t=ge){return!!t&&Ti(e.charCodeAt(0))&&58===e.charCodeAt(1)}(e,t)?e.charAt(0).toUpperCase()+e.slice(1):e}var pm,gm,fm,mm,vm;function _m(e){return e<0?0:e>255?255:0|e}function ym(e){return e<0?0:e>4294967295?4294967295:0|e}!function(e){e[e.TEXT=0]="TEXT",e[e.VARIABLE=1]="VARIABLE",e[e.SEPARATOR=2]="SEPARATOR"}(pm||(pm={}));class wm{constructor(e){const t=_m(e);this._defaultValue=t,this._asciiMap=wm._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const i=_m(t);e>=0&&e<256?this._asciiMap[e]=i:this._map.set(e,i)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}function bm(e){return e.scheme!==Fi.file&&e.scheme!==Fi.vscodeRemote}function xm(e){return function(e){return e.folders.length?e.folders.every((e=>bm(e.uri)))?e.folders[0].uri:void 0:e.configuration&&bm(e.configuration)?e.configuration:void 0}(e)?.scheme}!function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"}(gm||(gm={})),function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"}(fm||(fm={})),function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"}(mm||(mm={})),function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"}(vm||(vm={}));const Cm=un("environmentService"),Dm=un("remoteAgentService");var Sm;const Em=un("pathService");let km=Sm=class{constructor(e,t,i,r){this.localUserHome=e,this.remoteAgentService=t,this.environmentService=i,this.contextService=r,this.resolveOS=(async()=>{const e=await this.remoteAgentService.getEnvironment();return e?.os||Se})(),this.resolveUserHome=(async()=>{const t=await this.remoteAgentService.getEnvironment();return this.maybeUnresolvedUserHome=t?.userHome??e})()}hasValidBasename(e,t,i){return"string"==typeof t||void 0===t?this.resolveOS.then((i=>this.doHasValidBasename(e,i,t))):this.doHasValidBasename(e,t,i)}doHasValidBasename(e,t,i){return e.scheme!==Fi.file&&e.scheme!==Fi.vscodeRemote||function(e,t=ge){const i=t?Si:Ei;return!(!e||0===e.length||/^\s+$/.test(e)||(i.lastIndex=0,i.test(e)||t&&ki.test(e)||"."===e||".."===e||t&&"."===e[e.length-1]||t&&e.length!==e.trim().length||e.length>255))}(i??Qi(e),1===t)}get defaultUriScheme(){return Sm.findDefaultUriScheme(this.environmentService,this.contextService)}static findDefaultUriScheme(e,t){if(e.remoteAuthority)return Fi.vscodeRemote;const i=xm(t.getWorkspace());if(i)return i;const r=t.getWorkspace().folders[0];if(r)return r.uri.scheme;const n=t.getWorkspace().configuration;return n?n.scheme:Fi.file}userHome(e){return e?.preferLocal?this.localUserHome:this.resolveUserHome}get resolvedUserHome(){return this.maybeUnresolvedUserHome}get path(){return this.resolveOS.then((e=>1===e?Qe:Ze))}async fileURI(e){let t="";if(1===await this.resolveOS&&(e=e.replace(/\\/g,"/")),"/"===e[0]&&"/"===e[1]){const i=e.indexOf("/",2);-1===i?(t=e.substring(2),e="/"):(t=e.substring(2,i),e=e.substring(i)||"/")}return pt.from({scheme:Fi.file,authority:t,path:e,query:"",fragment:""})}};km=Sm=vs([_s(1,Dm),_s(2,Cm),_s(3,Us)],km);let Im=class{constructor(e,t,i,r,n){this.configurationService=e,this.workspaceContextService=t,this.editorGroupsService=i,this.logService=r,this.pathService=n}text(e,t,i={}){e=this.getContentPattern(e,i);const r=this.configurationService.getValue(),n=t&&t.some((e=>!this.configurationService.getValue({resource:e}).search.useRipgrep));return{...this.commonQuery(t?.map(Ws),i),type:2,contentPattern:e,previewOptions:i.previewOptions,maxFileSize:i.maxFileSize,usePCRE2:r.search.usePCRE2||n||!1,beforeContext:i.beforeContext,afterContext:i.afterContext,userDisabledExcludesAndIgnoreFiles:i.disregardExcludeSettings&&i.disregardIgnoreFiles}}getContentPattern(e,t){const i=this.configurationService.getValue();e.isRegExp&&(e.pattern=e.pattern.replace(/\r?\n/g,"\\n"));const r={...e,wordSeparators:i.editor.wordSeparators};return this.isCaseSensitive(e,t)&&(r.isCaseSensitive=!0),this.isMultiline(e)&&(r.isMultiline=!0),t.notebookSearchConfig?.includeMarkupInput&&(r.notebookInfo||(r.notebookInfo={}),r.notebookInfo.isInNotebookMarkdownInput=t.notebookSearchConfig.includeMarkupInput),t.notebookSearchConfig?.includeMarkupPreview&&(r.notebookInfo||(r.notebookInfo={}),r.notebookInfo.isInNotebookMarkdownPreview=t.notebookSearchConfig.includeMarkupPreview),t.notebookSearchConfig?.includeCodeInput&&(r.notebookInfo||(r.notebookInfo={}),r.notebookInfo.isInNotebookCellInput=t.notebookSearchConfig.includeCodeInput),t.notebookSearchConfig?.includeOutput&&(r.notebookInfo||(r.notebookInfo={}),r.notebookInfo.isInNotebookCellOutput=t.notebookSearchConfig.includeOutput),r}file(e,t={}){return{...this.commonQuery(e,t),type:1,filePattern:t.filePattern?t.filePattern.trim():t.filePattern,exists:t.exists,sortByScore:t.sortByScore,cacheKey:t.cacheKey}}handleIncludeExclude(e,t){return e?(e=Array.isArray(e)?e.map(Pm):Pm(e),t?this.parseSearchPaths(e):{pattern:Tm(...Array.isArray(e)?e:[e])}):{}}commonQuery(e=[],t={}){const i=this.handleIncludeExclude(t.includePattern,t.expandPatterns),r=this.handleIncludeExclude(t.excludePattern,t.expandPatterns),n=e.length>1,s=(i.searchPaths&&i.searchPaths.length?i.searchPaths.map((e=>this.getFolderQueryForSearchPath(e,t,r))):e.map((e=>this.getFolderQueryForRoot(e,t,r,n)))).filter((e=>!!e)),o={_reason:t._reason,folderQueries:s,usingSearchPaths:!(!i.searchPaths||!i.searchPaths.length),extraFileResources:t.extraFileResources,excludePattern:r.pattern,includePattern:i.pattern,onlyOpenEditors:t.onlyOpenEditors,maxResults:t.maxResults};if(t.onlyOpenEditors){const e=Hr(Wr(this.editorGroupsService.groups.map((e=>e.editors.map((e=>e.resource))))));this.logService.trace("QueryBuilder#commonQuery - openEditor URIs",JSON.stringify(e));const t=e.filter((e=>Gp(o,e.fsPath))),i=this.commonQueryFromFileList(t);return this.logService.trace("QueryBuilder#commonQuery - openEditor Query",JSON.stringify(i)),{...o,...i}}const a=t.extraFileResources&&t.extraFileResources.filter((e=>Gp(o,e.fsPath)));return o.extraFileResources=a&&a.length?a:void 0,o}commonQueryFromFileList(e){const t=[],i=new Li,r={};let n=!1;return e.forEach((e=>{if(e.scheme===Fi.walkThrough)return;if(Xi(e)){const r=this.workspaceContextService.getWorkspaceFolder(e)?.uri??e.with({path:rt(e.fsPath)});let s=i.get(r);s||(n=!0,s={folder:r,includePattern:{}},t.push(s),i.set(r,s));const o=it(r.fsPath,e.fsPath);yi(s.includePattern)[o.replace(/\\/g,"/")]=!0}else e.fsPath&&(n=!0,r[e.fsPath]=!0)})),{folderQueries:t,includePattern:r,usingSearchPaths:!0,excludePattern:n?void 0:{"**/*":!0}}}isCaseSensitive(e,t){if(t.isSmartCase)if(e.isRegExp){if(li(e.pattern,!0))return!0}else if(li(e.pattern))return!0;return!!e.isCaseSensitive}isMultiline(e){return!!e.isMultiline||(!(!e.isRegExp||!function(e){if(!e||0===e.length)return!1;for(let t=0,i=e.length;t<i;t++){const r=e.charCodeAt(t);if(10===r)return!0;if(92===r){if(t++,t>=i)break;const r=e.charCodeAt(t);if(110===r||114===r||87===r)return!0}}return!1}(e.pattern))||(e.pattern.indexOf("\n")>=0||!!e.isMultiline))}parseSearchPaths(e){const t=Array.isArray(e)?e:function(e){return Pp(e,",").map((e=>e.trim())).filter((e=>!!e.length))}(e),i=function(e,t){const i=Object.create(null);for(const r of e){const e=t(r);let n=i[e];n||(n=i[e]=[]),n.push(r)}return i}(t.map((e=>{const t=this.pathService.resolvedUserHome;return t?function(e,t){return e.replace(/^~($|\/|\\)/,`${t}$1`)}(e,t.scheme===Fi.file?t.fsPath:t.path):e})),(e=>(e=>Xe(e)||/^\.\.?([\/\\]|$)/.test(e))(e)?"searchPaths":"exprSegments")),r=(i.exprSegments||[]).map((e=>jt(e,"/"))).map((e=>jt(e,"\\"))).map((e=>("."===e[0]&&(e="*"+e),function(e){const t=[`**/${e}/**`,`**/${e}`];return t.map((e=>e.replace(/\*\*\/\*\*/g,"**")))}(e)))),n={},s=this.expandSearchPathPatterns(i.searchPaths||[]);s&&s.length&&(n.searchPaths=s);const o=Tm(...Wr(r));return o&&(n.pattern=o),n}getExcludesForFolder(e,t){return t.disregardExcludeSettings?void 0:function(e,t=!0){const i=e&&e.files&&e.files.exclude,r=t&&e&&e.search&&e.search.exclude;if(!i&&!r)return;if(!i||!r)return i||r;let n=Object.create(null);return n=Ps(n,Ss(i)),n=Ps(n,Ss(r),!0),n}(e,!t.disregardSearchExcludeSettings)}expandSearchPathPatterns(e){if(!e||!e.length)return[];const t=e.flatMap((e=>{let{pathPortion:t,globPortion:i}=function(e){const t=e.match(/[\*\{\}\(\)\[\]\?]/);if(t){const i=t.index,r=e.substr(0,i).match(/[/|\\][^/\\]*$/);if(r){let t=e.substr(0,r.index);return t.match(/[/\\]/)||(t+="/"),{pathPortion:t,globPortion:e.substr((r.index||0)+1)}}}return{pathPortion:e}}(e);i&&(i=Am(i));return this.expandOneSearchPath(t).flatMap((e=>this.resolveOneSearchPathPattern(e,i)))})),i=new Map;return t.forEach((e=>{const t=e.searchPath.toString(),r=i.get(t);r?e.pattern&&(r.pattern=r.pattern||{},r.pattern[e.pattern]=!0):i.set(t,{searchPath:e.searchPath,pattern:e.pattern?Tm(e.pattern):void 0})})),Array.from(i.values())}expandOneSearchPath(e){if(Xe(e)){const t=this.workspaceContextService.getWorkspace().folders;return t[0]&&t[0].uri.scheme!==Fi.file?[{searchPath:t[0].uri.with({path:e})}]:[{searchPath:pt.file(Ye(e))}]}if(2===this.workspaceContextService.getWorkbenchState()){const t=this.workspaceContextService.getWorkspace().folders[0].uri;if((e=Pm(e)).startsWith("../")||".."===e){const i=Ze.resolve(t.path,e);return[{searchPath:t.with({path:i})}]}return[{searchPath:t,pattern:Am(e)}]}if("./"===e||".\\"===e)return[];{const t=e.replace(/^\.[\/\\]/,""),i=this.workspaceContextService.getWorkspace().folders.map((e=>{const i=t.match(new RegExp(`^${Wt(e.name)}(?:/(.*)|$)`));return i?{match:i,folder:e}:null})).filter(vi);if(i.length)return i.map((e=>{const t=e.match[1];return{searchPath:e.folder.uri,pattern:t&&Am(t)}}));{const t=e.match(/\.[\/\\](.+)[\/\\]?/),i=J(0,"Workspace folder does not exist: {0}",t?t[1]:e);throw new Error(i)}}}resolveOneSearchPathPattern(e,t){const i=e.pattern&&t?`${e.pattern}/${t}`:e.pattern||t,r=[{searchPath:e.searchPath,pattern:i}];return i&&!i.endsWith("**")&&r.push({searchPath:e.searchPath,pattern:i+"/**"}),r}getFolderQueryForSearchPath(e,t,i){const r=this.getFolderQueryForRoot(Ws(e.searchPath),t,i,!1);return r?{...r,includePattern:e.pattern}:null}getFolderQueryForRoot(e,t,i,r){let n;const s=pt.isUri(e)?e:e.uri;if(i.searchPaths){const e=i.searchPaths.filter((e=>Ki(e.searchPath,s)))[0];if(e&&!e.pattern)return null;e&&(n=e.pattern)}const o=this.configurationService.getValue({resource:s}),a={...this.getExcludesForFolder(o,t)||{},...n||{}},l=pt.isUri(e)?Qi(e):e.name;return{folder:s,folderName:r?l:void 0,excludePattern:Object.keys(a).length>0?a:void 0,fileEncoding:o.files&&o.files.encoding,disregardIgnoreFiles:"boolean"==typeof t.disregardIgnoreFiles?t.disregardIgnoreFiles:!o.search.useIgnoreFiles,disregardGlobalIgnoreFiles:"boolean"==typeof t.disregardGlobalIgnoreFiles?t.disregardGlobalIgnoreFiles:!o.search.useGlobalIgnoreFiles,disregardParentIgnoreFiles:"boolean"==typeof t.disregardParentIgnoreFiles?t.disregardParentIgnoreFiles:!o.search.useParentIgnoreFiles,ignoreSymlinks:"boolean"==typeof t.ignoreSymlinks?t.ignoreSymlinks:!o.search.followSymlinks}}};function Tm(...e){return e.length?e.reduce(((e,t)=>(e[t]=!0,e)),Object.create(null)):void 0}function Pm(e){return e.replace(/\\/g,"/")}function Am(e){return Pm(e).replace(/^\.\//,"").replace(/\/+$/g,"")}Im=vs([_s(0,gg),_s(1,Us),_s(2,Ma),_s(3,Gn),_s(4,Em)],Im);const Rm=7e3;function Fm(e,t){const i=t.activationEvents;if(!i)return Promise.resolve(void 0);const n=[],s=[];for(const r of i)if(/^workspaceContains:/.test(r)){const t=r.substr(18);t.indexOf("*")>=0||t.indexOf("?")>=0||e.forceUsingSearch?s.push(t):n.push(t)}if(0===n.length&&0===s.length)return Promise.resolve(void 0);let o;const l=new Promise(((e,t)=>{o=e})),c=e=>o({activationEvent:e}),u=Promise.all(n.map((t=>async function(e,t,i){for(const r of e.folders)if(await e.exists(Zi(pt.revive(r),t)))return void i(`workspaceContains:${t}`)}(e,t,c)))).then((()=>{})),d=async function(e,t,i,n){if(0===i.length)return Promise.resolve(void 0);const s=new Ht,o=e.checkExists(e.folders,i,s.token),l=setTimeout((async()=>{s.cancel(),e.logService.info(`Not activating extension '${t.value}': Timed out while searching for 'workspaceContains' pattern ${i.join(",")}`)}),Rm);let c=!1;try{c=await o}catch(u){a(u)||r(u)}s.dispose(),clearTimeout(l),c&&n(`workspaceContains:${i.join(",")}`)}(e,t.identifier,s,c);return Promise.all([u,d]).then((()=>{o(void 0)})),l}class $m{constructor(e){this._onDidChangePassword=new B,this.onDidChangePassword=this._onDidChangePassword.event,this._proxy=e.getProxy(Ft.MainThreadSecretState)}async $onDidChangePassword(e){this._onDidChangePassword.fire(e)}get(e,t){return this._proxy.$getPassword(e,t)}store(e,t,i){return this._proxy.$setPassword(e,t,i)}delete(e,t){return this._proxy.$deletePassword(e,t)}}const Lm=un("IExtHostSecretState");class Om{#c;constructor(e,t){this._onDidChange=new B,this.onDidChange=this._onDidChange.event,this._id=ja.toKey(e.identifier),this.#c=t,this.#c.onDidChangePassword((e=>{e.extensionId===this._id&&this._onDidChange.fire({key:e.key})}))}get(e){return this.#c.get(this._id,e)}store(e,t){return this.#c.store(this._id,e,t)}delete(e){return this.#c.delete(this._id,e)}}let Mm=class{constructor(e,t,i){this.logService=i,this.bundleCache=new Map,this._proxy=t.getProxy(Ft.MainThreadLocalization),this.currentLanguage=e.environment.appLanguage,this.isDefaultLanguage=this.currentLanguage===Y}getMessage(e,t){const{message:i,args:r,comment:n}=t;if(this.isDefaultLanguage)return Vt(i,r??{});let s=i;n&&n.length>0&&(s+=`/${Array.isArray(n)?n.join(""):n}`);const o=this.bundleCache.get(e)?.contents[s];return o||this.logService.warn(`Using default string since no string found in i18n bundle that has the key: ${s}`),Vt(o??i,r??{})}getBundle(e){return this.bundleCache.get(e)?.contents}getBundleUri(e){return this.bundleCache.get(e)?.uri}async initializeLocalizedMessages(e){if(this.isDefaultLanguage||!e.l10n&&!e.isBuiltin)return;if(this.bundleCache.has(e.identifier.value))return;let t;const i=await this.getBundleLocation(e);if(i){try{const r=await this._proxy.$fetchBundleContents(i),n=JSON.parse(r);t=e.isBuiltin?n.contents?.bundle:n}catch(_C){return void this.logService.error(`Failed to load translations for ${e.identifier.value} from ${i}: ${_C.message}`)}t&&this.bundleCache.set(e.identifier.value,{contents:t,uri:i})}else this.logService.error(`No bundle location found for extension ${e.identifier.value}`)}async getBundleLocation(e){if(e.isBuiltin){const t=await this._proxy.$fetchBuiltInBundleUri(e.identifier.value,this.currentLanguage);return pt.revive(t)}return e.l10n?pt.joinPath(e.extensionLocation,e.l10n,`bundle.l10n.${this.currentLanguage}.json`):void 0}};Mm=vs([_s(0,as),_s(1,ps),_s(2,Gn)],Mm);const Nm=un("IExtHostLocalizationService"),Hm=un("IExtHostManagedSockets");let Um=class{constructor(e){this._remoteSocketIdCounter=0,this._factory=null,this._managedRemoteSockets=new Map,this._proxy=e.getProxy(Ft.MainThreadManagedSockets)}setFactory(e,t){for(const i of this._managedRemoteSockets.values())i.dispose();this._factory&&this._proxy.$unregisterSocketFactory(this._factory.socketFactoryId),this._factory=new Bm(e,t),this._proxy.$registerSocketFactory(this._factory.socketFactoryId)}async $openRemoteSocket(e){if(!this._factory||this._factory.socketFactoryId!==e)throw new Error(`No socket factory with id ${e}`);const t=++this._remoteSocketIdCounter,i=await this._factory.makeConnection(),r=new b;return this._managedRemoteSockets.set(t,new Vm(t,i,r)),r.add(w((()=>this._managedRemoteSockets.delete(t)))),r.add(i.onDidEnd((()=>{this._proxy.$onDidManagedSocketEnd(t),r.dispose()}))),r.add(i.onDidClose((e=>{this._proxy.$onDidManagedSocketClose(t,e?.stack??e?.message),r.dispose()}))),r.add(i.onDidReceiveMessage((e=>this._proxy.$onDidManagedSocketHaveData(t,I.wrap(e))))),t}$remoteSocketWrite(e,t){this._managedRemoteSockets.get(e)?.actual.send(t.buffer)}$remoteSocketEnd(e){const t=this._managedRemoteSockets.get(e);t&&(t.actual.end(),t.dispose())}async $remoteSocketDrain(e){await(this._managedRemoteSockets.get(e)?.actual.drain?.())}};Um=vs([_s(0,ps)],Um);class Bm{constructor(e,t){this.socketFactoryId=e,this.makeConnection=t}}class Vm extends x{constructor(e,t,i){super(),this.socketId=e,this.actual=t,this._register(i)}}var Wm;const zm=un("IHostUtils");let jm=Wm=class extends x{constructor(e,t,i,r,n,o,a,l,c,u,d,h){super(),this._extHostManagedSockets=h,this._onDidChangeRemoteConnectionData=this._register(new B),this.onDidChangeRemoteConnectionData=this._onDidChangeRemoteConnectionData.event,this._isTerminating=!1,this._hostUtils=t,this._extHostContext=i,this._initData=a,this._extHostWorkspace=r,this._extHostConfiguration=n,this._logService=o,this._extHostTunnelService=c,this._extHostTerminalService=u,this._extHostLocalizationService=d,this._mainThreadWorkspaceProxy=this._extHostContext.getProxy(Ft.MainThreadWorkspace),this._mainThreadTelemetryProxy=this._extHostContext.getProxy(Ft.MainThreadTelemetry),this._mainThreadExtensionsProxy=this._extHostContext.getProxy(Ft.MainThreadExtensionService),this._almostReadyToRunExtensions=new lr,this._readyToStartExtensionHost=new lr,this._readyToRunExtensions=new lr,this._eagerExtensionsActivated=new lr,this._activationEventsReader=new Ym(this._initData.activationEvents),this._globalRegistry=new qg(this._activationEventsReader,this._initData.allExtensions);const p=new qa(this._initData.myExtensions);this._myRegistry=new qg(this._activationEventsReader,Jm(this._globalRegistry,p)),this._storage=new lf(this._extHostContext,this._logService),this._secretState=new $m(this._extHostContext),this._storagePath=l,this._instaService=e.createChild(new os([cf,this._storage],[Lm,this._secretState])),this._activator=this._register(new of(this._myRegistry,this._globalRegistry,{onExtensionActivationError:(e,t,i)=>{this._mainThreadExtensionsProxy.$onExtensionActivationError(e,s(t),i)},actualActivateExtension:async(e,t)=>{if(qg.isHostExtension(e,this._myRegistry,this._globalRegistry))return await this._mainThreadExtensionsProxy.$activateExtension(e,t),new nf;const i=this._myRegistry.getExtensionDescription(e);return this._activateExtension(i,t)}},this._logService)),this._extensionPathIndex=null,this._resolvers=Object.create(null),this._started=!1,this._remoteConnectionData=this._initData.remote.connectionData}getRemoteConnectionData(){return this._remoteConnectionData}async initialize(){try{await this._beforeAlmostReadyToRunExtensions(),this._almostReadyToRunExtensions.open(),await this._extHostWorkspace.waitForInitializeCall(),G("code/extHost/ready"),this._readyToStartExtensionHost.open(),this._initData.autoStart&&this._startExtensionHost()}catch(e){r(e)}}async _deactivateAll(){this._storagePath.onWillDeactivateAll();let e=[];try{const t=this._myRegistry.getAllExtensionDescriptions(),i=t.map((e=>e.identifier)).filter((e=>this.isActivated(e)));e=i.map((e=>this._deactivate(e)))}catch(t){}await Promise.all(e)}terminate(e,t=0){if(this._isTerminating)return;this._isTerminating=!0,this._logService.info(`Extension host terminating: ${e}`),this._logService.flush(),this._extHostTerminalService.dispose(),this._activator.dispose(),ye&&i((e=>{this._logService.error(e)})),this._extHostContext.dispose();const r=this._deactivateAll();Promise.race([cr(5e3),r]).finally((()=>{this._hostUtils.pid?this._logService.info(`Extension host with pid ${this._hostUtils.pid} exiting with code ${t}`):this._logService.info(`Extension host exiting with code ${t}`),this._logService.flush(),this._logService.dispose(),this._hostUtils.exit(t)}))}isActivated(e){return!!this._readyToRunExtensions.isOpen()&&this._activator.isActivated(e)}async getExtension(e){const t=await this._mainThreadExtensionsProxy.$getExtension(e);return t&&{...t,identifier:new ja(t.identifier.value),extensionLocation:pt.revive(t.extensionLocation)}}_activateByEvent(e,t){return this._activator.activateByEvent(e,t)}_activateById(e,t){return this._activator.activateById(e,t)}activateByIdWithErrors(e,t){return this._activateById(e,t).then((()=>{const t=this._activator.getActivatedExtension(e);if(t.activationFailed)return Promise.reject(t.activationFailedError)}))}getExtensionRegistry(){return this._readyToRunExtensions.wait().then((e=>this._myRegistry))}getExtensionExports(e){if(this._readyToRunExtensions.isOpen())return this._activator.getActivatedExtension(e).exports;try{return this._activator.getActivatedExtension(e).exports}catch(t){return null}}async _realPathExtensionUri(e){if(e.scheme===Fi.file&&this._hostUtils.fsRealpath){const t=await this._hostUtils.fsRealpath(e.fsPath);return pt.file(t)}return e}async getExtensionPathIndex(){return this._extensionPathIndex||(this._extensionPathIndex=this._createExtensionPathIndex(this._myRegistry.getAllExtensionDescriptions()).then((e=>new Zm(e)))),this._extensionPathIndex}async _createExtensionPathIndex(e){const t=Ds.forUris((e=>ji.ignorePathCasing(e)));return await Promise.all(e.map((async e=>{if(this._getEntryPoint(e)){const i=await this._realPathExtensionUri(e.extensionLocation);t.set(i,e)}}))),t}_deactivate(e){let t=Promise.resolve(void 0);if(!this._readyToRunExtensions.isOpen())return t;if(!this._activator.isActivated(e))return t;const i=this._activator.getActivatedExtension(e);if(!i)return t;try{"function"==typeof i.module.deactivate&&(t=Promise.resolve(i.module.deactivate()).then(void 0,(e=>(this._logService.error(e),Promise.resolve(void 0)))))}catch(r){this._logService.error(`An error occurred when deactivating the extension '${e.value}':`),this._logService.error(r)}try{_(i.subscriptions)}catch(r){this._logService.error(`An error occurred when deactivating the subscriptions for extension '${e.value}':`),this._logService.error(r)}return t}async _activateExtension(e,t){return this._initData.remote.isRemote?this._mainThreadExtensionsProxy.$onWillActivateExtension(e.identifier):await this._mainThreadExtensionsProxy.$onWillActivateExtension(e.identifier),this._doActivateExtension(e,t).then((i=>{const r=i.activationTimes;return this._mainThreadExtensionsProxy.$onDidActivateExtension(e.identifier,r.codeLoadingTime,r.activateCallTime,r.activateResolvedTime,t),this._logExtensionActivationTimes(e,t,"success",r),i}),(i=>{throw this._logExtensionActivationTimes(e,t,"failure"),i}))}_logExtensionActivationTimes(e,t,i,r){const n=Km(e,t);this._mainThreadTelemetryProxy.$publicLog2("extensionActivationTimes",{...n,...r||{},outcome:i})}_doActivateExtension(e,t){const i=Km(e,t);this._mainThreadTelemetryProxy.$publicLog2("activatePlugin",i);const r=this._getEntryPoint(e);if(!r)return Promise.resolve(new rf(Xg.NONE));this._logService.info(`ExtensionService#_doActivateExtension ${e.identifier.value}, startup: ${t.startup}, activationEvent: '${t.activationEvent}'${e.identifier.value!==t.extensionId.value?`, root cause: ${t.extensionId.value}`:""}`),this._logService.flush();const n=new ef(t.startup);return Promise.all([this._loadCommonJSModule(e,Zi(e.extensionLocation,r),n),this._loadExtensionContext(e)]).then((t=>(G(`code/extHost/willActivateExtension/${e.identifier.value}`),Wm._callActivate(this._logService,e.identifier,t[0],t[1],n)))).then((t=>(G(`code/extHost/didActivateExtension/${e.identifier.value}`),t)))}_loadExtensionContext(e){const t=new df(e,this._storage),i=new uf(e.identifier.value,!1,this._storage),r=new Om(e,this._secretState),n=e.isUnderDevelopment?this._initData.environment.extensionTestsLocationURI?ld.Test:ld.Development:ld.Production,s=this._initData.remote.isRemote?Wu.Workspace:Wu.UI;return this._logService.trace(`ExtensionService#loadExtensionContext ${e.identifier.value}`),Promise.all([t.whenReady,i.whenReady,this._storagePath.whenReady]).then((()=>{const o=this;let a,l;const c=Zg(e,"ipc")?this._initData.messagePorts?.get(ja.toKey(e.identifier)):void 0;return Object.freeze({globalState:t,workspaceState:i,secrets:r,subscriptions:[],get extensionUri(){return e.extensionLocation},get extensionPath(){return e.extensionLocation.fsPath},asAbsolutePath:t=>et(e.extensionLocation.fsPath,t),get storagePath(){return o._storagePath.workspaceValue(e)?.fsPath},get globalStoragePath(){return o._storagePath.globalValue(e).fsPath},get logPath(){return et(o._initData.logsLocation.fsPath,e.identifier.value)},get logUri(){return pt.joinPath(o._initData.logsLocation,e.identifier.value)},get storageUri(){return o._storagePath.workspaceValue(e)},get globalStorageUri(){return o._storagePath.globalValue(e)},get extensionMode(){return n},get extension(){return void 0===a&&(a=new Qm(o,e.identifier,e,s,!1)),a},get extensionRuntime(){return Yg(e,"extensionRuntime"),o.extensionRuntime},get environmentVariableCollection(){return o._extHostTerminalService.getEnvironmentVariableCollection(e)},get messagePassingProtocol(){if(!l){if(!c)return;const e=$.buffer($.fromDOMEventEmitter(c,"message",(e=>e.data)));c.start(),l={onDidReceiveMessage:e,postMessage:c.postMessage.bind(c)}}return l}})}))}static _callActivate(e,t,i,r,n){return i=i||{activate:void 0,deactivate:void 0},this._callActivateOptional(e,t,i,r,n).then((e=>new tf(!1,null,n.build(),i,e,r.subscriptions)))}static _callActivateOptional(e,t,i,r,n){if("function"!=typeof i.activate)return Promise.resolve(i);try{n.activateCallStart(),e.trace(`ExtensionService#_callActivateOptional ${t.value}`);const s="object"==typeof global?global:self,o=i.activate.apply(s,[r]);return n.activateCallStop(),n.activateResolveStart(),Promise.resolve(o).then((e=>(n.activateResolveStop(),e)))}catch(s){return Promise.reject(s)}}_activateOneStartupFinished(e,t){this._activateById(e.identifier,{startup:!1,extensionId:e.identifier,activationEvent:t}).then(void 0,(e=>{this._logService.error(e)}))}_activateAllStartupFinishedDeferred(e,t=0){const i=Date.now();De((()=>{for(let r=t;r<e.length;r+=1){const t=e[r];for(const n of t.activationEvents??[])if("onStartupFinished"===n){if(Date.now()-i>50){this._activateAllStartupFinishedDeferred(e,r);break}this._activateOneStartupFinished(t,n)}}}))}_activateAllStartupFinished(){this._mainThreadExtensionsProxy.$setPerformanceMarks((()=>{let e=performance.timeOrigin;"number"!=typeof e&&(e=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);const t=[{name:"code/timeOrigin",startTime:Math.round(e)}];for(const i of performance.getEntriesByType("mark"))t.push({name:i.name,startTime:Math.round(e+i.startTime)});return t})()),this._extHostConfiguration.getConfigProvider().then((e=>{const t=e.getConfiguration("extensions.experimental").get("deferredStartupFinishedActivation"),i=this._myRegistry.getAllExtensionDescriptions();if(t)this._activateAllStartupFinishedDeferred(i);else for(const r of i)if(r.activationEvents)for(const e of r.activationEvents)"onStartupFinished"===e&&this._activateOneStartupFinished(r,e)}))}_handleEagerExtensions(){const e=this._activateByEvent("*",!0).then(void 0,(e=>{this._logService.error(e)}));this._register(this._extHostWorkspace.onDidChangeWorkspace((e=>this._handleWorkspaceContainsEagerExtensions(e.added))));const t=this._extHostWorkspace.workspace?this._extHostWorkspace.workspace.folders:[],i=this._handleWorkspaceContainsEagerExtensions(t),r=this._handleRemoteResolverEagerExtensions(),n=Promise.all([r,e,i]).then((()=>{}));return Promise.race([n,cr(1e4)]).then((()=>{this._activateAllStartupFinished()})),n}_handleWorkspaceContainsEagerExtensions(e){return 0===e.length?Promise.resolve(void 0):Promise.all(this._myRegistry.getAllExtensionDescriptions().map((t=>this._handleWorkspaceContainsEagerExtension(e,t)))).then((()=>{}))}async _handleWorkspaceContainsEagerExtension(e,t){if(this.isActivated(t.identifier))return;const i=!this._initData.remote.isRemote&&!!this._initData.remote.authority,r={logService:this._logService,folders:e.map((e=>e.uri)),forceUsingSearch:i||!this._hostUtils.fsExists,exists:e=>this._hostUtils.fsExists(e.fsPath),checkExists:(e,t,i)=>this._mainThreadWorkspaceProxy.$checkExists(e,t,i)},n=await Fm(r,t);return n?this._activateById(t.identifier,{startup:!0,extensionId:t.identifier,activationEvent:n.activationEvent}).then(void 0,(e=>this._logService.error(e))):void 0}async _handleRemoteResolverEagerExtensions(){if(this._initData.remote.authority)return this._activateByEvent(`onResolveRemoteAuthority:${this._initData.remote.authority}`,!1)}async $extensionTestsExecute(){await this._eagerExtensionsActivated.wait();try{return await this._doHandleExtensionTests()}catch(e){throw console.error(e),e}}async _doHandleExtensionTests(){const{extensionDevelopmentLocationURI:e,extensionTestsLocationURI:t}=this._initData.environment;if(!e||!t)throw new Error(J(0,"Cannot load test runner."));const i=await this._loadCommonJSModule(null,t,new ef(!1));if(!i||"function"!=typeof i.run)throw new Error(J(0,"Path {0} does not point to a valid extension test runner.",t.toString()));return new Promise(((e,r)=>{const n=Vi(t),s=i.run(n,((t,i)=>{t?r(t):e("number"==typeof i&&i>0?1:0)}));s&&s.then&&s.then((()=>{e(0)})).catch((e=>{r(e instanceof Error&&e.stack?e.stack:String(e))}))}))}_startExtensionHost(){if(this._started)throw new Error("Extension host is already started!");return this._started=!0,this._readyToStartExtensionHost.wait().then((()=>this._readyToRunExtensions.open())).then((()=>Promise.race([this._activator.waitForActivatingExtensions(),cr(1e3)]))).then((()=>this._handleEagerExtensions())).then((()=>{this._eagerExtensionsActivated.open(),this._logService.info("Eager extensions activated")}))}registerRemoteAuthorityResolver(e,t){return this._resolvers[e]=t,w((()=>{delete this._resolvers[e]}))}async getRemoteExecServer(e){const{resolver:t}=await this._activateAndGetResolver(e);return t?.resolveExecServer?.(e,{resolveAttempt:0})}async _activateAndGetResolver(e){const t=e.indexOf("+");if(-1===t)throw new Sl("Not an authority that can be resolved!",Ja.InvalidAuthority);const i=e.substr(0,t);return await this._almostReadyToRunExtensions.wait(),await this._activateByEvent(`onResolveRemoteAuthority:${i}`,!1),{authorityPrefix:i,resolver:this._resolvers[i]}}async $resolveAuthority(e,t){const i=F.create(!1),r=()=>`[resolveAuthority(${ml(e)},${t})][${i.elapsed()}ms] `,n=e=>this._logService.info(`${r()}${e}`),s=e=>this._logService.warn(`${r()}${e}`),o=(e,t=void 0)=>this._logService.error(`${r()}${e}`,t),a=e=>{if(e instanceof Sl)return{type:"error",error:{code:e._code,message:e._message,detail:e._detail}};throw e},l=async e=>{n(`activating resolver for ${e}...`);const{resolver:t,authorityPrefix:i}=await this._activateAndGetResolver(e);if(!t)throw o(`no resolver for ${i}`),new Sl(`No remote extension installed to resolve ${i}.`,Ja.NoResolverFound);return{resolver:t,authorityPrefix:i,remoteAuthority:e}},c=e.split(/@|%40/g).reverse();let u;n(`activating remote resolvers ${c.join(" -> ")}`);try{u=await Promise.all(c.map(l)).catch((async t=>{if(!(t instanceof Sl)||t._code!==Ja.InvalidAuthority)throw t;return s(`resolving nested authorities failed: ${t.message}`),[await l(e)]}))}catch(_C){return a(_C)}const d=new pr;let h,p;d.cancelAndSet((()=>n("waiting...")),1e3);for(const[v,{authorityPrefix:_,resolver:y,remoteAuthority:w}]of u.entries())try{if(v===u.length-1)n("invoking final resolve()..."),G(`code/extHost/willResolveAuthority/${_}`),h=await y.resolve(w,{resolveAttempt:t,execServer:p}),G(`code/extHost/didResolveAuthorityOK/${_}`),n("setting tunnel factory..."),this._register(await this._extHostTunnelService.setTunnelFactory(y,Dl.isManagedResolvedAuthority(h)?h:void 0));else{if(n(`invoking resolveExecServer() for ${w}`),G(`code/extHost/willResolveExecServer/${_}`),p=await(y.resolveExecServer?.(w,{resolveAttempt:t,execServer:p})),!p)throw new Sl(`Exec server was not available for ${w}`,Ja.NoResolverFound);G(`code/extHost/didResolveExecServerOK/${_}`)}}catch(_C){return G(`code/extHost/didResolveAuthorityError/${_}`),o("returned an error",_C),d.dispose(),a(_C)}d.dispose();const g={environmentTunnels:h.environmentTunnels,features:h.tunnelFeatures},f={extensionHostEnv:h.extensionHostEnv,isTrusted:h.isTrusted,authenticationSession:h.authenticationSessionForInitializingExtensions?{id:h.authenticationSessionForInitializingExtensions.id,providerId:h.authenticationSessionForInitializingExtensions.providerId}:void 0};let m;if(n("returned "+(Dl.isManagedResolvedAuthority(h)?"managed authority":`${h.host}:${h.port}`)),Dl.isManagedResolvedAuthority(h)){const i=t;this._extHostManagedSockets.setFactory(i,h.makeConnection),m={authority:e,connectTo:new Ga(i),connectionToken:h.connectionToken}}else m={authority:e,connectTo:new Qa(h.host,h.port),connectionToken:h.connectionToken};return{type:"ok",value:{authority:m,options:f,tunnelInformation:g}}}async $getCanonicalURI(e,t){this._logService.info(`$getCanonicalURI invoked for authority (${ml(e)})`);const{resolver:i}=await this._activateAndGetResolver(e);if(!i)return null;const r=pt.revive(t);if(void 0===i.getCanonicalURI)return r;const n=await ar((()=>i.getCanonicalURI(r)));return n||r}$startExtensionHost(e){e.toAdd.forEach((e=>e.extensionLocation=pt.revive(e.extensionLocation)));const{globalRegistry:t,myExtensions:i}=qm(this._activationEventsReader,this._globalRegistry,this._myRegistry,e);return this._globalRegistry.set(t.getAllExtensionDescriptions()),this._myRegistry.set(i),this._startExtensionHost()}$activateByEvent(e,t){return 1===t?this._almostReadyToRunExtensions.wait().then((t=>this._activateByEvent(e,!1))):this._readyToRunExtensions.wait().then((t=>this._activateByEvent(e,!1)))}async $activate(e,t){return await this._readyToRunExtensions.wait(),!!this._myRegistry.getExtensionDescription(e)&&(await this._activateById(e,t),!0)}async $deltaExtensions(e){e.toAdd.forEach((e=>e.extensionLocation=pt.revive(e.extensionLocation)));const{globalRegistry:t,myExtensions:i}=qm(this._activationEventsReader,this._globalRegistry,this._myRegistry,e),r=await this._createExtensionPathIndex(i);return(await this.getExtensionPathIndex()).setSearchTree(r),this._globalRegistry.set(t.getAllExtensionDescriptions()),this._myRegistry.set(i),Promise.resolve(void 0)}async $test_latency(e){return e}async $test_up(e){return e.byteLength}async $test_down(e){const t=I.alloc(e),i=Math.random()%256;for(let r=0;r<e;r++)t.writeUInt8(i,r);return t}async $updateRemoteConnectionData(e){this._remoteConnectionData=e,this._onDidChangeRemoteConnectionData.fire()}};function qm(e,t,i,r){e.addActivationEvents(r.addActivationEvents);const n=new qg(e,t.getAllExtensionDescriptions());n.deltaExtensions(r.toAdd,r.toRemove);const s=new qa(i.getAllExtensionDescriptions().map((e=>e.identifier)));for(const o of r.myToRemove)s.delete(o);for(const o of r.myToAdd)s.add(o);return{globalRegistry:n,myExtensions:Jm(n,s)}}function Km(e,t){return{id:e.identifier.value,name:e.name,extensionVersion:e.version,publisherDisplayName:e.publisher,activationEvents:e.activationEvents?e.activationEvents.join(","):null,isBuiltin:e.isBuiltin,reason:t.activationEvent,reasonId:t.extensionId.value}}jm=Wm=vs([_s(0,cn),_s(1,zm),_s(2,ps),_s(3,og),_s(4,zg),_s(5,Gn),_s(6,as),_s(7,ff),_s(8,Cf),_s(9,tm),_s(10,Nm),_s(11,Hm)],jm);const Gm=un("IExtHostExtensionService");class Qm{#u;#d;#h;constructor(e,t,i,r,n){this.#u=e,this.#d=t,this.#h=i.identifier,this.id=i.identifier.value,this.extensionUri=i.extensionLocation,this.extensionPath=Ye(Vi(i.extensionLocation)),this.packageJSON=i,this.extensionKind=r,this.isFromDifferentExtensionHost=n}get isActive(){return this.#u.isActivated(this.#h)}get exports(){if("none"!==this.packageJSON.api&&!this.isFromDifferentExtensionHost)return this.#u.getExtensionExports(this.#h)}async activate(){if(this.isFromDifferentExtensionHost)throw new Error("Cannot activate foreign extension");return await this.#u.activateByIdWithErrors(this.#h,{startup:!1,extensionId:this.#d,activationEvent:"api"}),this.exports}}function Jm(e,t){return e.getAllExtensionDescriptions().filter((e=>t.has(e.identifier)))}class Zm{constructor(e){this._searchTree=e}setSearchTree(e){this._searchTree=e}findSubstr(e){return this._searchTree.findSubstr(e)}forEach(e){return this._searchTree.forEach(e)}}class Ym{constructor(e){this._map=new Ka,this.addActivationEvents(e)}readActivationEvents(e){return this._map.get(e.identifier)}addActivationEvents(e){for(const t of Object.keys(e))this._map.set(t,e[t])}}class Xm extends x{constructor(e,t=[]){super(),this.logger=new ts([e,...t]),this._register(e.onDidChangeLogLevel((e=>this.setLevel(e))))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}flush(){this.logger.flush()}}let ev=class extends Xm{constructor(e,t,i){const r=i.remote.isRemote?"remoteexthost":e?"workerexthost":"exthost",n=i.remote.isRemote?J(0,"Extension Host (Remote)"):J(0,e?"Extension Host (Worker)":"Extension Host");super(t.createLogger(r,{name:n}))}};ev=vs([_s(1,Qn),_s(2,as)],ev);let tv=class extends is{constructor(e,t){super(t.logLevel,t.logsLocation,t.loggers.map((e=>lo(e)))),this._proxy=e.getProxy(Ft.MainThreadLogger)}$setLogLevel(e,t){t?this.setLogLevel(pt.revive(t),e):this.setLogLevel(e)}setVisibility(e,t){super.setVisibility(e,t),this._proxy.$setVisibility(e,t)}doCreateLogger(e,t,i){return new iv(this._proxy,e,t,i)}};tv=vs([_s(0,ps),_s(1,as)],tv);class iv extends es{constructor(e,t,i,r){super("always"===r?.logLevel),this.proxy=e,this.file=t,this.isLoggerCreated=!1,this.buffer=[],this.setLevel(i),this.proxy.$createLogger(t,r).then((()=>{this.doLog(this.buffer),this.isLoggerCreated=!0}))}log(e,t){const i=[[e,t]];this.isLoggerCreated?this.doLog(i):this.buffer.push(...i)}doLog(e){this.proxy.$log(this.file,e)}flush(){this.proxy.$flush(this.file)}}class rv{static async installEarlyHandler(e){Error.stackTraceLimit=100;const t=e.get(Gn),r=e.get(ps).getProxy(Ft.MainThreadErrors);i((e=>{t.error(e);const i=s(e);r.$onUnexpectedError(i)}))}static async installFullHandler(e){const t=e.get(Gn),r=e.get(ps),n=e.get(Gm),o=e.get(Gf),a=r.getProxy(Ft.MainThreadExtensionService),l=r.getProxy(Ft.MainThreadErrors),c=await n.getExtensionPathIndex(),u=new WeakMap;function d(e,t){if(u.has(e))return u.get(e).stack;let i,r,n="";for(const o of t)n+=`\n\tat ${o.toString()}`,r=o.getFileName(),!i&&r&&(i=c.findSubstr(pt.file(r)));const s=`${e.name||"Error"}: ${e.message||""}${n}`;return u.set(e,{extensionIdentifier:i?.identifier,stack:s}),s}const h=Symbol("prepareStackTrace wrapped");let p=d;Object.defineProperty(Error,"prepareStackTrace",{configurable:!1,get:()=>p,set(e){e!==d&&e&&!e[h]?(p=function(t,i){return d(t,i),e.call(Error,t,i)},Object.assign(p,{[h]:!0})):p=e||d}}),i((e=>{t.error(e);const i=s(e),r=u.get(e);if(!r?.extensionIdentifier)return void l.$onUnexpectedError(i);a.$onExtensionRuntimeError(r.extensionIdentifier,i);const n=o.onExtensionError(r.extensionIdentifier,e);t.trace("forwarded error to extension?",n,r)}))}}class nv{constructor(e,t,i,r,n){this._hostUtils=i,this._rpcProtocol=new $r(e,null,r),t=nv._transform(t,this._rpcProtocol);const s=new os(...ns);s.set(as,{_serviceBrand:void 0,...t,messagePorts:n}),s.set(ps,new gs(this._rpcProtocol)),s.set(fs,new ms(r)),s.set(zm,i),s.set(Gn,new rs(ev,[!0],!0)),s.set(Qn,new rs(tv,[],!0));const o=new ds(s,!0);ye&&o.invokeFunction(rv.installEarlyHandler),this._logService=o.invokeFunction((e=>e.get(Gn))),G("code/extHost/didCreateServices"),this._hostUtils.pid?this._logService.info(`Extension host with pid ${this._hostUtils.pid} started`):this._logService.info("Extension host started"),this._logService.trace("initData",t),this._extensionService=o.invokeFunction((e=>e.get(Gm))),this._extensionService.initialize(),ye&&o.invokeFunction(rv.installFullHandler)}async asBrowserUri(e){const t=this._rpcProtocol.getProxy(Ft.MainThreadExtensionService);return pt.revive(await t.$asBrowserUri(e))}async getAllStaticBrowserUris(){const e=this._rpcProtocol.getProxy(Ft.MainThreadExtensionService);return(await e.$getAllStaticBrowserUris()).map((([e,t])=>[pt.revive(e),pt.revive(t)]))}terminate(e){this._extensionService.terminate(e)}getExtHostExtensionService(){return this._extensionService}static _transform(e,t){e.allExtensions.forEach((e=>{e.extensionLocation=pt.revive(t.transformIncomingURIs(e.extensionLocation))})),e.environment.appRoot=pt.revive(t.transformIncomingURIs(e.environment.appRoot));const i=e.environment.extensionDevelopmentLocationURI;return i&&(e.environment.extensionDevelopmentLocationURI=i.map((e=>pt.revive(t.transformIncomingURIs(e))))),e.environment.extensionTestsLocationURI=pt.revive(t.transformIncomingURIs(e.environment.extensionTestsLocationURI)),e.environment.globalStorageHome=pt.revive(t.transformIncomingURIs(e.environment.globalStorageHome)),e.environment.workspaceStorageHome=pt.revive(t.transformIncomingURIs(e.environment.workspaceStorageHome)),e.environment.extensionTelemetryLogResource=pt.revive(t.transformIncomingURIs(e.environment.extensionTelemetryLogResource)),e.nlsBaseUrl=pt.revive(t.transformIncomingURIs(e.nlsBaseUrl)),e.logsLocation=pt.revive(t.transformIncomingURIs(e.logsLocation)),e.workspace=t.transformIncomingURIs(e.workspace),e}}const sv=function(e){const t=i=>{globalThis.removeEventListener("message",t);const r=i.data;Object.defineProperties(globalThis,{postMessage:{value(e,t){r.postMessage(e,t)}},onmessage:{get:()=>r.onmessage,set(e){r.onmessage=e}}}),r.addEventListener("message",(e=>{globalThis.dispatchEvent(new MessageEvent("message",{data:e.data,ports:e.ports?[...e.ports]:void 0}))})),r.start(),globalThis.Worker=class{constructor(){throw new TypeError("Nested workers from within nested worker are NOT supported.")}},importScripts(e)};globalThis.addEventListener("message",t)}.toString();class ov extends EventTarget{constructor(e,t,i){super(),this.onmessage=null,this.onmessageerror=null,this.onerror=null;const r=new Blob([`((${sv})('${t}'))`],{type:"application/javascript"}),n=URL.createObjectURL(r),s=new MessageChannel,o=n,a={type:"_newWorker",id:o,port:s.port2,url:n,options:i};e(a,[s.port2]),this.postMessage=s.port1.postMessage.bind(s.port1),this.terminate=()=>{e({type:"_terminateWorker",id:o}),URL.revokeObjectURL(n),s.port1.close(),s.port2.close()},Object.defineProperties(this,{onmessage:{get:()=>s.port1.onmessage,set(e){s.port1.onmessage=e}},onmessageerror:{get:()=>s.port1.onmessageerror,set(e){s.port1.onmessageerror=e}}}),s.port1.addEventListener("messageerror",(e=>{const t=new MessageEvent("messageerror",{data:e.data});this.dispatchEvent(t)})),s.port1.addEventListener("message",(e=>{const t=new MessageEvent("message",{data:e.data});this.dispatchEvent(t)})),s.port1.start()}}var av;new zn("inOutput",!1),new zn("activeLogOutput",!1),new zn("outputView.scrollLock",!1),un("outputService"),function(e){e[e.Append=1]="Append",e[e.Replace=2]="Replace",e[e.Clear=3]="Clear"}(av||(av={}));na.add("workbench.contributions.outputChannels",new class{constructor(){this.channels=new Map,this._onDidRegisterChannel=new B,this.onDidRegisterChannel=this._onDidRegisterChannel.event,this._onDidRemoveChannel=new B,this.onDidRemoveChannel=this._onDidRemoveChannel.event}registerChannel(e){this.channels.has(e.id)||(this.channels.set(e.id,e),this._onDidRegisterChannel.fire(e.id))}getChannels(){const e=[];return this.channels.forEach((t=>e.push(t))),e}getChannel(e){return this.channels.get(e)}removeChannel(e){this.channels.delete(e),this._onDidRemoveChannel.fire(e)}}),new zn("activeOutputChannel","");class lv extends es{get disposed(){return this._disposed}constructor(e,t,i,r,n){super(),this.id=e,this.name=t,this.logger=i,this.proxy=r,this.extension=n,this.offset=0,this._disposed=!1,this.visible=!1,this.setLevel(i.getLevel()),this._register(i.onDidChangeLogLevel((e=>this.setLevel(e))))}get logLevel(){return this.getLevel()}appendLine(e){this.append(e+"\n")}append(e){this.info(e)}clear(){const e=this.offset;this.logger.flush(),this.proxy.$update(this.id,av.Clear,e)}replace(e){const t=this.offset;this.info(e),this.proxy.$update(this.id,av.Replace,t),this.visible&&this.logger.flush()}show(e,t){this.logger.flush(),this.proxy.$reveal(this.id,!!("boolean"==typeof e?e:t))}hide(){this.proxy.$close(this.id)}log(e,t){this.offset+=I.fromString(t).byteLength,function(e,t,i){switch(t){case Jn.Trace:e.trace(i);break;case Jn.Debug:e.debug(i);break;case Jn.Info:e.info(i);break;case Jn.Warning:e.warn(i);break;case Jn.Error:e.error(i);break;case Jn.Off:break;default:throw new Error(`Invalid log level ${t}`)}}(this.logger,e,t),this.visible&&(this.logger.flush(),this.proxy.$update(this.id,av.Append))}dispose(){super.dispose(),this._disposed||(this.proxy.$dispose(this.id),this._disposed=!0)}}class cv extends lv{appendLine(e){this.append(e)}}let uv=class{constructor(e,t,i,r,n,s){var o;this.initData=t,this.extHostFileSystem=i,this.extHostFileSystemInfo=r,this.loggerService=n,this.logService=s,this.extensionLogDirectoryPromise=new Map,this.namePool=1,this.channels=new Map,this.visibleChannelId=null,this.proxy=e.getProxy(Ft.MainThreadOutputService),this.outputsLocation=this.extHostFileSystemInfo.extUri.joinPath(t.logsLocation,`output_logging_${(o=new Date,o.getFullYear()+"-"+String(o.getMonth()+1).padStart(2,"0")+"-"+String(o.getDate()).padStart(2,"0")+"T"+String(o.getHours()).padStart(2,"0")+":"+String(o.getMinutes()).padStart(2,"0")+":"+String(o.getSeconds()).padStart(2,"0")+"."+(o.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z").replace(/-|:|\.\d+Z$/g,"")}`)}$setVisibleChannel(e){this.visibleChannelId=e;for(const[t,i]of this.channels)i.visible=t===this.visibleChannelId}createOutputChannel(e,t,i){if(!(e=e.trim()))throw new Error("illegal argument `name`. must not be falsy");const r="object"==typeof t&&t.log,n=hi(t)?t:void 0;if(hi(n)&&!n.trim())throw new Error("illegal argument `languageId`. must not be empty");let s;const o=this.initData.environment.extensionLogLevel?.find((([e])=>ja.equals(i.identifier,e)))?.[1];o&&(s=function(e){switch(e){case"trace":return Jn.Trace;case"debug":return Jn.Debug;case"info":return Jn.Info;case"warn":return Jn.Warning;case"error":case"critical":return Jn.Error;case"off":return Jn.Off}}(o));const a=r?this.doCreateLogOutputChannel(e,s,i):this.doCreateOutputChannel(e,n,i);return a.then((e=>{this.channels.set(e.id,e),e.visible=e.id===this.visibleChannelId})),r?this.createExtHostLogOutputChannel(e,s??this.logService.getLevel(),a):this.createExtHostOutputChannel(e,a)}async doCreateOutputChannel(e,t,i){this.outputDirectoryPromise||(this.outputDirectoryPromise=this.extHostFileSystem.value.createDirectory(this.outputsLocation).then((()=>this.outputsLocation)));const r=await this.outputDirectoryPromise,n=this.extHostFileSystemInfo.extUri.joinPath(r,`${this.namePool++}-${e.replace(/[\\/:\*\?"<>\|]/g,"")}.log`),s=this.loggerService.createLogger(n,{logLevel:"always",donotRotate:!0,donotUseFormatters:!0,hidden:!0}),o=await this.proxy.$register(e,n,t,i.identifier.value);return new lv(o,e,s,this.proxy,i)}async doCreateLogOutputChannel(e,t,i){const r=await this.createExtensionLogDirectory(i),n=e.replace(/[\\/:\*\?"<>\|]/g,""),s=this.extHostFileSystemInfo.extUri.joinPath(r,`${n}.log`),o=`${i.identifier.value}.${n}`,a=this.loggerService.createLogger(s,{id:o,name:e,logLevel:t,extensionId:i.identifier.value});return new cv(o,e,a,this.proxy,i)}createExtensionLogDirectory(e){let t=this.extensionLogDirectoryPromise.get(e.identifier.value);if(!t){const i=this.extHostFileSystemInfo.extUri.joinPath(this.initData.logsLocation,e.identifier.value);this.extensionLogDirectoryPromise.set(e.identifier.value,t=(async()=>{try{await this.extHostFileSystem.value.createDirectory(i)}catch(e){if(da(e)!==aa.FileExists)throw e}return i})())}return t}createExtHostOutputChannel(e,t){let i=!1;const r=()=>{if(i)throw new Error("Channel has been closed")};return{get name(){return e},append(e){r(),t.then((t=>t.append(e)))},appendLine(e){r(),t.then((t=>t.appendLine(e)))},clear(){r(),t.then((e=>e.clear()))},replace(e){r(),t.then((t=>t.replace(e)))},show(e,i){r(),t.then((t=>t.show(e,i)))},hide(){r(),t.then((e=>e.hide()))},dispose(){i=!0,t.then((e=>e.dispose()))}}}createExtHostLogOutputChannel(e,t,i){const r=new b,n=()=>{if(r.isDisposed)throw new Error("Channel has been closed")},s=r.add(new B);function o(e){t=e,s.fire(e)}return i.then((e=>{r.add(e),e.logLevel!==t&&o(e.logLevel),r.add(e.onDidChangeLogLevel((e=>o(e))))})),{...this.createExtHostOutputChannel(e,i),get logLevel(){return t},onDidChangeLogLevel:s.event,trace(e,...t){n(),i.then((i=>i.trace(e,...t)))},debug(e,...t){n(),i.then((i=>i.debug(e,...t)))},info(e,...t){n(),i.then((i=>i.info(e,...t)))},warn(e,...t){n(),i.then((i=>i.warn(e,...t)))},error(e,...t){n(),i.then((i=>i.error(e,...t)))},dispose(){r.dispose()}}}};uv=vs([_s(0,ps),_s(1,as),_s(2,gf),_s(3,zs),_s(4,Qn),_s(5,Gn)],uv);const dv=un("IExtHostOutputService");var hv;let pv=class{static{hv=this}static{this._handlePool=0}static{this._maxEventSize=250}constructor(e,t){this._logService=t,this._provider=new Map,this._proxy=e.getProxy(Ft.MainThreadDecorations)}registerFileDecorationProvider(e,t){const i=hv._handlePool++;this._provider.set(i,{provider:e,extensionDescription:t}),this._proxy.$registerDecorationProvider(i,t.identifier.value);const r=e.onDidChangeFileDecorations&&e.onDidChangeFileDecorations((e=>{if(!e)return void this._proxy.$onDidChange(i,null);const r=qr(e);if(r.length<=hv._maxEventSize)return void this._proxy.$onDidChange(i,r);this._logService.warn("[Decorations] CAPPING events from decorations provider",t.identifier.value,r.length);const n=function(e,t){const i=[];let r;for(const n of e.slice(0).sort(t))r&&0===t(r[0],n)?r.push(n):(r=[n],i.push(r));return i}(r.map((e=>({uri:e,rank:zt(e.path,"/")}))),((e,t)=>e.rank-t.rank||Gt(e.uri.path,t.uri.path))),s=[];e:for(const t of n){let e;for(const i of t){const t=rt(i.uri.path);if(e!==t&&(e=t,s.push(i.uri)>=hv._maxEventSize))break e}}this._proxy.$onDidChange(i,s)}));return new _l((()=>{r?.dispose(),this._proxy.$unregisterDecorationProvider(i),this._provider.delete(i)}))}async $provideDecorations(e,t,i){if(!this._provider.has(e))return Object.create(null);const r=Object.create(null),{provider:n,extensionDescription:s}=this._provider.get(e);return await Promise.all(t.map((async e=>{try{const{uri:t,id:o}=e,a=await Promise.resolve(n.provideFileDecoration(pt.revive(t),i));if(!a)return;try{zu.validate(a),a.badge&&"string"!=typeof a.badge&&Yg(s,"codiconDecoration"),r[o]=[a.propagate,a.tooltip,a.badge,a.color]}catch(_C){this._logService.warn(`INVALID decoration from extension '${s.identifier.value}': ${_C}`)}}catch(t){this._logService.error(t)}}))),r}};pv=hv=vs([_s(0,ps),_s(1,Gn)],pv);const gv=un("IExtHostDecorations");class fv{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,t){e=ym(e);const i=this.values,r=this.prefixSum,n=t.length;return 0!==n&&(this.values=new Uint32Array(i.length+n),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e),e+n),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(r.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=ym(e),t=ym(t),this.values[e]!==t&&(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=ym(e),t=ym(t);const i=this.values,r=this.prefixSum;if(e>=i.length)return!1;const n=i.length-e;return t>=n&&(t=n),0!==t&&(this.values=new Uint32Array(i.length-t),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(r.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return 0===this.values.length?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=ym(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;0===t&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let i=t;i<=e;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.values.length-1,r=0,n=0,s=0;for(;t<=i;)if(r=t+(i-t)/2|0,n=this.prefixSum[r],s=n-this.values[r],e<s)i=r-1;else{if(!(e>=n))break;t=r+1}return new mv(r,e-s)}}class mv{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class vv{constructor(e,t,i,r){this._uri=e,this._lines=t,this._eol=i,this._versionId=r,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return null===this._cachedTextValue&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const i of t)this._acceptDeleteRange(i.range),this._acceptInsertText(new po(i.range.startLineNumber,i.range.startColumn),i.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,i=new Uint32Array(t);for(let r=0;r<t;r++)i[r]=this._lines[r].length+e;this._lineStarts=new fv(i)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber!==e.endLineNumber)this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber);else{if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1))}}_acceptInsertText(e,t){if(0===t.length)return;const i=Kt(t);if(1===i.length)return void this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]+this._lines[e.lineNumber-1].substring(e.column-1));i[i.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]);const r=new Uint32Array(i.length-1);for(let n=1;n<i.length;n++)this._lines.splice(e.lineNumber+n-1,0,i[n]),r[n-1]=i[n].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,r)}}const _v="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";const yv=function(e=""){let t="(-?\\d*\\.\\d\\w*)|([^";for(const i of _v)e.indexOf(i)>=0||(t+="\\"+i);return t+="\\s]+)",new RegExp(t,"g")}();const wv=new A;function bv(e,t,i,r,n){if(n||(n=v.first(wv)),i.length>n.maxLen){let s=e-n.maxLen/2;return s<0?s=0:r+=s,bv(e,t,i=i.substring(s,e+n.maxLen/2),r,n)}const s=Date.now(),o=e-1-r;let a=-1,l=null;for(let c=1;!(Date.now()-s>=n.timeBudget);c++){const e=o-n.windowSize*c;t.lastIndex=Math.max(0,e);const r=xv(t,i,o,a);if(!r&&l)break;if(l=r,e<=0)break;a=e}if(l){const e={word:l[0],startColumn:r+1+l.index,endColumn:r+1+l.index+l[0].length};return t.lastIndex=0,e}return null}function xv(e,t,i,r){let n;for(;n=e.exec(t);){const t=n.index||0;if(t<=i&&e.lastIndex>=i)return n;if(r>0&&t>r)return null}return null}wv.unshift({maxLen:1e3,windowSize:15,timeBudget:150});const Cv=new Map;class Dv extends vv{constructor(e,t,i,r,n,s,o,a){super(t,i,r,n),this._proxy=e,this._languageId=s,this._isDirty=o,this.notebook=a,this._isDisposed=!1}dispose(){Ro(!this._isDisposed),this._isDisposed=!0,this._isDirty=!1}equalLines(e){return Mr(this._lines,e)}get document(){if(!this._document){const e=this;this._document={get uri(){return e._uri},get fileName(){return e._uri.fsPath},get isUntitled(){return e._uri.scheme===Fi.untitled},get languageId(){return e._languageId},get version(){return e._versionId},get isClosed(){return e._isDisposed},get isDirty(){return e._isDirty},save:()=>e._save(),getText:t=>t?e._getTextInRange(t):e.getText(),get eol(){return"\n"===e._eol?El.LF:El.CRLF},get lineCount(){return e._lines.length},lineAt:t=>e._lineAt(t),offsetAt:t=>e._offsetAt(t),positionAt:t=>e._positionAt(t),validateRange:t=>e._validateRange(t),validatePosition:t=>e._validatePosition(t),getWordRangeAtPosition:(t,i)=>e._getWordRangeAtPosition(t,i)}}return Object.freeze(this._document)}_acceptLanguageId(e){Ro(!this._isDisposed),this._languageId=e}_acceptIsDirty(e){Ro(!this._isDisposed),this._isDirty=e}_save(){return this._isDisposed?Promise.reject(new Error("Document has been closed")):this._proxy.$trySaveDocument(this._uri)}_getTextInRange(e){const t=this._validateRange(e);if(t.isEmpty)return"";if(t.isSingleLine)return this._lines[t.start.line].substring(t.start.character,t.end.character);const i=this._eol,r=t.start.line,n=t.end.line,s=[];s.push(this._lines[r].substring(t.start.character));for(let o=r+1;o<n;o++)s.push(this._lines[o]);return s.push(this._lines[n].substring(0,t.end.character)),s.join(i)}_lineAt(e){let t;if(e instanceof yl?t=e.line:"number"==typeof e&&(t=e),"number"!=typeof t||t<0||t>=this._lines.length||Math.floor(t)!==t)throw new Error("Illegal value for `line`");return new Sv(t,this._lines[t],t===this._lines.length-1)}_offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}_positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),i=this._lines[t.index].length;return new yl(t.index,Math.min(t.remainder,i))}_validateRange(e){if(!(e instanceof wl))throw new Error("Invalid argument");const t=this._validatePosition(e.start),i=this._validatePosition(e.end);return t===e.start&&i===e.end?e:new wl(t.line,t.character,i.line,i.character)}_validatePosition(e){if(!(e instanceof yl))throw new Error("Invalid argument");if(0===this._lines.length)return e.with(0,0);let{line:t,character:i}=e,r=!1;if(t<0)t=0,i=0,r=!0;else if(t>=this._lines.length)t=this._lines.length-1,i=this._lines[t].length,r=!0;else{const e=this._lines[t].length;i<0?(i=0,r=!0):i>e&&(i=e,r=!0)}return r?new yl(t,i):e}_getWordRangeAtPosition(e,t){const i=this._validatePosition(e);if(t){if(qt(t))throw new Error(`[getWordRangeAtPosition]: ignoring custom regexp '${t.source}' because it matches the empty string.`)}else r=this._languageId,t=Cv.get(r);var r;const n=bv(i.character+1,function(e){let t=yv;if(e&&e instanceof RegExp)if(e.global)t=e;else{let i="g";e.ignoreCase&&(i+="i"),e.multiline&&(i+="m"),e.unicode&&(i+="u"),t=new RegExp(e.source,i)}return t.lastIndex=0,t}(t),this._lines[i.line],0);if(n)return new wl(i.line,n.startColumn-1,i.line,n.endColumn-1)}}class Sv{constructor(e,t,i){this._line=e,this._text=t,this._isLastLine=i}get lineNumber(){return this._line}get text(){return this._text}get range(){return new wl(this._line,0,this._line,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new wl(this._line,0,this._line+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this._text)[1].length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this._text.length}}class Ev{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}class kv{static{this._Keys=new Ev("TextEditorDecorationType")}constructor(e,t,i){const r=kv._Keys.nextId();e.$registerTextEditorDecorationType(t.identifier,r,rh.from(i)),this.value=Object.freeze({key:r,dispose(){e.$removeTextEditorDecorationType(r)}})}}class Iv{constructor(e,t){this._collectedEdits=[],this._setEndOfLine=void 0,this._finalized=!1,this._document=e,this._documentVersionId=e.version,this._undoStopBefore=t.undoStopBefore,this._undoStopAfter=t.undoStopAfter}finalize(){return this._finalized=!0,{documentVersionId:this._documentVersionId,edits:this._collectedEdits,setEndOfLine:this._setEndOfLine,undoStopBefore:this._undoStopBefore,undoStopAfter:this._undoStopAfter}}_throwIfFinalized(){if(this._finalized)throw new Error("Edit is only valid while callback runs")}replace(e,t){this._throwIfFinalized();let i=null;if(e instanceof yl)i=new wl(e,e);else{if(!(e instanceof wl))throw new Error("Unrecognized location");i=e}this._pushEdit(i,t,!1)}insert(e,t){this._throwIfFinalized(),this._pushEdit(new wl(e,e),t,!0)}delete(e){this._throwIfFinalized();let t=null;if(!(e instanceof wl))throw new Error("Unrecognized location");t=e,this._pushEdit(t,null,!0)}_pushEdit(e,t,i){const r=this._document.validateRange(e);this._collectedEdits.push({range:r,text:t,forceMoveMarkers:i})}setEndOfLine(e){if(this._throwIfFinalized(),e!==El.LF&&e!==El.CRLF)throw u("endOfLine");this._setEndOfLine=e}}class Tv{constructor(e,t,i,r){this._proxy=e,this._id=t,this._accept(i),this._logService=r;const n=this;this.value={get tabSize(){return n._tabSize},set tabSize(e){n._setTabSize(e)},get indentSize(){return n._indentSize},set indentSize(e){n._setIndentSize(e)},get insertSpaces(){return n._insertSpaces},set insertSpaces(e){n._setInsertSpaces(e)},get cursorStyle(){return n._cursorStyle},set cursorStyle(e){n._setCursorStyle(e)},get lineNumbers(){return n._lineNumbers},set lineNumbers(e){n._setLineNumbers(e)}}}_accept(e){this._tabSize=e.tabSize,this._indentSize=e.indentSize,this._insertSpaces=e.insertSpaces,this._cursorStyle=e.cursorStyle,this._lineNumbers=Oh.to(e.lineNumbers)}_validateTabSize(e){if("auto"===e)return"auto";if("number"==typeof e){const t=Math.floor(e);return t>0?t:null}if("string"==typeof e){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}_setTabSize(e){const t=this._validateTabSize(e);if(null!==t){if("number"==typeof t){if(this._tabSize===t)return;this._tabSize=t}this._warnOnError("setTabSize",this._proxy.$trySetOptions(this._id,{tabSize:t}))}}_validateIndentSize(e){if("tabSize"===e)return"tabSize";if("number"==typeof e){const t=Math.floor(e);return t>0?t:null}if("string"==typeof e){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}_setIndentSize(e){const t=this._validateIndentSize(e);if(null!==t){if("number"==typeof t){if(this._indentSize===t)return;this._indentSize=t}this._warnOnError("setIndentSize",this._proxy.$trySetOptions(this._id,{indentSize:t}))}}_validateInsertSpaces(e){return"auto"===e?"auto":"false"!==e&&Boolean(e)}_setInsertSpaces(e){const t=this._validateInsertSpaces(e);if("boolean"==typeof t){if(this._insertSpaces===t)return;this._insertSpaces=t}this._warnOnError("setInsertSpaces",this._proxy.$trySetOptions(this._id,{insertSpaces:t}))}_setCursorStyle(e){this._cursorStyle!==e&&(this._cursorStyle=e,this._warnOnError("setCursorStyle",this._proxy.$trySetOptions(this._id,{cursorStyle:e})))}_setLineNumbers(e){this._lineNumbers!==e&&(this._lineNumbers=e,this._warnOnError("setLineNumbers",this._proxy.$trySetOptions(this._id,{lineNumbers:Oh.from(e)})))}assign(e){const t={};let i=!1;if(void 0!==e.tabSize){const r=this._validateTabSize(e.tabSize);"auto"===r?(i=!0,t.tabSize=r):"number"==typeof r&&this._tabSize!==r&&(this._tabSize=r,i=!0,t.tabSize=r)}if(void 0!==e.indentSize){const r=this._validateIndentSize(e.indentSize);"tabSize"===r?(i=!0,t.indentSize=r):"number"==typeof r&&this._indentSize!==r&&(this._indentSize=r,i=!0,t.indentSize=r)}if(void 0!==e.insertSpaces){const r=this._validateInsertSpaces(e.insertSpaces);"auto"===r?(i=!0,t.insertSpaces=r):this._insertSpaces!==r&&(this._insertSpaces=r,i=!0,t.insertSpaces=r)}void 0!==e.cursorStyle&&this._cursorStyle!==e.cursorStyle&&(this._cursorStyle=e.cursorStyle,i=!0,t.cursorStyle=e.cursorStyle),void 0!==e.lineNumbers&&this._lineNumbers!==e.lineNumbers&&(this._lineNumbers=e.lineNumbers,i=!0,t.lineNumbers=Oh.from(e.lineNumbers)),i&&this._warnOnError("setOptions",this._proxy.$trySetOptions(this._id,t))}_warnOnError(e,t){t.catch((t=>{this._logService.warn(`ExtHostTextEditorOptions '${e}' failed:'`),this._logService.warn(t)}))}}class Pv{constructor(e,t,i,r,n,s,o,a){this.id=e,this._proxy=t,this._logService=i,this._disposed=!1,this._hasDecorationsForKey=new Set,this._selections=n,this._options=new Tv(this._proxy,this.id,s,i),this._visibleRanges=o,this._viewColumn=a;const l=this;this.value=Object.freeze({get document(){return r.value},set document(e){throw h("document")},get selection(){return l._selections&&l._selections[0]},set selection(e){if(!(e instanceof bl))throw u("selection");l._selections=[e],l._trySetSelection()},get selections(){return l._selections},set selections(e){if(!Array.isArray(e)||e.some((e=>!(e instanceof bl))))throw u("selections");l._selections=e,l._trySetSelection()},get visibleRanges(){return l._visibleRanges},set visibleRanges(e){throw h("visibleRanges")},get options(){return l._options.value},set options(e){l._disposed||l._options.assign(e)},get viewColumn(){return l._viewColumn},set viewColumn(e){throw h("viewColumn")},edit(e,t={undoStopBefore:!0,undoStopAfter:!0}){if(l._disposed)return Promise.reject(new Error("TextEditor#edit not possible on closed editors"));const i=new Iv(r.value,t);return e(i),l._applyEdit(i)},insertSnippet(i,n,s={undoStopBefore:!0,undoStopAfter:!0}){if(l._disposed)return Promise.reject(new Error("TextEditor#insertSnippet not possible on closed editors"));let o;if(!n||Array.isArray(n)&&0===n.length)o=l._selections.map((e=>zd.from(e)));else if(n instanceof yl){const{lineNumber:e,column:t}=qd.from(n);o=[{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}]}else if(n instanceof wl)o=[zd.from(n)];else{o=[];for(const e of n)if(e instanceof wl)o.push(zd.from(e));else{const{lineNumber:t,column:i}=qd.from(e);o.push({startLineNumber:t,startColumn:i,endLineNumber:t,endColumn:i})}}return t.$tryInsertSnippet(e,r.value.version,i.value,o,s)},setDecorations(i,r){const n=0===r.length;n&&!l._hasDecorationsForKey.has(i.key)||(n?l._hasDecorationsForKey.delete(i.key):l._hasDecorationsForKey.add(i.key),l._runOnProxy((()=>{if(bp(r))return t.$trySetDecorations(e,i.key,function(e){return bp(e)?e.map((e=>({range:zd.from(e.range),hoverMessage:Array.isArray(e.hoverMessage)?Xd.fromMany(e.hoverMessage):e.hoverMessage?Xd.from(e.hoverMessage):void 0,renderOptions:e.renderOptions}))):e.map((e=>({range:zd.from(e)})))}(r));{const n=new Array(4*r.length);for(let e=0,t=r.length;e<t;e++){const t=r[e];n[4*e]=t.start.line+1,n[4*e+1]=t.start.character+1,n[4*e+2]=t.end.line+1,n[4*e+3]=t.end.character+1}return t.$trySetDecorationsFast(e,i.key,n)}})))},revealRange(i,r){l._runOnProxy((()=>t.$tryRevealRange(e,zd.from(i),r||wc.Default)))},show(i){t.$tryShowEditor(e,Yd.from(i))},hide(){t.$tryHideEditor(e)}})}dispose(){Ro(!this._disposed),this._disposed=!0}_acceptOptions(e){Ro(!this._disposed),this._options._accept(e)}_acceptVisibleRanges(e){Ro(!this._disposed),this._visibleRanges=e}_acceptViewColumn(e){Ro(!this._disposed),this._viewColumn=e}_acceptSelections(e){Ro(!this._disposed),this._selections=e}async _trySetSelection(){const e=this._selections.map(Wd.from);return await this._runOnProxy((()=>this._proxy.$trySetSelections(this.id,e))),this.value}_applyEdit(e){const t=e.finalize();if(0===t.edits.length&&!t.setEndOfLine)return Promise.resolve(!0);const i=t.edits.map((e=>e.range));i.sort(((e,t)=>e.end.line===t.end.line?e.end.character===t.end.character?e.start.line===t.start.line?e.start.character-t.start.character:e.start.line-t.start.line:e.end.character-t.end.character:e.end.line-t.end.line));for(let n=0,s=i.length-1;n<s;n++){const e=i[n].end;if(i[n+1].start.isBefore(e))return Promise.reject(new Error("Overlapping ranges are not allowed!"))}const r=t.edits.map((e=>({range:zd.from(e.range),text:e.text,forceMoveMarkers:e.forceMoveMarkers})));return this._proxy.$tryApplyEdits(this.id,t.documentVersionId,r,{setEndOfLine:"number"==typeof t.setEndOfLine?Mh.from(t.setEndOfLine):void 0,undoStopBefore:t.undoStopBefore,undoStopAfter:t.undoStopAfter})}_runOnProxy(e){return this._disposed?(this._logService.warn("TextEditor is closed/disposed"),Promise.resolve(void 0)):e().then((()=>this),(e=>(e instanceof Error&&"DISPOSED"===e.name||this._logService.warn(e),null)))}}class Av{constructor(e){this.value=e,this._count=0}ref(){this._count++}unref(){return 0==--this._count}}let Rv=class{constructor(e,t){this._extHostRpc=e,this._logService=t,this._activeEditorId=null,this._editors=new Map,this._documents=new Li,this._onDidAddDocuments=new B,this._onDidRemoveDocuments=new B,this._onDidChangeVisibleTextEditors=new B,this._onDidChangeActiveTextEditor=new B,this.onDidAddDocuments=this._onDidAddDocuments.event,this.onDidRemoveDocuments=this._onDidRemoveDocuments.event,this.onDidChangeVisibleTextEditors=this._onDidChangeVisibleTextEditors.event,this.onDidChangeActiveTextEditor=this._onDidChangeActiveTextEditor.event}$acceptDocumentsAndEditorsDelta(e){this.acceptDocumentsAndEditorsDelta(e)}acceptDocumentsAndEditorsDelta(t){const i=[],r=[],n=[];if(t.removedDocuments)for(const e of t.removedDocuments){const t=pt.revive(e),r=this._documents.get(t);r?.unref()&&(this._documents.delete(t),i.push(r.value))}if(t.addedDocuments)for(const e of t.addedDocuments){const t=pt.revive(e.uri);let i=this._documents.get(t);if(i&&t.scheme!==Fi.vscodeNotebookCell&&t.scheme!==Fi.vscodeInteractiveInput)throw new Error(`document '${t} already exists!'`);i||(i=new Av(new Dv(this._extHostRpc.getProxy(Ft.MainThreadDocuments),t,e.lines,e.EOL,e.versionId,e.languageId,e.isDirty,e.notebook)),this._documents.set(t,i),r.push(i.value)),i.ref()}if(t.removedEditors)for(const e of t.removedEditors){const t=this._editors.get(e);this._editors.delete(e),t&&n.push(t)}if(t.addedEditors)for(const s of t.addedEditors){const t=pt.revive(s.documentUri);Ro(this._documents.has(t),`document '${t}' does not exist`),Ro(!this._editors.has(s.id),`editor '${s.id}' already exists!`);const i=this._documents.get(t).value,r=new Pv(s.id,this._extHostRpc.getProxy(Ft.MainThreadTextEditors),this._logService,new e((()=>i.document)),s.selections.map(Wd.to),s.options,s.visibleRanges.map((e=>zd.to(e))),"number"==typeof s.editorPosition?Yd.to(s.editorPosition):void 0);this._editors.set(s.id,r)}void 0!==t.newActiveEditor&&(Ro(null===t.newActiveEditor||this._editors.has(t.newActiveEditor),`active editor '${t.newActiveEditor}' does not exist`),this._activeEditorId=t.newActiveEditor),_(i),_(n),t.removedDocuments&&this._onDidRemoveDocuments.fire(i),t.addedDocuments&&this._onDidAddDocuments.fire(r),(t.removedEditors||t.addedEditors)&&this._onDidChangeVisibleTextEditors.fire(this.allEditors().map((e=>e.value))),void 0!==t.newActiveEditor&&this._onDidChangeActiveTextEditor.fire(this.activeEditor())}getDocument(e){return this._documents.get(e)?.value}allDocuments(){return v.map(this._documents.values(),(e=>e.value))}getEditor(e){return this._editors.get(e)}activeEditor(e){if(!this._activeEditorId)return;const t=this._editors.get(this._activeEditorId);return e?t:t?.value}allEditors(){return[...this._editors.values()]}};Rv=vs([_s(0,ps),_s(1,Gn)],Rv);const Fv=un("IExtHostDocumentsAndEditors"),$v=un("IExtHostApiDeprecationService");let Lv=class{constructor(e,t){this._extHostLogService=t,this._reportedUsages=new Set,this._telemetryShape=e.getProxy(Ft.MainThreadTelemetry)}report(e,t,i){const r=this.getUsageKey(e,t);this._reportedUsages.has(r)||(this._reportedUsages.add(r),t.isUnderDevelopment&&this._extHostLogService.warn(`[Deprecation Warning] '${e}' is deprecated. ${i}`),this._telemetryShape.$publicLog2("extHostDeprecatedApiUsage",{extensionId:t.identifier.value,apiId:e}))}getUsageKey(e,t){return`${e}-${t.identifier.value}`}};var Ov,Mv,Nv,Hv,Uv,Bv,Vv,Wv,zv,jv;Lv=vs([_s(0,ps),_s(1,Gn)],Lv),function(e){e.from=function(e){if(null!=e)return e},e.to=function(e){if(null!=e)return e}}(Ov||(Ov={})),function(e){e.from=function(e){if(null!=e)return e},e.to=function(e){if(null!=e)return e}}(Mv||(Mv={})),function(e){e.from=function(e){if(null!=e)return e},e.to=function(e){if(null!=e)return e}}(Nv||(Nv={})),function(e){e.is=function(e){if(e){return e&&!!e.process}return!1},e.from=function(e){if(null==e)return;const t={process:e.process,args:e.args};return e.options&&(t.options=Nv.from(e.options)),t},e.to=function(e){if(null!=e)return new Hc(e.process,e.args,e.options)}}(Hv||(Hv={})),function(e){e.from=function(e){if(null!=e)return e},e.to=function(e){if(null!=e)return e}}(Uv||(Uv={})),function(e){e.is=function(e){if(e){const t=e;return t&&(!!t.commandLine||!!t.command)}return!1},e.from=function(e){if(null==e)return;const t={};return void 0!==e.commandLine?t.commandLine=e.commandLine:(t.command=e.command,t.args=e.args),e.options&&(t.options=Uv.from(e.options)),t},e.to=function(e){if(null!=e&&(void 0!==e.command||void 0!==e.commandLine))return e.commandLine?new Uc(e.commandLine,e.options):new Uc(e.command,e.args?e.args:[],e.options)}}(Bv||(Bv={})),function(e){e.is=function(e){if(e){return e&&"customExecution"===e.customExecution}return!1},e.from=function(e){return{customExecution:"customExecution"}},e.to=function(e,t){return t.get(e)}}(Vv||(Vv={})),function(e){e.from=function(e){if(null!=e)return{_id:e.id,isDefault:e.isDefault}}}(Wv||(Wv={})),function(e){function t(e,t){if(null==e)return;let i;e.execution instanceof Hc?i=Hv.from(e.execution):e.execution instanceof Uc?i=Bv.from(e.execution):e.execution&&e.execution instanceof Wc&&(i=Vv.from(e.execution));const r=Ov.from(e.definition);let n;if(n=e.scope?"number"==typeof e.scope?e.scope:e.scope.uri:Vc.Workspace,!r||!n)return;return{_id:e._id,definition:r,name:e.name,source:{extensionId:t.identifier.value,label:e.source,scope:n},execution:i,isBackground:e.isBackground,group:Wv.from(e.group),presentationOptions:Mv.from(e.presentationOptions),problemMatchers:e.problemMatchers,hasDefinedMatchers:e.hasDefinedMatchers,runOptions:e.runOptions?e.runOptions:{reevaluateOnRerun:!0},detail:e.detail}}e.fromMany=function(e,i){if(null==e)return[];const r=[];for(const n of e){const e=t(n,i);e&&r.push(e)}return r},e.from=t,e.to=async function(e,t,i){if(null==e)return;let r;Hv.is(e.execution)?r=Hv.to(e.execution):Bv.is(e.execution)?r=Bv.to(e.execution):Vv.is(e.execution)&&(r=Vv.to(e._id,i));const n=Ov.to(e.definition);let s;if(e.source&&(s=void 0!==e.source.scope?"number"==typeof e.source.scope?e.source.scope:await t.resolveWorkspaceFolder(pt.revive(e.source.scope)):Vc.Workspace),!n||!s)return;const o=new zc(n,s,e.name,e.source.label,r,e.problemMatchers);return void 0!==e.isBackground&&(o.isBackground=e.isBackground),void 0!==e.group&&(o.group=Mc.from(e.group._id),o.group&&e.group.isDefault&&(o.group=new Mc(o.group.id,o.group.label),!0===e.group.isDefault&&(o.group.isDefault=e.group.isDefault))),e.presentationOptions&&(o.presentationOptions=Mv.to(e.presentationOptions)),e._id&&(o._id=e._id),e.detail&&(o.detail=e.detail),o}}(zv||(zv={})),function(e){e.from=function(e){return e},e.to=function(e){if(e)return Object.assign(Object.create(null),e)}}(jv||(jv={}));class qv{#p;constructor(e,t,i){this._id=t,this._task=i,this.#p=e}get task(){return this._task}terminate(){this.#p.terminateTask(this)}fireDidStartProcess(e){}fireDidEndProcess(e){}}let Kv=class{constructor(e,t,i,r,n,s,o,a){this._onDidExecuteTask=new B,this._onDidTerminateTask=new B,this._onDidTaskProcessStarted=new B,this._onDidTaskProcessEnded=new B,this._proxy=e.getProxy(Ft.MainThreadTask),this._workspaceProvider=i,this._editorService=r,this._configurationService=n,this._terminalService=s,this._handleCounter=0,this._handlers=new Map,this._taskExecutions=new Map,this._taskExecutionPromises=new Map,this._providedCustomExecutions2=new Map,this._notProvidedCustomExecutions=new Set,this._activeCustomExecutions2=new Map,this._logService=o,this._deprecationService=a,this._proxy.$registerSupportedExecutions(!0)}registerTaskProvider(e,t,i){if(!i)return new _l((()=>{}));const r=this.nextHandle();return this._handlers.set(r,{type:t,provider:i,extension:e}),this._proxy.$registerTaskProvider(r,t),new _l((()=>{this._handlers.delete(r),this._proxy.$unregisterTaskProvider(r)}))}registerTaskSystem(e,t){this._proxy.$registerTaskSystem(e,t)}fetchTasks(e){return this._proxy.$fetchTasks(jv.from(e)).then((async e=>{const t=[];for(const i of e){const e=await zv.to(i,this._workspaceProvider,this._providedCustomExecutions2);e&&t.push(e)}return t}))}get taskExecutions(){const e=[];return this._taskExecutions.forEach((t=>e.push(t))),e}terminateTask(e){if(!(e instanceof qv))throw new Error("No valid task execution provided");return this._proxy.$terminateTask(e._id)}get onDidStartTask(){return this._onDidExecuteTask.event}async $onDidStartTask(e,t,i){const r=this._providedCustomExecutions2.get(e.id);r&&(this._activeCustomExecutions2.set(e.id,r),this._terminalService.attachPtyToTerminal(t,await r.callback(i))),this._lastStartedTask=e.id,this._onDidExecuteTask.fire({execution:await this.getTaskExecution(e)})}get onDidEndTask(){return this._onDidTerminateTask.event}async $OnDidEndTask(e){const t=await this.getTaskExecution(e);this._taskExecutionPromises.delete(e.id),this._taskExecutions.delete(e.id),this.customExecutionComplete(e),this._onDidTerminateTask.fire({execution:t})}get onDidStartTaskProcess(){return this._onDidTaskProcessStarted.event}async $onDidStartTaskProcess(e){const t=await this.getTaskExecution(e.id);this._onDidTaskProcessStarted.fire({execution:t,processId:e.processId})}get onDidEndTaskProcess(){return this._onDidTaskProcessEnded.event}async $onDidEndTaskProcess(e){const t=await this.getTaskExecution(e.id);this._onDidTaskProcessEnded.fire({execution:t,exitCode:e.exitCode})}$provideTasks(e,t){const i=this._handlers.get(e);if(!i)return Promise.reject(new Error("no handler found"));const r=[],n=ar((()=>i.provider.provideTasks(Ot.None))).then((e=>this.provideTasksInternal(t,r,i,e)));return new Promise((e=>{n.then((t=>{Promise.all(r).then((()=>{e(t)}))}))}))}async $resolveTask(e,t){const i=this._handlers.get(e);if(!i)return Promise.reject(new Error("no handler found"));if(t.definition.type!==i.type)throw new Error(`Unexpected: Task of type [${t.definition.type}] cannot be resolved by provider of type [${i.type}].`);const r=await zv.to(t,this._workspaceProvider,this._providedCustomExecutions2);if(!r)throw new Error("Unexpected: Task cannot be resolved.");const n=await i.provider.resolveTask(r,Ot.None);if(!n)return;this.checkDeprecation(n,i);const s=zv.from(n,i.extension);if(!s)throw new Error("Unexpected: Task cannot be resolved.");if(n.definition!==r.definition)throw new Error("Unexpected: The resolved task definition must be the same object as the original task definition. The task definition cannot be changed.");return Vv.is(s.execution)&&await this.addCustomExecution(s,n,!0),await this.resolveTaskInternal(s)}nextHandle(){return this._handleCounter++}async addCustomExecution(e,t,i){const r=await this._proxy.$createTaskId(e);i||this._providedCustomExecutions2.has(r)||(this._notProvidedCustomExecutions.add(r),this._activeCustomExecutions2.set(r,t.execution)),this._providedCustomExecutions2.set(r,t.execution)}async getTaskExecution(e,t){if("string"==typeof e){const t=this._taskExecutionPromises.get(e);if(!t)throw new f("Unexpected: The specified task is missing an execution");return t}const i=this._taskExecutionPromises.get(e.id);if(i)return i;const r=new Promise(((i,r)=>{function n(e,t,n){n?i(new qv(e,t.id,n)):r("Unexpected: Task does not exist.")}t?n(this,e,t):zv.to(e.task,this._workspaceProvider,this._providedCustomExecutions2).then((t=>n(this,e,t)))}));return this._taskExecutionPromises.set(e.id,r),r.then((t=>(this._taskExecutions.set(e.id,t),t)),(e=>Promise.reject(e)))}checkDeprecation(e,t){e._deprecated&&this._deprecationService.report("Task.constructor",t.extension,"Use the Task constructor that takes a `scope` instead.")}customExecutionComplete(e){this._activeCustomExecutions2.get(e.id)&&this._activeCustomExecutions2.delete(e.id),this._notProvidedCustomExecutions.has(e.id)&&this._lastStartedTask!==e.id&&(this._providedCustomExecutions2.delete(e.id),this._notProvidedCustomExecutions.delete(e.id));const t=this._notProvidedCustomExecutions.values();let i=t.next();for(;!i.done;)this._activeCustomExecutions2.has(i.value)||this._lastStartedTask===i.value||(this._providedCustomExecutions2.delete(i.value),this._notProvidedCustomExecutions.delete(i.value)),i=t.next()}};Kv=vs([_s(0,ps),_s(1,as),_s(2,og),_s(3,Fv),_s(4,zg),_s(5,tm),_s(6,Gn),_s(7,$v)],Kv);let Gv=class extends Kv{constructor(e,t,i,r,n,s,o,a){super(e,t,i,r,n,s,o,a),this.registerTaskSystem(Fi.vscodeRemote,{scheme:Fi.vscodeRemote,authority:"",platform:pe(0)})}async executeTask(e,t){if(!t.execution)throw new Error("Tasks to execute must include an execution");const i=zv.from(t,e);if(void 0===i)throw new Error("Task is not valid");if(!Vv.is(i.execution))throw new g;await this.addCustomExecution(i,t,!1);const r=await this.getTaskExecution(await this._proxy.$getTaskExecution(i),t);return this._proxy.$executeTask(i).catch((e=>{throw new Error(e)})),r}provideTasksInternal(e,t,i,r){const n=[];if(r)for(const s of r){this.checkDeprecation(s,i),s.definition&&e[s.definition.type]||this._logService.warn(`The task [${s.source}, ${s.name}] uses an undefined task type. The task will be ignored in the future.`);const r=zv.from(s,i.extension);r&&Vv.is(r.execution)?(n.push(r),t.push(this.addCustomExecution(r,s,!0))):this._logService.warn("Only custom execution tasks supported.")}return{tasks:n,extension:i.extension}}async resolveTaskInternal(e){if(Vv.is(e.execution))return e;this._logService.warn("Only custom execution tasks supported.")}async $resolveVariables(e,t){return{process:void 0,variables:Object.create(null)}}async $jsonTasksSupported(){return!1}async $findExecutable(e,t,i){}};Gv=vs([_s(0,ps),_s(1,as),_s(2,og),_s(3,Fv),_s(4,zg),_s(5,tm),_s(6,Gn),_s(7,$v)],Gv);const Qv=un("IExtHostTask"),Jv=un("IExtHostEditorTabs");class Zv{constructor(e,t,i){this._activeTabIdGetter=i,this._parentGroup=t,this.acceptDtoUpdate(e)}get apiObject(){if(!this._apiObject){const e=this,t={get isActive(){return e._dto.id===e._activeTabIdGetter()},get label(){return e._dto.label},get input(){return e._input},get isDirty(){return e._dto.isDirty},get isPinned(){return e._dto.isPinned},get isPreview(){return e._dto.isPreview},get group(){return e._parentGroup.apiObject}};this._apiObject=Object.freeze(t)}return this._apiObject}get tabId(){return this._dto.id}acceptDtoUpdate(e){this._dto=e,this._input=this._initInput()}_initInput(){switch(this._dto.input.kind){case 1:return new kd(pt.revive(this._dto.input.uri));case 2:return new Id(pt.revive(this._dto.input.original),pt.revive(this._dto.input.modified));case 3:return new Td(pt.revive(this._dto.input.base),pt.revive(this._dto.input.input1),pt.revive(this._dto.input.input2),pt.revive(this._dto.input.result));case 6:return new Pd(pt.revive(this._dto.input.uri),this._dto.input.viewType);case 7:return new Ad(this._dto.input.viewType);case 4:return new Rd(pt.revive(this._dto.input.uri),this._dto.input.notebookType);case 5:return new Fd(pt.revive(this._dto.input.original),pt.revive(this._dto.input.modified),this._dto.input.notebookType);case 8:return new $d;case 9:return new Ld(pt.revive(this._dto.input.uri),pt.revive(this._dto.input.inputBoxUri));default:return}}}class Yv{constructor(e,t){this._tabs=[],this._activeTabId="",this._dto=e,this._activeGroupIdGetter=t;for(const i of e.tabs)i.isActive&&(this._activeTabId=i.id),this._tabs.push(new Zv(i,this,(()=>this.activeTabId())))}get apiObject(){if(!this._apiObject){const e=this,t={get isActive(){return e._dto.groupId===e._activeGroupIdGetter()},get viewColumn(){return Yd.to(e._dto.viewColumn)},get activeTab(){return e._tabs.find((t=>t.tabId===e._activeTabId))?.apiObject},get tabs(){return Object.freeze(e._tabs.map((e=>e.apiObject)))}};this._apiObject=Object.freeze(t)}return this._apiObject}get groupId(){return this._dto.groupId}get tabs(){return this._tabs}acceptGroupDtoUpdate(e){this._dto=e}acceptTabOperation(e){if(0===e.kind){const t=new Zv(e.tabDto,this,(()=>this.activeTabId()));return this._tabs.splice(e.index,0,t),e.tabDto.isActive&&(this._activeTabId=t.tabId),t}if(1===e.kind){const t=this._tabs.splice(e.index,1)[0];if(!t)throw new Error(`Tab close updated received for index ${e.index} which does not exist`);return t.tabId===this._activeTabId&&(this._activeTabId=""),t}if(3===e.kind){if(void 0===e.oldIndex)throw new Error("Invalid old index on move IPC");const t=this._tabs.splice(e.oldIndex,1)[0];if(!t)throw new Error(`Tab move updated received for index ${e.oldIndex} which does not exist`);return this._tabs.splice(e.index,0,t),t}const t=this._tabs.find((t=>t.tabId===e.tabDto.id));if(!t)throw new Error("INVALID tab");return e.tabDto.isActive?this._activeTabId=e.tabDto.id:this._activeTabId!==e.tabDto.id||e.tabDto.isActive||(this._activeTabId=""),t.acceptDtoUpdate(e.tabDto),t}activeTabId(){return this._activeTabId}}let Xv=class{constructor(e){this._onDidChangeTabs=new B,this._onDidChangeTabGroups=new B,this._extHostTabGroups=[],this._proxy=e.getProxy(Ft.MainThreadEditorTabs)}get tabGroups(){if(!this._apiObject){const e=this,t={onDidChangeTabGroups:e._onDidChangeTabGroups.event,onDidChangeTabs:e._onDidChangeTabs.event,get all(){return Object.freeze(e._extHostTabGroups.map((e=>e.apiObject)))},get activeTabGroup(){const t=e._activeGroupId;return yi(e._extHostTabGroups.find((e=>e.groupId===t))?.apiObject)},close:async(e,t)=>{const i=Array.isArray(e)?e:[e];return!i.length||(function(e){const t=e;if(void 0!==t.tabs)return!0;return!1}(i[0])?this._closeGroups(i,t):this._closeTabs(i,t))}};this._apiObject=Object.freeze(t)}return this._apiObject}$acceptEditorTabModel(e){const t=function(e,t){const i=[],r=[];for(const n of e)t.has(n)||i.push(n);for(const n of t)e.has(n)||r.push(n);return{removed:i,added:r}}(new Set(this._extHostTabGroups.map((e=>e.groupId))),new Set(e.map((e=>e.groupId)))),i=this._extHostTabGroups.filter((e=>t.removed.includes(e.groupId))).map((e=>e.apiObject)),r=[],n=[];this._extHostTabGroups=e.map((e=>{const i=new Yv(e,(()=>this._activeGroupId));return t.added.includes(i.groupId)?r.push(i.apiObject):n.push(i.apiObject),i}));const s=yi(e.find((e=>!0===e.isActive))?.groupId);void 0!==s&&this._activeGroupId!==s&&(this._activeGroupId=s),this._onDidChangeTabGroups.fire(Object.freeze({opened:r,closed:i,changed:n}))}$acceptTabGroupUpdate(e){const t=this._extHostTabGroups.find((t=>t.groupId===e.groupId));if(!t)throw new Error("Update Group IPC call received before group creation.");t.acceptGroupDtoUpdate(e),e.isActive&&(this._activeGroupId=e.groupId),this._onDidChangeTabGroups.fire(Object.freeze({changed:[t.apiObject],opened:[],closed:[]}))}$acceptTabOperation(e){const t=this._extHostTabGroups.find((t=>t.groupId===e.groupId));if(!t)throw new Error("Update Tabs IPC call received before group creation.");const i=t.acceptTabOperation(e);switch(e.kind){case 0:return void this._onDidChangeTabs.fire(Object.freeze({opened:[i.apiObject],closed:[],changed:[]}));case 1:return void this._onDidChangeTabs.fire(Object.freeze({opened:[],closed:[i.apiObject],changed:[]}));case 3:case 2:return void this._onDidChangeTabs.fire(Object.freeze({opened:[],closed:[],changed:[i.apiObject]}))}}_findExtHostTabFromApi(e){for(const t of this._extHostTabGroups)for(const i of t.tabs)if(i.apiObject===e)return i}_findExtHostTabGroupFromApi(e){return this._extHostTabGroups.find((t=>t.apiObject===e))}async _closeTabs(e,t){const i=[];for(const r of e){const e=this._findExtHostTabFromApi(r);if(!e)throw new Error("Tab close: Invalid tab not found!");i.push(e.tabId)}return this._proxy.$closeTab(i,t)}async _closeGroups(e,t){const i=[];for(const r of e){const e=this._findExtHostTabGroupFromApi(r);if(!e)throw new Error("Group close: Invalid group not found!");i.push(e.groupId)}return this._proxy.$closeGroup(i,t)}};Xv=vs([_s(0,ps)],Xv);class e_{constructor(){this.pendingRequests=new Map,this.queue=[],this._onError=new B,this._onExit=new B,this.sequence=1}get onError(){return this._onError.event}get onExit(){return this._onExit.event}onMessage(e){this.messageCallback&&this._onError.fire(new Error("attempt to set more than one 'Message' callback")),this.messageCallback=e}onEvent(e){this.eventCallback&&this._onError.fire(new Error("attempt to set more than one 'Event' callback")),this.eventCallback=e}onRequest(e){this.requestCallback&&this._onError.fire(new Error("attempt to set more than one 'Request' callback")),this.requestCallback=e}sendResponse(e){e.seq>0?this._onError.fire(new Error(`attempt to send more than one response for command ${e.command}`)):this.internalSend("response",e)}sendRequest(e,t,i,r){const n={command:e};if(t&&Object.keys(t).length>0&&(n.arguments=t),this.internalSend("request",n),"number"==typeof r){const t=setTimeout((()=>{clearTimeout(t);const i=this.pendingRequests.get(n.seq);if(i){this.pendingRequests.delete(n.seq);i({type:"response",seq:0,request_seq:n.seq,success:!1,command:e,message:J(0,"Timeout after {0} ms for '{1}'",r,e)})}}),r)}return i&&this.pendingRequests.set(n.seq,i),n.seq}acceptMessage(e){this.messageCallback?this.messageCallback(e):(this.queue.push(e),1===this.queue.length&&this.processQueue())}needsTaskBoundaryBetween(e,t){return"event"!==e.type||"event"!==t.type}async processQueue(){let e;for(;this.queue.length;){if(e&&!this.needsTaskBoundaryBetween(this.queue[0],e)||await cr(0),e=this.queue.shift(),!e)return;switch(e.type){case"event":this.eventCallback?.(e);break;case"request":this.requestCallback?.(e);break;case"response":{const t=e,i=this.pendingRequests.get(t.request_seq);i&&(this.pendingRequests.delete(t.request_seq),i(t));break}}}}internalSend(e,t){t.type=e,t.seq=this.sequence++,this.sendMessage(t)}async cancelPendingRequests(){if(0===this.pendingRequests.size)return Promise.resolve();const e=new Map;this.pendingRequests.forEach(((t,i)=>e.set(i,t))),await cr(500),e.forEach(((e,t)=>{e({type:"response",seq:0,request_seq:t,success:!1,command:"canceled",message:"canceled"}),this.pendingRequests.delete(t)}))}getPendingRequestIds(){return Array.from(this.pendingRequests.keys())}dispose(){this.queue=[]}}function t_(e){return e.type&&(e.label||e.program||e.runtime)}const i_=/^[a-zA-Z][a-zA-Z0-9\+\-\.]+:/;function r_(e){if("string"==typeof e.path)if("number"==typeof e.sourceReference&&e.sourceReference>0);else{if((t=e.path)&&t.match(i_))return pt.parse(e.path);if(Xe(e.path))return pt.file(e.path)}var t;return e.path}function n_(e){if("object"==typeof e.path){const t=pt.revive(e.path);if(t)return t.scheme===Fi.file?t.fsPath:t.toString()}return e.path}function s_(e,t){switch(e.type){case"event":{const i=e;switch(i.event){case"output":case"loadedSource":t(!1,i.body.source);break;case"breakpoint":t(!1,i.body.breakpoint.source)}break}case"request":{const i=e;switch(i.command){case"setBreakpoints":case"breakpointLocations":case"source":case"gotoTargets":t(!0,i.arguments.source);break;case"launchVSCode":i.arguments.args.forEach((e=>t(!1,e)))}break}case"response":{const i=e;if(i.success&&i.body)switch(i.command){case"stackTrace":i.body.stackFrames.forEach((e=>t(!1,e.source)));break;case"loadedSources":i.body.sources.forEach((e=>t(!1,e)));break;case"scopes":i.body.scopes.forEach((e=>t(!1,e.source)));break;case"setFunctionBreakpoints":case"setBreakpoints":i.body.breakpoints.forEach((e=>t(!1,e.source)));break;case"disassemble":{const e=i;e.body?.instructions.forEach((e=>t(!1,e.location)))}}break}}}var o_;un("configurationResolverService"),function(e){e.Unknown="unknown",e.Env="env",e.Config="config",e.Command="command",e.Input="input",e.ExtensionInstallFolder="extensionInstallFolder",e.WorkspaceFolder="workspaceFolder",e.Cwd="cwd",e.WorkspaceFolderBasename="workspaceFolderBasename",e.UserHome="userHome",e.LineNumber="lineNumber",e.SelectedText="selectedText",e.File="file",e.FileWorkspaceFolder="fileWorkspaceFolder",e.RelativeFile="relativeFile",e.RelativeFileDirname="relativeFileDirname",e.FileDirname="fileDirname",e.FileExtname="fileExtname",e.FileBasename="fileBasename",e.FileBasenameNoExtension="fileBasenameNoExtension",e.FileDirnameBasename="fileDirnameBasename",e.ExecPath="execPath",e.ExecInstallFolder="execInstallFolder",e.PathSeparator="pathSeparator"}(o_||(o_={}));class a_ extends Error{constructor(e,t){super(t),this.variable=e}}class l_{static{this.VARIABLE_LHS="${"}static{this.VARIABLE_REGEXP=/\$\{(.*?)\}/g}constructor(e,t,i,r){this._contributedVariables=new Map,this._context=e,this._labelService=t,this._userHomePromise=i,r&&(this._envVariablesPromise=r.then((e=>this.prepareEnv(e))))}prepareEnv(e){if(ge){const t=Object.create(null);return Object.keys(e).forEach((i=>{t[i.toLowerCase()]=e[i]})),t}return e}resolveWithEnvironment(e,t,i){return this.recursiveResolve({env:this.prepareEnv(e),userHome:void 0},t?t.uri:void 0,i)}async resolveAsync(e,t){const i={env:await this._envVariablesPromise,userHome:await this._userHomePromise};return this.recursiveResolve(i,e?e.uri:void 0,t)}async resolveAnyBase(e,t,i,r){const n=Ss(t);ge&&n.windows?Object.keys(n.windows).forEach((e=>n[e]=n.windows[e])):fe&&n.osx?Object.keys(n.osx).forEach((e=>n[e]=n.osx[e])):me&&n.linux&&Object.keys(n.linux).forEach((e=>n[e]=n.linux[e])),delete n.windows,delete n.osx,delete n.linux;const s={env:await this._envVariablesPromise,userHome:await this._userHomePromise};return this.recursiveResolve(s,e?e.uri:void 0,n,i,r)}async resolveAnyAsync(e,t,i){return this.resolveAnyBase(e,t,i)}async resolveAnyMap(e,t,i){const r=new Map;return{newConfig:await this.resolveAnyBase(e,t,i,r),resolvedVariables:r}}resolveWithInteractionReplace(e,t,i,r){throw new Error("resolveWithInteractionReplace not implemented.")}resolveWithInteraction(e,t,i,r){throw new Error("resolveWithInteraction not implemented.")}contributeVariable(e,t){if(this._contributedVariables.has(e))throw new Error("Variable "+e+" is contributed twice.");this._contributedVariables.set(e,t)}async recursiveResolve(e,t,i,r,n){if(hi(i))return this.resolveString(e,t,i,r,n);if(Array.isArray(i))return Promise.all(i.map((i=>this.recursiveResolve(e,t,i,r,n))));if(pi(i)){const s=Object.create(null),o=await Promise.all(Object.keys(i).map((async s=>[await this.resolveString(e,t,s,r,n),await this.recursiveResolve(e,t,i[s],r,n)])));for(const[e,t]of o)s[e]=t;return s}return i}resolveString(e,t,i,r,n){return function(e,t,i){const r=[];let n=0;for(const s of e.matchAll(t)){if(r.push(e.slice(n,s.index)),void 0===s.index)throw new Error("match.index should be defined");n=s.index+s[0].length,r.push(i(s[0],...s.slice(1),s.index,e,s.groups))}return r.push(e.slice(n)),Promise.all(r).then((e=>e.join("")))}(i,l_.VARIABLE_REGEXP,(async(i,s)=>{if(s.includes(l_.VARIABLE_LHS))return i;let o=await this.evaluateSingleVariable(e,i,s,t,r);return n?.set(s,o),o!==i&&hi(o)&&o.match(l_.VARIABLE_REGEXP)&&(o=await this.resolveString(e,t,o,r,n)),o}))}fsPath(e){return this._labelService?this._labelService.getUriLabel(e,{noPrefix:!0}):e.fsPath}async evaluateSingleVariable(e,t,i,r,n){let s;const o=i.split(":");o.length>1&&(i=o[0],s=o[1]);const a=e=>{const i=this._context.getFilePath();if(i)return hm(i);throw new a_(e,J(0,"Variable {0} can not be resolved. Please open an editor.",t))},l=e=>{const i=a(e);if(this._context.getWorkspaceFolderPathForFile){const e=this._context.getWorkspaceFolderPathForFile();if(e)return hm(e)}throw new a_(e,J(0,"Variable {0}: can not find workspace folder of '{1}'.",t,nt(i)))},c=e=>{if(s){const i=this._context.getFolderUri(s);if(i)return i;throw new a_(e,J(0,"Variable {0} can not be resolved. No such folder '{1}'.",t,s))}if(r)return r;if(this._context.getWorkspaceFolderCount()>1)throw new a_(e,J(0,"Variable {0} can not be resolved in a multi folder workspace. Scope this variable using ':' and a workspace folder name.",t));throw new a_(e,J(0,"Variable {0} can not be resolved. Please open a folder.",t))};switch(i){case"env":if(s){if(e.env){const t=e.env[ge?s.toLowerCase():s];if(hi(t))return t}return""}throw new a_(o_.Env,J(0,"Variable {0} can not be resolved because no environment variable name is given.",t));case"config":if(s){const e=this._context.getConfigurationValue(r,s);if(_i(e))throw new a_(o_.Config,J(0,"Variable {0} can not be resolved because setting '{1}' not found.",t,s));if(pi(e))throw new a_(o_.Config,J(0,"Variable {0} can not be resolved because '{1}' is a structured value.",t,s));return e}throw new a_(o_.Config,J(0,"Variable {0} can not be resolved because no settings name is given.",t));case"command":return this.resolveFromMap(o_.Command,t,s,n,"command");case"input":return this.resolveFromMap(o_.Input,t,s,n,"input");case"extensionInstallFolder":if(s){const e=await this._context.getExtension(s);if(!e)throw new a_(o_.ExtensionInstallFolder,J(0,"Variable {0} can not be resolved because the extension {1} is not installed.",t,s));return this.fsPath(e.extensionLocation)}throw new a_(o_.ExtensionInstallFolder,J(0,"Variable {0} can not be resolved because no extension name is given.",t));default:switch(i){case"workspaceRoot":case"workspaceFolder":return hm(this.fsPath(c(o_.WorkspaceFolder)));case"cwd":return r||s?hm(this.fsPath(c(o_.Cwd))):$e();case"workspaceRootFolderName":case"workspaceFolderBasename":return hm(nt(this.fsPath(c(o_.WorkspaceFolderBasename))));case"userHome":if(e.userHome)return e.userHome;throw new a_(o_.UserHome,J(0,"Variable {0} can not be resolved. UserHome path is not defined",t));case"lineNumber":{const e=this._context.getLineNumber();if(e)return e;throw new a_(o_.LineNumber,J(0,"Variable {0} can not be resolved. Make sure to have a line selected in the active editor.",t))}case"selectedText":{const e=this._context.getSelectedText();if(e)return e;throw new a_(o_.SelectedText,J(0,"Variable {0} can not be resolved. Make sure to have some text selected in the active editor.",t))}case"file":return a(o_.File);case"fileWorkspaceFolder":return l(o_.FileWorkspaceFolder);case"relativeFile":return r||s?it(this.fsPath(c(o_.RelativeFile)),a(o_.RelativeFile)):a(o_.RelativeFile);case"relativeFileDirname":{const e=rt(a(o_.RelativeFileDirname));if(r||s){const t=it(this.fsPath(c(o_.RelativeFileDirname)),e);return 0===t.length?".":t}return e}case"fileDirname":return rt(a(o_.FileDirname));case"fileExtname":return st(a(o_.FileExtname));case"fileBasename":return nt(a(o_.FileBasename));case"fileBasenameNoExtension":{const e=nt(a(o_.FileBasenameNoExtension));return e.slice(0,e.length-st(e).length)}case"fileDirnameBasename":return nt(rt(a(o_.FileDirnameBasename)));case"execPath":{const e=this._context.getExecPath();return e||t}case"execInstallFolder":{const e=this._context.getAppRoot();return e||t}case"pathSeparator":return ot;default:try{const e=s?`${i}:${s}`:i;return this.resolveFromMap(o_.Unknown,t,e,n,void 0)}catch(u){return t}}}}resolveFromMap(e,t,i,r,n){if(i&&r){const s=void 0===n?r[i]:r[n+":"+i];if("string"==typeof s)return s;throw new a_(e,J(0,"Variable {0} can not be resolved because the command has no value.",t))}return t}}const c_=un("IExtHostVariableResolverProvider");class u_ extends l_{constructor(e,t,i,r,n,s,o){function a(){if(i){const e=i.activeEditor();if(e)return e.document.uri;const t=r.tabGroups.all.find((e=>e.isActive))?.activeTab;if(void 0!==t){if(t.input instanceof Id||t.input instanceof Fd)return t.input.modified;if(t.input instanceof kd||t.input instanceof Rd||t.input instanceof Pd)return t.input.uri}}}super({getFolderUri:e=>{const t=s.folders.filter((t=>t.name===e));if(t&&t.length>0)return t[0].uri},getWorkspaceFolderCount:()=>s.folders.length,getConfigurationValue:(e,t)=>n.getConfiguration(void 0,e).get(t),getAppRoot:()=>$e(),getExecPath:()=>Le.VSCODE_EXEC_PATH,getFilePath:()=>{const e=a();if(e)return Ye(e.fsPath)},getWorkspaceFolderPathForFile:()=>{if(t){const e=a();if(e){const i=t.getWorkspaceFolder(e);if(i)return Ye(i.uri.fsPath)}}},getSelectedText:()=>{if(i){const e=i.activeEditor();if(e&&!e.selection.isEmpty)return e.document.getText(e.selection)}},getLineNumber:()=>{if(i){const e=i.activeEditor();if(e)return String(e.selection.end.line+1)}},getExtension:t=>e.getExtension(t)},void 0,o?Promise.resolve(o):void 0,Promise.resolve(Le))}}let d_=class extends x{constructor(t,i,r,n,s){super(),this.extensionService=t,this.workspaceService=i,this.editorService=r,this.configurationService=n,this.editorTabs=s,this._resolver=new e((async()=>{const e=await this.configurationService.getConfigProvider(),t={folders:await this.workspaceService.getWorkspaceFolders2()||[]};return this._register(this.workspaceService.onDidChangeWorkspace((async e=>{t.folders=await this.workspaceService.getWorkspaceFolders2()||[]}))),new u_(this.extensionService,this.workspaceService,this.editorService,this.editorTabs,e,t,this.homeDir())}))}getResolver(){return this._resolver.value}homeDir(){}};d_=vs([_s(0,Gm),_s(1,og),_s(2,Fv),_s(3,zg),_s(4,Jv)],d_);const h_=un("IExtHostDebugService");let p_=class{get onDidStartDebugSession(){return this._onDidStartDebugSession.event}get onDidTerminateDebugSession(){return this._onDidTerminateDebugSession.event}get onDidChangeActiveDebugSession(){return this._onDidChangeActiveDebugSession.event}get activeDebugSession(){return this._activeDebugSession}get onDidReceiveDebugSessionCustomEvent(){return this._onDidReceiveDebugSessionCustomEvent.event}get activeDebugConsole(){return this._activeDebugConsole.value}constructor(e,t,i,r,n,s){this._workspaceService=t,this._extensionService=i,this._configurationService=r,this._editorTabs=n,this._variableResolver=s,this._debugSessions=new Map,this._configProviderHandleCounter=0,this._configProviders=[],this._adapterFactoryHandleCounter=0,this._adapterFactories=[],this._trackerFactoryHandleCounter=0,this._trackerFactories=[],this._debugAdapters=new Map,this._debugAdaptersTrackers=new Map,this._onDidStartDebugSession=new B,this._onDidTerminateDebugSession=new B,this._onDidChangeActiveDebugSession=new B,this._onDidReceiveDebugSessionCustomEvent=new B,this._debugServiceProxy=e.getProxy(Ft.MainThreadDebugService),this._onDidChangeBreakpoints=new B,this._onDidChangeStackFrameFocus=new B,this._activeDebugConsole=new f_(this._debugServiceProxy),this._breakpoints=new Map,this._extensionService.getExtensionRegistry().then((e=>{e.onDidChange((t=>{this.registerAllDebugTypes(e)})),this.registerAllDebugTypes(e)}))}asDebugSourceUri(e,t){const i=e;if("number"==typeof i.sourceReference&&i.sourceReference>0){let e=`debug:${encodeURIComponent(i.path||"")}`,r="?";return t&&(e+=`${r}session=${encodeURIComponent(t.id)}`,r="&"),e+=`${r}ref=${i.sourceReference}`,pt.parse(e)}if(i.path)return pt.file(i.path);throw new Error("cannot create uri from DAP 'source' object; properties 'path' and 'sourceReference' are both missing.")}registerAllDebugTypes(e){const t=[];for(const i of e.getAllExtensionDescriptions())if(i.contributes){const e=i.contributes.debuggers;if(e&&e.length>0)for(const i of e)t_(i)&&t.push(i.type)}this._debugServiceProxy.$registerDebugTypes(t)}get stackFrameFocus(){return this._stackFrameFocus}get onDidChangeStackFrameFocus(){return this._onDidChangeStackFrameFocus.event}get onDidChangeBreakpoints(){return this._onDidChangeBreakpoints.event}get breakpoints(){const e=[];return this._breakpoints.forEach((t=>e.push(t))),e}addBreakpoints(e){const t=e.filter((e=>{const t=e.id;return!this._breakpoints.has(t)&&(this._breakpoints.set(t,e),!0)}));this.fireBreakpointChanges(t,[],[]);const i=[],r=new Map;for(const n of t)if(n instanceof uu){let e=r.get(n.location.uri.toString());e||(e={type:"sourceMulti",uri:n.location.uri,lines:[]},r.set(n.location.uri.toString(),e),i.push(e)),e.lines.push({id:n.id,enabled:n.enabled,condition:n.condition,hitCondition:n.hitCondition,logMessage:n.logMessage,line:n.location.range.start.line,character:n.location.range.start.character})}else n instanceof du&&i.push({type:"function",id:n.id,enabled:n.enabled,hitCondition:n.hitCondition,logMessage:n.logMessage,condition:n.condition,functionName:n.functionName});return this._debugServiceProxy.$registerBreakpoints(i)}removeBreakpoints(e){const t=e.filter((e=>this._breakpoints.delete(e.id)));this.fireBreakpointChanges([],t,[]);const i=t.filter((e=>e instanceof uu)).map((e=>e.id)),r=t.filter((e=>e instanceof du)).map((e=>e.id)),n=t.filter((e=>e instanceof hu)).map((e=>e.id));return this._debugServiceProxy.$unregisterBreakpoints(i,r,n)}startDebugging(e,t,i){return this._debugServiceProxy.$startDebugging(e?e.uri:void 0,t,{parentSessionID:i.parentSession?i.parentSession.id:void 0,lifecycleManagedByParent:i.lifecycleManagedByParent,repl:i.consoleMode===Fu.MergeWithParent?"mergeWithParent":"separate",noDebug:i.noDebug,compact:i.compact,suppressSaveBeforeStart:i.suppressSaveBeforeStart,suppressDebugStatusbar:i.suppressDebugStatusbar??i.debugUI?.simple,suppressDebugToolbar:i.suppressDebugToolbar??i.debugUI?.simple,suppressDebugView:i.suppressDebugView??i.debugUI?.simple})}stopDebugging(e){return this._debugServiceProxy.$stopDebugging(e?e.id:void 0)}registerDebugConfigurationProvider(e,t,i){if(!t)return new _l((()=>{}));const r=this._configProviderHandleCounter++;return this._configProviders.push({type:e,handle:r,provider:t}),this._debugServiceProxy.$registerDebugConfigurationProvider(e,i,!!t.provideDebugConfigurations,!!t.resolveDebugConfiguration,!!t.resolveDebugConfigurationWithSubstitutedVariables,r),new _l((()=>{this._configProviders=this._configProviders.filter((e=>e.provider!==t)),this._debugServiceProxy.$unregisterDebugConfigurationProvider(r)}))}registerDebugAdapterDescriptorFactory(e,t,i){if(!i)return new _l((()=>{}));if(!this.definesDebugType(e,t))throw new Error(`a DebugAdapterDescriptorFactory can only be registered from the extension that defines the '${t}' debugger.`);if(this.getAdapterDescriptorFactoryByType(t))throw new Error("a DebugAdapterDescriptorFactory can only be registered once per a type.");const r=this._adapterFactoryHandleCounter++;return this._adapterFactories.push({type:t,handle:r,factory:i}),this._debugServiceProxy.$registerDebugAdapterDescriptorFactory(t,r),new _l((()=>{this._adapterFactories=this._adapterFactories.filter((e=>e.factory!==i)),this._debugServiceProxy.$unregisterDebugAdapterDescriptorFactory(r)}))}registerDebugAdapterTrackerFactory(e,t){if(!t)return new _l((()=>{}));const i=this._trackerFactoryHandleCounter++;return this._trackerFactories.push({type:e,handle:i,factory:t}),new _l((()=>{this._trackerFactories=this._trackerFactories.filter((e=>e.factory!==t))}))}async $runInTerminal(e,t){return Promise.resolve(void 0)}async $substituteVariables(e,t){let i;const r=await this.getFolder(e);r&&(i={uri:r.uri,name:r.name,index:r.index,toResource:()=>{throw new Error("Not implemented")}});return(await this._variableResolver.getResolver()).resolveAnyAsync(i,t)}createDebugAdapter(e,t){if("implementation"===e.type)return new v_(e.implementation)}createSignService(){}async $startDASession(e,t){const i=this,r=await this.getSession(t);return this.getAdapterDescriptor(this.getAdapterDescriptorFactoryByType(r.type),r).then((t=>{if(!t)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${r.type}' (extension might have failed to activate)`);const n=this.convertToDto(t),s=this.createDebugAdapter(n,r);if(!s)throw new Error(`Couldn't create a debug adapter for type '${r.type}'.`);const o=s;return this._debugAdapters.set(e,o),this.getDebugAdapterTrackers(r).then((t=>(t&&this._debugAdaptersTrackers.set(e,t),o.onMessage((async r=>{if("request"===r.type&&"handshake"===r.command){const e=r,t={type:"response",seq:0,command:e.command,request_seq:e.seq,success:!0};this._signService||(this._signService=this.createSignService());try{if(!this._signService)throw new Error("no signer");{const i=await this._signService.sign(e.arguments.value);t.body={signature:i},o.sendResponse(t)}}catch(_C){t.success=!1,t.message=_C.message,o.sendResponse(t)}}else t&&t.onDidSendMessage&&t.onDidSendMessage(r),r=function(e,t){const i=t?r_:n_,r=Ss(e);return s_(r,((e,t)=>{!e&&t&&(t.path=i(t))})),r}(r,!0),i._debugServiceProxy.$acceptDAMessage(e,r)})),o.onError((i=>{t&&t.onError&&t.onError(i),this._debugServiceProxy.$acceptDAError(e,i.name,i.message,i.stack)})),o.onExit((i=>{t&&t.onExit&&t.onExit(i??void 0,void 0),this._debugServiceProxy.$acceptDAExit(e,i??void 0,void 0)})),t&&t.onWillStartSession&&t.onWillStartSession(),o.startSession())))}))}$sendDAMessage(e,t){t=function(e,t){const i=t?r_:n_,r=Ss(e);return s_(r,((e,t)=>{e&&t&&(t.path=i(t))})),r}(t,!1);const i=this._debugAdaptersTrackers.get(e);i&&i.onWillReceiveMessage&&i.onWillReceiveMessage(t);const r=this._debugAdapters.get(e);r?.sendMessage(t)}$stopDASession(e){const t=this._debugAdaptersTrackers.get(e);this._debugAdaptersTrackers.delete(e),t&&t.onWillStopSession&&t.onWillStopSession();const i=this._debugAdapters.get(e);return this._debugAdapters.delete(e),i?i.stopSession():Promise.resolve(void 0)}$acceptBreakpointsDelta(e){const t=[],i=[],r=[];if(e.added)for(const n of e.added){const e=n.id;if(e&&!this._breakpoints.has(e)){let i;if("function"===n.type)i=new du(n.functionName,n.enabled,n.condition,n.hitCondition,n.logMessage);else if("data"===n.type)i=new hu(n.label,n.dataId,n.canPersist,n.enabled,n.hitCondition,n.condition,n.logMessage);else{const e=pt.revive(n.uri);i=new uu(new Ll(e,new yl(n.line,n.character)),n.enabled,n.condition,n.hitCondition,n.logMessage)}lu(i,e),this._breakpoints.set(e,i),t.push(i)}}if(e.removed)for(const n of e.removed){const e=this._breakpoints.get(n);e&&(this._breakpoints.delete(n),i.push(e))}if(e.changed)for(const n of e.changed)if(n.id){const e=this._breakpoints.get(n.id);if(e){if(e instanceof du&&"function"===n.type){const t=e;t.enabled=n.enabled,t.condition=n.condition,t.hitCondition=n.hitCondition,t.logMessage=n.logMessage,t.functionName=n.functionName}else if(e instanceof uu&&"source"===n.type){const t=e;t.enabled=n.enabled,t.condition=n.condition,t.hitCondition=n.hitCondition,t.logMessage=n.logMessage,t.location=new Ll(pt.revive(n.uri),new yl(n.line,n.character))}r.push(e)}}this.fireBreakpointChanges(t,i,r)}async $acceptStackFrameFocus(e){let t;const i=e.sessionId?await this.getSession(e.sessionId):void 0;if(!i)throw new Error("no DebugSession found for debug focus context");t="thread"===e.kind?new _u(i,e.threadId):new vu(i,e.threadId,e.frameId),this._stackFrameFocus=t,this._onDidChangeStackFrameFocus.fire(this._stackFrameFocus)}$provideDebugConfigurations(e,t,i){return ar((async()=>{const r=this.getConfigProviderByHandle(e);if(!r)throw new Error("no DebugConfigurationProvider found");if(!r.provideDebugConfigurations)throw new Error("DebugConfigurationProvider has no method provideDebugConfigurations");const n=await this.getFolder(t);return r.provideDebugConfigurations(n,i)})).then((e=>{if(!e)throw new Error("nothing returned from DebugConfigurationProvider.provideDebugConfigurations");return e}))}$resolveDebugConfiguration(e,t,i,r){return ar((async()=>{const n=this.getConfigProviderByHandle(e);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfiguration)throw new Error("DebugConfigurationProvider has no method resolveDebugConfiguration");const s=await this.getFolder(t);return n.resolveDebugConfiguration(s,i,r)}))}$resolveDebugConfigurationWithSubstitutedVariables(e,t,i,r){return ar((async()=>{const n=this.getConfigProviderByHandle(e);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfigurationWithSubstitutedVariables)throw new Error("DebugConfigurationProvider has no method resolveDebugConfigurationWithSubstitutedVariables");const s=await this.getFolder(t);return n.resolveDebugConfigurationWithSubstitutedVariables(s,i,r)}))}async $provideDebugAdapter(e,t){const i=this.getAdapterDescriptorFactoryByHandle(e);if(!i)return Promise.reject(new Error("no adapter descriptor factory found for handle"));const r=await this.getSession(t);return this.getAdapterDescriptor(i,r).then((e=>{if(!e)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${r.type}'`);return this.convertToDto(e)}))}async $acceptDebugSessionStarted(e){const t=await this.getSession(e);this._onDidStartDebugSession.fire(t)}async $acceptDebugSessionTerminated(e){const t=await this.getSession(e);t&&(this._onDidTerminateDebugSession.fire(t),this._debugSessions.delete(t.id))}async $acceptDebugSessionActiveChanged(e){this._activeDebugSession=e?await this.getSession(e):void 0,this._onDidChangeActiveDebugSession.fire(this._activeDebugSession)}async $acceptDebugSessionNameChanged(e,t){const i=await this.getSession(e);i?._acceptNameChanged(t)}async $acceptDebugSessionCustomEvent(e,t){const i={session:await this.getSession(e),event:t.event,body:t.body};this._onDidReceiveDebugSessionCustomEvent.fire(i)}convertToDto(e){if(e instanceof pu)return{type:"executable",command:e.command,args:e.args,options:e.options};if(e instanceof gu)return{type:"server",port:e.port,host:e.host};if(e instanceof fu)return{type:"pipeServer",path:e.path};if(e instanceof mu)return{type:"implementation",implementation:e.implementation};throw new Error("convertToDto unexpected type")}getAdapterDescriptorFactoryByType(e){const t=this._adapterFactories.filter((t=>t.type===e));if(t.length>0)return t[0].factory}getAdapterDescriptorFactoryByHandle(e){const t=this._adapterFactories.filter((t=>t.handle===e));if(t.length>0)return t[0].factory}getConfigProviderByHandle(e){const t=this._configProviders.filter((t=>t.handle===e));if(t.length>0)return t[0].provider}definesDebugType(e,t){if(e.contributes){const i=e.contributes.debuggers;if(i&&i.length>0)for(const e of i)if(e.label&&e.type&&e.type===t)return!0}return!1}getDebugAdapterTrackers(e){const t=e.configuration.type,i=this._trackerFactories.filter((e=>e.type===t||"*"===e.type)).map((t=>ar((()=>t.factory.createDebugAdapterTracker(e))).then((e=>e),(e=>null))));return Promise.race([Promise.all(i).then((e=>{const t=e.filter((e=>!!e));if(t.length>0)return new m_(t)})),new Promise((e=>setTimeout((()=>e(void 0)),1e3)))]).catch((e=>{}))}async getAdapterDescriptor(e,t){const i=t.configuration.debugServer;if("number"==typeof i)return Promise.resolve(new gu(i));if(e){const i=await this._extensionService.getExtensionRegistry();return ar((()=>e.createDebugAdapterDescriptor(t,this.daExecutableFromPackage(t,i)))).then((e=>{if(e)return e}))}const r=await this._extensionService.getExtensionRegistry();return Promise.resolve(this.daExecutableFromPackage(t,r))}daExecutableFromPackage(e,t){}fireBreakpointChanges(e,t,i){(e.length>0||t.length>0||i.length>0)&&this._onDidChangeBreakpoints.fire(Object.freeze({added:e,removed:t,changed:i}))}async getSession(e){if(e){if("string"!=typeof e){let t=this._debugSessions.get(e.id);if(!t){const i=await this.getFolder(e.folderUri),r=e.parent?this._debugSessions.get(e.parent):void 0;t=new g_(this._debugServiceProxy,e.id,e.type,e.name,i,e.configuration,r),this._debugSessions.set(t.id,t),this._debugServiceProxy.$sessionCached(t.id)}return t}{const t=this._debugSessions.get(e);if(t)return t}}throw new Error("cannot find session")}getFolder(e){if(e){const t=pt.revive(e);return this._workspaceService.resolveWorkspaceFolder(t)}return Promise.resolve(void 0)}};p_=vs([_s(0,ps),_s(1,og),_s(2,Gm),_s(3,zg),_s(4,Jv),_s(5,c_)],p_);class g_{constructor(e,t,i,r,n,s,o){this._debugServiceProxy=e,this._id=t,this._type=i,this._name=r,this._workspaceFolder=n,this._configuration=s,this._parentSession=o}get id(){return this._id}get type(){return this._type}get name(){return this._name}set name(e){this._name=e,this._debugServiceProxy.$setDebugSessionName(this._id,e)}get parentSession(){return this._parentSession}_acceptNameChanged(e){this._name=e}get workspaceFolder(){return this._workspaceFolder}get configuration(){return this._configuration}customRequest(e,t){return this._debugServiceProxy.$customDebugAdapterRequest(this._id,e,t)}getDebugProtocolBreakpoint(e){return this._debugServiceProxy.$getDebugProtocolBreakpoint(this._id,e.id)}}class f_{constructor(e){this.value=Object.freeze({append(t){e.$appendDebugConsole(t)},appendLine(e){this.append(e+"\n")}})}}class m_{constructor(e){this.trackers=e}onWillStartSession(){this.trackers.forEach((e=>e.onWillStartSession?e.onWillStartSession():void 0))}onWillReceiveMessage(e){this.trackers.forEach((t=>t.onWillReceiveMessage?t.onWillReceiveMessage(e):void 0))}onDidSendMessage(e){this.trackers.forEach((t=>t.onDidSendMessage?t.onDidSendMessage(e):void 0))}onWillStopSession(){this.trackers.forEach((e=>e.onWillStopSession?e.onWillStopSession():void 0))}onError(e){this.trackers.forEach((t=>t.onError?t.onError(e):void 0))}onExit(e,t){this.trackers.forEach((i=>i.onExit?i.onExit(e,t):void 0))}}class v_ extends e_{constructor(e){super(),this.implementation=e,e.onDidSendMessage((e=>{this.acceptMessage(e)}))}startSession(){return Promise.resolve(void 0)}sendMessage(e){this.implementation.handleMessage(e)}stopSession(){return this.implementation.dispose(),Promise.resolve(void 0)}}let __=class extends p_{constructor(e,t,i,r,n,s){super(e,t,i,r,n,s)}};__=vs([_s(0,ps),_s(1,og),_s(2,Gm),_s(3,zg),_s(4,Jv),_s(5,c_)],__);class y_{constructor(e,t,i){this.config=e,this.provider=t,this.sessionToken=i,this.isLimitHit=!1,this.resultCount=0,this.isCanceled=!1,this.filePattern=e.filePattern,this.includePattern=e.includePattern&&qp(e.includePattern),this.maxResults=e.maxResults||void 0,this.exists=e.exists,this.activeCancellationTokens=new Set,this.globalExcludePattern=e.excludePattern&&qp(e.excludePattern)}cancel(){this.isCanceled=!0,this.activeCancellationTokens.forEach((e=>e.cancel())),this.activeCancellationTokens=new Set}search(e){const t=this.config.folderQueries||[];return new Promise(((i,r)=>{const n=t=>{this.resultCount++,e(t)};if(this.isCanceled)return i({limitHit:this.isLimitHit});this.config.extraFileResources&&this.config.extraFileResources.forEach((e=>{const t=e.toString(),i=nt(t);this.globalExcludePattern&&this.globalExcludePattern(t,i)||this.matchFile(n,{base:e,basename:i})})),Promise.all(t.map((e=>this.searchInFolder(e,n)))).then((e=>{i({limitHit:this.isLimitHit,stats:e[0]||void 0})}),(e=>{r(new Error(Yr(e)))}))}))}async searchInFolder(e,t){const i=new Ht,r=this.getSearchOptionsForFolder(e),n=this.initDirectoryTree(),s=new Zp(this.config,e),o=!s.hasSiblingExcludeClauses();let a;try{this.activeCancellationTokens.add(i),a=F.create();const l=await this.provider.provideFileSearchResults({pattern:this.config.filePattern||""},r,i.token),c=a.elapsed(),u=F.create();return this.isCanceled&&!this.isLimitHit?null:(l&&l.forEach((i=>{const r=Ze.relative(e.folder.path,i.path);if(o){const n=nt(i.path);this.matchFile(t,{base:e.folder,relativePath:r,basename:n})}else this.addDirectoryEntries(n,e.folder,r,t)})),this.isCanceled&&!this.isLimitHit?null:(this.matchDirectoryTree(n,s,t),{providerTime:c,postProcessTime:u.elapsed()}))}finally{i.dispose(),this.activeCancellationTokens.delete(i)}}getSearchOptionsForFolder(e){const t=Jp(this.config.includePattern,e.includePattern),i=Jp(this.config.excludePattern,e.excludePattern);return{folder:e.folder,excludes:i,includes:t,useIgnoreFiles:!e.disregardIgnoreFiles,useGlobalIgnoreFiles:!e.disregardGlobalIgnoreFiles,useParentIgnoreFiles:!e.disregardParentIgnoreFiles,followSymlinks:!e.ignoreSymlinks,maxResults:this.config.maxResults,session:this.sessionToken}}initDirectoryTree(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}addDirectoryEntries({pathToEntries:e},t,i,r){if(i===this.filePattern){const e=nt(this.filePattern);this.matchFile(r,{base:t,relativePath:this.filePattern,basename:e})}!function i(r){const n=nt(r),s=rt(r);let o=e[s];o||(o=e[s]=[],i(s)),o.push({base:t,relativePath:r,basename:n})}(i)}matchDirectoryTree({rootEntries:e,pathToEntries:t},i,r){const n=this,s=this.filePattern;!function e(o){const a=function(e){if(!e)return;let t;return i=>{if(!t){const i=e();t=i?Yp(i):{}}return!!t[i]}}((()=>o.map((e=>e.basename))));for(let l=0,c=o.length;l<c;l++){const c=o[l],{relativePath:u,basename:d}=c;if(i.matchesExcludesSync(u,d,s!==d?a:void 0))continue;const h=t[u];if(h)e(h);else{if(u===s)continue;n.matchFile(r,c)}if(n.isLimitHit)break}}(e)}matchFile(e,t){(!this.includePattern||t.relativePath&&this.includePattern(t.relativePath,t.basename))&&((this.exists||this.maxResults&&this.resultCount>=this.maxResults)&&(this.isLimitHit=!0,this.cancel()),this.isLimitHit||e(t))}}class w_{constructor(){this.sessions=new Map}static{this.BATCH_SIZE=512}fileSearch(e,t,i,r){const n=this.getSessionTokenSource(e.cacheKey),s=new y_(e,t,n&&n.token);let o=0;return this.doSearch(s,w_.BATCH_SIZE,(e=>{o+=e.length,i(e.map((e=>this.rawMatchToSearchItem(e))))}),r).then((e=>({limitHit:e.limitHit,stats:{fromCache:!1,type:"fileSearchProvider",resultCount:o,detailStats:e.stats}})))}clearCache(e){const t=this.getSessionTokenSource(e);t?.cancel()}getSessionTokenSource(e){if(e)return this.sessions.has(e)||this.sessions.set(e,new Ht),this.sessions.get(e)}rawMatchToSearchItem(e){return e.relativePath?{resource:Zi(e.base,e.relativePath)}:{resource:e.base}}doSearch(e,t,i,r){r.onCancellationRequested((()=>{e.cancel()}));let n=[];return e.search((e=>{e&&(n.push(e),t>0&&n.length>=t&&(i(n),n=[]))})).then((e=>(n.length&&i(n),e)),(e=>(n.length&&i(n),Promise.reject(e))))}}class b_{constructor(e,t,i,r){this.query=e,this.provider=t,this.fileUtils=i,this.processType=r,this.collector=null,this.isLimitHit=!1,this.resultCount=0}search(e,t){const i=this.query.folderQueries||[],r=new Ht;return t.onCancellationRequested((()=>r.cancel())),new Promise(((t,n)=>{this.collector=new x_(e);let s=!1;const o=(e,t)=>{if(!s&&!this.isLimitHit){const i=this.resultSize(e);C_(e)&&"number"==typeof this.query.maxResults&&this.resultCount+i>this.query.maxResults&&(this.isLimitHit=!0,s=!0,r.cancel(),e=this.trimResultToSize(e,this.query.maxResults-this.resultCount));const n=this.resultSize(e);this.resultCount+=n,(n>0||!C_(e))&&this.collector.add(e,t)}};Promise.all(i.map(((e,t)=>this.searchInFolder(e,(e=>o(e,t)),r.token)))).then((e=>{r.dispose(),this.collector.flush();const i=e.some((e=>!!e&&!!e.limitHit));t({limitHit:this.isLimitHit||i,messages:Wr(e.map((e=>e?.message?Array.isArray(e.message)?e.message:[e.message]:[]))),stats:{type:this.processType}})}),(e=>{r.dispose();const t=Yr(e);n(new Error(t))}))}))}resultSize(e){return C_(e)?Array.isArray(e.ranges)?e.ranges.length:1:0}trimResultToSize(e,t){const i=Array.isArray(e.ranges)?e.ranges:[e.ranges],r=Array.isArray(e.preview.matches)?e.preview.matches:[e.preview.matches];return{ranges:i.slice(0,t),preview:{matches:r.slice(0,t),text:e.preview.text},uri:e.uri}}async searchInFolder(e,t,i){const r=new Zp(this.query,e),n=[],s={report:i=>{if(!this.validateProviderResult(i))return;const s=e.folder.scheme===Fi.file?function(e){if(!e)return;let t;return i=>(t||(t=(e()||Promise.resolve([])).then((e=>e?Yp(e):{}))),t.then((e=>!!e[i])))}((()=>this.fileUtils.readdir(Ji(i.uri)))):void 0,o=Yi(e.folder,i.uri);if(o){const e=r.includedInQuery(o,nt(o),s);sr(e)?n.push(e.then((e=>{e&&t(i)}))):e&&t(i)}}},o=this.getSearchOptionsForFolder(e),a=await this.provider.provideTextSearchResults((l=this.query.contentPattern,{isCaseSensitive:l.isCaseSensitive||!1,isRegExp:l.isRegExp||!1,isWordMatch:l.isWordMatch||!1,isMultiline:l.isMultiline||!1,pattern:l.pattern}),o,s,i);var l;return n.length&&await Promise.all(n),a}validateProviderResult(e){if(C_(e))if(Array.isArray(e.ranges)){if(!Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same type."),!1;if(e.preview.matches.length!==e.ranges.length)return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}else if(Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1;return!0}getSearchOptionsForFolder(e){const t=Jp(this.query.includePattern,e.includePattern),i=Jp(this.query.excludePattern,e.excludePattern),r={folder:pt.from(e.folder),excludes:i,includes:t,useIgnoreFiles:!e.disregardIgnoreFiles,useGlobalIgnoreFiles:!e.disregardGlobalIgnoreFiles,useParentIgnoreFiles:!e.disregardParentIgnoreFiles,followSymlinks:!e.ignoreSymlinks,encoding:e.fileEncoding&&this.fileUtils.toCanonicalName(e.fileEncoding),maxFileSize:this.query.maxFileSize,maxResults:this.query.maxResults,previewOptions:this.query.previewOptions,afterContext:this.query.afterContext,beforeContext:this.query.beforeContext};return r.usePCRE2=this.query.usePCRE2,r}}class x_{constructor(e){this._onResult=e,this._currentFolderIdx=-1,this._currentFileMatch=null,this._batchedCollector=new D_(512,(e=>this.sendItems(e)))}add(e,t){!this._currentFileMatch||this._currentFolderIdx===t&&Ki(this._currentUri,e.uri)||(this.pushToCollector(),this._currentFileMatch=null),this._currentFileMatch||(this._currentFolderIdx=t,this._currentFileMatch={resource:e.uri,results:[]}),this._currentFileMatch.results.push(function(e){return C_(e)?{preview:{matches:jr(e.preview.matches,(e=>({startLineNumber:e.start.line,startColumn:e.start.character,endLineNumber:e.end.line,endColumn:e.end.character}))),text:e.preview.text},ranges:jr(e.ranges,(e=>({startLineNumber:e.start.line,startColumn:e.start.character,endLineNumber:e.end.line,endColumn:e.end.character})))}:{text:e.text,lineNumber:e.lineNumber}}(e))}pushToCollector(){const e=this._currentFileMatch&&this._currentFileMatch.results?this._currentFileMatch.results.length:0;this._batchedCollector.addItem(this._currentFileMatch,e)}flush(){this.pushToCollector(),this._batchedCollector.flush()}sendItems(e){this._onResult(e)}}function C_(e){return!!e.preview}class D_{static{this.TIMEOUT=4e3}static{this.START_BATCH_AFTER_COUNT=50}constructor(e,t){this.maxBatchSize=e,this.cb=t,this.totalNumberCompleted=0,this.batch=[],this.batchSize=0}addItem(e,t){e&&this.addItemToBatch(e,t)}addItems(e,t){e&&this.addItemsToBatch(e,t)}addItemToBatch(e,t){this.batch.push(e),this.batchSize+=t,this.onUpdate()}addItemsToBatch(e,t){this.batch=this.batch.concat(e),this.batchSize+=t,this.onUpdate()}onUpdate(){this.totalNumberCompleted<D_.START_BATCH_AFTER_COUNT||this.batchSize>=this.maxBatchSize?this.flush():this.timeoutHandle||(this.timeoutHandle=setTimeout((()=>{this.flush()}),D_.TIMEOUT))}flush(){this.batchSize&&(this.totalNumberCompleted+=this.batchSize,this.cb(this.batch),this.batch=[],this.batchSize=0,this.timeoutHandle&&(clearTimeout(this.timeoutHandle),this.timeoutHandle=0))}}const S_=un("IExtHostSearch");let E_=class{constructor(e,t,i){this.extHostRpc=e,this._uriTransformer=t,this._logService=i,this._proxy=this.extHostRpc.getProxy(Ft.MainThreadSearch),this._handlePool=0,this._textSearchProvider=new Map,this._textSearchUsedSchemes=new Set,this._fileSearchProvider=new Map,this._fileSearchUsedSchemes=new Set,this._fileSearchManager=new w_}_transformScheme(e){return this._uriTransformer.transformOutgoingScheme(e)}registerTextSearchProvider(e,t){if(this._textSearchUsedSchemes.has(e))throw new Error(`a text search provider for the scheme '${e}' is already registered`);this._textSearchUsedSchemes.add(e);const i=this._handlePool++;return this._textSearchProvider.set(i,t),this._proxy.$registerTextSearchProvider(i,this._transformScheme(e)),w((()=>{this._textSearchUsedSchemes.delete(e),this._textSearchProvider.delete(i),this._proxy.$unregisterProvider(i)}))}registerFileSearchProvider(e,t){if(this._fileSearchUsedSchemes.has(e))throw new Error(`a file search provider for the scheme '${e}' is already registered`);this._fileSearchUsedSchemes.add(e);const i=this._handlePool++;return this._fileSearchProvider.set(i,t),this._proxy.$registerFileSearchProvider(i,this._transformScheme(e)),w((()=>{this._fileSearchUsedSchemes.delete(e),this._fileSearchProvider.delete(i),this._proxy.$unregisterProvider(i)}))}$provideFileSearchResults(e,t,i,r){const n=k_(i),s=this._fileSearchProvider.get(e);if(s)return this._fileSearchManager.fileSearch(n,s,(i=>{this._proxy.$handleFileMatch(e,t,i.map((e=>e.resource)))}),r);throw new Error("unknown provider: "+e)}$clearCache(e){return this._fileSearchManager.clearCache(e),Promise.resolve(void 0)}$provideTextSearchResults(e,t,i,r){const n=this._textSearchProvider.get(e);if(!n||!n.provideTextSearchResults)throw new Error(`Unknown provider ${e}`);const s=k_(i);return this.createTextSearchManager(s,n).search((i=>this._proxy.$handleTextMatch(e,t,i)),r)}$enableExtensionHostSearch(){}createTextSearchManager(e,t){return new b_(e,t,{readdir:e=>Promise.resolve([]),toCanonicalName:e=>e},"textSearchProvider")}};function k_(e){return{...e,folderQueries:e.folderQueries&&e.folderQueries.map(I_),extraFileResources:e.extraFileResources&&e.extraFileResources.map((e=>pt.revive(e)))}}function I_(e){return{...e,folder:pt.revive(e.folder)}}var T_;E_=vs([_s(0,ps),_s(1,fs),_s(2,Gn)],E_);let P_=class{static{T_=this}static{this.InitialState={focused:!0,active:!0}}getState(e){const t=this._state;return{get focused(){return t.focused},get active(){return Yg(e,"windowActivity"),t.active}}}constructor(e){this._onDidChangeWindowState=new B,this.onDidChangeWindowState=this._onDidChangeWindowState.event,this._state=T_.InitialState,this._proxy=e.getProxy(Ft.MainThreadWindow),this._proxy.$getInitialState().then((({isFocused:e,isActive:t})=>{this.onDidChangeWindowProperty("focused",e),this.onDidChangeWindowProperty("active",t)}))}$onDidChangeWindowFocus(e){this.onDidChangeWindowProperty("focused",e)}$onDidChangeWindowActive(e){this.onDidChangeWindowProperty("active",e)}onDidChangeWindowProperty(e,t){t!==this._state[e]&&(this._state={...this._state,[e]:t},this._onDidChangeWindowState.fire(this._state))}openUri(e,t){let i;if("string"==typeof e){i=e;try{e=pt.parse(e)}catch(_C){return Promise.reject(`Invalid uri - '${e}'`)}}return Ut(e.scheme)?Promise.reject("Invalid scheme - cannot be empty"):e.scheme===Fi.command?Promise.reject(`Invalid scheme '${e.scheme}'`):this._proxy.$openUri(e,i,t)}async asExternalUri(e,t){if(Ut(e.scheme))return Promise.reject("Invalid scheme - cannot be empty");const i=await this._proxy.$asExternalUri(e,t);return pt.from(i)}};P_=T_=vs([_s(0,ps)],P_);const A_=un("IExtHostWindow");ss(Nm,Mm,1),ss(Qn,tv,1),ss($v,Lv,1),ss(Jf,Qf,0),ss(zg,Vg,0),ss(gf,pf,0),ss(h_,__,0),ss(gv,pv,0),ss(Fv,Rv,0),ss(Hm,Um,0),ss(zs,class{constructor(){this._systemSchemes=new Set(Object.keys(Fi)),this._providerInfo=new Map,this.extUri=new Wi((e=>{const t=this._providerInfo.get(e.scheme);return void 0!==t&&!(1024&t)}))}$acceptProviderInfos(e,t){null===t?this._providerInfo.delete(e.scheme):this._providerInfo.set(e.scheme,t)}isFreeScheme(e){return!this._providerInfo.has(e)&&!this._systemSchemes.has(e)}getCapabilities(e){return this._providerInfo.get(e)}},0),ss(dv,uv,1),ss(S_,E_,0),ss(cf,lf,0),ss(Qv,Gv,0),ss(tm,lm,0),ss(Cf,Df,0),ss(A_,P_,0),ss(og,sg,0),ss(Lm,$m,0),ss(Gf,jf,0),ss(Jv,Xv,0),ss(c_,d_,0);const R_={enabled:!0,independentColorPoolPerBracketType:!1};class F_{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class $_{constructor(e,t,i,r){this.id=e,this.name=t,this.defaultValue=i,this.schema=r}applyUpdate(e,t){return O_(e,t)}compute(e,t,i){return i}}class L_{constructor(e,t){this.newValue=e,this.didChange=t}}function O_(e,t){if("object"!=typeof e||"object"!=typeof t||!e||!t)return new L_(t,e!==t);if(Array.isArray(e)||Array.isArray(t)){const i=Array.isArray(e)&&Array.isArray(t)&&Mr(e,t);return new L_(t,!i)}let i=!1;for(const r in t)if(t.hasOwnProperty(r)){const n=O_(e[r],t[r]);n.didChange&&(e[r]=n.newValue,i=!0)}return new L_(e,i)}class M_{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return O_(e,t)}validate(e){return this.defaultValue}}class N_{constructor(e,t,i,r){this.id=e,this.name=t,this.defaultValue=i,this.schema=r}applyUpdate(e,t){return O_(e,t)}validate(e){return void 0===e?this.defaultValue:e}compute(e,t,i){return i}}function H_(e,t){return void 0===e?t:"false"!==e&&Boolean(e)}class U_ extends N_{constructor(e,t,i,r=void 0){void 0!==r&&(r.type="boolean",r.default=i),super(e,t,i,r)}validate(e){return H_(e,this.defaultValue)}}class B_ extends N_{static clampedInt(e,t,i,r){return function(e,t,i,r){if(void 0===e)return t;let n=parseInt(e,10);return isNaN(n)?t:(n=Math.max(i,n),n=Math.min(r,n),0|n)}(e,t,i,r)}constructor(e,t,i,r,n,s=void 0){void 0!==s&&(s.type="integer",s.default=i,s.minimum=r,s.maximum=n),super(e,t,i,s),this.minimum=r,this.maximum=n}validate(e){return B_.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}class V_ extends N_{static clamp(e,t,i){return e<t?t:e>i?i:e}static float(e,t){if("number"==typeof e)return e;if(void 0===e)return t;const i=parseFloat(e);return isNaN(i)?t:i}constructor(e,t,i,r,n){void 0!==n&&(n.type="number",n.default=i),super(e,t,i,n),this.validationFn=r}validate(e){return this.validationFn(V_.float(e,this.defaultValue))}}class W_ extends N_{static string(e,t){return"string"!=typeof e?t:e}constructor(e,t,i,r=void 0){void 0!==r&&(r.type="string",r.default=i),super(e,t,i,r)}validate(e){return W_.string(e,this.defaultValue)}}function z_(e,t,i,r){return"string"!=typeof e?t:r&&e in r?r[e]:-1===i.indexOf(e)?t:e}class j_ extends N_{constructor(e,t,i,r,n=void 0){void 0!==n&&(n.type="string",n.enum=r,n.default=i),super(e,t,i,n),this._allowedValues=r}validate(e){return z_(e,this.defaultValue,this._allowedValues)}}class q_ extends $_{constructor(e,t,i,r,n,s,o=void 0){void 0!==o&&(o.type="string",o.enum=n,o.default=r),super(e,t,i,o),this._allowedValues=n,this._convert=s}validate(e){return"string"!=typeof e||-1===this._allowedValues.indexOf(e)?this.defaultValue:this._convert(e)}}var K_;!function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"}(K_||(K_={}));class G_ extends $_{constructor(){super(50,"fontLigatures",G_.OFF,{anyOf:[{type:"boolean",description:J(0,"Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:J(0,"Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:J(0,"Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return void 0===e?this.defaultValue:"string"==typeof e?"false"===e?G_.OFF:"true"===e?G_.ON:e:Boolean(e)?G_.ON:G_.OFF}}G_.OFF='"liga" off, "calt" off',G_.ON='"liga" on, "calt" on';class Q_ extends $_{constructor(){super(53,"fontVariations",Q_.OFF,{anyOf:[{type:"boolean",description:J(0,"Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:J(0,"Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:J(0,"Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return void 0===e?this.defaultValue:"string"==typeof e?"false"===e?Q_.OFF:"true"===e?Q_.TRANSLATE:e:Boolean(e)?Q_.TRANSLATE:Q_.OFF}compute(e,t,i){return e.fontInfo.fontVariationSettings}}Q_.OFF="normal",Q_.TRANSLATE="translate";class J_ extends $_{constructor(){super(52,"fontWeight",ly.fontWeight,{anyOf:[{type:"number",minimum:J_.MINIMUM_VALUE,maximum:J_.MAXIMUM_VALUE,errorMessage:J(0,'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:J_.SUGGESTION_VALUES}],default:ly.fontWeight,description:J(0,'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return"normal"===e||"bold"===e?e:String(B_.clampedInt(e,ly.fontWeight,J_.MINIMUM_VALUE,J_.MAXIMUM_VALUE))}}J_.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],J_.MINIMUM_VALUE=1,J_.MAXIMUM_VALUE=1e3;class Z_ extends M_{constructor(){super(142)}compute(e,t,i){return Z_.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,i=Math.floor(e.paddingTop/e.lineHeight);let r=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(r=Math.max(r,t-1));const n=(i+e.viewLineCount+r)/(e.pixelRatio*e.height);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:r,desiredRatio:n,minimapLineCount:Math.floor(e.viewLineCount/n)}}static _computeMinimapLayout(e,t){const i=e.outerWidth,r=e.outerHeight,n=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(n*r),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:r};const s=t.stableMinimapLayoutInput,o=s&&e.outerHeight===s.outerHeight&&e.lineHeight===s.lineHeight&&e.typicalHalfwidthCharacterWidth===s.typicalHalfwidthCharacterWidth&&e.pixelRatio===s.pixelRatio&&e.scrollBeyondLastLine===s.scrollBeyondLastLine&&e.paddingTop===s.paddingTop&&e.paddingBottom===s.paddingBottom&&e.minimap.enabled===s.minimap.enabled&&e.minimap.side===s.minimap.side&&e.minimap.size===s.minimap.size&&e.minimap.showSlider===s.minimap.showSlider&&e.minimap.renderCharacters===s.minimap.renderCharacters&&e.minimap.maxColumn===s.minimap.maxColumn&&e.minimap.scale===s.minimap.scale&&e.verticalScrollbarWidth===s.verticalScrollbarWidth&&e.isViewportWrapping===s.isViewportWrapping,a=e.lineHeight,l=e.typicalHalfwidthCharacterWidth,c=e.scrollBeyondLastLine,u=e.minimap.renderCharacters;let d=n>=2?Math.round(2*e.minimap.scale):e.minimap.scale;const h=e.minimap.maxColumn,p=e.minimap.size,g=e.minimap.side,f=e.verticalScrollbarWidth,m=e.viewLineCount,v=e.remainingWidth,_=e.isViewportWrapping,y=u?2:3;let w=Math.floor(n*r);const b=w/n;let x=!1,C=!1,D=y*d,S=d/n,E=1;if("fill"===p||"fit"===p){const{typicalViewportLineCount:i,extraLinesBeforeFirstLine:s,extraLinesBeyondLastLine:l,desiredRatio:u,minimapLineCount:h}=Z_.computeContainedMinimapLineCount({viewLineCount:m,scrollBeyondLastLine:c,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:r,lineHeight:a,pixelRatio:n});if(m/h>1)x=!0,C=!0,d=1,D=1,S=d/n;else{let r=!1,c=d+1;if("fit"===p){const e=Math.ceil((s+m+l)*D);_&&o&&v<=t.stableFitRemainingWidth?(r=!0,c=t.stableFitMaxMinimapScale):r=e>w}if("fill"===p||r){x=!0;const r=d;D=Math.min(a*n,Math.max(1,Math.floor(1/u))),_&&o&&v<=t.stableFitRemainingWidth&&(c=t.stableFitMaxMinimapScale),d=Math.min(c,Math.max(1,Math.floor(D/y))),d>r&&(E=Math.min(2,d/r)),S=d/n/E,w=Math.ceil(Math.max(i,s+m+l)*D),_?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=v,t.stableFitMaxMinimapScale=d):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const k=Math.floor(h*S),I=Math.min(k,Math.max(0,Math.floor((v-f-2)*S/(l+S)))+8);let T=Math.floor(n*I);const P=T/n;T=Math.floor(T*E);return{renderMinimap:u?1:2,minimapLeft:"left"===g?0:i-I-f,minimapWidth:I,minimapHeightIsEditorHeight:x,minimapIsSampling:C,minimapScale:d,minimapLineHeight:D,minimapCanvasInnerWidth:T,minimapCanvasInnerHeight:w,minimapCanvasOuterWidth:P,minimapCanvasOuterHeight:b}}static computeLayout(e,t){const i=0|t.outerWidth,r=0|t.outerHeight,n=0|t.lineHeight,s=0|t.lineNumbersDigitCount,o=t.typicalHalfwidthCharacterWidth,a=t.maxDigitWidth,l=t.pixelRatio,c=t.viewLineCount,u=e.get(134),d="inherit"===u?e.get(133):u,h="inherit"===d?e.get(129):d,p=e.get(132),g=t.isDominatedByLongLines,f=e.get(56),m=0!==e.get(66).renderType,v=e.get(67),_=e.get(103),y=e.get(82),w=e.get(71),b=e.get(101),x=b.verticalScrollbarSize,C=b.verticalHasArrows,D=b.arrowSize,S=b.horizontalScrollbarSize,E=e.get(42),k="never"!==e.get(108);let I=e.get(64);E&&k&&(I+=16);let T=0;if(m){const e=Math.max(s,v);T=Math.round(e*a)}let P=0;f&&(P=n*t.glyphMarginDecorationLaneCount);let A=0,R=A+P,F=R+T,$=F+I;const L=i-P-T-I;let O=!1,M=!1,N=-1;"inherit"===d&&g?(O=!0,M=!0):"on"===h||"bounded"===h?M=!0:"wordWrapColumn"===h&&(N=p);const H=Z_._computeMinimapLayout({outerWidth:i,outerHeight:r,lineHeight:n,typicalHalfwidthCharacterWidth:o,pixelRatio:l,scrollBeyondLastLine:_,paddingTop:y.top,paddingBottom:y.bottom,minimap:w,verticalScrollbarWidth:x,viewLineCount:c,remainingWidth:L,isViewportWrapping:M},t.memory||new F_);0!==H.renderMinimap&&0===H.minimapLeft&&(A+=H.minimapWidth,R+=H.minimapWidth,F+=H.minimapWidth,$+=H.minimapWidth);const U=L-H.minimapWidth,B=Math.max(1,Math.floor((U-x-2)/o)),V=C?D:0;return M&&(N=Math.max(1,B),"bounded"===h&&(N=Math.min(N,p))),{width:i,height:r,glyphMarginLeft:A,glyphMarginWidth:P,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:R,lineNumbersWidth:T,decorationsLeft:F,decorationsWidth:I,contentLeft:$,contentWidth:U,minimap:H,viewportColumn:B,isWordWrapMinified:O,isViewportWrapping:M,wrappingColumn:N,verticalScrollbarWidth:x,horizontalScrollbarHeight:S,overviewRuler:{top:V,width:x,height:r-2*V,right:0}}}}function Y_(e,t){if("string"!=typeof e)return t;switch(e){case"hidden":return 2;case"visible":return 3;default:return 1}}const X_="inUntrustedWorkspace",ey="editor.unicodeHighlight.allowedCharacters",ty="editor.unicodeHighlight.invisibleCharacters",iy="editor.unicodeHighlight.nonBasicASCII",ry="editor.unicodeHighlight.ambiguousCharacters",ny="editor.unicodeHighlight.includeComments",sy="editor.unicodeHighlight.includeStrings",oy="editor.unicodeHighlight.allowedLocales";function ay(e,t,i){const r=i.indexOf(e);return-1===r?t:i[r]}const ly={fontFamily:fe?"Menlo, Monaco, 'Courier New', monospace":me?"'Droid Sans Mono', 'monospace', monospace":"Consolas, 'Courier New', monospace",fontWeight:"normal",fontSize:fe?12:14,lineHeight:0,letterSpacing:0},cy=[];function uy(e){return cy[e.id]=e,e}var dy;function hy(e,t,i,r,n,s){if(Array.isArray(e)){let o=0;for(const a of e){const e=hy(a,t,i,r,n,s);if(10===e)return e;e>o&&(o=e)}return o}if("string"==typeof e)return r?"*"===e?5:e===i?10:0:0;if(e){const{language:o,pattern:a,scheme:l,hasAccessToAllModels:c,notebookType:u}=e;if(!r&&!c)return 0;u&&n&&(t=n);let d=0;if(l)if(l===t.scheme)d=10;else{if("*"!==l)return 0;d=5}if(o)if(o===i)d=10;else{if("*"!==o)return 0;d=Math.max(d,5)}if(u)if(u===s)d=10;else{if("*"!==u||void 0===s)return 0;d=Math.max(d,5)}if(a){let e;if(e="string"==typeof a?a:Object.assign(Object.assign({},a),{base:Ye(a.base)}),e!==t.fsPath&&!jp(e,t.fsPath))return 0;d=10}return d}return 0}function py(e){for(let t=0,i=e.length;t<i;t+=4){const i=e[t+0],r=e[t+1],n=e[t+2],s=e[t+3];e[t+0]=s,e[t+1]=n,e[t+2]=r,e[t+3]=i}}function gy(e){const t=new Uint32Array(function(e){let t=0;if(t+=2,"full"===e.type)t+=1+e.data.length;else{t+=1,t+=3*e.deltas.length;for(const i of e.deltas)i.data&&(t+=i.data.length)}return t}(e));let i=0;if(t[i++]=e.id,"full"===e.type)t[i++]=1,t[i++]=e.data.length,t.set(e.data,i),i+=e.data.length;else{t[i++]=2,t[i++]=e.deltas.length;for(const r of e.deltas)t[i++]=r.start,t[i++]=r.deleteCount,r.data?(t[i++]=r.data.length,t.set(r.data,i),i+=r.data.length):t[i++]=0}return function(e){const t=new Uint8Array(e.buffer,e.byteOffset,4*e.length);return Ie()||py(t),I.wrap(t)}(t)}function fy(e){const t=function(e){const t=e.buffer;if(Ie()||py(t),t.byteOffset%4==0)return new Uint32Array(t.buffer,t.byteOffset,t.length/4);{const e=new Uint8Array(t.byteLength);return e.set(t),new Uint32Array(e.buffer,e.byteOffset,e.length/4)}}(e);let i=0;const r=t[i++];if(1===t[i++]){const e=t[i++],n=t.subarray(i,i+e);return i+=e,{id:r,type:"full",data:n}}const n=t[i++],s=[];for(let o=0;o<n;o++){const e=t[i++],r=t[i++],n=t[i++];let a;n>0&&(a=t.subarray(i,i+n),i+=n),s[o]={start:e,deleteCount:r,data:a}}return{id:r,type:"delta",deltas:s}}function my(e,t){return pt.isUri(e)?Xt(e.scheme,t):ei(e,t+":")}uy(new U_(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:J(0,"Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),uy(new j_(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",J(0,"Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:J(0,"Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),uy(new class extends $_{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[J(0,"Use platform APIs to detect when a Screen Reader is attached"),J(0,"Optimize for usage with a Screen Reader"),J(0,"Assume a screen reader is not attached")],default:"auto",tags:["accessibility"],description:J(0,"Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return 0===i?e.accessibilitySupport:i}}),uy(new B_(3,"accessibilityPageSize",10,1,1073741824,{description:J(0,"Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),uy(new W_(4,"ariaLabel",J(0,"Editor content"))),uy(new U_(5,"ariaRequired",!1,void 0)),uy(new U_(7,"screenReaderAnnounceInlineSuggestion",!0,{description:J(0,"Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),uy(new j_(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",J(0,"Use language configurations to determine when to autoclose brackets."),J(0,"Autoclose brackets only when the cursor is to the left of whitespace."),""],description:J(0,"Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),uy(new j_(8,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",J(0,"Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:J(0,"Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),uy(new j_(9,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",J(0,"Type over closing quotes or brackets only if they were automatically inserted."),""],description:J(0,"Controls whether the editor should type over closing quotes or brackets.")})),uy(new j_(10,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",J(0,"Use language configurations to determine when to autoclose quotes."),J(0,"Autoclose quotes only when the cursor is to the left of whitespace."),""],description:J(0,"Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),uy(new q_(11,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],(function(e){switch(e){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}),{enumDescriptions:[J(0,"The editor will not insert indentation automatically."),J(0,"The editor will keep the current line's indentation."),J(0,"The editor will keep the current line's indentation and honor language defined brackets."),J(0,"The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),J(0,"The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:J(0,"Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),uy(new U_(12,"automaticLayout",!1)),uy(new j_(13,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[J(0,"Use language configurations to determine when to automatically surround selections."),J(0,"Surround with quotes but not brackets."),J(0,"Surround with brackets but not quotes."),""],description:J(0,"Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),uy(new class extends $_{constructor(){const e={enabled:R_.enabled,independentColorPoolPerBracketType:R_.independentColorPoolPerBracketType};super(14,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:J(0,"Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:J(0,"Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{enabled:H_(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:H_(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}),uy(new class extends $_{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(15,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[J(0,"Enables bracket pair guides."),J(0,"Enables bracket pair guides only for the active bracket pair."),J(0,"Disables bracket pair guides.")],default:e.bracketPairs,description:J(0,"Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[J(0,"Enables horizontal guides as addition to vertical bracket pair guides."),J(0,"Enables horizontal guides only for the active bracket pair."),J(0,"Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:J(0,"Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:J(0,"Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:J(0,"Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[J(0,"Highlights the active indent guide."),J(0,"Highlights the active indent guide even if bracket guides are highlighted."),J(0,"Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:J(0,"Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{bracketPairs:ay(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:ay(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:H_(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:H_(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:ay(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}),uy(new U_(114,"stickyTabStops",!1,{description:J(0,"Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),uy(new U_(16,"codeLens",!0,{description:J(0,"Controls whether the editor shows CodeLens.")})),uy(new W_(17,"codeLensFontFamily","",{description:J(0,"Controls the font family for CodeLens.")})),uy(new B_(18,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:J(0,"Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),uy(new U_(19,"colorDecorators",!0,{description:J(0,"Controls whether the editor should render the inline color decorators and color picker.")})),uy(new j_(145,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[J(0,"Make the color picker appear both on click and hover of the color decorator"),J(0,"Make the color picker appear on hover of the color decorator"),J(0,"Make the color picker appear on click of the color decorator")],description:J(0,"Controls the condition to make a color picker appear from a color decorator")})),uy(new B_(20,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:J(0,"Controls the max number of color decorators that can be rendered in an editor at once.")})),uy(new U_(21,"columnSelection",!1,{description:J(0,"Enable that the selection with the mouse and keys is doing column selection.")})),uy(new class extends $_{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(22,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:J(0,"Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:J(0,"Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{insertSpace:H_(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:H_(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}),uy(new U_(23,"contextmenu",!0)),uy(new U_(24,"copyWithSyntaxHighlighting",!0,{description:J(0,"Controls whether syntax highlighting should be copied into the clipboard.")})),uy(new q_(25,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],(function(e){switch(e){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}),{description:J(0,"Control the cursor animation style.")})),uy(new j_(26,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[J(0,"Smooth caret animation is disabled."),J(0,"Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),J(0,"Smooth caret animation is always enabled.")],description:J(0,"Controls whether the smooth caret animation should be enabled.")})),uy(new q_(27,"cursorStyle",K_.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],(function(e){switch(e){case"line":return K_.Line;case"block":return K_.Block;case"underline":return K_.Underline;case"line-thin":return K_.LineThin;case"block-outline":return K_.BlockOutline;case"underline-thin":return K_.UnderlineThin}}),{description:J(0,"Controls the cursor style.")})),uy(new B_(28,"cursorSurroundingLines",0,0,1073741824,{description:J(0,"Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),uy(new j_(29,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[J(0,"`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),J(0,"`cursorSurroundingLines` is enforced always.")],description:J(0,"Controls when `cursorSurroundingLines` should be enforced.")})),uy(new B_(30,"cursorWidth",0,0,1073741824,{markdownDescription:J(0,"Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),uy(new U_(31,"disableLayerHinting",!1)),uy(new U_(32,"disableMonospaceOptimizations",!1)),uy(new U_(33,"domReadOnly",!1)),uy(new U_(34,"dragAndDrop",!0,{description:J(0,"Controls whether the editor should allow moving selections via drag and drop.")})),uy(new class extends U_{constructor(){super(36,"emptySelectionClipboard",!0,{description:J(0,"Controls whether copying without a selection copies the current line.")})}compute(e,t,i){return i&&e.emptySelectionClipboard}}),uy(new class extends $_{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(35,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:J(0,"Controls whether you can drag and drop a file into a text editor by holding down `shift` (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:J(0,"Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[J(0,"Show the drop selector widget after a file is dropped into the editor."),J(0,"Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{enabled:H_(t.enabled,this.defaultValue.enabled),showDropSelector:z_(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}),uy(new class extends $_{constructor(){const e={enabled:!1,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(113,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:J(0,"Shows the nested current scopes during the scroll at the top of the editor.")},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:10,description:J(0,"Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:J(0,"Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:J(0,"Enable scrolling of the sticky scroll widget with the editor's horizontal scrollbar.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{enabled:H_(t.enabled,this.defaultValue.enabled),maxLineCount:B_.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,10),defaultModel:z_(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:H_(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}),uy(new j_(37,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[J(0,"Use a new rendering method with svgs."),J(0,"Use a new rendering method with font characters."),J(0,"Use the stable rendering method.")],description:J(0,"Controls whether whitespace is rendered with a new, experimental method.")})),uy(new W_(38,"extraEditorClassName","")),uy(new V_(39,"fastScrollSensitivity",5,(e=>e<=0?5:e),{markdownDescription:J(0,"Scrolling speed multiplier when pressing `Alt`.")})),uy(new class extends $_{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(40,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:J(0,"Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[J(0,"Never seed search string from the editor selection."),J(0,"Always seed search string from the editor selection, including word at cursor position."),J(0,"Only seed search string from the editor selection.")],description:J(0,"Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[J(0,"Never turn on Find in Selection automatically (default)."),J(0,"Always turn on Find in Selection automatically."),J(0,"Turn on Find in Selection automatically when multiple lines of content are selected.")],description:J(0,"Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:J(0,"Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:fe},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:J(0,"Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:J(0,"Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{cursorMoveOnType:H_(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:"boolean"==typeof e.seedSearchStringFromSelection?e.seedSearchStringFromSelection?"always":"never":z_(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:"boolean"==typeof e.autoFindInSelection?e.autoFindInSelection?"always":"never":z_(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:H_(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:H_(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:H_(t.loop,this.defaultValue.loop)}}}),uy(new U_(41,"fixedOverflowWidgets",!1)),uy(new U_(42,"folding",!0,{description:J(0,"Controls whether the editor has code folding enabled.")})),uy(new j_(43,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[J(0,"Use a language-specific folding strategy if available, else the indentation-based one."),J(0,"Use the indentation-based folding strategy.")],description:J(0,"Controls the strategy for computing folding ranges.")})),uy(new U_(44,"foldingHighlight",!0,{description:J(0,"Controls whether the editor should highlight folded ranges.")})),uy(new U_(45,"foldingImportsByDefault",!1,{description:J(0,"Controls whether the editor automatically collapses import ranges.")})),uy(new B_(46,"foldingMaximumRegions",5e3,10,65e3,{description:J(0,"The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),uy(new U_(47,"unfoldOnClickAfterEndOfLine",!1,{description:J(0,"Controls whether clicking on the empty content after a folded line will unfold the line.")})),uy(new W_(48,"fontFamily",ly.fontFamily,{description:J(0,"Controls the font family.")})),uy(new class extends M_{constructor(){super(49)}compute(e,t,i){return e.fontInfo}}),uy(new G_),uy(new class extends N_{constructor(){super(51,"fontSize",ly.fontSize,{type:"number",minimum:6,maximum:100,default:ly.fontSize,description:J(0,"Controls the font size in pixels.")})}validate(e){const t=V_.float(e,this.defaultValue);return 0===t?ly.fontSize:V_.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}}),uy(new J_),uy(new Q_),uy(new U_(54,"formatOnPaste",!1,{description:J(0,"Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),uy(new U_(55,"formatOnType",!1,{description:J(0,"Controls whether the editor should automatically format the line after typing.")})),uy(new U_(56,"glyphMargin",!0,{description:J(0,"Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),uy(new class extends $_{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[J(0,"Show Peek view of the results (default)"),J(0,"Go to the primary result and show a Peek view"),J(0,"Go to the primary result and enable Peek-less navigation to others")]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(57,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:J(0,"This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:J(0,"Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:J(0,"Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":Object.assign({description:J(0,"Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":Object.assign({description:J(0,"Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":Object.assign({description:J(0,"Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:J(0,"Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:J(0,"Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:J(0,"Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:J(0,"Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:J(0,"Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,i,r,n,s;if(!e||"object"!=typeof e)return this.defaultValue;const o=e;return{multiple:z_(o.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:null!==(t=o.multipleDefinitions)&&void 0!==t?t:z_(o.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:null!==(i=o.multipleTypeDefinitions)&&void 0!==i?i:z_(o.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:null!==(r=o.multipleDeclarations)&&void 0!==r?r:z_(o.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:null!==(n=o.multipleImplementations)&&void 0!==n?n:z_(o.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:null!==(s=o.multipleReferences)&&void 0!==s?s:z_(o.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:W_.string(o.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:W_.string(o.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:W_.string(o.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:W_.string(o.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:W_.string(o.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}),uy(new U_(58,"hideCursorInOverviewRuler",!1,{description:J(0,"Controls whether the cursor should be hidden in the overview ruler.")})),uy(new class extends $_{constructor(){const e={enabled:!0,delay:300,sticky:!0,above:!0};super(59,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:J(0,"Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:J(0,"Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:J(0,"Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:e.above,description:J(0,"Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{enabled:H_(t.enabled,this.defaultValue.enabled),delay:B_.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:H_(t.sticky,this.defaultValue.sticky),above:H_(t.above,this.defaultValue.above)}}}),uy(new U_(60,"inDiffEditor",!1)),uy(new V_(62,"letterSpacing",ly.letterSpacing,(e=>V_.clamp(e,-5,20)),{description:J(0,"Controls the letter spacing in pixels.")})),uy(new class extends $_{constructor(){const e={enabled:!0};super(63,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:J(0,"Enables the Code Action lightbulb in the editor.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;return{enabled:H_(e.enabled,this.defaultValue.enabled)}}}),uy(new class extends $_{constructor(){super(64,"lineDecorationsWidth",10)}validate(e){if("string"==typeof e&&/^\d+(\.\d+)?ch$/.test(e)){return-parseFloat(e.substring(0,e.length-2))}return B_.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?B_.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}}),uy(new class extends V_{constructor(){super(65,"lineHeight",ly.lineHeight,(e=>V_.clamp(e,0,150)),{markdownDescription:J(0,"Controls the line height. \n - Use 0 to automatically compute the line height from the font size.\n - Values between 0 and 8 will be used as a multiplier with the font size.\n - Values greater than or equal to 8 will be used as effective values.")})}compute(e,t,i){return e.fontInfo.lineHeight}}),uy(new class extends $_{constructor(){super(66,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[J(0,"Line numbers are not rendered."),J(0,"Line numbers are rendered as absolute number."),J(0,"Line numbers are rendered as distance in lines to cursor position."),J(0,"Line numbers are rendered every 10 lines.")],default:"on",description:J(0,"Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return void 0!==e&&("function"==typeof e?(t=4,i=e):t="interval"===e?3:"relative"===e?2:"on"===e?1:0),{renderType:t,renderFn:i}}}),uy(new B_(67,"lineNumbersMinChars",5,1,300)),uy(new U_(68,"linkedEditing",!1,{description:J(0,"Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),uy(new U_(69,"links",!0,{description:J(0,"Controls whether the editor should detect links and make them clickable.")})),uy(new j_(70,"matchBrackets","always",["always","near","never"],{description:J(0,"Highlight matching brackets.")})),uy(new class extends $_{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1};super(71,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:J(0,"Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:J(0,"Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[J(0,"The minimap has the same size as the editor contents (and might scroll)."),J(0,"The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),J(0,"The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:J(0,"Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:J(0,"Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:J(0,"Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:J(0,"Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:J(0,"Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:J(0,"Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{enabled:H_(t.enabled,this.defaultValue.enabled),autohide:H_(t.autohide,this.defaultValue.autohide),size:z_(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:z_(t.side,this.defaultValue.side,["right","left"]),showSlider:z_(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:H_(t.renderCharacters,this.defaultValue.renderCharacters),scale:B_.clampedInt(t.scale,1,1,3),maxColumn:B_.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}),uy(new j_(72,"mouseStyle","text",["text","default","copy"])),uy(new V_(73,"mouseWheelScrollSensitivity",1,(e=>0===e?1:e),{markdownDescription:J(0,"A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),uy(new U_(74,"mouseWheelZoom",!1,{markdownDescription:J(0,"Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),uy(new U_(75,"multiCursorMergeOverlapping",!0,{description:J(0,"Merge multiple cursors when they are overlapping.")})),uy(new q_(76,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],(function(e){return"ctrlCmd"===e?fe?"metaKey":"ctrlKey":"altKey"}),{markdownEnumDescriptions:[J(0,"Maps to `Control` on Windows and Linux and to `Command` on macOS."),J(0,"Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:J(0,"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),uy(new j_(77,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[J(0,"Each cursor pastes a single line of the text."),J(0,"Each cursor pastes the full text.")],markdownDescription:J(0,"Controls pasting when the line count of the pasted text matches the cursor count.")})),uy(new B_(78,"multiCursorLimit",1e4,1,1e5,{markdownDescription:J(0,"Controls the max number of cursors that can be in an active editor at once.")})),uy(new U_(79,"occurrencesHighlight",!0,{description:J(0,"Controls whether the editor should highlight semantic symbol occurrences.")})),uy(new U_(80,"overviewRulerBorder",!0,{description:J(0,"Controls whether a border should be drawn around the overview ruler.")})),uy(new B_(81,"overviewRulerLanes",3,0,3)),uy(new class extends $_{constructor(){super(82,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:J(0,"Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:J(0,"Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{top:B_.clampedInt(t.top,0,0,1e3),bottom:B_.clampedInt(t.bottom,0,0,1e3)}}}),uy(new class extends $_{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(83,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:J(0,"Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:J(0,"Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[J(0,"Show the paste selector widget after content is pasted into the editor."),J(0,"Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{enabled:H_(t.enabled,this.defaultValue.enabled),showPasteSelector:z_(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}),uy(new class extends $_{constructor(){const e={enabled:!0,cycle:!0};super(84,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:J(0,"Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:J(0,"Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{enabled:H_(t.enabled,this.defaultValue.enabled),cycle:H_(t.cycle,this.defaultValue.cycle)}}}),uy(new j_(85,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[J(0,"Focus the tree when opening peek"),J(0,"Focus the editor when opening peek")],description:J(0,"Controls whether to focus the inline editor or the tree in the peek widget.")})),uy(new U_(86,"definitionLinkOpensInPeek",!1,{description:J(0,"Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),uy(new class extends $_{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[J(0,"Quick suggestions show inside the suggest widget"),J(0,"Quick suggestions show as ghost text"),J(0,"Quick suggestions are disabled")]}];super(87,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:J(0,"Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:J(0,"Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:J(0,"Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:J(0,"Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the '{0}'-setting which controls if suggestions are triggered by special characters.","#editor.suggestOnTriggerCharacters#")}),this.defaultValue=e}validate(e){if("boolean"==typeof e){const t=e?"on":"off";return{comments:t,strings:t,other:t}}if(!e||"object"!=typeof e)return this.defaultValue;const{other:t,comments:i,strings:r}=e,n=["on","inline","off"];let s,o,a;return s="boolean"==typeof t?t?"on":"off":z_(t,this.defaultValue.other,n),o="boolean"==typeof i?i?"on":"off":z_(i,this.defaultValue.comments,n),a="boolean"==typeof r?r?"on":"off":z_(r,this.defaultValue.strings,n),{other:s,comments:o,strings:a}}}),uy(new B_(88,"quickSuggestionsDelay",10,0,1073741824,{description:J(0,"Controls the delay in milliseconds after which quick suggestions will show up.")})),uy(new U_(89,"readOnly",!1)),uy(new class extends $_{constructor(){super(90,"readOnlyMessage",undefined)}validate(e){return e&&"object"==typeof e?e:this.defaultValue}}),uy(new U_(91,"renameOnType",!1,{description:J(0,"Controls whether the editor auto renames on type."),markdownDeprecationMessage:J(0,"Deprecated, use `editor.linkedEditing` instead.")})),uy(new U_(92,"renderControlCharacters",!0,{description:J(0,"Controls whether the editor should render control characters."),restricted:!0})),uy(new j_(93,"renderFinalNewline",me?"dimmed":"on",["off","on","dimmed"],{description:J(0,"Render last line number when the file ends with a newline.")})),uy(new j_(94,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",J(0,"Highlights both the gutter and the current line.")],description:J(0,"Controls how the editor should render the current line highlight.")})),uy(new U_(95,"renderLineHighlightOnlyWhenFocus",!1,{description:J(0,"Controls if the editor should render the current line highlight only when the editor is focused.")})),uy(new j_(96,"renderValidationDecorations","editable",["editable","on","off"])),uy(new j_(97,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",J(0,"Render whitespace characters except for single spaces between words."),J(0,"Render whitespace characters only on selected text."),J(0,"Render only trailing whitespace characters."),""],description:J(0,"Controls how the editor should render whitespace characters.")})),uy(new B_(98,"revealHorizontalRightPadding",15,0,1e3)),uy(new U_(99,"roundedSelection",!0,{description:J(0,"Controls whether selections should have rounded corners.")})),uy(new class extends $_{constructor(){const e=[],t={type:"number",description:J(0,"Number of monospace characters at which this editor ruler will render.")};super(100,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:J(0,"Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:J(0,"Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if("number"==typeof i)t.push({column:B_.clampedInt(i,0,0,1e4),color:null});else if(i&&"object"==typeof i){const e=i;t.push({column:B_.clampedInt(e.column,0,0,1e4),color:e.color})}return t.sort(((e,t)=>e.column-t.column)),t}return this.defaultValue}}),uy(new class extends $_{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(101,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[J(0,"The vertical scrollbar will be visible only when necessary."),J(0,"The vertical scrollbar will always be visible."),J(0,"The vertical scrollbar will always be hidden.")],default:"auto",description:J(0,"Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[J(0,"The horizontal scrollbar will be visible only when necessary."),J(0,"The horizontal scrollbar will always be visible."),J(0,"The horizontal scrollbar will always be hidden.")],default:"auto",description:J(0,"Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:J(0,"The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:J(0,"The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:J(0,"Controls whether clicks scroll by page or jump to click position.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e,i=B_.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),r=B_.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:B_.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:Y_(t.vertical,this.defaultValue.vertical),horizontal:Y_(t.horizontal,this.defaultValue.horizontal),useShadows:H_(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:H_(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:H_(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:H_(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:H_(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:B_.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:r,verticalSliderSize:B_.clampedInt(t.verticalSliderSize,r,0,1e3),scrollByPage:H_(t.scrollByPage,this.defaultValue.scrollByPage)}}}),uy(new B_(102,"scrollBeyondLastColumn",4,0,1073741824,{description:J(0,"Controls the number of extra characters beyond which the editor will scroll horizontally.")})),uy(new U_(103,"scrollBeyondLastLine",!0,{description:J(0,"Controls whether the editor will scroll beyond the last line.")})),uy(new U_(104,"scrollPredominantAxis",!0,{description:J(0,"Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),uy(new U_(105,"selectionClipboard",!0,{description:J(0,"Controls whether the Linux primary clipboard should be supported."),included:me})),uy(new U_(106,"selectionHighlight",!0,{description:J(0,"Controls whether the editor should highlight matches similar to the selection.")})),uy(new U_(107,"selectOnLineNumbers",!0)),uy(new j_(108,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[J(0,"Always show the folding controls."),J(0,"Never show the folding controls and reduce the gutter size."),J(0,"Only show the folding controls when the mouse is over the gutter.")],description:J(0,"Controls when the folding controls on the gutter are shown.")})),uy(new U_(109,"showUnused",!0,{description:J(0,"Controls fading out of unused code.")})),uy(new U_(137,"showDeprecated",!0,{description:J(0,"Controls strikethrough deprecated variables.")})),uy(new class extends $_{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(138,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:J(0,"Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[J(0,"Inlay hints are enabled"),J(0,"Inlay hints are showing by default and hide when holding {0}",fe?"Ctrl+Option":"Ctrl+Alt"),J(0,"Inlay hints are hidden by default and show when holding {0}",fe?"Ctrl+Option":"Ctrl+Alt"),J(0,"Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:J(0,"Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:J(0,"Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:J(0,"Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return"boolean"==typeof t.enabled&&(t.enabled=t.enabled?"on":"off"),{enabled:z_(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:B_.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:W_.string(t.fontFamily,this.defaultValue.fontFamily),padding:H_(t.padding,this.defaultValue.padding)}}}),uy(new j_(110,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[J(0,"Show snippet suggestions on top of other suggestions."),J(0,"Show snippet suggestions below other suggestions."),J(0,"Show snippets suggestions with other suggestions."),J(0,"Do not show snippet suggestions.")],description:J(0,"Controls whether snippets are shown with other suggestions and how they are sorted.")})),uy(new class extends $_{constructor(){super(111,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:J(0,"Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:J(0,"Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return e&&"object"==typeof e?{selectLeadingAndTrailingWhitespace:H_(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:H_(e.selectSubwords,this.defaultValue.selectSubwords)}:this.defaultValue}}),uy(new U_(112,"smoothScrolling",!1,{description:J(0,"Controls whether the editor will scroll using an animation.")})),uy(new B_(115,"stopRenderingLineAfter",1e4,-1,1073741824)),uy(new class extends $_{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(116,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[J(0,"Insert suggestion without overwriting text right of the cursor."),J(0,"Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:J(0,"Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:J(0,"Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:J(0,"Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:J(0,"Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[J(0,"Always select a suggestion when automatically triggering IntelliSense."),J(0,"Never select a suggestion when automatically triggering IntelliSense."),J(0,"Select a suggestion only when triggering IntelliSense from a trigger character."),J(0,"Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:J(0,"Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions (`#editor.quickSuggestions#` and `#editor.suggestOnTriggerCharacters#`) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:J(0,"Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:J(0,"Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:J(0,"Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:J(0,"Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:J(0,"Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:J(0,"This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:J(0,"This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:J(0,"When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{insertMode:z_(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:H_(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:H_(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:H_(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:H_(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:z_(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:H_(t.showIcons,this.defaultValue.showIcons),showStatusBar:H_(t.showStatusBar,this.defaultValue.showStatusBar),preview:H_(t.preview,this.defaultValue.preview),previewMode:z_(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:H_(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:H_(t.showMethods,this.defaultValue.showMethods),showFunctions:H_(t.showFunctions,this.defaultValue.showFunctions),showConstructors:H_(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:H_(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:H_(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:H_(t.showFields,this.defaultValue.showFields),showVariables:H_(t.showVariables,this.defaultValue.showVariables),showClasses:H_(t.showClasses,this.defaultValue.showClasses),showStructs:H_(t.showStructs,this.defaultValue.showStructs),showInterfaces:H_(t.showInterfaces,this.defaultValue.showInterfaces),showModules:H_(t.showModules,this.defaultValue.showModules),showProperties:H_(t.showProperties,this.defaultValue.showProperties),showEvents:H_(t.showEvents,this.defaultValue.showEvents),showOperators:H_(t.showOperators,this.defaultValue.showOperators),showUnits:H_(t.showUnits,this.defaultValue.showUnits),showValues:H_(t.showValues,this.defaultValue.showValues),showConstants:H_(t.showConstants,this.defaultValue.showConstants),showEnums:H_(t.showEnums,this.defaultValue.showEnums),showEnumMembers:H_(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:H_(t.showKeywords,this.defaultValue.showKeywords),showWords:H_(t.showWords,this.defaultValue.showWords),showColors:H_(t.showColors,this.defaultValue.showColors),showFiles:H_(t.showFiles,this.defaultValue.showFiles),showReferences:H_(t.showReferences,this.defaultValue.showReferences),showFolders:H_(t.showFolders,this.defaultValue.showFolders),showTypeParameters:H_(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:H_(t.showSnippets,this.defaultValue.showSnippets),showUsers:H_(t.showUsers,this.defaultValue.showUsers),showIssues:H_(t.showIssues,this.defaultValue.showIssues)}}}),uy(new class extends $_{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1};super(61,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:J(0,"Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover"],enumDescriptions:[J(0,"Show the inline suggestion toolbar whenever an inline suggestion is shown."),J(0,"Show the inline suggestion toolbar when hovering over an inline suggestion.")],description:J(0,"Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:J(0,"Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{enabled:H_(t.enabled,this.defaultValue.enabled),mode:z_(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:z_(t.showToolbar,this.defaultValue.showToolbar,["always","onHover"]),suppressSuggestions:H_(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:H_(t.keepOnBlur,this.defaultValue.keepOnBlur)}}}),uy(new U_(146,"inlineCompletionsAccessibilityVerbose",!1,{description:J(0,"Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),uy(new B_(117,"suggestFontSize",0,0,1e3,{markdownDescription:J(0,"Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),uy(new B_(118,"suggestLineHeight",0,0,1e3,{markdownDescription:J(0,"Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),uy(new U_(119,"suggestOnTriggerCharacters",!0,{description:J(0,"Controls whether suggestions should automatically show up when typing trigger characters.")})),uy(new j_(120,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[J(0,"Always select the first suggestion."),J(0,"Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),J(0,"Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:J(0,"Controls how suggestions are pre-selected when showing the suggest list.")})),uy(new j_(121,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[J(0,"Tab complete will insert the best matching suggestion when pressing tab."),J(0,"Disable tab completions."),J(0,"Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:J(0,"Enables tab completions.")})),uy(new B_(122,"tabIndex",0,-1,1073741824)),uy(new class extends $_{constructor(){const e={nonBasicASCII:X_,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:X_,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(123,"unicodeHighlight",e,{[iy]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,X_],default:e.nonBasicASCII,description:J(0,"Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[ty]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:J(0,"Controls whether characters that just reserve space or have no width at all are highlighted.")},[ry]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:J(0,"Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[ny]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,X_],default:e.includeComments,description:J(0,"Controls whether characters in comments should also be subject to Unicode highlighting.")},[sy]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,X_],default:e.includeStrings,description:J(0,"Controls whether characters in strings should also be subject to Unicode highlighting.")},[ey]:{restricted:!0,type:"object",default:e.allowedCharacters,description:J(0,"Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[oy]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:J(0,"Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(As(e.allowedCharacters,t.allowedCharacters)||(e=Object.assign(Object.assign({},e),{allowedCharacters:t.allowedCharacters}),i=!0)),t.allowedLocales&&e&&(As(e.allowedLocales,t.allowedLocales)||(e=Object.assign(Object.assign({},e),{allowedLocales:t.allowedLocales}),i=!0));const r=super.applyUpdate(e,t);return i?new L_(r.newValue,!0):r}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{nonBasicASCII:ay(t.nonBasicASCII,X_,[!0,!1,X_]),invisibleCharacters:H_(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:H_(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:ay(t.includeComments,X_,[!0,!1,X_]),includeStrings:ay(t.includeStrings,X_,[!0,!1,X_]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if("object"!=typeof e||!e)return t;const i={};for(const[r,n]of Object.entries(e))!0===n&&(i[r]=!0);return i}}),uy(new j_(124,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[J(0,"Unusual line terminators are automatically removed."),J(0,"Unusual line terminators are ignored."),J(0,"Unusual line terminators prompt to be removed.")],description:J(0,"Remove unusual line terminators that might cause problems.")})),uy(new U_(125,"useShadowDOM",!0)),uy(new U_(126,"useTabStops",!0,{description:J(0,"Inserting and deleting whitespace follows tab stops.")})),uy(new j_(127,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[J(0,"Use the default line break rule."),J(0,"Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:J(0,"Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),uy(new W_(128,"wordSeparators",_v,{description:J(0,"Characters that will be used as word separators when doing word related navigations or operations.")})),uy(new j_(129,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[J(0,"Lines will never wrap."),J(0,"Lines will wrap at the viewport width."),J(0,"Lines will wrap at `#editor.wordWrapColumn#`."),J(0,"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:J(0,"Controls how lines should wrap.")})),uy(new W_(130,"wordWrapBreakAfterCharacters"," \t})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),uy(new W_(131,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),uy(new B_(132,"wordWrapColumn",80,1,1073741824,{markdownDescription:J(0,"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),uy(new j_(133,"wordWrapOverride1","inherit",["off","on","inherit"])),uy(new j_(134,"wordWrapOverride2","inherit",["off","on","inherit"])),uy(new class extends M_{constructor(){super(139)}compute(e,t,i){const r=["monaco-editor"];return t.get(38)&&r.push(t.get(38)),e.extraEditorClassName&&r.push(e.extraEditorClassName),"default"===t.get(72)?r.push("mouse-default"):"copy"===t.get(72)&&r.push("mouse-copy"),t.get(109)&&r.push("showUnused"),t.get(137)&&r.push("showDeprecated"),r.join(" ")}}),uy(new U_(144,"defaultColorDecorators",!1,{markdownDescription:J(0,"Controls whether inline color decorations should be shown using the default document color provider")})),uy(new class extends M_{constructor(){super(140)}compute(e,t,i){return e.pixelRatio}}),uy(new U_(141,"tabFocusMode",!1,{markdownDescription:J(0,"Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),uy(new Z_),uy(new class extends M_{constructor(){super(143)}compute(e,t,i){const r=t.get(142);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:r.isWordWrapMinified,isViewportWrapping:r.isViewportWrapping,wrappingColumn:r.wrappingColumn}}}),uy(new class extends $_{constructor(){super(135,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[J(0,"No indentation. Wrapped lines begin at column 1."),J(0,"Wrapped lines get the same indentation as the parent."),J(0,"Wrapped lines get +1 indentation toward the parent."),J(0,"Wrapped lines get +2 indentation toward the parent.")],description:J(0,"Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return 2===t.get(2)?0:i}}),uy(new class extends $_{constructor(){super(136,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[J(0,"Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),J(0,"Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:J(0,"Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return z_(e,"simple",["simple","advanced"])}compute(e,t,i){return 2===t.get(2)?"advanced":i}}),function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"}(dy||(dy={})),un("openerService");const vy=[new em("vscode.executeDocumentHighlights","_executeDocumentHighlights","Execute document highlight provider.",[Yf.Uri,Yf.Position],new Xf("A promise that resolves to an array of DocumentHighlight-instances.",yy(yh.to))),new em("vscode.executeDocumentSymbolProvider","_executeDocumentSymbolProvider","Execute document symbol provider.",[Yf.Uri],new Xf("A promise that resolves to an array of SymbolInformation and DocumentSymbol instances.",((e,t)=>{if(!Ur(e)){class i extends Wl{static to(e){const r=new i(e.name,oh.to(e.kind),e.containerName||"",new Ll(t[0],zd.to(e.range)));return r.detail=e.detail,r.range=r.location.range,r.selectionRange=zd.to(e.selectionRange),r.children=e.children?e.children.map(i.to):[],r}}return e.map(i.to)}}))),new em("vscode.executeFormatDocumentProvider","_executeFormatDocumentProvider","Execute document format provider.",[Yf.Uri,new Yf("options","Formatting options",(e=>!0),(e=>e))],new Xf("A promise that resolves to an array of TextEdits.",yy(nh.to))),new em("vscode.executeFormatRangeProvider","_executeFormatRangeProvider","Execute range format provider.",[Yf.Uri,Yf.Range,new Yf("options","Formatting options",(e=>!0),(e=>e))],new Xf("A promise that resolves to an array of TextEdits.",yy(nh.to))),new em("vscode.executeFormatOnTypeProvider","_executeFormatOnTypeProvider","Execute format on type provider.",[Yf.Uri,Yf.Position,new Yf("ch","Trigger character",(e=>"string"==typeof e),(e=>e)),new Yf("options","Formatting options",(e=>!0),(e=>e))],new Xf("A promise that resolves to an array of TextEdits.",yy(nh.to))),new em("vscode.executeDefinitionProvider","_executeDefinitionProvider","Execute all definition providers.",[Yf.Uri,Yf.Position],new Xf("A promise that resolves to an array of Location or LocationLink instances.",wy)),new em("vscode.executeTypeDefinitionProvider","_executeTypeDefinitionProvider","Execute all type definition providers.",[Yf.Uri,Yf.Position],new Xf("A promise that resolves to an array of Location or LocationLink instances.",wy)),new em("vscode.executeDeclarationProvider","_executeDeclarationProvider","Execute all declaration providers.",[Yf.Uri,Yf.Position],new Xf("A promise that resolves to an array of Location or LocationLink instances.",wy)),new em("vscode.executeImplementationProvider","_executeImplementationProvider","Execute all implementation providers.",[Yf.Uri,Yf.Position],new Xf("A promise that resolves to an array of Location or LocationLink instances.",wy)),new em("vscode.executeReferenceProvider","_executeReferenceProvider","Execute all reference providers.",[Yf.Uri,Yf.Position],new Xf("A promise that resolves to an array of Location-instances.",yy(ph.to))),new em("vscode.executeHoverProvider","_executeHoverProvider","Execute all hover providers.",[Yf.Uri,Yf.Position],new Xf("A promise that resolves to an array of Hover-instances.",yy(fh.to))),new em("vscode.executeSelectionRangeProvider","_executeSelectionRangeProvider","Execute selection range provider.",[Yf.Uri,new Yf("position","A position in a text document",(e=>Array.isArray(e)&&e.every((e=>yl.isPosition(e)))),(e=>e.map(qd.from)))],new Xf("A promise that resolves to an array of ranges.",(e=>e.map((e=>{let t;for(const i of e.reverse())t=new Ql(zd.to(i),t);return t}))))),new em("vscode.executeWorkspaceSymbolProvider","_executeWorkspaceSymbolProvider","Execute all workspace symbol providers.",[Yf.String.with("query","Search string")],new Xf("A promise that resolves to an array of SymbolInformation-instances.",(e=>e.map(lh.to)))),new em("vscode.prepareCallHierarchy","_executePrepareCallHierarchy","Prepare call hierarchy at a position inside a document",[Yf.Uri,Yf.Position],new Xf("A promise that resolves to an array of CallHierarchyItem-instances",(e=>e.map(uh.to)))),new em("vscode.provideIncomingCalls","_executeProvideIncomingCalls","Compute incoming calls for an item",[Yf.CallHierarchyItem],new Xf("A promise that resolves to an array of CallHierarchyIncomingCall-instances",(e=>e.map(dh.to)))),new em("vscode.provideOutgoingCalls","_executeProvideOutgoingCalls","Compute outgoing calls for an item",[Yf.CallHierarchyItem],new Xf("A promise that resolves to an array of CallHierarchyOutgoingCall-instances",(e=>e.map(hh.to)))),new em("vscode.prepareRename","_executePrepareRename","Execute the prepareRename of rename provider.",[Yf.Uri,Yf.Position],new Xf("A promise that resolves to a range and placeholder text.",(e=>{if(e)return{range:zd.to(e.range),placeholder:e.text}}))),new em("vscode.executeDocumentRenameProvider","_executeDocumentRenameProvider","Execute rename provider.",[Yf.Uri,Yf.Position,Yf.String.with("newName","The new symbol name")],new Xf("A promise that resolves to a WorkspaceEdit.",(e=>{if(e){if(e.rejectReason)throw new Error(e.rejectReason);return sh.to(e)}}))),new em("vscode.executeLinkProvider","_executeLinkProvider","Execute document link provider.",[Yf.Uri,Yf.Number.with("linkResolveCount","Number of links that should be resolved, only when links are unresolved.").optional()],new Xf("A promise that resolves to an array of DocumentLink-instances.",(e=>e.map(Ah.to)))),new em("vscode.provideDocumentSemanticTokensLegend","_provideDocumentSemanticTokensLegend","Provide semantic tokens legend for a document",[Yf.Uri],new Xf("A promise that resolves to SemanticTokensLegend.",(e=>{if(e)return new $u(e.tokenTypes,e.tokenModifiers)}))),new em("vscode.provideDocumentSemanticTokens","_provideDocumentSemanticTokens","Provide semantic tokens for a document",[Yf.Uri],new Xf("A promise that resolves to SemanticTokens.",(e=>{if(!e)return;const t=fy(e);return"full"===t.type?new Mu(t.data,void 0):void 0}))),new em("vscode.provideDocumentRangeSemanticTokensLegend","_provideDocumentRangeSemanticTokensLegend","Provide semantic tokens legend for a document range",[Yf.Uri,Yf.Range.optional()],new Xf("A promise that resolves to SemanticTokensLegend.",(e=>{if(e)return new $u(e.tokenTypes,e.tokenModifiers)}))),new em("vscode.provideDocumentRangeSemanticTokens","_provideDocumentRangeSemanticTokens","Provide semantic tokens for a document range",[Yf.Uri,Yf.Range],new Xf("A promise that resolves to SemanticTokens.",(e=>{if(!e)return;const t=fy(e);return"full"===t.type?new Mu(t.data,void 0):void 0}))),new em("vscode.executeCompletionItemProvider","_executeCompletionItemProvider","Execute completion item provider.",[Yf.Uri,Yf.Position,Yf.String.with("triggerCharacter","Trigger completion when the user types the character, like `,` or `(`").optional(),Yf.Number.with("itemResolveCount","Number of completions to resolve (too large numbers slow down completions)").optional()],new Xf("A promise that resolves to a CompletionList-instance.",((e,t,i)=>{if(!e)return new pc([]);const r=e.suggestions.map((e=>Dh.to(e,i)));return new pc(r,e.incomplete)}))),new em("vscode.executeSignatureHelpProvider","_executeSignatureHelpProvider","Execute signature help provider.",[Yf.Uri,Yf.Position,Yf.String.with("triggerCharacter","Trigger signature help when the user types the character, like `,` or `(`").optional()],new Xf("A promise that resolves to SignatureHelp.",(e=>{if(e)return kh.to(e)}))),new em("vscode.executeCodeLensProvider","_executeCodeLensProvider","Execute code lens provider.",[Yf.Uri,Yf.Number.with("itemResolveCount","Number of lenses that should be resolved and returned. Will only return resolved lenses, will impact performance)").optional()],new Xf("A promise that resolves to an array of CodeLens-instances.",((e,t,i)=>yy((e=>new ec(zd.to(e.range),e.command&&i.fromInternal(e.command))))(e)))),new em("vscode.executeCodeActionProvider","_executeCodeActionProvider","Execute code action provider.",[Yf.Uri,new Yf("rangeOrSelection","Range in a text document. Some refactoring provider requires Selection object.",(e=>wl.isRange(e)),(e=>bl.isSelection(e)?Wd.from(e):zd.from(e))),Yf.String.with("kind","Code action kind to return code actions for").optional(),Yf.Number.with("itemResolveCount","Number of code actions to resolve (too large numbers slow down code actions)").optional()],new Xf("A promise that resolves to an array of Command-instances.",((e,t,i)=>yy((e=>{if(e._isSynthetic){if(!e.command)throw new Error("Synthetic code actions must have a command");return i.fromInternal(e.command)}{const t=new ql(e.title,e.kind?new Kl(e.kind):void 0);return e.edit&&(t.edit=sh.to(e.edit)),e.command&&(t.command=i.fromInternal(e.command)),t.isPreferred=e.isPreferred,t}}))(e)))),new em("vscode.executeDocumentColorProvider","_executeDocumentColorProvider","Execute document color provider.",[Yf.Uri],new Xf("A promise that resolves to an array of ColorInformation objects.",(e=>e?e.map((e=>new Ec(zd.to(e.range),Fh.to(e.color)))):[]))),new em("vscode.executeColorPresentationProvider","_executeColorPresentationProvider","Execute color presentation provider.",[new Yf("color","The color to show and insert",(e=>e instanceof Sc),Fh.from),new Yf("context","Context object with uri and range",(e=>!0),(e=>({uri:e.uri,range:zd.from(e.range)})))],new Xf("A promise that resolves to an array of ColorPresentation objects.",(e=>e?e.map(Rh.to):[]))),new em("vscode.executeInlayHintProvider","_executeInlayHintProvider","Execute inlay hints provider",[Yf.Uri,Yf.Range],new Xf("A promise that resolves to an array of Inlay objects",((e,t,i)=>e.map(Ih.to.bind(void 0,i))))),new em("vscode.executeFoldingRangeProvider","_executeFoldingRangeProvider","Execute folding range provider",[Yf.Uri],new Xf("A promise that resolves to an array of FoldingRange objects",((e,t)=>{if(e)return e.map(Hh.to)}))),new em("vscode.resolveNotebookContentProviders","_resolveNotebookContentProvider","Resolve Notebook Content Providers",[],new Xf("A promise that resolves to an array of NotebookContentProvider static info objects.",yy((e=>({viewType:e.viewType,displayName:e.displayName,options:{transientOutputs:e.options.transientOutputs,transientCellMetadata:e.options.transientCellMetadata,transientDocumentMetadata:e.options.transientDocumentMetadata},filenamePattern:e.filenamePattern.map((e=>Xh.to(e)))}))))),new em("vscode.executeInlineValueProvider","_executeInlineValueProvider","Execute inline value provider",[Yf.Uri,Yf.Range],new Xf("A promise that resolves to an array of InlineValue objects",(e=>e.map(vh.to)))),new em("vscode.open","_workbench.open","Opens the provided resource in the editor. Can be a text or binary file, or an http(s) URL. If you need more control over the options for opening a text file, use vscode.window.showTextDocument instead.",[new Yf("uriOrString","Uri-instance or string (only http/https)",(e=>pt.isUri(e)||"string"==typeof e&&function(e,...t){return t.some((t=>my(e,t)))}(e,Fi.http,Fi.https)),(e=>e)),new Yf("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",(e=>void 0===e||"number"==typeof e||"object"==typeof e),(e=>e?"number"==typeof e?[Yd.from(e),void 0]:[Yd.from(e.viewColumn),Bh.from(e)]:e)).optional(),Yf.String.with("label","").optional()],Xf.Void),new em("vscode.openWith","_workbench.openWith","Opens the provided resource with a specific editor.",[Yf.Uri.with("resource","Resource to open"),Yf.String.with("viewId","Custom editor view id or 'default' to use VS Code's default editor"),new Yf("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",(e=>void 0===e||"number"==typeof e||"object"==typeof e),(e=>e?"number"==typeof e?[Yd.from(e),void 0]:[Yd.from(e.viewColumn),Bh.from(e)]:e)).optional()],Xf.Void),new em("vscode.diff","_workbench.diff","Opens the provided resources in the diff editor to compare their contents.",[Yf.Uri.with("left","Left-hand side resource of the diff editor"),Yf.Uri.with("right","Right-hand side resource of the diff editor"),Yf.String.with("title","Human readable title for the diff editor").optional(),new Yf("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",(e=>void 0===e||"object"==typeof e),(e=>e&&[Yd.from(e.viewColumn),Bh.from(e)])).optional()],Xf.Void),new em("vscode.prepareTypeHierarchy","_executePrepareTypeHierarchy","Prepare type hierarchy at a position inside a document",[Yf.Uri,Yf.Position],new Xf("A promise that resolves to an array of TypeHierarchyItem-instances",(e=>e.map(up.to)))),new em("vscode.provideSupertypes","_executeProvideSupertypes","Compute supertypes for an item",[Yf.TypeHierarchyItem],new Xf("A promise that resolves to an array of TypeHierarchyItem-instances",(e=>e.map(up.to)))),new em("vscode.provideSubtypes","_executeProvideSubtypes","Compute subtypes for an item",[Yf.TypeHierarchyItem],new Xf("A promise that resolves to an array of TypeHierarchyItem-instances",(e=>e.map(up.to)))),new em("vscode.revealTestInExplorer","_revealTestInExplorer","Reveals a test instance in the explorer",[Yf.TestItem],Xf.Void),new em("vscode.experimental.editSession.continue","_workbench.editSessions.actions.continueEditSession","Continue the current edit session in a different workspace",[Yf.Uri.with("workspaceUri","The target workspace to continue the current edit session in")],Xf.Void),new em("setContext","_setContext","Set a custom context key value that can be used in when clauses.",[Yf.String.with("name","The context key name"),new Yf("value","The context key value",(()=>!0),(e=>e))],Xf.Void),new em("vscode.executeMappedEditsProvider","_executeMappedEditsProvider","Execute Mapped Edits Provider",[Yf.Uri,Yf.StringArray,new Yf("MappedEditsContext","Mapped Edits Context",(e=>zh.is(e)),(e=>zh.from(e)))],new Xf("A promise that resolves to a workspace edit or null",(e=>e?sh.to(e):null)))];class _y{static register(e){vy.forEach(e.registerApiCommand,e),this._registerValidateWhenClausesCommand(e)}static _registerValidateWhenClausesCommand(e){e.registerCommand(!1,"_validateWhenClauses",Dn)}}function yy(e){return t=>{if(Array.isArray(t))return t.map(e)}}function wy(e){if(!Array.isArray(e))return;const t=[];for(const r of e)(i=r)&&pt.isUri(i.uri)&&go.isIRange(i.range)&&(go.isIRange(i.originSelectionRange)||go.isIRange(i.targetSelectionRange))?t.push(gh.to(r)):t.push(ph.to(r));var i;return t}class by{constructor(e){const t=e.getProxy(Ft.MainThreadClipboard);this.value=Object.freeze({readText:()=>t.$readText(),writeText:e=>t.$writeText(e)})}}function xy(e){return(t,i,r)=>{let n=null,s=null;if("function"==typeof r.value?(n="value",s=r.value):"function"==typeof r.get&&(n="get",s=r.get),!s)throw new Error("not supported");r[n]=e(s,i)}}function Cy(e,t,i){return xy(((r,n)=>{const s=`$debounce$${n}`,o=`$debounce$result$${n}`;return function(...n){this[o]||(this[o]=i?i():void 0),clearTimeout(this[s]),t&&(this[o]=t(this[o],...n),n=[this[o]]),this[s]=setTimeout((()=>{r.apply(this,n),this[o]=i?i():void 0}),e)}}))}function Dy(e,t,i){const r=e.getProxy(Ft.MainThreadComments);class n{static{this.handlePool=0}constructor(){this._commentControllers=new Map,this._commentControllersByExtension=new Ka,t.registerArgumentProcessor({processArgument:e=>{if(e&&6===e.$mid){const t=this._commentControllers.get(e.handle);return t?t.value:e}if(e&&7===e.$mid){const t=this._commentControllers.get(e.commentControlHandle);if(!t)return e;const i=t.getCommentThread(e.commentThreadHandle);return i?i.value:e}if(e&&(9===e.$mid||8===e.$mid)){const t=this._commentControllers.get(e.thread.commentControlHandle);if(!t)return e;const i=t.getCommentThread(e.thread.commentThreadHandle);return i?8===e.$mid?i.value:{thread:i.value,text:e.text}:e}if(e&&10===e.$mid){const t=this._commentControllers.get(e.thread.commentControlHandle);if(!t)return e;const i=t.getCommentThread(e.thread.commentThreadHandle);if(!i)return e;const r=e.commentUniqueId,n=i.getCommentByUniqueId(r);return n||e}if(e&&11===e.$mid){const t=this._commentControllers.get(e.thread.commentControlHandle);if(!t)return e;const i=t.getCommentThread(e.thread.commentThreadHandle);if(!i)return e;const r=e.text,n=e.commentUniqueId,s=i.getCommentByUniqueId(n);return s?("string"==typeof s.body?s.body=r:s.body=new tc(r),s):e}return e}})}createCommentController(e,t,i){const r=n.handlePool++,s=new o(e,r,t,i);this._commentControllers.set(s.handle,s);const a=this._commentControllersByExtension.get(e.identifier)||[];return a.push(s),this._commentControllersByExtension.set(e.identifier,a),s.value}$createCommentThreadTemplate(e,t,i){const r=this._commentControllers.get(e);r&&r.$createCommentThreadTemplate(t,i)}async $updateCommentThreadTemplate(e,t,i){const r=this._commentControllers.get(e);r&&r.$updateCommentThreadTemplate(t,i)}$deleteCommentThread(e,t){const i=this._commentControllers.get(e);i?.$deleteCommentThread(t)}$provideCommentingRanges(e,t,r){const n=this._commentControllers.get(e);if(!n||!n.commentingRangeProvider)return Promise.resolve(void 0);const s=i.getDocument(pt.revive(t));return ar((async()=>{const e=await n.commentingRangeProvider.provideCommentingRanges(s,r);let t;return t=Array.isArray(e)?{ranges:e,fileComments:!1}:e?{ranges:e.ranges||[],fileComments:e.fileComments||!1}:e??void 0,t})).then((e=>{let t;return e&&(t={ranges:e.ranges.map((e=>zd.from(e))),fileComments:e.fileComments}),t}))}$toggleReaction(e,t,i,r,n){const s=this._commentControllers.get(e);return s&&s.reactionHandler?ar((()=>{const e=s.getCommentThread(t);if(e){const t=e.getCommentByUniqueId(r.uniqueIdInThread);if(void 0!==s&&t&&s.reactionHandler)return s.reactionHandler(t,function(e){return{label:e.label||"",count:e.count||0,iconPath:e.iconPath?pt.revive(e.iconPath):"",authorHasReacted:e.hasReacted||!1}}(n))}return Promise.resolve(void 0)})):Promise.resolve(void 0)}}class s{static{this._handlePool=0}set threadId(e){this._id=e}get threadId(){return this._id}get id(){return this._id}get resource(){return this._uri}get uri(){return this._uri}set range(e){void 0===e==(void 0===this._range)&&e&&this._range&&e.isEqual(this._range)||(this._range=e,this.modifications.range=e,this._onDidUpdateCommentThread.fire())}get range(){return this._range}set canReply(e){this._canReply!==e&&(this._canReply=e,this.modifications.canReply=e,this._onDidUpdateCommentThread.fire())}get canReply(){return this._canReply}get label(){return this._label}set label(e){this._label=e,this.modifications.label=e,this._onDidUpdateCommentThread.fire()}get contextValue(){return this._contextValue}set contextValue(e){this._contextValue=e,this.modifications.contextValue=e,this._onDidUpdateCommentThread.fire()}get comments(){return this._comments}set comments(e){this._comments=e,this.modifications.comments=e,this._onDidUpdateCommentThread.fire()}get collapsibleState(){return this._collapseState}set collapsibleState(e){this._collapseState=e,this.modifications.collapsibleState=e,this._onDidUpdateCommentThread.fire()}get state(){return this._state}set state(e){this._state=e,this.modifications.state=e,this._onDidUpdateCommentThread.fire()}get isDisposed(){return this._isDiposed}constructor(e,t,i,n,o,a,l,c){this._commentControllerHandle=t,this._id=i,this._uri=n,this._range=o,this._comments=a,this.extensionDescription=l,this._isTemplate=c,this.handle=s._handlePool++,this.commentHandle=0,this.modifications=Object.create(null),this._onDidUpdateCommentThread=new B,this.onDidUpdateCommentThread=this._onDidUpdateCommentThread.event,this._canReply=!0,this._commentsMap=new Map,this._acceptInputDisposables=new C,this._acceptInputDisposables.value=new b,void 0===this._id&&(this._id=`${e}.${this.handle}`),r.$createCommentThread(t,this.handle,this._id,this._uri,zd.from(this._range),l.identifier,this._isTemplate),this._localDisposables=[],this._isDiposed=!1,this._localDisposables.push(this.onDidUpdateCommentThread((()=>{this.eventuallyUpdateCommentThread()}))),this.comments=a,this._localDisposables.push({dispose:()=>{r.$deleteCommentThread(t,this.handle)}});const u=this;this.value={get uri(){return u.uri},get range(){return u.range},set range(e){u.range=e},get comments(){return u.comments},set comments(e){u.comments=e},get collapsibleState(){return u.collapsibleState},set collapsibleState(e){u.collapsibleState=e},get canReply(){return u.canReply},set canReply(e){u.canReply=e},get contextValue(){return u.contextValue},set contextValue(e){u.contextValue=e},get label(){return u.label},set label(e){u.label=e},get state(){return u.state},set state(e){u.state=e},dispose:()=>{u.dispose()}}}updateIsTemplate(){this._isTemplate&&(this._isTemplate=!1,this.modifications.isTemplate=!1)}eventuallyUpdateCommentThread(){if(this._isDiposed)return;this.updateIsTemplate(),this._acceptInputDisposables.value||(this._acceptInputDisposables.value=new b);const e=e=>Object.prototype.hasOwnProperty.call(this.modifications,e),t={};e("range")&&(t.range=zd.from(this._range)),e("label")&&(t.label=this.label),e("contextValue")&&(t.contextValue=this.contextValue??null),e("comments")&&(t.comments=this._comments.map((e=>function(e,t,i,r){let n=i.get(t);n||(n=++e.commentHandle,i.set(t,n));void 0!==t.state&&Yg(r,"commentsDraftState");return{mode:t.mode,contextValue:t.contextValue,uniqueIdInThread:n,body:"string"==typeof t.body?t.body:Xd.from(t.body),userName:t.author.name,userIconPath:t.author.iconPath,label:t.label,commentReactions:t.reactions?t.reactions.map((e=>function(e){return{label:e.label,iconPath:e.iconPath?xp(e.iconPath):void 0,count:e.count,hasReacted:e.authorHasReacted}}(e))):void 0,state:t.state,timestamp:t.timestamp?.toJSON()}}(this,e,this._commentsMap,this.extensionDescription)))),e("collapsibleState")&&(t.collapseState=function(e){if(void 0!==e)switch(e){case Tu.Expanded:return Do.Expanded;case Tu.Collapsed:return Do.Collapsed}return Do.Collapsed}(this._collapseState)),e("canReply")&&(t.canReply=this.canReply),e("state")&&(t.state=function(e){if(void 0!==e)switch(e){case Ru.Unresolved:return So.Unresolved;case Ru.Resolved:return So.Resolved}return So.Unresolved}(this._state)),e("isTemplate")&&(t.isTemplate=this._isTemplate),this.modifications={},r.$updateCommentThread(this._commentControllerHandle,this.handle,this._id,this._uri,t)}getCommentByUniqueId(e){for(const t of this._commentsMap){const i=t[0];if(e===t[1])return i}}dispose(){this._isDiposed=!0,this._acceptInputDisposables.dispose(),this._localDisposables.forEach((e=>e.dispose()))}}vs([Cy(100)],s.prototype,"eventuallyUpdateCommentThread",null);class o{get id(){return this._id}get label(){return this._label}get handle(){return this._handle}get commentingRangeProvider(){return this._commentingRangeProvider}set commentingRangeProvider(e){this._commentingRangeProvider=e,r.$updateCommentingRanges(this.handle)}get reactionHandler(){return this._reactionHandler}set reactionHandler(e){this._reactionHandler=e,r.$updateCommentControllerFeatures(this.handle,{reactionHandler:!!e})}get options(){return this._options}set options(e){this._options=e,r.$updateCommentControllerFeatures(this.handle,{options:this._options})}constructor(e,t,i,n){this._extension=e,this._handle=t,this._id=i,this._label=n,this._threads=new Map,r.$registerCommentController(this.handle,i,n);const s=this;this.value=Object.freeze({id:s.id,label:s.label,get options(){return s.options},set options(e){s.options=e},get commentingRangeProvider(){return s.commentingRangeProvider},set commentingRangeProvider(e){s.commentingRangeProvider=e},get reactionHandler(){return s.reactionHandler},set reactionHandler(e){s.reactionHandler=e},createCommentThread:(e,t,i)=>s.createCommentThread(e,t,i).value,dispose:()=>{s.dispose()}}),this._localDisposables=[],this._localDisposables.push({dispose:()=>{r.$unregisterCommentController(this.handle)}})}createCommentThread(e,t,i){void 0===t&&Yg(this._extension,"fileComments");const r=new s(this.id,this.handle,void 0,e,t,i,this._extension,!1);return this._threads.set(r.handle,r),r}$createCommentThreadTemplate(e,t){const i=new s(this.id,this.handle,void 0,pt.revive(e),zd.to(t),[],this._extension,!0);return i.collapsibleState=Do.Expanded,this._threads.set(i.handle,i),i}$updateCommentThreadTemplate(e,t){const i=this._threads.get(e);i&&(i.range=zd.to(t))}$deleteCommentThread(e){const t=this._threads.get(e);t?.dispose(),this._threads.delete(e)}getCommentThread(e){return this._threads.get(e)}dispose(){this._threads.forEach((e=>{e.dispose()})),this._localDisposables.forEach((e=>e.dispose()))}}return new n}var Sy;class Ey{#o;#g;#f;constructor(e,t,i,r,n,s,o,a){this._name=e,this._owner=t,this._maxDiagnosticsTotal=i,this._maxDiagnosticsPerFile=r,this._modelVersionIdProvider=n,this._isDisposed=!1,this._maxDiagnosticsTotal=Math.max(r,i),this.#f=new Li((e=>s.getComparisonKey(e))),this.#o=o,this.#g=a}dispose(){this._isDisposed||(this.#g.fire([...this.#f.keys()]),this.#o?.$clear(this._owner),this.#f.clear(),this._isDisposed=!0)}get name(){return this._checkDisposed(),this._name}set(e,t){if(!e)return void this.clear();this._checkDisposed();let i=[];if(pt.isUri(e)){if(!t)return void this.delete(e);this.#f.set(e,t.slice()),i=[e]}else if(Array.isArray(e)){let t;i=[],e=[...e].sort(Ey._compareIndexedTuplesByUri);for(const r of e){const[e,n]=r;if(t&&e.toString()===t.toString()||(t&&0===this.#f.get(t).length&&this.#f.delete(t),t=e,i.push(e),this.#f.set(e,[])),n){const t=this.#f.get(e);t?.push(...n)}else{const t=this.#f.get(e);t&&(t.length=0)}}}if(this.#g.fire(i),!this.#o)return;const r=[];let n=0;for(const s of i){let e=[];const t=this.#f.get(s);if(t)if(t.length>this._maxDiagnosticsPerFile){e=[];const i=[$l.Error,$l.Warning,$l.Information,$l.Hint];e:for(let r=0;r<4;r++)for(const n of t)if(n.severity===i[r]){if(e.push({...Qd.from(n),modelVersionId:this._modelVersionIdProvider(s)})===this._maxDiagnosticsPerFile)break e}e.push({severity:Po.Info,message:J(0,"Not showing {0} further errors and warnings.",t.length-this._maxDiagnosticsPerFile),startLineNumber:e[e.length-1].startLineNumber,startColumn:e[e.length-1].startColumn,endLineNumber:e[e.length-1].endLineNumber,endColumn:e[e.length-1].endColumn})}else e=t.map((e=>({...Qd.from(e),modelVersionId:this._modelVersionIdProvider(s)})));if(r.push([s,e]),n+=e.length,n>this._maxDiagnosticsTotal)break}this.#o.$changeMany(this._owner,r)}delete(e){this._checkDisposed(),this.#g.fire([e]),this.#f.delete(e),this.#o?.$changeMany(this._owner,[[e,void 0]])}clear(){this._checkDisposed(),this.#g.fire([...this.#f.keys()]),this.#f.clear(),this.#o?.$clear(this._owner)}forEach(e,t){this._checkDisposed();for(const[i,r]of this)e.call(t,i,r,this)}*[Symbol.iterator](){this._checkDisposed();for(const e of this.#f.keys())yield[e,this.get(e)]}get(e){this._checkDisposed();const t=this.#f.get(e);return Array.isArray(t)?Object.freeze(t.slice(0)):[]}has(e){return this._checkDisposed(),Array.isArray(this.#f.get(e))}_checkDisposed(){if(this._isDisposed)throw new Error("illegal state - object is disposed")}static _compareIndexedTuplesByUri(e,t){return e[0].toString()<t[0].toString()?-1:e[0].toString()>t[0].toString()?1:0}}let ky=class{static{Sy=this}static{this._idPool=0}static{this._maxDiagnosticsPerFile=1e3}static{this._maxDiagnosticsTotal=1.1*Sy._maxDiagnosticsPerFile}static _mapper(e){const t=new Li;for(const i of e)t.set(i,i);return{uris:Object.freeze(Array.from(t.values()))}}constructor(e,t,i,r){this._logService=t,this._fileSystemInfoService=i,this._extHostDocumentsAndEditors=r,this._collections=new Map,this._onDidChangeDiagnostics=new j({merge:e=>e.flat(),delay:50}),this.onDidChangeDiagnostics=$.map(this._onDidChangeDiagnostics.event,Sy._mapper),this._proxy=e.getProxy(Ft.MainThreadDiagnostics)}createDiagnosticCollection(e,t){const{_collections:i,_proxy:r,_onDidChangeDiagnostics:n,_logService:s,_fileSystemInfoService:o,_extHostDocumentsAndEditors:a}=this,l=new class{$changeMany(t,i){r.$changeMany(t,i),s.trace("[DiagnosticCollection] change many (extension, owner, uris)",e.value,t,0===i.length?"CLEARING":i)}$clear(t){r.$clear(t),s.trace("[DiagnosticCollection] remove all (extension, owner)",e.value,t)}dispose(){r.dispose()}};let c;if(t)if(i.has(t)){this._logService.warn(`DiagnosticCollection with name '${t}' does already exist.`);do{c=t+Sy._idPool++}while(i.has(c))}else c=t;else t="_generated_diagnostic_collection_name_#"+Sy._idPool++,c=t;return new class extends Ey{constructor(){super(t,c,Sy._maxDiagnosticsTotal,Sy._maxDiagnosticsPerFile,(e=>a.getDocument(e)?.version),o.extUri,l,n),i.set(c,this)}dispose(){super.dispose(),i.delete(c)}}}getDiagnostics(e){if(e)return this._getDiagnostics(e);{const e=new Map,t=[];for(const i of this._collections.values())i.forEach(((i,r)=>{let n=e.get(i.toString());void 0===n&&(n=t.length,e.set(i.toString(),n),t.push([i,[]])),t[n][1]=t[n][1].concat(...r)}));return t}}_getDiagnostics(e){let t=[];for(const i of this._collections.values())i.has(e)&&(t=t.concat(i.get(e)));return t}$acceptMarkersChange(e){if(!this._mirrorCollection){const e="_generated_mirror",t=new Ey(e,e,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,(e=>{}),this._fileSystemInfoService.extUri,void 0,this._onDidChangeDiagnostics);this._collections.set(e,t),this._mirrorCollection=t}for(const[t,i]of e)this._mirrorCollection.set(pt.revive(t),i.map(Qd.to))}};ky=Sy=vs([_s(1,Gn),_s(2,zs)],ky);class Iy{constructor(e){this._proxy=e.getProxy(Ft.MainThreadDialogs)}showOpenDialog(e,t){return t?.allowUIResources&&Yg(e,"showLocal"),this._proxy.$showOpenDialog(t).then((e=>e?e.map((e=>pt.revive(e))):void 0))}showSaveDialog(e){return this._proxy.$showSaveDialog(e).then((e=>e?pt.revive(e):void 0))}}class Ty{static{this._handlePool=0}constructor(e,t,i){this._documentsAndEditors=t,this._logService=i,this._documentContentProviders=new Map,this._proxy=e.getProxy(Ft.MainThreadDocumentContentProviders)}registerTextDocumentContentProvider(e,t){if(Object.keys(Fi).indexOf(e)>=0)throw new Error(`scheme '${e}' already registered`);const i=Ty._handlePool++;let n;return this._documentContentProviders.set(i,t),this._proxy.$registerTextContentProvider(i,e),"function"==typeof t.onDidChange&&(n=t.onDidChange((t=>{t.scheme===e?this._documentsAndEditors.getDocument(t)&&this.$provideTextDocumentContent(i,t).then((e=>{if(!e&&"string"!=typeof e)return;const i=this._documentsAndEditors.getDocument(t);if(!i)return;const r=Kt(e);return i.equalLines(r)?void 0:this._proxy.$onVirtualDocumentChange(t,e)}),r):this._logService.warn(`Provider for scheme '${e}' is firing event for schema '${t.scheme}' which will be IGNORED`)}))),new _l((()=>{this._documentContentProviders.delete(i)&&this._proxy.$unregisterTextContentProvider(i),n&&(n.dispose(),n=void 0)}))}$provideTextDocumentContent(e,t){const i=this._documentContentProviders.get(e);return i?Promise.resolve(i.provideTextDocumentContent(pt.revive(t),Ot.None)):Promise.reject(new Error(`unsupported uri-scheme: ${t.scheme}`))}}class Py{constructor(e,t,i,r={timeout:1500,errors:3}){this._logService=e,this._documents=t,this._mainThreadBulkEdits=i,this._thresholds=r,this._callbacks=new A,this._badListeners=new WeakMap}dispose(){this._callbacks.clear()}getOnWillSaveTextDocumentEvent(e){return(t,i,r)=>{const n={dispose:this._callbacks.push([t,i,e])};return Array.isArray(r)&&r.push(n),n}}async $participateInSave(e,t){const i=pt.revive(e);let r=!1;const n=setTimeout((()=>r=!0),this._thresholds.timeout),s=[];try{for(const e of[...this._callbacks]){if(r)break;const n=this._documents.getDocument(i),o=await this._deliverEventAsyncAndBlameBadListeners(e,{document:n,reason:Lh.to(t)});s.push(o)}}finally{clearTimeout(n)}return s}_deliverEventAsyncAndBlameBadListeners([e,t,i],r){const n=this._badListeners.get(e);return"number"==typeof n&&n>this._thresholds.errors?Promise.resolve(!1):this._deliverEventAsync(i,e,t,r).then((()=>!0),(t=>{if(this._logService.error(`onWillSaveTextDocument-listener from extension '${i.identifier.value}' threw ERROR`),this._logService.error(t),!(t instanceof Error)||"concurrent_edits"!==t.message){const t=this._badListeners.get(e);this._badListeners.set(e,t?t+1:1),"number"==typeof t&&t>this._thresholds.errors&&this._logService.info(`onWillSaveTextDocument-listener from extension '${i.identifier.value}' will now be IGNORED because of timeouts and/or errors`)}return!1}))}_deliverEventAsync(e,t,i,r){const n=[],s=Date.now(),{document:o,reason:a}=r,{version:l}=o,c=Object.freeze({document:o,reason:a,waitUntil(e){if(Object.isFrozen(n))throw d("waitUntil can not be called async");n.push(Promise.resolve(e))}});try{t.apply(i,[c])}catch(u){return Promise.reject(u)}return new Promise(((t,i)=>{const r=setTimeout((()=>i(new Error("timeout"))),this._thresholds.timeout);return Promise.all(n).then((i=>{this._logService.debug(`onWillSaveTextDocument-listener from extension '${e.identifier.value}' finished after ${Date.now()-s}ms`),clearTimeout(r),t(i)})).catch((e=>{clearTimeout(r),i(e)}))})).then((e=>{const t={edits:[]};for(const i of e)if(Array.isArray(i)&&i.every((e=>e instanceof Il)))for(const{newText:e,newEol:r,range:n}of i)t.edits.push({resource:o.uri,versionId:void 0,textEdit:{range:n&&zd.from(n),text:e,eol:r&&Mh.from(r)}});if(0!==t.edits.length)return l===o.version?this._mainThreadBulkEdits.$tryApplyWorkspaceEdit(t):Promise.reject(new Error("concurrent_edits"))}))}}class Ay{constructor(e,t){this._onDidAddDocument=new B({onListenerError:n}),this._onDidRemoveDocument=new B({onListenerError:n}),this._onDidChangeDocument=new B({onListenerError:n}),this._onDidSaveDocument=new B({onListenerError:n}),this.onDidAddDocument=this._onDidAddDocument.event,this.onDidRemoveDocument=this._onDidRemoveDocument.event,this.onDidChangeDocument=this._onDidChangeDocument.event,this.onDidSaveDocument=this._onDidSaveDocument.event,this._toDispose=new b,this._documentLoader=new Map,this._proxy=e.getProxy(Ft.MainThreadDocuments),this._documentsAndEditors=t,this._documentsAndEditors.onDidRemoveDocuments((e=>{for(const t of e)this._onDidRemoveDocument.fire(t.document)}),void 0,this._toDispose),this._documentsAndEditors.onDidAddDocuments((e=>{for(const t of e)this._onDidAddDocument.fire(t.document)}),void 0,this._toDispose)}dispose(){this._toDispose.dispose()}getAllDocumentData(){return[...this._documentsAndEditors.allDocuments()]}getDocumentData(e){if(!e)return;const t=this._documentsAndEditors.getDocument(e);return t||void 0}getDocument(e){const t=this.getDocumentData(e);if(!t?.document)throw new Error(`Unable to retrieve document from URI '${e}'`);return t.document}ensureDocumentData(e){const t=this._documentsAndEditors.getDocument(e);if(t)return Promise.resolve(t);let i=this._documentLoader.get(e.toString());return i||(i=this._proxy.$tryOpenDocument(e).then((t=>{this._documentLoader.delete(e.toString());const i=pt.revive(t);return yi(this._documentsAndEditors.getDocument(i))}),(t=>(this._documentLoader.delete(e.toString()),Promise.reject(t)))),this._documentLoader.set(e.toString(),i)),i}createDocumentData(e){return this._proxy.$tryCreateDocument(e).then((e=>pt.revive(e)))}$acceptModelLanguageChanged(e,t){const i=pt.revive(e),r=this._documentsAndEditors.getDocument(i);if(!r)throw new Error("unknown document");this._onDidRemoveDocument.fire(r.document),r._acceptLanguageId(t),this._onDidAddDocument.fire(r.document)}$acceptModelSaved(e){const t=pt.revive(e),i=this._documentsAndEditors.getDocument(t);if(!i)throw new Error("unknown document");this.$acceptDirtyStateChanged(e,!1),this._onDidSaveDocument.fire(i.document)}$acceptDirtyStateChanged(e,t){const i=pt.revive(e),r=this._documentsAndEditors.getDocument(i);if(!r)throw new Error("unknown document");r._acceptIsDirty(t),this._onDidChangeDocument.fire({document:r.document,contentChanges:[],reason:void 0})}$acceptModelChanged(e,t,i){const r=pt.revive(e),n=this._documentsAndEditors.getDocument(r);if(!n)throw new Error("unknown document");let s;n._acceptIsDirty(i),n.onEvents(t),t.isUndoing?s=xc.Undo:t.isRedoing&&(s=xc.Redo),this._onDidChangeDocument.fire(Es({document:n.document,contentChanges:t.changes.map((e=>({range:zd.to(e.range),rangeOffset:e.rangeOffset,rangeLength:e.rangeLength,text:e.text}))),reason:s}))}setWordDefinitionFor(e,t){!function(e,t){t?Cv.set(e,t):Cv.delete(e)}(e,t)}}class Ry{constructor(e,t,i){const r=new Uint8Array(e*t);for(let n=0,s=e*t;n<s;n++)r[n]=i;this._data=r,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,i){this._data[e*this.cols+t]=i}}class Fy{constructor(e){let t=0,i=0;for(let n=0,s=e.length;n<s;n++){const[r,s,o]=e[n];s>t&&(t=s),r>i&&(i=r),o>i&&(i=o)}t++,i++;const r=new Ry(i,t,0);for(let n=0,s=e.length;n<s;n++){const[t,i,s]=e[n];r.set(t,i,s)}this._states=r,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let $y=null;let Ly=null;class Oy{static _createLink(e,t,i,r,n){let s=n-1;do{const i=t.charCodeAt(s);if(2!==e.get(i))break;s--}while(s>r);if(r>0){const e=t.charCodeAt(r-1),i=t.charCodeAt(s);(40===e&&41===i||91===e&&93===i||123===e&&125===i)&&s--}return{range:{startLineNumber:i,startColumn:r+1,endLineNumber:i,endColumn:s+2},url:t.substring(r,s+1)}}static computeLinks(e,t=function(){return null===$y&&($y=new Fy([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),$y}()){const i=function(){if(null===Ly){Ly=new wm(0);const e=" \t<>'\"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…";for(let i=0;i<e.length;i++)Ly.set(e.charCodeAt(i),1);const t=".,;:";for(let i=0;i<t.length;i++)Ly.set(t.charCodeAt(i),2)}return Ly}(),r=[];for(let n=1,s=e.getLineCount();n<=s;n++){const s=e.getLineContent(n),o=s.length;let a=0,l=0,c=0,u=1,d=!1,h=!1,p=!1,g=!1;for(;a<o;){let e=!1;const o=s.charCodeAt(a);if(13===u){let t;switch(o){case 40:d=!0,t=0;break;case 41:t=d?0:1;break;case 91:p=!0,h=!0,t=0;break;case 93:p=!1,t=h?0:1;break;case 123:g=!0,t=0;break;case 125:t=g?0:1;break;case 39:case 34:case 96:t=c===o?1:39===c||34===c||96===c?0:1;break;case 42:t=42===c?1:0;break;case 124:t=124===c?1:0;break;case 32:t=p?0:1;break;default:t=i.get(o)}1===t&&(r.push(Oy._createLink(i,s,n,l,a)),e=!0)}else if(12===u){let t;91===o?(h=!0,t=0):t=i.get(o),1===t?e=!0:u=13}else u=t.nextState(u,o),0===u&&(e=!0);e&&(u=1,d=!1,h=!1,g=!1,l=a+1,c=o),a++}13===u&&r.push(Oy._createLink(i,s,n,l,o))}return r}}class My{constructor(){this._schemes=[]}add(e){this._stateMachine=void 0,this._schemes.push(e)}delete(e){const t=this._schemes.indexOf(e);t>=0&&(this._schemes.splice(t,1),this._stateMachine=void 0)}_initStateMachine(){if(!this._stateMachine){const e=this._schemes.sort(),t=[];let i,r,n=14,s=14;for(const o of e){let e=i?ti(i,o):0;for(r=0===e?1:s;e<o.length;e++)e+1===o.length?(n=s,s=9):s+=1,t.push([r,o.toUpperCase().charCodeAt(e),s]),t.push([r,o.toLowerCase().charCodeAt(e),s]),r=s;i=o,s=n}t.push([9,58,10]),t.push([10,47,12]),this._stateMachine=new Fy(t)}}provideDocumentLinks(e){this._initStateMachine();const t=[],i=Oy.computeLinks({getLineContent:t=>e.lineAt(t-1).text,getLineCount:()=>e.lineCount},this._stateMachine);for(const r of i){const e=Ah.to(r);e.target&&t.push(e)}return t}}class Ny{constructor(e,t){this._extHostLanguageFeatures=t,this._linkProvider=new My,this._fsProvider=new Map,this._registeredSchemes=new Set,this._watches=new Map,this._handlePool=0,this._proxy=e.getProxy(Ft.MainThreadFileSystem)}dispose(){this._linkProviderRegistration?.dispose()}registerFileSystemProvider(e,t,i,r={}){if(Ny._validateFileSystemProvider(i),this._registeredSchemes.has(t))throw new Error(`a provider for the scheme '${t}' is already registered`);this._linkProviderRegistration||(this._linkProviderRegistration=this._extHostLanguageFeatures.registerDocumentLinkProvider(e,"*",this._linkProvider));const n=this._handlePool++;this._linkProvider.add(t),this._registeredSchemes.add(t),this._fsProvider.set(n,i);let s,o=2;r.isCaseSensitive&&(o+=1024),r.isReadonly&&(o+=2048),"function"==typeof i.copy&&(o+=8),"function"==typeof i.open&&"function"==typeof i.close&&"function"==typeof i.read&&"function"==typeof i.write&&(Yg(e,"fsChunks"),o+=4),r.isReadonly&&so(r.isReadonly)&&(Yg(e,"readonlyMessage"),s={value:r.isReadonly.value,isTrusted:r.isReadonly.isTrusted,supportThemeIcons:r.isReadonly.supportThemeIcons,supportHtml:r.isReadonly.supportHtml,baseUri:r.isReadonly.baseUri,uris:r.isReadonly.uris}),this._proxy.$registerFileSystemProvider(n,t,o,s).catch((i=>{console.error(`FAILED to register filesystem provider of ${e.identifier.value}-extension for the scheme ${t}`),console.error(i)}));const a=i.onDidChangeFile((e=>{const i=[];for(const r of e){const{uri:e,type:n}=r;if(e.scheme!==t)continue;let s;switch(n){case Su.Changed:s=0;break;case Su.Created:s=1;break;case Su.Deleted:s=2;break;default:throw new Error("Unknown FileChangeType")}i.push({resource:e,type:s})}this._proxy.$onFileSystemChange(n,i)}));return w((()=>{a.dispose(),this._linkProvider.delete(t),this._registeredSchemes.delete(t),this._fsProvider.delete(n),this._proxy.$unregisterProvider(n)}))}static _validateFileSystemProvider(e){if(!e)throw new Error("MISSING provider");if("function"!=typeof e.watch)throw new Error("Provider does NOT implement watch");if("function"!=typeof e.stat)throw new Error("Provider does NOT implement stat");if("function"!=typeof e.readDirectory)throw new Error("Provider does NOT implement readDirectory");if("function"!=typeof e.createDirectory)throw new Error("Provider does NOT implement createDirectory");if("function"!=typeof e.readFile)throw new Error("Provider does NOT implement readFile");if("function"!=typeof e.writeFile)throw new Error("Provider does NOT implement writeFile");if("function"!=typeof e.delete)throw new Error("Provider does NOT implement delete");if("function"!=typeof e.rename)throw new Error("Provider does NOT implement rename")}static _asIStat(e){const{type:t,ctime:i,mtime:r,size:n,permissions:s}=e;return{type:t,ctime:i,mtime:r,size:n,permissions:s}}$stat(e,t){return Promise.resolve(this._getFsProvider(e).stat(pt.revive(t))).then((e=>Ny._asIStat(e)))}$readdir(e,t){return Promise.resolve(this._getFsProvider(e).readDirectory(pt.revive(t)))}$readFile(e,t){return Promise.resolve(this._getFsProvider(e).readFile(pt.revive(t))).then((e=>I.wrap(e)))}$writeFile(e,t,i,r){return Promise.resolve(this._getFsProvider(e).writeFile(pt.revive(t),i.buffer,r))}$delete(e,t,i){return Promise.resolve(this._getFsProvider(e).delete(pt.revive(t),i))}$rename(e,t,i,r){return Promise.resolve(this._getFsProvider(e).rename(pt.revive(t),pt.revive(i),r))}$copy(e,t,i,r){const n=this._getFsProvider(e);if(!n.copy)throw new Error('FileSystemProvider does not implement "copy"');return Promise.resolve(n.copy(pt.revive(t),pt.revive(i),r))}$mkdir(e,t){return Promise.resolve(this._getFsProvider(e).createDirectory(pt.revive(t)))}$watch(e,t,i,r){const n=this._getFsProvider(e).watch(pt.revive(i),r);this._watches.set(t,n)}$unwatch(e,t){const i=this._watches.get(t);i&&(i.dispose(),this._watches.delete(t))}$open(e,t,i){const r=this._getFsProvider(e);if(!r.open)throw new Error('FileSystemProvider does not implement "open"');return Promise.resolve(r.open(pt.revive(t),i))}$close(e,t){const i=this._getFsProvider(e);if(!i.close)throw new Error('FileSystemProvider does not implement "close"');return Promise.resolve(i.close(t))}$read(e,t,i,r){const n=this._getFsProvider(e);if(!n.read)throw new Error('FileSystemProvider does not implement "read"');const s=I.alloc(r);return Promise.resolve(n.read(t,i,s.buffer,0,r)).then((e=>s.slice(0,e)))}$write(e,t,i,r){const n=this._getFsProvider(e);if(!n.write)throw new Error('FileSystemProvider does not implement "write"');return Promise.resolve(n.write(t,i,r.buffer,0,r.byteLength))}_getFsProvider(e){const t=this._fsProvider.get(e);if(!t){const e=new Error;throw e.name="ENOPRO",e.message="no provider",e}return t}}class Hy{get ignoreCreateEvents(){return Boolean(1&this._config)}get ignoreChangeEvents(){return Boolean(2&this._config)}get ignoreDeleteEvents(){return Boolean(4&this._config)}constructor(e,t,i,r,n,s,o,a){this._onDidCreate=new B,this._onDidChange=new B,this._onDidDelete=new B;const l=this.ensureWatching(e,i,n);this._config=0,s&&(this._config+=1),o&&(this._config+=2),a&&(this._config+=4);const c=qp(n),u="string"==typeof n,d=r((e=>{if(!s)for(const i of e.created){const e=pt.revive(i);!c(e.fsPath)||u&&!t.getWorkspaceFolder(e)||this._onDidCreate.fire(e)}if(!o)for(const i of e.changed){const e=pt.revive(i);!c(e.fsPath)||u&&!t.getWorkspaceFolder(e)||this._onDidChange.fire(e)}if(!a)for(const i of e.deleted){const e=pt.revive(i);!c(e.fsPath)||u&&!t.getWorkspaceFolder(e)||this._onDidDelete.fire(e)}}));this._disposable=_l.from(l,this._onDidCreate,this._onDidChange,this._onDidDelete,d)}ensureWatching(e,t,i){const r=_l.from();if("string"==typeof i)return r;const n=e.getProxy(Ft.MainThreadFileSystem);let s=!1;(i.pattern.includes(Dp)||i.pattern.includes(Sp))&&(s=!0);const o=Math.random();return n.$watch(t.identifier.value,o,i.baseUri,{recursive:s,excludes:[]}),_l.from({dispose:()=>n.$unwatch(o)})}dispose(){this._disposable.dispose()}get onDidCreate(){return this._onDidCreate.event}get onDidChange(){return this._onDidChange.event}get onDidDelete(){return this._onDidDelete.event}}class Uy{constructor(e,t,i){this._mainContext=e,this._logService=t,this._extHostDocumentsAndEditors=i,this._onFileSystemEvent=new B,this._onDidRenameFile=new B,this._onDidCreateFile=new B,this._onDidDeleteFile=new B,this._onWillRenameFile=new W,this._onWillCreateFile=new W,this._onWillDeleteFile=new W,this.onDidRenameFile=this._onDidRenameFile.event,this.onDidCreateFile=this._onDidCreateFile.event,this.onDidDeleteFile=this._onDidDeleteFile.event}createFileSystemWatcher(e,t,i,r,n,s){return new Hy(this._mainContext,e,t,this._onFileSystemEvent.event,Vh.from(i),r,n,s)}$onFileEvent(e){this._onFileSystemEvent.fire(e)}$onDidRunFileOperation(e,t){switch(e){case 2:this._onDidRenameFile.fire(Object.freeze({files:t.map((e=>({oldUri:pt.revive(e.source),newUri:pt.revive(e.target)})))}));break;case 1:this._onDidDeleteFile.fire(Object.freeze({files:t.map((e=>pt.revive(e.target)))}));break;case 0:case 3:this._onDidCreateFile.fire(Object.freeze({files:t.map((e=>pt.revive(e.target)))}))}}getOnWillRenameFileEvent(e){return this._createWillExecuteEvent(e,this._onWillRenameFile)}getOnWillCreateFileEvent(e){return this._createWillExecuteEvent(e,this._onWillCreateFile)}getOnWillDeleteFileEvent(e){return this._createWillExecuteEvent(e,this._onWillDeleteFile)}_createWillExecuteEvent(e,t){return(i,r,n)=>{const s=function(e){i.call(r,e)};return s.extension=e,t.event(s,void 0,n)}}async $onWillRunFileOperation(e,t,i,r){switch(e){case 2:return await this._fireWillEvent(this._onWillRenameFile,{files:t.map((e=>({oldUri:pt.revive(e.source),newUri:pt.revive(e.target)})))},i,r);case 1:return await this._fireWillEvent(this._onWillDeleteFile,{files:t.map((e=>pt.revive(e.target)))},i,r);case 0:case 3:return await this._fireWillEvent(this._onWillCreateFile,{files:t.map((e=>pt.revive(e.target)))},i,r)}}async _fireWillEvent(e,t,i,r){const n=new Set,s=[];if(await e.fireAsync(t,r,(async(e,t)=>{const r=Date.now(),o=await Promise.resolve(e);o instanceof Al&&(s.push([t.extension,o]),n.add(t.extension.displayName??t.extension.identifier.value)),Date.now()-r>i&&this._logService.warn("SLOW file-participant",t.extension.identifier)})),r.isCancellationRequested)return;if(0===s.length)return;const o={edits:[]};for(const[,a]of s){const{edits:e}=sh.from(a,{getTextDocumentVersion:e=>this._extHostDocumentsAndEditors.getDocument(e)?.version,getNotebookDocumentVersion:()=>{}});o.edits=o.edits.concat(e)}return{edit:o,extensionNames:Array.from(n)}}}class By extends go{constructor(e,t,i,r){super(e,t,i,r),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=i,this.positionColumn=r}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return By.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return 0===this.getDirection()?new By(this.startLineNumber,this.startColumn,e,t):new By(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new po(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new po(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return 0===this.getDirection()?new By(e,t,this.endLineNumber,this.endColumn):new By(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new By(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return 0===t?new By(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new By(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new By(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let i=0,r=e.length;i<r;i++)if(!this.selectionsEqual(e[i],t[i]))return!1;return!0}static isISelection(e){return e&&"number"==typeof e.selectionStartLineNumber&&"number"==typeof e.selectionStartColumn&&"number"==typeof e.positionLineNumber&&"number"==typeof e.positionColumn}static createWithDirection(e,t,i,r,n){return 0===n?new By(e,t,i,r):new By(i,r,e,t)}}class Vy{static{this.enableDebugLogging=!1}constructor(e){this.id=e,this._data=new Map,this._idPool=1}add(e){const t=this._idPool++;return this._data.set(t,e),this.logDebugInfo(),t}get(e,t){return this._data.has(e)?this._data.get(e)[t]:void 0}delete(e){this._data.delete(e),this.logDebugInfo()}logDebugInfo(){Vy.enableDebugLogging&&console.log(`${this.id} cache size - ${this._data.size}`)}}class Wy{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentSymbols(e,t){const i=this._documents.getDocument(e),r=await this._provider.provideDocumentSymbols(i,t);return Ur(r)?void 0:r[0]instanceof zl?r.map(ch.from):Wy._asDocumentSymbolTree(r)}static _asDocumentSymbolTree(e){e=e.slice(0).sort(((e,t)=>{let i=e.location.range.start.compareTo(t.location.range.start);return 0===i&&(i=t.location.range.end.compareTo(e.location.range.end)),i}));const t=[],i=[];for(const r of e){const e={name:r.name||"!!MISSING: name!!",kind:oh.from(r.kind),tags:r.tags?.map(ah.from)||[],detail:"",containerName:r.containerName,range:zd.from(r.location.range),selectionRange:zd.from(r.location.range),children:[]};for(;;){if(0===i.length){i.push(e),t.push(e);break}const r=i[i.length-1];if(go.containsRange(r.range,e.range)&&!go.equalsRange(r.range,e.range)){r.children?.push(e),i.push(e);break}i.pop()}}return t}}class zy{static{this._badCmd={command:"missing",title:"!!MISSING: command!!"}}constructor(e,t,i){this._documents=e,this._commands=t,this._provider=i,this._cache=new Vy("CodeLens"),this._disposables=new Map}async provideCodeLenses(e,t){const i=this._documents.getDocument(e),r=await this._provider.provideCodeLenses(i,t);if(!r||t.isCancellationRequested)return;const n=this._cache.add(r),s=new b;this._disposables.set(n,s);const o={cacheId:n,lenses:[]};for(let a=0;a<r.length;a++)o.lenses.push({cacheId:[n,a],range:zd.from(r[a].range),command:this._commands.toInternal(r[a].command,s)});return o}async resolveCodeLens(e,t){const i=e.cacheId&&this._cache.get(...e.cacheId);if(!i)return;let r;if(r="function"!=typeof this._provider.resolveCodeLens||i.isResolved?i:await this._provider.resolveCodeLens(i,t),r||(r=i),t.isCancellationRequested)return;const n=e.cacheId&&this._disposables.get(e.cacheId[0]);return n?(e.command=this._commands.toInternal(r.command??zy._badCmd,n),e):void 0}releaseCodeLenses(e){this._disposables.get(e)?.dispose(),this._disposables.delete(e),this._cache.delete(e)}}function jy(e){return Array.isArray(e)?e.map(gh.from):e?[gh.from(e)]:[]}class qy{constructor(e,t){this._documents=e,this._provider=t}async provideDefinition(e,t,i){const r=this._documents.getDocument(e),n=qd.to(t);return jy(await this._provider.provideDefinition(r,n,i))}}class Ky{constructor(e,t){this._documents=e,this._provider=t}async provideDeclaration(e,t,i){const r=this._documents.getDocument(e),n=qd.to(t);return jy(await this._provider.provideDeclaration(r,n,i))}}class Gy{constructor(e,t){this._documents=e,this._provider=t}async provideImplementation(e,t,i){const r=this._documents.getDocument(e),n=qd.to(t);return jy(await this._provider.provideImplementation(r,n,i))}}class Qy{constructor(e,t){this._documents=e,this._provider=t}async provideTypeDefinition(e,t,i){const r=this._documents.getDocument(e),n=qd.to(t);return jy(await this._provider.provideTypeDefinition(r,n,i))}}class Jy{constructor(e,t){this._documents=e,this._provider=t}async provideHover(e,t,i){const r=this._documents.getDocument(e),n=qd.to(t),s=await this._provider.provideHover(r,n,i);if(s&&!Ur(s.contents))return s.range||(s.range=r.getWordRangeAtPosition(n)),s.range||(s.range=new wl(n,n)),fh.from(s)}}class Zy{constructor(e,t){this._documents=e,this._provider=t}async provideEvaluatableExpression(e,t,i){const r=this._documents.getDocument(e),n=qd.to(t),s=await this._provider.provideEvaluatableExpression(r,n,i);if(s)return mh.from(s)}}class Yy{constructor(e,t){this._documents=e,this._provider=t}async provideInlineValues(e,t,i,r){const n=this._documents.getDocument(e),s=await this._provider.provideInlineValues(n,zd.to(t),_h.to(i),r);if(Array.isArray(s))return s.map((e=>vh.from(e)))}}class Xy{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentHighlights(e,t,i){const r=this._documents.getDocument(e),n=qd.to(t),s=await this._provider.provideDocumentHighlights(r,n,i);if(Array.isArray(s))return s.map(yh.from)}}class ew{constructor(e,t){this._documents=e,this._provider=t}async provideLinkedEditingRanges(e,t,i){const r=this._documents.getDocument(e),n=qd.to(t),s=await this._provider.provideLinkedEditingRanges(r,n,i);if(s&&Array.isArray(s.ranges))return{ranges:Hr(s.ranges.map(zd.from)),wordPattern:s.wordPattern}}}class tw{constructor(e,t){this._documents=e,this._provider=t}async provideReferences(e,t,i,r){const n=this._documents.getDocument(e),s=qd.to(t),o=await this._provider.provideReferences(n,s,i,r);if(Array.isArray(o))return o.map(ph.from)}}class iw{static{this._maxCodeActionsPerFile=1e3}constructor(e,t,i,r,n,s,o){this._documents=e,this._commands=t,this._diagnostics=i,this._provider=r,this._logService=n,this._extension=s,this._apiDeprecation=o,this._cache=new Vy("CodeAction"),this._disposables=new Map,this.nbKind=new Kl("notebook")}async provideCodeActions(e,t,i,r){const n=this._documents.getDocument(e),s=By.isISelection(t)?Wd.to(t):zd.to(t),o=[];for(const h of this._diagnostics.getDiagnostics(e))if(s.intersection(h.range)){if(o.push(h)>iw._maxCodeActionsPerFile)break}const a={diagnostics:o,only:i.only?new Kl(i.only):void 0,triggerKind:cp.to(i.trigger)},l=await this._provider.provideCodeActions(n,s,a,r);if(!Br(l)||r.isCancellationRequested)return;const c=this._cache.add(l),u=new b;this._disposables.set(c,u);const d=[];for(let h=0;h<l.length;h++){const e=l[h];if(e)if(iw._isCommand(e))this._apiDeprecation.report("CodeActionProvider.provideCodeActions - return commands",this._extension,"Return 'CodeAction' instances instead."),d.push({_isSynthetic:!0,title:e.title,command:this._commands.toInternal(e,u)});else{if(a.triggerKind!==jl.Invoke&&e.kind&&this.nbKind.contains(e.kind))continue;a.only&&(e.kind?a.only.contains(e.kind)||this._logService.warn(`${this._extension.identifier.value} - Code actions of kind '${a.only.value} 'requested but returned code action is of kind '${e.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code actions.`):this._logService.warn(`${this._extension.identifier.value} - Code actions of kind '${a.only.value} 'requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`)),d.push({cacheId:[c,h],title:e.title,command:e.command&&this._commands.toInternal(e.command,u),diagnostics:e.diagnostics&&e.diagnostics.map(Qd.from),edit:e.edit&&sh.from(e.edit,void 0),kind:e.kind&&e.kind.value,isPreferred:e.isPreferred,disabled:e.disabled?.reason})}}return{cacheId:c,actions:d}}async resolveCodeAction(e,t){const[i,r]=e,n=this._cache.get(i,r);if(!n||iw._isCommand(n))return{};if(!this._provider.resolveCodeAction)return{};const s=await this._provider.resolveCodeAction(n,t)??n;let o,a;if(s.edit&&(o=sh.from(s.edit,void 0)),s.command){const e=this._disposables.get(i);e&&(a=this._commands.toInternal(s.command,e))}return{edit:o,command:a}}releaseCodeActions(e){this._disposables.get(e)?.dispose(),this._disposables.delete(e),this._cache.delete(e)}static _isCommand(e){return"string"==typeof e.command&&"string"==typeof e.title}}class rw{static toInternalProviderId(e,t){return e+"."+t}constructor(e,t,i,r,n){this._proxy=e,this._documents=t,this._provider=i,this._handle=r,this._extension=n}async prepareDocumentPaste(e,t,i,r){if(!this._provider.prepareDocumentPaste)return;const n=this._documents.getDocument(e),s=t.map((e=>zd.to(e))),o=pp.toDataTransfer(i,(()=>{throw new p}));if(await this._provider.prepareDocumentPaste(n,s,o,r),r.isCancellationRequested)return;const a=Array.from(o).filter((([,e])=>!(e instanceof Zc)));return pp.from(a)}async providePasteEdits(e,t,i,r,n){if(!this._provider.provideDocumentPasteEdits)return;const s=this._documents.getDocument(t),o=i.map((e=>zd.to(e))),a=pp.toDataTransfer(r,(async t=>(await this._proxy.$resolvePasteFileData(this._handle,e,t)).buffer)),l=await this._provider.provideDocumentPasteEdits(s,o,a,n);return l?{label:l.label??J(0,"Paste using '{0}' extension",this._extension.displayName||this._extension.name),detail:this._extension.displayName||this._extension.name,yieldTo:l.yieldTo?.map((e=>"mimeType"in e?e:{providerId:rw.toInternalProviderId(e.extensionId,e.providerId)})),insertText:"string"==typeof l.insertText?l.insertText:{snippet:l.insertText.value},additionalEdit:l.additionalEdit?sh.from(l.additionalEdit,void 0):void 0}:void 0}}class nw{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentFormattingEdits(e,t,i){const r=this._documents.getDocument(e),n=await this._provider.provideDocumentFormattingEdits(r,t,i);if(Array.isArray(n))return n.map(nh.from)}}class sw{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentRangeFormattingEdits(e,t,i,r){const n=this._documents.getDocument(e),s=zd.to(t),o=await this._provider.provideDocumentRangeFormattingEdits(n,s,i,r);if(Array.isArray(o))return o.map(nh.from)}async provideDocumentRangesFormattingEdits(e,t,i,r){!function(e,t){if(!e)throw new Error(t?`Unexpected type, expected '${t}'`:"Unexpected type")}("function"==typeof this._provider.provideDocumentRangesFormattingEdits,"INVALID invocation of `provideDocumentRangesFormattingEdits`");const n=this._documents.getDocument(e),s=t.map(zd.to),o=await this._provider.provideDocumentRangesFormattingEdits(n,s,i,r);if(Array.isArray(o))return o.map(nh.from)}}class ow{constructor(e,t){this._documents=e,this._provider=t,this.autoFormatTriggerCharacters=[]}async provideOnTypeFormattingEdits(e,t,i,r,n){const s=this._documents.getDocument(e),o=qd.to(t),a=await this._provider.provideOnTypeFormattingEdits(s,o,i,r,n);if(Array.isArray(a))return a.map(nh.from)}}class aw{constructor(e,t){this._provider=e,this._logService=t,this._cache=new Vy("WorkspaceSymbols")}async provideWorkspaceSymbols(e,t){const i=await this._provider.provideWorkspaceSymbols(e,t);if(!Br(i))return{symbols:[]};const r=this._cache.add(i),n={cacheId:r,symbols:[]};for(let s=0;s<i.length;s++){const e=i[s];e&&e.name?n.symbols.push({...lh.from(e),cacheId:[r,s]}):this._logService.warn("INVALID SymbolInformation",e)}return n}async resolveWorkspaceSymbol(e,t){if("function"!=typeof this._provider.resolveWorkspaceSymbol)return e;if(!e.cacheId)return e;const i=this._cache.get(...e.cacheId);if(i){const r=await this._provider.resolveWorkspaceSymbol(i,t);return r&&Ps(e,lh.from(r),!0)}}releaseWorkspaceSymbols(e){this._cache.delete(e)}}class lw{static supportsResolving(e){return"function"==typeof e.prepareRename}constructor(e,t,i){this._documents=e,this._provider=t,this._logService=i}async provideRenameEdits(e,t,i,r){const n=this._documents.getDocument(e),s=qd.to(t);try{const e=await this._provider.provideRenameEdits(n,s,i,r);if(!e)return;return sh.from(e)}catch(o){const e=lw._asMessage(o);return e?{rejectReason:e,edits:void 0}:Promise.reject(o)}}async resolveRenameLocation(e,t,i){if("function"!=typeof this._provider.prepareRename)return Promise.resolve(void 0);const r=this._documents.getDocument(e),n=qd.to(t);try{const e=await this._provider.prepareRename(r,n,i);let t,s;if(wl.isRange(e)?(t=e,s=r.getText(e)):pi(e)&&(t=e.range,s=e.placeholder),!t||!s)return;return t.start.line>n.line||t.end.line<n.line?void this._logService.warn("INVALID rename location: position line must be within range start/end lines"):{range:zd.from(t),text:s}}catch(s){const e=lw._asMessage(s);return e?{rejectReason:e,range:void 0,text:void 0}:Promise.reject(s)}}static _asMessage(e){return"string"==typeof e?e:e instanceof Error&&"string"==typeof e.message?e.message:void 0}}class cw{constructor(e,t){this.resultId=e,this.tokens=t}}class uw{constructor(e,t){this._documents=e,this._provider=t,this._nextResultId=1,this._previousResults=new Map}async provideDocumentSemanticTokens(e,t,i){const r=this._documents.getDocument(e),n=0!==t?this._previousResults.get(t):null;let s="string"==typeof n?.resultId&&"function"==typeof this._provider.provideDocumentSemanticTokensEdits?await this._provider.provideDocumentSemanticTokensEdits(r,n.resultId,i):await this._provider.provideDocumentSemanticTokens(r,i);return n&&this._previousResults.delete(t),s?(s=uw._fixProvidedSemanticTokens(s),this._send(uw._convertToEdits(n,s),s)):null}async releaseDocumentSemanticColoring(e){this._previousResults.delete(e)}static _fixProvidedSemanticTokens(e){return uw._isSemanticTokens(e)?uw._isCorrectSemanticTokens(e)?e:new Mu(new Uint32Array(e.data),e.resultId):uw._isSemanticTokensEdits(e)?uw._isCorrectSemanticTokensEdits(e)?e:new Hu(e.edits.map((e=>new Nu(e.start,e.deleteCount,e.data?new Uint32Array(e.data):e.data))),e.resultId):e}static _isSemanticTokens(e){return e&&!!e.data}static _isCorrectSemanticTokens(e){return e.data instanceof Uint32Array}static _isSemanticTokensEdits(e){return e&&Array.isArray(e.edits)}static _isCorrectSemanticTokensEdits(e){for(const t of e.edits)if(!(t.data instanceof Uint32Array))return!1;return!0}static _convertToEdits(e,t){if(!uw._isSemanticTokens(t))return t;if(!e||!e.tokens)return t;const i=e.tokens,r=i.length,n=t.data,s=n.length;let o=0;const a=Math.min(r,s);for(;o<a&&i[o]===n[o];)o++;if(o===r&&o===s)return new Hu([],t.resultId);let l=0;const c=a-o;for(;l<c&&i[r-l-1]===n[s-l-1];)l++;return new Hu([{start:o,deleteCount:r-o-l,data:n.subarray(o,s-l)}],t.resultId)}_send(e,t){if(uw._isSemanticTokens(e)){const t=this._nextResultId++;return this._previousResults.set(t,new cw(e.resultId,e.data)),gy({id:t,type:"full",data:e.data})}if(uw._isSemanticTokensEdits(e)){const i=this._nextResultId++;return uw._isSemanticTokens(t)?this._previousResults.set(i,new cw(t.resultId,t.data)):this._previousResults.set(i,new cw(e.resultId)),gy({id:i,type:"delta",deltas:(e.edits||[]).map((e=>({start:e.start,deleteCount:e.deleteCount,data:e.data})))})}return null}}class dw{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentRangeSemanticTokens(e,t,i){const r=this._documents.getDocument(e),n=await this._provider.provideDocumentRangeSemanticTokens(r,zd.to(t),i);return n?this._send(n):null}_send(e){return gy({id:0,type:"full",data:e.data})}}class hw{static supportsResolving(e){return"function"==typeof e.resolveCompletionItem}constructor(e,t,i,r,n){this._documents=e,this._commands=t,this._provider=i,this._apiDeprecation=r,this._extension=n,this._cache=new Vy("CompletionItem"),this._disposables=new Map}async provideCompletionItems(e,t,i,r){const n=this._documents.getDocument(e),s=qd.to(t),o=n.getWordRangeAtPosition(s)||new wl(s,s),a=o.with({end:s}),l=new F,c=await this._provider.provideCompletionItems(n,s,r,bh.to(i));if(!c)return;if(r.isCancellationRequested)return;const u=Array.isArray(c)?new pc(c):c,d=hw.supportsResolving(this._provider)?this._cache.add(u.items):this._cache.add([]),h=new b;this._disposables.set(d,h);const p=[],g={x:d,b:p,a:{replace:zd.from(o),insert:zd.from(a)},c:u.isIncomplete||void 0,d:l.elapsed()};for(let f=0;f<u.items.length;f++){const e=u.items[f],t=this._convertCompletionItem(e,[d,f],a,o);p.push(t)}return g}async resolveCompletionItem(e,t){if("function"!=typeof this._provider.resolveCompletionItem)return;const i=this._cache.get(...e);if(!i)return;const r=this._convertCompletionItem(i,e),n=await this._provider.resolveCompletionItem(i,t);if(!n)return;const s=this._convertCompletionItem(n,e);return r.h===s.h&&r.i===s.i||this._apiDeprecation.report("CompletionItem.insertText",this._extension,"extension MAY NOT change 'insertText' of a CompletionItem during resolve"),r.n===s.n&&r.o===s.o&&As(r.p,s.p)||this._apiDeprecation.report("CompletionItem.command",this._extension,"extension MAY NOT change 'command' of a CompletionItem during resolve"),{...r,d:s.d,c:s.c,l:s.l,h:s.h,i:s.i,n:s.n,o:s.o,p:s.p}}releaseCompletionItems(e){this._disposables.get(e)?.dispose(),this._disposables.delete(e),this._cache.delete(e)}_convertCompletionItem(e,t,i,r){const n=this._disposables.get(t[0]);if(!n)throw Error("DisposableStore is missing...");const s=this._commands.toInternal(e.command,n),o={x:t,a:e.label,b:void 0!==e.kind?Ch.from(e.kind):void 0,m:e.tags&&e.tags.map(xh.from),c:e.detail,d:void 0===e.documentation?void 0:Xd.fromStrict(e.documentation),e:e.sortText!==e.label?e.sortText:void 0,f:e.filterText!==e.label?e.filterText:void 0,g:e.preselect||void 0,i:e.keepWhitespace?1:0,k:e.commitCharacters?.join(""),l:e.additionalTextEdits&&e.additionalTextEdits.map(nh.from),n:s?.$ident,o:s?.id,p:s?.$ident?void 0:s?.arguments};let a;return e.textEdit?(this._apiDeprecation.report("CompletionItem.textEdit",this._extension,"Use 'CompletionItem.insertText' and 'CompletionItem.range' instead."),o.h=e.textEdit.newText):"string"==typeof e.insertText?o.h=e.insertText:e.insertText instanceof Rl&&(o.h=e.insertText.value,o.i|=4),e.textEdit?a=e.textEdit.range:e.range&&(a=e.range),wl.isRange(a)?o.j=zd.from(a):!a||i?.isEqual(a.inserting)&&r?.isEqual(a.replacing)||(o.j={insert:zd.from(a.inserting),replace:zd.from(a.replacing)}),o}}class pw{async provideInlineCompletions(e,t,i,r){}disposeCompletions(e){}handleDidShowCompletionItem(e,t,i){}handlePartialAccept(e,t,i){}}class gw extends pw{constructor(e,t,i,r){super(),this._extension=e,this._documents=t,this._provider=i,this._commands=r,this._references=new fw,this._isAdditionsProposedApiEnabled=Zg(this._extension,"inlineCompletionsAdditions"),this.languageTriggerKindToVSCodeTriggerKind={[mo.Automatic]:wu.Automatic,[mo.Explicit]:wu.Invoke}}get supportsHandleEvents(){return Zg(this._extension,"inlineCompletionsAdditions")&&("function"==typeof this._provider.handleDidShowCompletionItem||"function"==typeof this._provider.handleDidPartiallyAcceptCompletionItem)}async provideInlineCompletions(e,t,i,r){const n=this._documents.getDocument(e),s=qd.to(t),o=await this._provider.provideInlineCompletionItems(n,s,{selectedCompletionInfo:i.selectedSuggestionInfo?{range:zd.to(i.selectedSuggestionInfo.range),text:i.selectedSuggestionInfo.text}:void 0,triggerKind:this.languageTriggerKindToVSCodeTriggerKind[i.triggerKind]},r);if(!o)return;if(r.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,l=this._isAdditionsProposedApiEnabled?Array.isArray(o)?[]:o.commands||[]:[],c=this._isAdditionsProposedApiEnabled&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this._references.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map(((e,t)=>{let i;e.command&&(u||(u=new b),i=this._commands.toInternal(e.command,u));const r=e.insertText;return{insertText:"string"==typeof r?r:{snippet:r.value},filterText:e.filterText,range:e.range?zd.from(e.range):void 0,command:i,idx:t,completeBracketPairs:!!this._isAdditionsProposedApiEnabled&&e.completeBracketPairs}})),commands:l.map((e=>(u||(u=new b),this._commands.toInternal(e,u)))),suppressSuggestions:!1,enableForwardStability:c}}disposeCompletions(e){const t=this._references.disposeReferenceId(e);t?.dispose()}handleDidShowCompletionItem(e,t,i){const r=this._references.get(e)?.items[t];r&&this._provider.handleDidShowCompletionItem&&this._isAdditionsProposedApiEnabled&&this._provider.handleDidShowCompletionItem(r,i)}handlePartialAccept(e,t,i){const r=this._references.get(e)?.items[t];r&&this._provider.handleDidPartiallyAcceptCompletionItem&&this._isAdditionsProposedApiEnabled&&this._provider.handleDidPartiallyAcceptCompletionItem(r,i)}}class fw{constructor(){this._references=new Map,this._idPool=1}createReferenceId(e){const t=this._idPool++;return this._references.set(t,e),t}disposeReferenceId(e){const t=this._references.get(e);return this._references.delete(e),t}get(e){return this._references.get(e)}}class mw{constructor(e,t){this._documents=e,this._provider=t,this._cache=new Vy("SignatureHelp")}async provideSignatureHelp(e,t,i,r){const n=this._documents.getDocument(e),s=qd.to(t),o=this.reviveContext(i),a=await this._provider.provideSignatureHelp(n,s,r,o);if(a){const e=this._cache.add([a]);return{...kh.from(a),id:e}}}reviveContext(e){let t;if(e.activeSignatureHelp){const i=kh.to(e.activeSignatureHelp),r=this._cache.get(e.activeSignatureHelp.id,0);r?(t=r,t.activeSignature=i.activeSignature,t.activeParameter=i.activeParameter):t=i}return{...e,activeSignatureHelp:t}}releaseSignatureHelp(e){this._cache.delete(e)}}class vw{constructor(e,t,i,r,n){this._documents=e,this._commands=t,this._provider=i,this._logService=r,this._extension=n,this._cache=new Vy("InlayHints"),this._disposables=new Map}async provideInlayHints(e,t,i){const r=this._documents.getDocument(e),n=zd.to(t),s=await this._provider.provideInlayHints(r,n,i);if(!Array.isArray(s)||0===s.length)return void this._logService.trace(`[InlayHints] NO inlay hints from '${this._extension.identifier.value}' for ${t}`);if(i.isCancellationRequested)return;const o=this._cache.add(s);this._disposables.set(o,new b);const a={hints:[],cacheId:o};for(let l=0;l<s.length;l++)this._isValidInlayHint(s[l],n)&&a.hints.push(this._convertInlayHint(s[l],[o,l]));return this._logService.trace(`[InlayHints] ${a.hints.length} inlay hints from '${this._extension.identifier.value}' for ${t}`),a}async resolveInlayHint(e,t){if("function"!=typeof this._provider.resolveInlayHint)return;const i=this._cache.get(...e);if(!i)return;const r=await this._provider.resolveInlayHint(i,t);return r&&this._isValidInlayHint(r)?this._convertInlayHint(r,e):void 0}releaseHints(e){this._disposables.get(e)?.dispose(),this._disposables.delete(e),this._cache.delete(e)}_isValidInlayHint(e,t){return 0===e.label.length||Array.isArray(e.label)&&e.label.every((e=>0===e.value.length))?(console.log("INVALID inlay hint, empty label",e),!1):!(t&&!t.contains(e.position))}_convertInlayHint(e,t){const i=this._disposables.get(t[0]);if(!i)throw Error("DisposableStore is missing...");const r={label:"",cacheId:t,tooltip:Xd.fromStrict(e.tooltip),position:qd.from(e.position),textEdits:e.textEdits&&e.textEdits.map(nh.from),kind:e.kind&&Ph.from(e.kind),paddingLeft:e.paddingLeft,paddingRight:e.paddingRight};return"string"==typeof e.label?r.label=e.label:r.label=e.label.map((e=>{const t={label:e.value};return t.tooltip=Xd.fromStrict(e.tooltip),Ll.isLocation(e.location)&&(t.location=ph.from(e.location)),e.command&&(t.command=this._commands.toInternal(e.command,i)),t})),r}}class _w{constructor(e,t){this._documents=e,this._provider=t,this._cache=new Vy("DocumentLink")}async provideLinks(e,t){const i=this._documents.getDocument(e),r=await this._provider.provideDocumentLinks(i,t);if(Array.isArray(r)&&0!==r.length&&!t.isCancellationRequested){if("function"!=typeof this._provider.resolveDocumentLink)return{links:r.filter(_w._validateLink).map(Ah.from)};{const e=this._cache.add(r),t={links:[],cacheId:e};for(let i=0;i<r.length;i++){if(!_w._validateLink(r[i]))continue;const n=Ah.from(r[i]);n.cacheId=[e,i],t.links.push(n)}return t}}}static _validateLink(e){return!(e.target&&e.target.path.length>5e4)||(console.warn("DROPPING link because it is too long"),!1)}async resolveLink(e,t){if("function"!=typeof this._provider.resolveDocumentLink)return;const i=this._cache.get(...e);if(!i)return;const r=await this._provider.resolveDocumentLink(i,t);return r&&_w._validateLink(r)?Ah.from(r):void 0}releaseLinks(e){this._cache.delete(e)}}class yw{constructor(e,t){this._documents=e,this._provider=t}async provideColors(e,t){const i=this._documents.getDocument(e),r=await this._provider.provideDocumentColors(i,t);if(!Array.isArray(r))return[];return r.map((e=>({color:Fh.from(e.color),range:zd.from(e.range)})))}async provideColorPresentations(e,t,i){const r=this._documents.getDocument(e),n=zd.to(t.range),s=Fh.to(t.color),o=await this._provider.provideColorPresentations(s,{document:r,range:n},i);if(Array.isArray(o))return o.map(Rh.from)}}class ww{constructor(e,t){this._documents=e,this._provider=t}async provideFoldingRanges(e,t,i){const r=this._documents.getDocument(e),n=await this._provider.provideFoldingRanges(r,t,i);if(Array.isArray(n))return n.map(Hh.from)}}class bw{constructor(e,t,i){this._documents=e,this._provider=t,this._logService=i}async provideSelectionRanges(e,t,i){const r=this._documents.getDocument(e),n=t.map(qd.to),s=await this._provider.provideSelectionRanges(r,n,i);if(!Br(s))return[];if(s.length!==n.length)return this._logService.warn("BAD selection ranges, provider must return ranges for each position"),[];const o=[];for(let a=0;a<n.length;a++){const e=[];o.push(e);let t=n[a],i=s[a];for(;;){if(!i.range.contains(t))throw new Error("INVALID selection range, must contain the previous range");if(e.push($h.from(i)),!i.parent)break;t=i.range,i=i.parent}}return o}}class xw{constructor(e,t){this._documents=e,this._provider=t,this._idPool=new Ev(""),this._cache=new Map}async prepareSession(e,t,i){const r=this._documents.getDocument(e),n=qd.to(t),s=await this._provider.prepareCallHierarchy(r,n,i);if(!s)return;const o=this._idPool.nextId();return this._cache.set(o,new Map),Array.isArray(s)?s.map((e=>this._cacheAndConvertItem(o,e))):[this._cacheAndConvertItem(o,s)]}async provideCallsTo(e,t,i){const r=this._itemFromCache(e,t);if(!r)throw new Error("missing call hierarchy item");const n=await this._provider.provideCallHierarchyIncomingCalls(r,i);if(n)return n.map((t=>({from:this._cacheAndConvertItem(e,t.from),fromRanges:t.fromRanges.map((e=>zd.from(e)))})))}async provideCallsFrom(e,t,i){const r=this._itemFromCache(e,t);if(!r)throw new Error("missing call hierarchy item");const n=await this._provider.provideCallHierarchyOutgoingCalls(r,i);if(n)return n.map((t=>({to:this._cacheAndConvertItem(e,t.to),fromRanges:t.fromRanges.map((e=>zd.from(e)))})))}releaseSession(e){this._cache.delete(e)}_cacheAndConvertItem(e,t){const i=this._cache.get(e),r=uh.from(t,e,i.size.toString(36));return i.set(r._itemId,t),r}_itemFromCache(e,t){const i=this._cache.get(e);return i?.get(t)}}class Cw{constructor(e,t){this._documents=e,this._provider=t,this._idPool=new Ev(""),this._cache=new Map}async prepareSession(e,t,i){const r=this._documents.getDocument(e),n=qd.to(t),s=await this._provider.prepareTypeHierarchy(r,n,i);if(!s)return;const o=this._idPool.nextId();return this._cache.set(o,new Map),Array.isArray(s)?s.map((e=>this._cacheAndConvertItem(o,e))):[this._cacheAndConvertItem(o,s)]}async provideSupertypes(e,t,i){const r=this._itemFromCache(e,t);if(!r)throw new Error("missing type hierarchy item");const n=await this._provider.provideTypeHierarchySupertypes(r,i);if(n)return n.map((t=>this._cacheAndConvertItem(e,t)))}async provideSubtypes(e,t,i){const r=this._itemFromCache(e,t);if(!r)throw new Error("missing type hierarchy item");const n=await this._provider.provideTypeHierarchySubtypes(r,i);if(n)return n.map((t=>this._cacheAndConvertItem(e,t)))}releaseSession(e){this._cache.delete(e)}_cacheAndConvertItem(e,t){const i=this._cache.get(e),r=up.from(t,e,i.size.toString(36));return i.set(r._itemId,t),r}_itemFromCache(e,t){const i=this._cache.get(e);return i?.get(t)}}class Dw{static toInternalProviderId(e,t){return e+"."+t}constructor(e,t,i,r,n){this._proxy=e,this._documents=t,this._provider=i,this._handle=r,this._extension=n}async provideDocumentOnDropEdits(e,t,i,r,n){const s=this._documents.getDocument(t),o=qd.to(i),a=pp.toDataTransfer(r,(async t=>(await this._proxy.$resolveDocumentOnDropFileData(this._handle,e,t)).buffer)),l=await this._provider.provideDocumentDropEdits(s,o,a,n);if(l)return{label:l.label??J(0,"Drop using '{0}' extension",this._extension.displayName||this._extension.name),yieldTo:l.yieldTo?.map((e=>"mimeType"in e?e:{providerId:Dw.toInternalProviderId(e.extensionId,e.providerId)})),insertText:"string"==typeof l.insertText?l.insertText:{snippet:l.insertText.value},additionalEdit:l.additionalEdit?sh.from(l.additionalEdit,void 0):void 0}}}class Sw{constructor(e,t){this._documents=e,this._provider=t}async provideMappedEdits(e,t,i,r){const n=pt.revive(e),s=this._documents.getDocument(n),o={selections:i.selections.map((e=>Wd.to(e))),related:i.related.map((e=>({uri:pt.revive(e.uri),range:zd.to(e.range)})))},a=await this._provider.provideMappedEdits(s,t,o,r);return a?sh.from(a):null}}class Ew{constructor(e,t){this.adapter=e,this.extension=t}}class kw{static{this._handlePool=0}constructor(e,t,i,r,n,s,o,a){this._uriTransformer=t,this._documents=i,this._commands=r,this._diagnostics=n,this._logService=s,this._apiDeprecation=o,this._extensionTelemetry=a,this._adapter=new Map,this._proxy=e.getProxy(Ft.MainThreadLanguageFeatures)}_transformDocumentSelector(e,t){return Kd.from(e,this._uriTransformer,t)}_createDisposable(e){return new _l((()=>{this._adapter.delete(e),this._proxy.$unregister(e)}))}_nextHandle(){return kw._handlePool++}async _withAdapter(e,t,i,r,n,s=!1){const o=this._adapter.get(e);if(!(o&&o.adapter instanceof t))return r;const c=Date.now();s||this._logService.trace(`[${o.extension.identifier.value}] INVOKE provider '${i.toString().replace(/[\r\n]/g,"")}'`);const u=i(o.adapter,o.extension);return Promise.resolve(u).catch((e=>{a(e)||(this._logService.error(`[${o.extension.identifier.value}] provider FAILED`),this._logService.error(e),this._extensionTelemetry.onExtensionError(o.extension.identifier,e))})).finally((()=>{s||this._logService.trace(`[${o.extension.identifier.value}] provider DONE after ${Date.now()-c}ms`)})),Ot.isCancellationToken(n)?(d=u,h=n,new Promise(((e,t)=>{const i=h.onCancellationRequested((()=>{i.dispose(),t(new l)}));d.then(e,t).finally((()=>i.dispose()))}))):u;var d,h}_addNewAdapter(e,t){const i=this._nextHandle();return this._adapter.set(i,new Ew(e,t)),i}static _extLabel(e){return e.displayName||e.name}registerDocumentSymbolProvider(e,t,i,r){const n=this._addNewAdapter(new Wy(this._documents,i),e),s=r&&r.label||kw._extLabel(e);return this._proxy.$registerDocumentSymbolProvider(n,this._transformDocumentSelector(t,e),s),this._createDisposable(n)}$provideDocumentSymbols(e,t,i){return this._withAdapter(e,Wy,(e=>e.provideDocumentSymbols(pt.revive(t),i)),void 0,i)}registerCodeLensProvider(e,t,i){const r=this._nextHandle(),n="function"==typeof i.onDidChangeCodeLenses?this._nextHandle():void 0;this._adapter.set(r,new Ew(new zy(this._documents,this._commands.converter,i),e)),this._proxy.$registerCodeLensSupport(r,this._transformDocumentSelector(t,e),n);let s=this._createDisposable(r);if(void 0!==n){const e=i.onDidChangeCodeLenses((e=>this._proxy.$emitCodeLensEvent(n)));s=_l.from(s,e)}return s}$provideCodeLenses(e,t,i){return this._withAdapter(e,zy,(e=>e.provideCodeLenses(pt.revive(t),i)),void 0,i)}$resolveCodeLens(e,t,i){return this._withAdapter(e,zy,(e=>e.resolveCodeLens(t,i)),void 0,void 0)}$releaseCodeLenses(e,t){this._withAdapter(e,zy,(e=>Promise.resolve(e.releaseCodeLenses(t))),void 0,void 0)}registerDefinitionProvider(e,t,i){const r=this._addNewAdapter(new qy(this._documents,i),e);return this._proxy.$registerDefinitionSupport(r,this._transformDocumentSelector(t,e)),this._createDisposable(r)}$provideDefinition(e,t,i,r){return this._withAdapter(e,qy,(e=>e.provideDefinition(pt.revive(t),i,r)),[],r)}registerDeclarationProvider(e,t,i){const r=this._addNewAdapter(new Ky(this._documents,i),e);return this._proxy.$registerDeclarationSupport(r,this._transformDocumentSelector(t,e)),this._createDisposable(r)}$provideDeclaration(e,t,i,r){return this._withAdapter(e,Ky,(e=>e.provideDeclaration(pt.revive(t),i,r)),[],r)}registerImplementationProvider(e,t,i){const r=this._addNewAdapter(new Gy(this._documents,i),e);return this._proxy.$registerImplementationSupport(r,this._transformDocumentSelector(t,e)),this._createDisposable(r)}$provideImplementation(e,t,i,r){return this._withAdapter(e,Gy,(e=>e.provideImplementation(pt.revive(t),i,r)),[],r)}registerTypeDefinitionProvider(e,t,i){const r=this._addNewAdapter(new Qy(this._documents,i),e);return this._proxy.$registerTypeDefinitionSupport(r,this._transformDocumentSelector(t,e)),this._createDisposable(r)}$provideTypeDefinition(e,t,i,r){return this._withAdapter(e,Qy,(e=>e.provideTypeDefinition(pt.revive(t),i,r)),[],r)}registerHoverProvider(e,t,i,r){const n=this._addNewAdapter(new Jy(this._documents,i),e);return this._proxy.$registerHoverProvider(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideHover(e,t,i,r){return this._withAdapter(e,Jy,(e=>e.provideHover(pt.revive(t),i,r)),void 0,r)}registerEvaluatableExpressionProvider(e,t,i,r){const n=this._addNewAdapter(new Zy(this._documents,i),e);return this._proxy.$registerEvaluatableExpressionProvider(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideEvaluatableExpression(e,t,i,r){return this._withAdapter(e,Zy,(e=>e.provideEvaluatableExpression(pt.revive(t),i,r)),void 0,r)}registerInlineValuesProvider(e,t,i,r){const n="function"==typeof i.onDidChangeInlineValues?this._nextHandle():void 0,s=this._addNewAdapter(new Yy(this._documents,i),e);this._proxy.$registerInlineValuesProvider(s,this._transformDocumentSelector(t,e),n);let o=this._createDisposable(s);if(void 0!==n){const e=i.onDidChangeInlineValues((e=>this._proxy.$emitInlineValuesEvent(n)));o=_l.from(o,e)}return o}$provideInlineValues(e,t,i,r,n){return this._withAdapter(e,Yy,(e=>e.provideInlineValues(pt.revive(t),i,r,n)),void 0,n)}registerDocumentHighlightProvider(e,t,i){const r=this._addNewAdapter(new Xy(this._documents,i),e);return this._proxy.$registerDocumentHighlightProvider(r,this._transformDocumentSelector(t,e)),this._createDisposable(r)}$provideDocumentHighlights(e,t,i,r){return this._withAdapter(e,Xy,(e=>e.provideDocumentHighlights(pt.revive(t),i,r)),void 0,r)}registerLinkedEditingRangeProvider(e,t,i){const r=this._addNewAdapter(new ew(this._documents,i),e);return this._proxy.$registerLinkedEditingRangeProvider(r,this._transformDocumentSelector(t,e)),this._createDisposable(r)}$provideLinkedEditingRanges(e,t,i,r){return this._withAdapter(e,ew,(async e=>{const n=await e.provideLinkedEditingRanges(pt.revive(t),i,r);if(n)return{ranges:n.ranges,wordPattern:n.wordPattern?kw._serializeRegExp(n.wordPattern):void 0}}),void 0,r)}registerReferenceProvider(e,t,i){const r=this._addNewAdapter(new tw(this._documents,i),e);return this._proxy.$registerReferenceSupport(r,this._transformDocumentSelector(t,e)),this._createDisposable(r)}$provideReferences(e,t,i,r,n){return this._withAdapter(e,tw,(e=>e.provideReferences(pt.revive(t),i,r,n)),void 0,n)}registerCodeActionProvider(e,t,i,r){const n=new b,s=this._addNewAdapter(new iw(this._documents,this._commands.converter,this._diagnostics,i,this._logService,e,this._apiDeprecation),e);return this._proxy.$registerQuickFixSupport(s,this._transformDocumentSelector(t,e),{providedKinds:r?.providedCodeActionKinds?.map((e=>e.value)),documentation:r?.documentation?.map((e=>({kind:e.kind.value,command:this._commands.converter.toInternal(e.command,n)})))},kw._extLabel(e),Boolean(i.resolveCodeAction)),n.add(this._createDisposable(s)),n}$provideCodeActions(e,t,i,r,n){return this._withAdapter(e,iw,(e=>e.provideCodeActions(pt.revive(t),i,r,n)),void 0,n)}$resolveCodeAction(e,t,i){return this._withAdapter(e,iw,(e=>e.resolveCodeAction(t,i)),{},void 0)}$releaseCodeActions(e,t){this._withAdapter(e,iw,(e=>Promise.resolve(e.releaseCodeActions(t))),void 0,void 0)}registerDocumentFormattingEditProvider(e,t,i){const r=this._addNewAdapter(new nw(this._documents,i),e);return this._proxy.$registerDocumentFormattingSupport(r,this._transformDocumentSelector(t,e),e.identifier,e.displayName||e.name),this._createDisposable(r)}$provideDocumentFormattingEdits(e,t,i,r){return this._withAdapter(e,nw,(e=>e.provideDocumentFormattingEdits(pt.revive(t),i,r)),void 0,r)}registerDocumentRangeFormattingEditProvider(e,t,i){const r="function"==typeof i.provideDocumentRangesFormattingEdits,n=this._addNewAdapter(new sw(this._documents,i),e);return this._proxy.$registerRangeFormattingSupport(n,this._transformDocumentSelector(t,e),e.identifier,e.displayName||e.name,r),this._createDisposable(n)}$provideDocumentRangeFormattingEdits(e,t,i,r,n){return this._withAdapter(e,sw,(e=>e.provideDocumentRangeFormattingEdits(pt.revive(t),i,r,n)),void 0,n)}$provideDocumentRangesFormattingEdits(e,t,i,r,n){return this._withAdapter(e,sw,(e=>e.provideDocumentRangesFormattingEdits(pt.revive(t),i,r,n)),void 0,n)}registerOnTypeFormattingEditProvider(e,t,i,r){const n=this._addNewAdapter(new ow(this._documents,i),e);return this._proxy.$registerOnTypeFormattingSupport(n,this._transformDocumentSelector(t,e),r,e.identifier),this._createDisposable(n)}$provideOnTypeFormattingEdits(e,t,i,r,n,s){return this._withAdapter(e,ow,(e=>e.provideOnTypeFormattingEdits(pt.revive(t),i,r,n,s)),void 0,s)}registerWorkspaceSymbolProvider(e,t){const i=this._addNewAdapter(new aw(t,this._logService),e);return this._proxy.$registerNavigateTypeSupport(i,"function"==typeof t.resolveWorkspaceSymbol),this._createDisposable(i)}$provideWorkspaceSymbols(e,t,i){return this._withAdapter(e,aw,(e=>e.provideWorkspaceSymbols(t,i)),{symbols:[]},i)}$resolveWorkspaceSymbol(e,t,i){return this._withAdapter(e,aw,(e=>e.resolveWorkspaceSymbol(t,i)),void 0,void 0)}$releaseWorkspaceSymbols(e,t){this._withAdapter(e,aw,(e=>e.releaseWorkspaceSymbols(t)),void 0,void 0)}registerRenameProvider(e,t,i){const r=this._addNewAdapter(new lw(this._documents,i,this._logService),e);return this._proxy.$registerRenameSupport(r,this._transformDocumentSelector(t,e),lw.supportsResolving(i)),this._createDisposable(r)}$provideRenameEdits(e,t,i,r,n){return this._withAdapter(e,lw,(e=>e.provideRenameEdits(pt.revive(t),i,r,n)),void 0,n)}$resolveRenameLocation(e,t,i,r){return this._withAdapter(e,lw,(e=>e.resolveRenameLocation(pt.revive(t),i,r)),void 0,r)}registerDocumentSemanticTokensProvider(e,t,i,r){const n=this._addNewAdapter(new uw(this._documents,i),e),s="function"==typeof i.onDidChangeSemanticTokens?this._nextHandle():void 0;this._proxy.$registerDocumentSemanticTokensProvider(n,this._transformDocumentSelector(t,e),r,s);let o=this._createDisposable(n);if(s){const e=i.onDidChangeSemanticTokens((e=>this._proxy.$emitDocumentSemanticTokensEvent(s)));o=_l.from(o,e)}return o}$provideDocumentSemanticTokens(e,t,i,r){return this._withAdapter(e,uw,(e=>e.provideDocumentSemanticTokens(pt.revive(t),i,r)),null,r)}$releaseDocumentSemanticTokens(e,t){this._withAdapter(e,uw,(e=>e.releaseDocumentSemanticColoring(t)),void 0,void 0)}registerDocumentRangeSemanticTokensProvider(e,t,i,r){const n=this._addNewAdapter(new dw(this._documents,i),e);return this._proxy.$registerDocumentRangeSemanticTokensProvider(n,this._transformDocumentSelector(t,e),r),this._createDisposable(n)}$provideDocumentRangeSemanticTokens(e,t,i,r){return this._withAdapter(e,dw,(e=>e.provideDocumentRangeSemanticTokens(pt.revive(t),i,r)),null,r)}registerCompletionItemProvider(e,t,i,r){const n=this._addNewAdapter(new hw(this._documents,this._commands.converter,i,this._apiDeprecation,e),e);return this._proxy.$registerCompletionsProvider(n,this._transformDocumentSelector(t,e),r,hw.supportsResolving(i),e.identifier),this._createDisposable(n)}$provideCompletionItems(e,t,i,r,n){return this._withAdapter(e,hw,(e=>e.provideCompletionItems(pt.revive(t),i,r,n)),void 0,n)}$resolveCompletionItem(e,t,i){return this._withAdapter(e,hw,(e=>e.resolveCompletionItem(t,i)),void 0,i)}$releaseCompletionItems(e,t){this._withAdapter(e,hw,(e=>e.releaseCompletionItems(t)),void 0,void 0)}registerInlineCompletionsProvider(e,t,i,r){const n=new gw(e,this._documents,i,this._commands.converter),s=this._addNewAdapter(n,e);return this._proxy.$registerInlineCompletionsSupport(s,this._transformDocumentSelector(t,e),n.supportsHandleEvents,ja.toKey(e.identifier.value),r?.yieldTo?.map((e=>ja.toKey(e)))||[]),this._createDisposable(s)}$provideInlineCompletions(e,t,i,r,n){return this._withAdapter(e,pw,(e=>e.provideInlineCompletions(pt.revive(t),i,r,n)),void 0,n)}$handleInlineCompletionDidShow(e,t,i,r){this._withAdapter(e,pw,(async e=>{e.handleDidShowCompletionItem(t,i,r)}),void 0,void 0)}$handleInlineCompletionPartialAccept(e,t,i,r){this._withAdapter(e,pw,(async e=>{e.handlePartialAccept(t,i,r)}),void 0,void 0)}$freeInlineCompletionsList(e,t){this._withAdapter(e,pw,(async e=>{e.disposeCompletions(t)}),void 0,void 0)}registerSignatureHelpProvider(e,t,i,r){const n=Array.isArray(r)?{triggerCharacters:r,retriggerCharacters:[]}:r,s=this._addNewAdapter(new mw(this._documents,i),e);return this._proxy.$registerSignatureHelpProvider(s,this._transformDocumentSelector(t,e),n),this._createDisposable(s)}$provideSignatureHelp(e,t,i,r,n){return this._withAdapter(e,mw,(e=>e.provideSignatureHelp(pt.revive(t),i,r,n)),void 0,n)}$releaseSignatureHelp(e,t){this._withAdapter(e,mw,(e=>e.releaseSignatureHelp(t)),void 0,void 0)}registerInlayHintsProvider(e,t,i){const r="function"==typeof i.onDidChangeInlayHints?this._nextHandle():void 0,n=this._addNewAdapter(new vw(this._documents,this._commands.converter,i,this._logService,e),e);this._proxy.$registerInlayHintsProvider(n,this._transformDocumentSelector(t,e),"function"==typeof i.resolveInlayHint,r,kw._extLabel(e));let s=this._createDisposable(n);if(void 0!==r){const e=i.onDidChangeInlayHints((e=>this._proxy.$emitInlayHintsEvent(r)));s=_l.from(s,e)}return s}$provideInlayHints(e,t,i,r){return this._withAdapter(e,vw,(e=>e.provideInlayHints(pt.revive(t),i,r)),void 0,r)}$resolveInlayHint(e,t,i){return this._withAdapter(e,vw,(e=>e.resolveInlayHint(t,i)),void 0,i)}$releaseInlayHints(e,t){this._withAdapter(e,vw,(e=>e.releaseHints(t)),void 0,void 0)}registerDocumentLinkProvider(e,t,i){const r=this._addNewAdapter(new _w(this._documents,i),e);return this._proxy.$registerDocumentLinkProvider(r,this._transformDocumentSelector(t,e),"function"==typeof i.resolveDocumentLink),this._createDisposable(r)}$provideDocumentLinks(e,t,i){return this._withAdapter(e,_w,(e=>e.provideLinks(pt.revive(t),i)),void 0,i,"output"===t.scheme)}$resolveDocumentLink(e,t,i){return this._withAdapter(e,_w,(e=>e.resolveLink(t,i)),void 0,void 0,!0)}$releaseDocumentLinks(e,t){this._withAdapter(e,_w,(e=>e.releaseLinks(t)),void 0,void 0,!0)}registerColorProvider(e,t,i){const r=this._addNewAdapter(new yw(this._documents,i),e);return this._proxy.$registerDocumentColorProvider(r,this._transformDocumentSelector(t,e)),this._createDisposable(r)}$provideDocumentColors(e,t,i){return this._withAdapter(e,yw,(e=>e.provideColors(pt.revive(t),i)),[],i)}$provideColorPresentations(e,t,i,r){return this._withAdapter(e,yw,(e=>e.provideColorPresentations(pt.revive(t),i,r)),void 0,r)}registerFoldingRangeProvider(e,t,i){const r=this._nextHandle(),n="function"==typeof i.onDidChangeFoldingRanges?this._nextHandle():void 0;this._adapter.set(r,new Ew(new ww(this._documents,i),e)),this._proxy.$registerFoldingRangeProvider(r,this._transformDocumentSelector(t,e),e.identifier,n);let s=this._createDisposable(r);if(void 0!==n){const e=i.onDidChangeFoldingRanges((()=>this._proxy.$emitFoldingRangeEvent(n)));s=_l.from(s,e)}return s}$provideFoldingRanges(e,t,i,r){return this._withAdapter(e,ww,(e=>e.provideFoldingRanges(pt.revive(t),i,r)),void 0,r)}registerSelectionRangeProvider(e,t,i){const r=this._addNewAdapter(new bw(this._documents,i,this._logService),e);return this._proxy.$registerSelectionRangeProvider(r,this._transformDocumentSelector(t,e)),this._createDisposable(r)}$provideSelectionRanges(e,t,i,r){return this._withAdapter(e,bw,(e=>e.provideSelectionRanges(pt.revive(t),i,r)),[],r)}registerCallHierarchyProvider(e,t,i){const r=this._addNewAdapter(new xw(this._documents,i),e);return this._proxy.$registerCallHierarchyProvider(r,this._transformDocumentSelector(t,e)),this._createDisposable(r)}$prepareCallHierarchy(e,t,i,r){return this._withAdapter(e,xw,(e=>Promise.resolve(e.prepareSession(pt.revive(t),i,r))),void 0,r)}$provideCallHierarchyIncomingCalls(e,t,i,r){return this._withAdapter(e,xw,(e=>e.provideCallsTo(t,i,r)),void 0,r)}$provideCallHierarchyOutgoingCalls(e,t,i,r){return this._withAdapter(e,xw,(e=>e.provideCallsFrom(t,i,r)),void 0,r)}$releaseCallHierarchy(e,t){this._withAdapter(e,xw,(e=>Promise.resolve(e.releaseSession(t))),void 0,void 0)}registerTypeHierarchyProvider(e,t,i){const r=this._addNewAdapter(new Cw(this._documents,i),e);return this._proxy.$registerTypeHierarchyProvider(r,this._transformDocumentSelector(t,e)),this._createDisposable(r)}$prepareTypeHierarchy(e,t,i,r){return this._withAdapter(e,Cw,(e=>Promise.resolve(e.prepareSession(pt.revive(t),i,r))),void 0,r)}$provideTypeHierarchySupertypes(e,t,i,r){return this._withAdapter(e,Cw,(e=>e.provideSupertypes(t,i,r)),void 0,r)}$provideTypeHierarchySubtypes(e,t,i,r){return this._withAdapter(e,Cw,(e=>e.provideSubtypes(t,i,r)),void 0,r)}$releaseTypeHierarchy(e,t){this._withAdapter(e,Cw,(e=>Promise.resolve(e.releaseSession(t))),void 0,void 0)}registerDocumentOnDropEditProvider(e,t,i,r){const n=this._nextHandle();this._adapter.set(n,new Ew(new Dw(this._proxy,this._documents,i,n,e),e));const s=Zg(e,"dropMetadata")&&r?Dw.toInternalProviderId(e.identifier.value,r.id):void 0;return this._proxy.$registerDocumentOnDropEditProvider(n,this._transformDocumentSelector(t,e),s,Zg(e,"dropMetadata")?r:void 0),this._createDisposable(n)}$provideDocumentOnDropEdits(e,t,i,r,n,s){return this._withAdapter(e,Dw,(e=>Promise.resolve(e.provideDocumentOnDropEdits(t,pt.revive(i),r,n,s))),void 0,void 0)}registerMappedEditsProvider(e,t,i){const r=this._addNewAdapter(new Sw(this._documents,i),e);return this._proxy.$registerMappedEditsProvider(r,this._transformDocumentSelector(t,e)),this._createDisposable(r)}$provideMappedEdits(e,t,i,r,n){return this._withAdapter(e,Sw,(e=>Promise.resolve(e.provideMappedEdits(t,i,r,n))),null,n)}registerDocumentPasteEditProvider(e,t,i,r){const n=this._nextHandle();this._adapter.set(n,new Ew(new rw(this._proxy,this._documents,i,n,e),e));const s=rw.toInternalProviderId(e.identifier.value,r.id);return this._proxy.$registerPasteEditProvider(n,this._transformDocumentSelector(t,e),s,{supportsCopy:!!i.prepareDocumentPaste,supportsPaste:!!i.provideDocumentPasteEdits,copyMimeTypes:r.copyMimeTypes,pasteMimeTypes:r.pasteMimeTypes}),this._createDisposable(n)}$prepareDocumentPaste(e,t,i,r,n){return this._withAdapter(e,rw,(e=>e.prepareDocumentPaste(pt.revive(t),i,r,n)),void 0,n)}$providePasteEdits(e,t,i,r,n,s){return this._withAdapter(e,rw,(e=>e.providePasteEdits(t,pt.revive(i),r,n,s)),void 0,s)}static _serializeRegExp(e){return{pattern:e.source,flags:e.flags}}static _serializeIndentationRule(e){return{decreaseIndentPattern:kw._serializeRegExp(e.decreaseIndentPattern),increaseIndentPattern:kw._serializeRegExp(e.increaseIndentPattern),indentNextLinePattern:e.indentNextLinePattern?kw._serializeRegExp(e.indentNextLinePattern):void 0,unIndentedLinePattern:e.unIndentedLinePattern?kw._serializeRegExp(e.unIndentedLinePattern):void 0}}static _serializeOnEnterRule(e){return{beforeText:kw._serializeRegExp(e.beforeText),afterText:e.afterText?kw._serializeRegExp(e.afterText):void 0,previousLineText:e.previousLineText?kw._serializeRegExp(e.previousLineText):void 0,action:e.action}}static _serializeOnEnterRules(e){return e.map(kw._serializeOnEnterRule)}setLanguageConfiguration(e,t,i){const{wordPattern:r}=i;if(r&&qt(r))throw new Error(`Invalid language configuration: wordPattern '${r}' is not allowed to match the empty string.`);r?this._documents.setWordDefinitionFor(t,r):this._documents.setWordDefinitionFor(t,void 0),i.__electricCharacterSupport&&this._apiDeprecation.report("LanguageConfiguration.__electricCharacterSupport",e,"Do not use."),i.__characterPairSupport&&this._apiDeprecation.report("LanguageConfiguration.__characterPairSupport",e,"Do not use."),i.autoClosingPairs&&Yg(e,"languageConfigurationAutoClosingPairs");const n=this._nextHandle(),s={comments:i.comments,brackets:i.brackets,wordPattern:i.wordPattern?kw._serializeRegExp(i.wordPattern):void 0,indentationRules:i.indentationRules?kw._serializeIndentationRule(i.indentationRules):void 0,onEnterRules:i.onEnterRules?kw._serializeOnEnterRules(i.onEnterRules):void 0,__electricCharacterSupport:i.__electricCharacterSupport,__characterPairSupport:i.__characterPairSupport,autoClosingPairs:i.autoClosingPairs};return this._proxy.$setLanguageConfiguration(n,t,s),this._createDisposable(n)}$setWordDefinitions(e){for(const t of e)this._documents.setWordDefinitionFor(t.languageId,new RegExp(t.regexSource,t.regexFlags))}}class Iw{constructor(e,t,i,r){this._documents=t,this._commands=i,this._uriTransformer=r,this._languageIds=[],this._handlePool=0,this._ids=new Set,this._proxy=e.getProxy(Ft.MainThreadLanguages)}$acceptLanguageIds(e){this._languageIds=e}async getLanguages(){return this._languageIds.slice(0)}async changeLanguage(e,t){await this._proxy.$changeLanguage(e,t);const i=this._documents.getDocumentData(e);if(!i)throw new Error(`document '${e.toString()}' NOT found`);return i.document}async tokenAtPosition(e,t){const i=e.version,r=qd.from(t),n=await this._proxy.$tokensAtPosition(e.uri,r),s={type:ud.Other,range:e.getWordRangeAtPosition(t)??new wl(t.line,t.character,t.line,t.character)};if(!n)return s;const o={range:zd.to(n.range),type:jd.to(n.type)};return o.range.contains(t)?i!==e.version?s:o:s}createLanguageStatusItem(e,t,i){const r=this._handlePool++,n=this._proxy,s=this._ids,o=`${e.identifier.value}/${t}`;if(s.has(o))throw new Error(`LanguageStatusItem with id '${t}' ALREADY exists`);s.add(o);const a={selector:i,id:t,name:e.displayName??e.name,severity:Xl.Information,command:void 0,text:"",detail:"",busy:!1};let l;const c=new b,u=()=>{l?.dispose(),s.has(o)?l=function(e,t=0){const i=setTimeout(e,t);return w((()=>clearTimeout(i)))}((()=>{c.clear(),this._proxy.$setLanguageStatus(r,{id:o,name:a.name??e.displayName??e.name,source:e.displayName??e.name,selector:Kd.from(a.selector,this._uriTransformer),label:a.text,detail:a.detail??"",severity:a.severity===Xl.Error?Ns.Error:a.severity===Xl.Warning?Ns.Warning:Ns.Info,command:a.command&&this._commands.toInternal(a.command,c),accessibilityInfo:a.accessibilityInformation,busy:a.busy})}),0):console.warn(`LanguageStatusItem (${t}) from ${e.identifier.value} has been disposed and CANNOT be updated anymore`)},d={dispose(){c.dispose(),l?.dispose(),n.$removeLanguageStatus(r),s.delete(o)},get id(){return a.id},get name(){return a.name},set name(e){a.name=e,u()},get selector(){return a.selector},set selector(e){a.selector=e,u()},get text(){return a.text},set text(e){a.text=e,u()},get detail(){return a.detail},set detail(e){a.detail=e,u()},get severity(){return a.severity},set severity(e){a.severity=e,u()},get accessibilityInformation(){return a.accessibilityInformation},set accessibilityInformation(e){a.accessibilityInformation=e,u()},get command(){return a.command},set command(e){a.command=e,u()},get busy(){return a.busy},set busy(e){a.busy=e,u()}};return u(),d}}let Tw=class{constructor(e,t){this._logService=t,this._proxy=e.getProxy(Ft.MainThreadMessageService)}showMessage(e,t,i,r,n){const s={source:{identifier:e.identifier,label:e.displayName||e.name}};let o;var a;"string"==typeof r||(a=r)&&a.title?o=[r,...n]:(s.modal=r?.modal,s.useCustom=r?.useCustom,s.detail=r?.detail,o=n),s.useCustom&&Yg(e,"resolvers");const l=[];for(let c=0;c<o.length;c++){const e=o[c];if("string"==typeof e)l.push({title:e,handle:c,isCloseAffordance:!1});else if("object"==typeof e){const{title:t,isCloseAffordance:i}=e;l.push({title:t,isCloseAffordance:!!i,handle:c})}else this._logService.warn("Invalid message item:",e)}return this._proxy.$showMessage(t,i,s,l).then((e=>{if("number"==typeof e)return o[e]}))}};Tw=vs([_s(1,Gn)],Tw);var Pw=function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},Aw=function(e,t){return function(i,r){t(i,r,e)}};const Rw=un("progressService");class Fw{get value(){return this._value}constructor(e,t){this.callback=e,this.report=(null==t?void 0:t.async)?this._reportAsync.bind(this):this._reportSync.bind(this)}_reportSync(e){this._value=e,this.callback(this._value)}_reportAsync(e){Promise.resolve(this._lastTask).finally((()=>{this._value=e;const t=this.callback(this._value);this._lastTask=Promise.resolve(t).finally((()=>this._lastTask=void 0))}))}}Fw.None=Object.freeze({report(){}});let $w=class extends x{constructor(e,t){super(),this.deferred=new vr,t.withProgress(e,(e=>(this.reporter=e,this.lastStep&&e.report(this.lastStep),this.deferred.p))),this._register(w((()=>this.deferred.complete())))}report(e){this.reporter?this.reporter.report(e):this.lastStep=e}};$w=Pw([Aw(1,Rw)],$w),un("editorProgressService");class Lw{constructor(e){this._handles=0,this._mapHandleToCancellationSource=new Map,this._proxy=e}async withProgress(e,t,i){const r=this._handles++,{title:s,location:o,cancellable:a}=t,l={label:J(0,"{0} (Extension)",e.displayName||e.name),id:e.identifier.value};return this._proxy.$startProgress(r,{location:Nh.from(o),title:s,source:l,cancellable:a},e.isUnderDevelopment?void 0:e.identifier.value).catch(n),this._withProgress(r,i,!!a)}_withProgress(e,t,i){let r;i&&(r=new Ht,this._mapHandleToCancellationSource.set(e,r));const n=e=>{this._proxy.$progressEnd(e),this._mapHandleToCancellationSource.delete(e),r?.dispose()};let s;try{s=t(new Ow(this._proxy,e),i&&r?r.token:Ot.None)}catch(o){throw n(e),o}return s.then((t=>n(e)),(t=>n(e))),s}$acceptProgressCanceled(e){const t=this._mapHandleToCancellationSource.get(e);t&&(t.cancel(),this._mapHandleToCancellationSource.delete(e))}}class Ow extends Fw{constructor(e,t){super((e=>this.throttledReport(e))),this._proxy=e,this._handle=t}throttledReport(e){this._proxy.$progressReport(this._handle,e)}}var Mw,Nw,Hw;function Uw(e,t,i){const r=e.getProxy(Ft.MainThreadQuickOpen);class n{static{this._nextId=1}constructor(e,t){this._extensionId=e,this._onDidDispose=t,this._id=o._nextId++,this._visible=!1,this._expectingHide=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!0,this._value="",this._buttons=[],this._handlesToButtons=new Map,this._onDidAcceptEmitter=new B,this._onDidChangeValueEmitter=new B,this._onDidTriggerButtonEmitter=new B,this._onDidHideEmitter=new B,this._pendingUpdate={id:this._id},this._disposed=!1,this._disposables=[this._onDidTriggerButtonEmitter,this._onDidHideEmitter,this._onDidAcceptEmitter,this._onDidChangeValueEmitter],this.onDidChangeValue=this._onDidChangeValueEmitter.event,this.onDidAccept=this._onDidAcceptEmitter.event,this.onDidTriggerButton=this._onDidTriggerButtonEmitter.event,this.onDidHide=this._onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update({title:e})}get step(){return this._steps}set step(e){this._steps=e,this.update({step:e})}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update({totalSteps:e})}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update({enabled:e})}get busy(){return this._busy}set busy(e){this._busy=e,this.update({busy:e})}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){this._ignoreFocusOut=e,this.update({ignoreFocusOut:e})}get value(){return this._value}set value(e){this._value=e,this.update({value:e})}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update({placeholder:e})}get buttons(){return this._buttons}set buttons(e){this._buttons=e.slice(),this._handlesToButtons.clear(),e.forEach(((e,t)=>{const i=e===Uu.Back?-1:t;this._handlesToButtons.set(i,e)})),this.update({buttons:e.map(((e,t)=>({...s(e.iconPath),tooltip:e.tooltip,handle:e===Uu.Back?-1:t})))})}show(){this._visible=!0,this._expectingHide=!0,this.update({visible:!0})}hide(){this._visible=!1,this.update({visible:!1})}_fireDidAccept(){this._onDidAcceptEmitter.fire()}_fireDidChangeValue(e){this._value=e,this._onDidChangeValueEmitter.fire(e)}_fireDidTriggerButton(e){const t=this._handlesToButtons.get(e);t&&this._onDidTriggerButtonEmitter.fire(t)}_fireDidHide(){this._expectingHide&&(this._expectingHide=this._visible,this._onDidHideEmitter.fire())}dispose(){this._disposed||(this._disposed=!0,this._fireDidHide(),this._disposables=_(this._disposables),this._updateTimeout&&(clearTimeout(this._updateTimeout),this._updateTimeout=void 0),this._onDidDispose(),r.$dispose(this._id))}update(e){if(!this._disposed){for(const t of Object.keys(e)){const i=e[t];this._pendingUpdate[t]=void 0===i?null:i}"visible"in this._pendingUpdate?(this._updateTimeout&&(clearTimeout(this._updateTimeout),this._updateTimeout=void 0),this.dispatchUpdate()):this._visible&&!this._updateTimeout&&(this._updateTimeout=setTimeout((()=>{this._updateTimeout=void 0,this.dispatchUpdate()}),0))}}dispatchUpdate(){r.$createOrUpdate(this._pendingUpdate),this._pendingUpdate={id:this._id}}}function s(e){const t=function(e){if(e instanceof ru)return{id:e.id};const t=function(e){return"object"==typeof e&&"dark"in e?e.dark:e}(e),i=function(e){return"object"==typeof e&&"light"in e?e.light:e}(e);return{dark:"string"==typeof t?pt.file(t):t,light:"string"==typeof i?pt.file(i):i}}(e);let i,r;return"id"in t?r=to.asClassName(t):i=t,{iconPath:i,iconClass:r}}class o extends n{constructor(e,t){super(e.identifier,t),this.extension=e,this._items=[],this._handlesToItems=new Map,this._itemsToHandles=new Map,this._canSelectMany=!1,this._matchOnDescription=!0,this._matchOnDetail=!0,this._sortByLabel=!0,this._keepScrollPosition=!1,this._activeItems=[],this._onDidChangeActiveEmitter=new B,this._selectedItems=[],this._onDidChangeSelectionEmitter=new B,this._onDidTriggerItemButtonEmitter=new B,this.onDidChangeActive=this._onDidChangeActiveEmitter.event,this.onDidChangeSelection=this._onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this._onDidTriggerItemButtonEmitter.event,this._disposables.push(this._onDidChangeActiveEmitter,this._onDidChangeSelectionEmitter,this._onDidTriggerItemButtonEmitter),this.update({type:"quickPick"})}get items(){return this._items}set items(e){this._items=e.slice(),this._handlesToItems.clear(),this._itemsToHandles.clear(),e.forEach(((e,t)=>{this._handlesToItems.set(t,e),this._itemsToHandles.set(e,t)}));const t=Zg(this.extension,"quickPickItemTooltip"),i=[];for(let r=0;r<e.length;r++){const n=e[r];if(n.kind===Bu.Separator)i.push({type:"separator",label:n.label});else{n.tooltip&&!t&&console.warn(`Extension '${this.extension.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.extension.identifier.value}`);const e=n.iconPath?s(n.iconPath):void 0;i.push({handle:r,label:n.label,iconPath:e?.iconPath,iconClass:e?.iconClass,description:n.description,detail:n.detail,picked:n.picked,alwaysShow:n.alwaysShow,tooltip:t?Xd.fromStrict(n.tooltip):void 0,buttons:n.buttons?.map(((e,t)=>({...s(e.iconPath),tooltip:e.tooltip,handle:t})))})}}this.update({items:i})}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update({canSelectMany:e})}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update({matchOnDescription:e})}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update({matchOnDetail:e})}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update({sortByLabel:e})}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e,this.update({keepScrollPosition:e})}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e.filter((e=>this._itemsToHandles.has(e))),this.update({activeItems:this._activeItems.map((e=>this._itemsToHandles.get(e)))})}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e.filter((e=>this._itemsToHandles.has(e))),this.update({selectedItems:this._selectedItems.map((e=>this._itemsToHandles.get(e)))})}_fireDidChangeActive(e){const t=Hr(e.map((e=>this._handlesToItems.get(e))));this._activeItems=t,this._onDidChangeActiveEmitter.fire(t)}_fireDidChangeSelection(e){const t=Hr(e.map((e=>this._handlesToItems.get(e))));this._selectedItems=t,this._onDidChangeSelectionEmitter.fire(t)}_fireDidTriggerItemButton(e,t){const i=this._handlesToItems.get(e);if(!i||!i.buttons||!i.buttons.length)return;const r=i.buttons[t];r&&this._onDidTriggerItemButtonEmitter.fire({button:r,item:i})}}class l extends n{constructor(e,t){super(e.identifier,t),this._password=!1,this.update({type:"inputBox"})}get password(){return this._password}set password(e){this._password=e,this.update({password:e})}get prompt(){return this._prompt}set prompt(e){this._prompt=e,this.update({prompt:e})}get valueSelection(){return this._valueSelection}set valueSelection(e){this._valueSelection=e,this.update({valueSelection:e})}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,e?"string"==typeof e?this.update({validationMessage:e,severity:Ns.Error}):this.update({validationMessage:e.message,severity:e.severity??Ns.Error}):this.update({validationMessage:void 0,severity:Ns.Ignore})}}return new class{constructor(e,t){this._sessions=new Map,this._instances=0,this._workspace=e,this._commands=t}showQuickPick(e,t,i,n=Ot.None){this._onDidSelectItem=void 0;const o=Promise.resolve(t),l=++this._instances,c=r.$show(l,{title:i?.title,placeHolder:i?.placeHolder,matchOnDescription:i?.matchOnDescription,matchOnDetail:i?.matchOnDetail,ignoreFocusLost:i?.ignoreFocusOut,canPickMany:i?.canPickMany},n),u={},d=c.then((()=>u));return Promise.race([d,o]).then((t=>{if(t===u)return;const n=Zg(e,"quickPickItemTooltip");return o.then((t=>{const o=[];for(let i=0;i<t.length;i++){const r=t[i];if("string"==typeof r)o.push({label:r,handle:i});else if(r.kind===Bu.Separator)o.push({type:"separator",label:r.label});else{r.tooltip&&!n&&console.warn(`Extension '${e.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${e.identifier.value}`);const t=r.iconPath?s(r.iconPath):void 0;o.push({label:r.label,iconPath:t?.iconPath,iconClass:t?.iconClass,description:r.description,detail:r.detail,picked:r.picked,alwaysShow:r.alwaysShow,tooltip:n?Xd.fromStrict(r.tooltip):void 0,handle:i})}}return i&&"function"==typeof i.onDidSelectItem&&(this._onDidSelectItem=e=>{i.onDidSelectItem(t[e])}),r.$setItems(l,o),c.then((e=>"number"==typeof e?t[e]:Array.isArray(e)?e.map((e=>t[e])):void 0))}))})).then(void 0,(e=>{if(!a(e))return r.$setError(l,e),Promise.reject(e)}))}$onItemSelected(e){this._onDidSelectItem?.(e)}showInput(e,t=Ot.None){return this._validateInput=e?.validateInput,r.$input(e,"function"==typeof this._validateInput,t).then(void 0,(e=>{if(!a(e))return Promise.reject(e)}))}async $validateInput(e){if(!this._validateInput)return;const t=await this._validateInput(e);if(!t||"string"==typeof t)return t;let i;switch(t.severity){case Vu.Info:i=Ns.Info;break;case Vu.Warning:i=Ns.Warning;break;case Vu.Error:i=Ns.Error;break;default:i=t.message?Ns.Error:Ns.Ignore}return{content:t.message,severity:i}}async showWorkspaceFolderPick(e,t=Ot.None){const i=await this._commands.executeCommand("_workbench.pickWorkspaceFolder",[e]);if(!i)return;const r=await this._workspace.getWorkspaceFolders2();return r?r.find((e=>e.uri.toString()===i.uri.toString())):void 0}createQuickPick(e){const t=new o(e,(()=>this._sessions.delete(t._id)));return this._sessions.set(t._id,t),t}createInputBox(e){const t=new l(e,(()=>this._sessions.delete(t._id)));return this._sessions.set(t._id,t),t}$onDidChangeValue(e,t){const i=this._sessions.get(e);i?._fireDidChangeValue(t)}$onDidAccept(e){const t=this._sessions.get(e);t?._fireDidAccept()}$onDidChangeActive(e,t){const i=this._sessions.get(e);i instanceof o&&i._fireDidChangeActive(t)}$onDidChangeSelection(e,t){const i=this._sessions.get(e);i instanceof o&&i._fireDidChangeSelection(t)}$onDidTriggerButton(e,t){const i=this._sessions.get(e);i?._fireDidTriggerButton(t)}$onDidTriggerItemButton(e,t,i){const r=this._sessions.get(e);r instanceof o&&r._fireDidTriggerItemButton(t,i)}$onDidHide(e){const t=this._sessions.get(e);t?._fireDidHide()}}(t,i)}Ow.__decorator=vs([(Mw=100,Nw=(e,t)=>function(e,t){return e.message=t.message,"number"==typeof t.increment&&("number"==typeof e.increment?e.increment+=t.increment:e.increment=t.increment),e}(e,t),Hw=()=>Object.create(null),xy(((e,t)=>{const i=`$throttle$timer$${t}`,r=`$throttle$result$${t}`,n=`$throttle$lastRun$${t}`,s=`$throttle$pending$${t}`;return function(...t){if(this[r]||(this[r]=Hw?Hw():void 0),null!==this[n]&&void 0!==this[n]||(this[n]=-Number.MAX_VALUE),Nw&&(this[r]=Nw(this[r],...t)),this[s])return;const o=this[n]+Mw;o<=Date.now()?(this[n]=Date.now(),e.apply(this,[this[r]]),this[r]=Hw?Hw():void 0):(this[s]=!0,this[i]=setTimeout((()=>{this[s]=!1,this[n]=Date.now(),e.apply(this,[this[r]]),this[r]=Hw?Hw():void 0}),o-Date.now()))}})))],Ow.prototype,"throttledReport",null);const Bw=new e((()=>{const e=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}}));function Vw(e,t,i=!1){const r=e||"",n=t||"",s=Bw.value.collator.compare(r,n);return Bw.value.collatorIsNumeric&&0===s&&r!==n?r<n?-1:1:s}function Ww(e,t,i=!1){return i||(e=e&&e.toLowerCase(),t=t&&t.toLowerCase()),e===t?0:e<t?-1:1}function zw(e,t,i=!1){const r=e.split(ot),n=t.split(ot),s=r.length-1,o=n.length-1;let a,l;for(let c=0;;c++){if(a=s===c,l=o===c,a&&l)return Vw(r[c],n[c],i);if(a)return-1;if(l)return 1;const e=Ww(r[c],n[c],i);if(0!==e)return e}}var jw;function qw(e){return e?"string"==typeof e.iconPath?pt.file(e.iconPath):pt.isUri(e.iconPath)||to.isThemeIcon(e.iconPath)?e.iconPath:void 0:void 0}function Kw(e,t){if(!e.iconPath&&!t.iconPath)return 0;if(!e.iconPath)return-1;if(!t.iconPath)return 1;return zw("string"==typeof e.iconPath?e.iconPath:pt.isUri(e.iconPath)?e.iconPath.fsPath:e.iconPath.id,"string"==typeof t.iconPath?t.iconPath:pt.isUri(t.iconPath)?t.iconPath.fsPath:t.iconPath.id)}function Gw(e,t){let i=zw(e.resourceUri.fsPath,t.resourceUri.fsPath,!0);if(0!==i)return i;if(e.command&&t.command)i=function(e,t){if(e.command!==t.command)return e.command<t.command?-1:1;if(e.title!==t.title)return e.title<t.title?-1:1;if(e.tooltip!==t.tooltip){if(void 0!==e.tooltip&&void 0!==t.tooltip)return e.tooltip<t.tooltip?-1:1;if(void 0!==e.tooltip)return 1;if(void 0!==t.tooltip)return-1}if(e.arguments===t.arguments)return 0;if(!e.arguments)return-1;if(!t.arguments)return 1;if(e.arguments.length!==t.arguments.length)return e.arguments.length-t.arguments.length;for(let i=0;i<e.arguments.length;i++){const r=e.arguments[i],n=t.arguments[i];if(r!==n)return r<n?-1:1}return 0}(e.command,t.command);else{if(e.command)return 1;if(t.command)return-1}if(0!==i)return i;if(e.decorations&&t.decorations)i=function(e,t){let i=0;if(e.strikeThrough!==t.strikeThrough)return e.strikeThrough?1:-1;if(e.faded!==t.faded)return e.faded?1:-1;if(e.tooltip!==t.tooltip)return(e.tooltip||"").localeCompare(t.tooltip||"");if(i=Kw(e,t),0!==i)return i;if(e.light&&t.light)i=Kw(e.light,t.light);else{if(e.light)return 1;if(t.light)return-1}if(0!==i)return i;if(e.dark&&t.dark)i=Kw(e.dark,t.dark);else{if(e.dark)return 1;if(t.dark)return-1}return i}(e.decorations,t.decorations);else{if(e.decorations)return 1;if(t.decorations)return-1}return i}function Qw(e,t){return e.command===t.command&&e.title===t.title&&e.tooltip===t.tooltip&&(e.arguments&&t.arguments?function(e,t){for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}(e.arguments,t.arguments):e.arguments===t.arguments)}class Jw{#o;#m;get value(){return this._value}set value(e){e=e??"",this.#o.$setInputBoxValue(this._sourceControlHandle,e),this.updateValue(e)}get onDidChange(){return this._onDidChange.event}get placeholder(){return this._placeholder}set placeholder(e){this.#o.$setInputBoxPlaceholder(this._sourceControlHandle,e),this._placeholder=e}get validateInput(){return Yg(this._extension,"scmValidation"),this._validateInput}set validateInput(e){if(Yg(this._extension,"scmValidation"),e&&"function"!=typeof e)throw new Error(`[${this._extension.identifier.value}]: Invalid SCM input box validation function`);this._validateInput=e,this.#o.$setValidationProviderIsEnabled(this._sourceControlHandle,!!e)}get enabled(){return this._enabled}set enabled(e){e=!!e,this._enabled!==e&&(this._enabled=e,this.#o.$setInputBoxEnablement(this._sourceControlHandle,e))}get visible(){return this._visible}set visible(e){e=!!e,this._visible!==e&&(this._visible=e,this.#o.$setInputBoxVisibility(this._sourceControlHandle,e))}get document(){return Yg(this._extension,"scmTextDocument"),this.#m.getDocument(this._documentUri)}constructor(e,t,i,r,n){this._extension=e,this._sourceControlHandle=r,this._documentUri=n,this._value="",this._onDidChange=new B,this._placeholder="",this._enabled=!0,this._visible=!0,this.#m=t,this.#o=i}showValidationMessage(e,t){Yg(this._extension,"scmValidation"),this.#o.$showValidationMessage(this._sourceControlHandle,e,t)}$onInputBoxValueChange(e){this.updateValue(e)}updateValue(e){this._value=e,this._onDidChange.fire(e)}}class Zw{static{this._handlePool=0}get disposed(){return this._disposed}get id(){return this._id}get label(){return this._label}set label(e){this._label=e,this._proxy.$updateGroupLabel(this._sourceControlHandle,this.handle,e)}get hideWhenEmpty(){return this._hideWhenEmpty}set hideWhenEmpty(e){this._hideWhenEmpty=e,this._proxy.$updateGroup(this._sourceControlHandle,this.handle,this.features)}get features(){return{hideWhenEmpty:this.hideWhenEmpty}}get resourceStates(){return[...this._resourceStates]}set resourceStates(e){this._resourceStates=[...e],this._onDidUpdateResourceStates.fire()}constructor(e,t,i,r,n){this._proxy=e,this._commands=t,this._sourceControlHandle=i,this._id=r,this._label=n,this._resourceHandlePool=0,this._resourceStates=[],this._resourceStatesMap=new Map,this._resourceStatesCommandsMap=new Map,this._resourceStatesDisposablesMap=new Map,this._onDidUpdateResourceStates=new B,this.onDidUpdateResourceStates=this._onDidUpdateResourceStates.event,this._disposed=!1,this._onDidDispose=new B,this.onDidDispose=this._onDidDispose.event,this._handlesSnapshot=[],this._resourceSnapshot=[],this._hideWhenEmpty=void 0,this.handle=Zw._handlePool++}getResourceState(e){return this._resourceStatesMap.get(e)}$executeResourceCommand(e,t){const i=this._resourceStatesCommandsMap.get(e);return i?ar((()=>this._commands.executeCommand(i.command,...i.arguments||[],t))):Promise.resolve(void 0)}_takeResourceStateSnapshot(){const e=[...this._resourceStates].sort(Gw),t=Nr(this._resourceSnapshot,e,Gw).map((e=>{const t=e.toInsert.map((e=>{const t=this._resourceHandlePool++;this._resourceStatesMap.set(t,e);const i=e.resourceUri;let r;if(e.command)if("vscode.open"===e.command.command||"vscode.diff"===e.command.command){const i=new b;r=this._commands.converter.toInternal(e.command,i),this._resourceStatesDisposablesMap.set(t,i)}else this._resourceStatesCommandsMap.set(t,e.command);const n=qw(e.decorations);return{rawResource:[t,i,[e.decorations&&qw(e.decorations.light)||n,e.decorations&&qw(e.decorations.dark)||n],e.decorations&&e.decorations.tooltip||"",e.decorations&&!!e.decorations.strikeThrough,e.decorations&&!!e.decorations.faded,e.contextValue||"",r],handle:t}}));return{start:e.start,deleteCount:e.deleteCount,toInsert:t}})),i=t.map((({start:e,deleteCount:t,toInsert:i})=>[e,t,i.map((e=>e.rawResource))])),r=t.reverse();for(const{start:n,deleteCount:s,toInsert:o}of r){const e=o.map((e=>e.handle)),t=this._handlesSnapshot.splice(n,s,...e);for(const i of t)this._resourceStatesMap.delete(i),this._resourceStatesCommandsMap.delete(i),this._resourceStatesDisposablesMap.get(i)?.dispose(),this._resourceStatesDisposablesMap.delete(i)}return this._resourceSnapshot=e,i}dispose(){this._disposed=!0,this._onDidDispose.fire()}}class Yw{static{this._handlePool=0}#o;get id(){return this._id}get label(){return this._label}get rootUri(){return this._rootUri}get inputBox(){return this._inputBox}get count(){return this._count}set count(e){this._count!==e&&(this._count=e,this.#o.$updateSourceControl(this.handle,{count:e}))}get quickDiffProvider(){return this._quickDiffProvider}set quickDiffProvider(e){let t;this._quickDiffProvider=e,Zg(this._extension,"quickDiffProvider")&&(t=e?.label),this.#o.$updateSourceControl(this.handle,{hasQuickDiffProvider:!!e,quickDiffLabel:t})}get commitTemplate(){return this._commitTemplate}set commitTemplate(e){e!==this._commitTemplate&&(this._commitTemplate=e,this.#o.$updateSourceControl(this.handle,{commitTemplate:e}))}get acceptInputCommand(){return this._acceptInputCommand}set acceptInputCommand(e){this._acceptInputDisposables.value=new b,this._acceptInputCommand=e;const t=this._commands.converter.toInternal(e,this._acceptInputDisposables.value);this.#o.$updateSourceControl(this.handle,{acceptInputCommand:t})}get actionButton(){return Yg(this._extension,"scmActionButton"),this._actionButton}set actionButton(e){Yg(this._extension,"scmActionButton"),this._actionButtonDisposables.value=new b,this._actionButton=e;const t=void 0!==e?{command:this._commands.converter.toInternal(e.command,this._actionButtonDisposables.value),secondaryCommands:e.secondaryCommands?.map((e=>e.map((e=>this._commands.converter.toInternal(e,this._actionButtonDisposables.value))))),description:e.description,enabled:e.enabled}:void 0;this.#o.$updateSourceControl(this.handle,{actionButton:t??null})}get statusBarCommands(){return this._statusBarCommands}set statusBarCommands(e){if(this._statusBarCommands&&e&&Mr(this._statusBarCommands,e,Qw))return;this._statusBarDisposables.value=new b,this._statusBarCommands=e;const t=(e||[]).map((e=>this._commands.converter.toInternal(e,this._statusBarDisposables.value)));this.#o.$updateSourceControl(this.handle,{statusBarCommands:t})}get selected(){return this._selected}constructor(e,t,i,r,n,s,o){this._extension=e,this._commands=r,this._id=n,this._label=s,this._rootUri=o,this._groups=new Map,this._count=void 0,this._quickDiffProvider=void 0,this._commitTemplate=void 0,this._acceptInputDisposables=new C,this._acceptInputCommand=void 0,this._actionButtonDisposables=new C,this._statusBarDisposables=new C,this._statusBarCommands=void 0,this._selected=!1,this._onDidChangeSelection=new B,this.onDidChangeSelection=this._onDidChangeSelection.event,this.handle=Yw._handlePool++,this.createdResourceGroups=new Map,this.updatedResourceGroups=new Set,this.#o=i;const a=pt.from({scheme:Fi.vscodeSourceControl,path:`${n}/scm${this.handle}/input`,query:o?`rootUri=${encodeURIComponent(o.toString())}`:void 0});this._inputBox=new Jw(e,t,this.#o,this.handle,a),this.#o.$registerSourceControl(this.handle,n,s,o,a)}createResourceGroup(e,t){const i=new Zw(this.#o,this._commands,this.handle,e,t),r=$.once(i.onDidDispose)((()=>this.createdResourceGroups.delete(i)));return this.createdResourceGroups.set(i,r),this.eventuallyAddResourceGroups(),i}eventuallyAddResourceGroups(){const e=[],t=[];for(const[i,r]of this.createdResourceGroups){r.dispose();const n=i.onDidUpdateResourceStates((()=>{this.updatedResourceGroups.add(i),this.eventuallyUpdateResourceStates()}));$.once(i.onDidDispose)((()=>{this.updatedResourceGroups.delete(i),n.dispose(),this._groups.delete(i.handle),this.#o.$unregisterGroup(this.handle,i.handle)})),e.push([i.handle,i.id,i.label,i.features]);const s=i._takeResourceStateSnapshot();s.length>0&&t.push([i.handle,s]),this._groups.set(i.handle,i)}this.#o.$registerGroups(this.handle,e,t),this.createdResourceGroups.clear()}eventuallyUpdateResourceStates(){const e=[];this.updatedResourceGroups.forEach((t=>{const i=t._takeResourceStateSnapshot();0!==i.length&&e.push([t.handle,i])})),e.length>0&&this.#o.$spliceResourceStates(this.handle,e),this.updatedResourceGroups.clear()}getResourceGroup(e){return this._groups.get(e)}setSelectionState(e){this._selected=e,this._onDidChangeSelection.fire(e)}dispose(){this._acceptInputDisposables.dispose(),this._actionButtonDisposables.dispose(),this._statusBarDisposables.dispose(),this._groups.forEach((e=>e.dispose())),this.#o.$unregisterSourceControl(this.handle)}}Yw.__decorator=vs([Cy(100)],Yw.prototype,"eventuallyAddResourceGroups",null),Yw.__decorator=vs([Cy(100)],Yw.prototype,"eventuallyUpdateResourceStates",null);let Xw=class{static{jw=this}static{this._handlePool=0}get onDidChangeActiveProvider(){return this._onDidChangeActiveProvider.event}constructor(e,t,i,r){this._commands=t,this._extHostDocuments=i,this.logService=r,this._sourceControls=new Map,this._sourceControlsByExtension=new Ka,this._onDidChangeActiveProvider=new B,this._proxy=e.getProxy(Ft.MainThreadSCM),this._telemetry=e.getProxy(Ft.MainThreadTelemetry),t.registerArgumentProcessor({processArgument:e=>{if(e&&3===e.$mid){const t=this._sourceControls.get(e.sourceControlHandle);if(!t)return e;const i=t.getResourceGroup(e.groupHandle);return i?i.getResourceState(e.handle):e}if(e&&4===e.$mid){const t=this._sourceControls.get(e.sourceControlHandle);return t?t.getResourceGroup(e.groupHandle):e}if(e&&5===e.$mid){const t=this._sourceControls.get(e.handle);return t||e}return e}})}createSourceControl(e,t,i,r){this.logService.trace("ExtHostSCM#createSourceControl",e.identifier.value,t,i,r),this._telemetry.$publicLog2("api/scm/createSourceControl",{extensionId:e.identifier.value});const n=jw._handlePool++,s=new Yw(e,this._extHostDocuments,this._proxy,this._commands,t,i,r);this._sourceControls.set(n,s);const o=this._sourceControlsByExtension.get(e.identifier)||[];return o.push(s),this._sourceControlsByExtension.set(e.identifier,o),s}getLastInputBox(e){this.logService.trace("ExtHostSCM#getLastInputBox",e.identifier.value);const t=this._sourceControlsByExtension.get(e.identifier),i=t&&t[t.length-1];return i&&i.inputBox}$provideOriginalResource(e,t,i){const r=pt.revive(t);this.logService.trace("ExtHostSCM#$provideOriginalResource",e,r.toString());const n=this._sourceControls.get(e);return n&&n.quickDiffProvider&&n.quickDiffProvider.provideOriginalResource?ar((()=>n.quickDiffProvider.provideOriginalResource(r,i))).then((e=>e||null)):Promise.resolve(null)}$onInputBoxValueChange(e,t){this.logService.trace("ExtHostSCM#$onInputBoxValueChange",e);const i=this._sourceControls.get(e);return i?(i.inputBox.$onInputBoxValueChange(t),Promise.resolve(void 0)):Promise.resolve(void 0)}$executeResourceCommand(e,t,i,r){this.logService.trace("ExtHostSCM#$executeResourceCommand",e,t,i);const n=this._sourceControls.get(e);if(!n)return Promise.resolve(void 0);const s=n.getResourceGroup(t);return s?s.$executeResourceCommand(i,r):Promise.resolve(void 0)}$validateInput(e,t,i){this.logService.trace("ExtHostSCM#$validateInput",e);const r=this._sourceControls.get(e);return r&&r.inputBox.validateInput?ar((()=>r.inputBox.validateInput(t,i))).then((e=>{if(!e)return Promise.resolve(void 0);const t=Xd.fromStrict(e.message);return t?Promise.resolve([t,e.type]):Promise.resolve(void 0)})):Promise.resolve(void 0)}$setSelectedSourceControl(e){return this.logService.trace("ExtHostSCM#$setSelectedSourceControl",e),void 0!==e&&this._sourceControls.get(e)?.setSelectionState(!0),void 0!==this._selectedSourceControlHandle&&this._sourceControls.get(this._selectedSourceControlHandle)?.setSelectionState(!1),this._selectedSourceControlHandle=e,Promise.resolve(void 0)}};Xw=jw=vs([_s(3,Gn)],Xw);class eb{static{this.ID_GEN=0}static{this.ALLOWED_BACKGROUND_COLORS=new Map([["statusBarItem.errorBackground",new nu("statusBarItem.errorForeground")],["statusBarItem.warningBackground",new nu("statusBarItem.warningForeground")]])}#o;#v;constructor(e,t,i,r,n,s=vc.Left,o){if(this._disposed=!1,this._text="",this._staleCommandRegistrations=new b,this.#o=e,this.#v=t,n&&r){this._entryId=function(e,t){return`${ja.toKey(e)}.${t}`}(r.identifier,n);const e=i.get(this._entryId);e&&(s=e.alignLeft?vc.Left:vc.Right,o=e.priority,this._visible=!0,this.name=e.name,this.text=e.text,this.tooltip=e.tooltip,this.command=e.command,this.accessibilityInformation=e.accessibilityInformation)}else this._entryId=String(eb.ID_GEN++);this._extension=r,this._id=n,this._alignment=s,this._priority=this.validatePriority(o)}validatePriority(e){if(fi(e))return e===Number.POSITIVE_INFINITY?Number.MAX_VALUE:e===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:e}get id(){return this._id??this._extension.identifier.value}get alignment(){return this._alignment}get priority(){return this._priority}get text(){return this._text}get name(){return this._name}get tooltip(){return this._tooltip}get color(){return this._color}get backgroundColor(){return this._backgroundColor}get command(){return this._command?.fromApi}get accessibilityInformation(){return this._accessibilityInformation}set text(e){this._text=e,this.update()}set name(e){this._name=e,this.update()}set tooltip(e){this._tooltip=e,this.update()}set color(e){this._color=e,this.update()}set backgroundColor(e){e&&!eb.ALLOWED_BACKGROUND_COLORS.has(e.id)&&(e=void 0),this._backgroundColor=e,this.update()}set command(e){this._command?.fromApi!==e&&(this._latestCommandRegistration&&this._staleCommandRegistrations.add(this._latestCommandRegistration),this._latestCommandRegistration=new b,this._command="string"==typeof e?{fromApi:e,internal:this.#v.toInternal({title:"",command:e},this._latestCommandRegistration)}:e?{fromApi:e,internal:this.#v.toInternal(e,this._latestCommandRegistration)}:void 0,this.update())}set accessibilityInformation(e){this._accessibilityInformation=e,this.update()}show(){this._visible=!0,this.update()}hide(){clearTimeout(this._timeoutHandle),this._visible=!1,this.#o.$disposeEntry(this._entryId)}update(){!this._disposed&&this._visible&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=setTimeout((()=>{let e,t;this._timeoutHandle=void 0,e=this._extension?this._id?`${this._extension.identifier.value}.${this._id}`:this._extension.identifier.value:this._id,t=this._name?this._name:J(0,"{0} (Extension)",this._extension.displayName||this._extension.name);let i=this._color;this._backgroundColor&&(i=eb.ALLOWED_BACKGROUND_COLORS.get(this._backgroundColor.id));const r=Xd.fromStrict(this._tooltip);this.#o.$setEntry(this._entryId,e,this._extension?.identifier.value,t,this._text,r,this._command?.internal,i,this._backgroundColor,this._alignment===vc.Left,this._priority,this._accessibilityInformation),this._staleCommandRegistrations.clear()}),0))}dispose(){this.hide(),this._disposed=!0}}class tb{constructor(e){this._messages=[],this._item=e.createStatusBarEntry(void 0,"status.extensionMessage",vc.Left,Number.MIN_VALUE),this._item.name=J(0,"Extension Status")}dispose(){this._messages.length=0,this._item.dispose()}setMessage(e){const t={message:e};return this._messages.unshift(t),this._update(),new _l((()=>{const e=this._messages.indexOf(t);e>=0&&(this._messages.splice(e,1),this._update())}))}_update(){this._messages.length>0?(this._item.text=this._messages[0].message,this._item.show()):this._item.hide()}}class ib{constructor(e,t){this._existingItems=new Map,this._proxy=e.getProxy(Ft.MainThreadStatusBar),this._commands=t,this._statusMessage=new tb(this)}$acceptStaticEntries(e){for(const t of e)this._existingItems.set(t.entryId,t)}createStatusBarEntry(e,t,i,r){return new eb(this._proxy,this._commands,this._existingItems,e,t,i,r)}setStatusBarMessage(e,t){const i=this._statusMessage.setMessage(e);let r;return"number"==typeof t?r=setTimeout((()=>i.dispose()),t):void 0!==t&&t.then((()=>i.dispose()),(()=>i.dispose())),new _l((()=>{i.dispose(),clearTimeout(r)}))}}class rb{constructor(e,t){this._extHostDocumentsAndEditors=t,this._onDidChangeTextEditorSelection=new B({onListenerError:n}),this._onDidChangeTextEditorOptions=new B({onListenerError:n}),this._onDidChangeTextEditorVisibleRanges=new B({onListenerError:n}),this._onDidChangeTextEditorViewColumn=new B({onListenerError:n}),this._onDidChangeActiveTextEditor=new B({onListenerError:n}),this._onDidChangeVisibleTextEditors=new B({onListenerError:n}),this.onDidChangeTextEditorSelection=this._onDidChangeTextEditorSelection.event,this.onDidChangeTextEditorOptions=this._onDidChangeTextEditorOptions.event,this.onDidChangeTextEditorVisibleRanges=this._onDidChangeTextEditorVisibleRanges.event,this.onDidChangeTextEditorViewColumn=this._onDidChangeTextEditorViewColumn.event,this.onDidChangeActiveTextEditor=this._onDidChangeActiveTextEditor.event,this.onDidChangeVisibleTextEditors=this._onDidChangeVisibleTextEditors.event,this._proxy=e.getProxy(Ft.MainThreadTextEditors),this._extHostDocumentsAndEditors.onDidChangeVisibleTextEditors((e=>this._onDidChangeVisibleTextEditors.fire(e))),this._extHostDocumentsAndEditors.onDidChangeActiveTextEditor((e=>this._onDidChangeActiveTextEditor.fire(e)))}getActiveTextEditor(){return this._extHostDocumentsAndEditors.activeEditor()}getVisibleTextEditors(e){const t=this._extHostDocumentsAndEditors.allEditors();return e?t:t.map((e=>e.value))}async showTextDocument(e,t,i){let r;r="number"==typeof t?{position:Yd.from(t),preserveFocus:i}:"object"==typeof t?{position:Yd.from(t.viewColumn),preserveFocus:t.preserveFocus,selection:"object"==typeof t.selection?zd.from(t.selection):void 0,pinned:"boolean"==typeof t.preview?!t.preview:void 0}:{preserveFocus:!1};const n=await this._proxy.$tryShowTextDocument(e.uri,r),s=n&&this._extHostDocumentsAndEditors.getEditor(n);if(s)return s.value;throw n?new Error(`Could NOT open editor for "${e.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${e.uri.toString()}".`)}createTextEditorDecorationType(e,t){return new kv(this._proxy,e,t).value}$acceptEditorPropertiesChanged(e,t){const i=this._extHostDocumentsAndEditors.getEditor(e);if(!i)throw new Error("unknown text editor");if(t.options&&i._acceptOptions(t.options),t.selections){const e=t.selections.selections.map(Wd.to);i._acceptSelections(e)}if(t.visibleRanges){const e=Hr(t.visibleRanges.map(zd.to));i._acceptVisibleRanges(e)}if(t.options&&this._onDidChangeTextEditorOptions.fire({textEditor:i.value,options:{...t.options,lineNumbers:Oh.to(t.options.lineNumbers)}}),t.selections){const e=bc.fromValue(t.selections.source),r=t.selections.selections.map(Wd.to);this._onDidChangeTextEditorSelection.fire({textEditor:i.value,selections:r,kind:e})}if(t.visibleRanges){const e=Hr(t.visibleRanges.map(zd.to));this._onDidChangeTextEditorVisibleRanges.fire({textEditor:i.value,visibleRanges:e})}}$acceptEditorPositionData(e){for(const t in e){const i=this._extHostDocumentsAndEditors.getEditor(t);if(!i)throw new Error("Unknown text editor");const r=Yd.to(e[t]);i.value.viewColumn!==r&&(i._acceptViewColumn(r),this._onDidChangeTextEditorViewColumn.fire({textEditor:i.value,viewColumn:r}))}}getDiffInformation(e){return Promise.resolve(this._proxy.$getDiffInformation(e))}}var nb,sb;!function(e){e.getDefinition=function(e,t){let i=e.defaults;for(;to.isThemeIcon(i);){const e=ob.getIcon(i.id);if(!e)return;i=e.defaults}return i}}(nb||(nb={})),function(e){e.toJSONObject=function(e){return{weight:e.weight,style:e.style,src:e.src.map((e=>({format:e.format,location:e.location.toString()})))}},e.fromJSONObject=function(e){const t=e=>hi(e)?e:void 0;if(e&&Array.isArray(e.src)&&e.src.every((e=>hi(e.format)&&hi(e.location))))return{weight:t(e.weight),style:t(e.style),src:e.src.map((e=>({format:e.format,location:pt.parse(e.location)})))}}}(sb||(sb={}));const ob=new class{constructor(){this._onDidChange=new B,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:J(0,"The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:J(0,"The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${to.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,i,r){const n=this.iconsById[e];if(n){if(i&&!n.description){n.description=i,this.iconSchema.properties[e].markdownDescription=`${i} $(${e})`;const t=this.iconReferenceSchema.enum.indexOf(e);-1!==t&&(this.iconReferenceSchema.enumDescriptions[t]=i),this._onDidChange.fire()}return n}const s={id:e,description:i,defaults:t,deprecationMessage:r};this.iconsById[e]=s;const o={$ref:"#/definitions/icons"};return r&&(o.deprecationMessage=r),i&&(o.markdownDescription=`${i}: $(${e})`),this.iconSchema.properties[e]=o,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(i||""),this._onDidChange.fire(),{id:e}}deregisterIcon(e){delete this.iconsById[e],delete this.iconSchema.properties[e];const t=this.iconReferenceSchema.enum.indexOf(e);-1!==t&&(this.iconReferenceSchema.enum.splice(t,1),this.iconReferenceSchema.enumDescriptions.splice(t,1)),this._onDidChange.fire()}getIcons(){return Object.keys(this.iconsById).map((e=>this.iconsById[e]))}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconReferenceSchema(){return this.iconReferenceSchema}registerIconFont(e,t){const i=this.iconFontsById[e];return i||(this.iconFontsById[e]=t,this._onDidChange.fire(),t)}deregisterIconFont(e){delete this.iconFontsById[e]}getIconFont(e){return this.iconFontsById[e]}toString(){const e=(e,t)=>e.id.localeCompare(t.id),t=e=>{for(;to.isThemeIcon(e.defaults);)e=this.iconsById[e.defaults.id];return`codicon codicon-${e?e.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const r=Object.keys(this.iconsById).map((e=>this.iconsById[e]));for(const n of r.filter((e=>!!e.description)).sort(e))i.push(`|<i class="${t(n)}"></i>|${n.id}|${to.isThemeIcon(n.defaults)?n.defaults.id:n.id}|${n.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const n of r.filter((e=>!to.isThemeIcon(e.defaults))).sort(e))i.push(`|<i class="${t(n)}"></i>|${n.id}|`);return i.join("\n")}};function ab(e,t,i,r){return ob.registerIcon(e,t,i,r)}na.add("base.contributions.icons",ob),function(){const e=Zs;for(const t in e){const i="\\"+e[t].toString(16);ob.registerIcon(t,{fontCharacter:i})}}();const lb="vscode://schemas/icons",cb=na.as(wg);cb.registerSchema(lb,ob.getIconSchema());const ub=new gr((()=>cb.notifySchemaChanged(lb)),200);var db,hb,pb,gb,fb;ob.onDidChange((()=>{ub.isScheduled()||ub.schedule()})),ab("widget-close",Xs.close,J(0,"Icon for the close action in widgets.")),ab("goto-previous-location",Xs.arrowUp,J(0,"Icon for goto previous editor location.")),ab("goto-next-location",Xs.arrowDown,J(0,"Icon for goto next editor location.")),to.modify(Xs.sync,"spin"),to.modify(Xs.loading,"spin"),ab("default-view-icon",Xs.window,J(0,"Default view icon.")),function(e){e.ViewContainersRegistry="workbench.registry.view.containers",e.ViewsRegistry="workbench.registry.view"}(db||(db={})),function(e){e[e.Sidebar=0]="Sidebar",e[e.Panel=1]="Panel",e[e.AuxiliaryBar=2]="AuxiliaryBar"}(hb||(hb={}));function mb(e,t){const i=e.group??pb.More,r=t.group??pb.More;return i!==r?i.localeCompare(r):(e.order??5)-(t.order??5)}na.add(db.ViewContainersRegistry,new class extends x{constructor(){super(...arguments),this._onDidRegister=this._register(new B),this.onDidRegister=this._onDidRegister.event,this._onDidDeregister=this._register(new B),this.onDidDeregister=this._onDidDeregister.event,this.viewContainers=new Map,this.defaultViewContainers=[]}get all(){return Wr([...this.viewContainers.values()])}registerViewContainer(e,t,i){const r=this.get(e.id);if(r)return r;const n=e;n.openCommandActionDescriptor=i?.doNotRegisterOpenCommand?void 0:n.openCommandActionDescriptor??{id:n.id};return function(e,t,i){let r=e.get(t);return void 0===r&&(r=i,e.set(t,r)),r}(this.viewContainers,t,[]).push(n),i?.isDefault&&this.defaultViewContainers.push(n),this._onDidRegister.fire({viewContainer:n,viewContainerLocation:t}),n}deregisterViewContainer(e){for(const t of this.viewContainers.keys()){const i=this.viewContainers.get(t),r=i?.indexOf(e);if(-1!==r)return i?.splice(r,1),0===i.length&&this.viewContainers.delete(t),void this._onDidDeregister.fire({viewContainer:e,viewContainerLocation:t})}}get(e){return this.all.filter((t=>t.id===e))[0]}getViewContainers(e){return[...this.viewContainers.get(e)||[]]}getViewContainerLocation(e){return[...this.viewContainers.keys()].filter((t=>this.getViewContainers(t).filter((t=>t?.id===e.id)).length>0))[0]}getDefaultViewContainer(e){return this.defaultViewContainers.find((t=>this.getViewContainerLocation(t)===e))}}),function(e){e.Open="2_open",e.Debug="4_debug",e.SCM="5_scm",e.More="9_more"}(pb||(pb={}));na.add(db.ViewsRegistry,new class extends x{constructor(){super(...arguments),this._onViewsRegistered=this._register(new B),this.onViewsRegistered=this._onViewsRegistered.event,this._onViewsDeregistered=this._register(new B),this.onViewsDeregistered=this._onViewsDeregistered.event,this._onDidChangeContainer=this._register(new B),this.onDidChangeContainer=this._onDidChangeContainer.event,this._onDidChangeViewWelcomeContent=this._register(new B),this.onDidChangeViewWelcomeContent=this._onDidChangeViewWelcomeContent.event,this._viewContainers=[],this._views=new Map,this._viewWelcomeContents=new dm}registerViews(e,t){this.registerViews2([{views:e,viewContainer:t}])}registerViews2(e){e.forEach((({views:e,viewContainer:t})=>this.addViews(e,t))),this._onViewsRegistered.fire(e)}deregisterViews(e,t){const i=this.removeViews(e,t);i.length&&this._onViewsDeregistered.fire({views:i,viewContainer:t})}moveViews(e,t){for(const i of this._views.keys())if(i!==t){const r=this.removeViews(e,i);r.length&&(this.addViews(r,t),this._onDidChangeContainer.fire({views:r,from:i,to:t}))}}getViews(e){return this._views.get(e)||[]}getView(e){for(const t of this._viewContainers){const i=(this._views.get(t)||[]).filter((t=>t.id===e))[0];if(i)return i}return null}getViewContainer(e){for(const t of this._viewContainers){if((this._views.get(t)||[]).filter((t=>t.id===e))[0])return t}return null}registerViewWelcomeContent(e,t){return this._viewWelcomeContents.add(e,t),this._onDidChangeViewWelcomeContent.fire(e),w((()=>{this._viewWelcomeContents.delete(e,t),this._onDidChangeViewWelcomeContent.fire(e)}))}registerViewWelcomeContent2(e,t){const i=new Map;for(const[r,n]of t)this._viewWelcomeContents.add(e,n),i.set(r,w((()=>{this._viewWelcomeContents.delete(e,n),this._onDidChangeViewWelcomeContent.fire(e)})));return this._onDidChangeViewWelcomeContent.fire(e),i}getViewWelcomeContent(e){const t=[];return this._viewWelcomeContents.forEach(e,(e=>t.push(e))),t.sort(mb)}addViews(e,t){let i=this._views.get(t);i||(i=[],this._views.set(t,i),this._viewContainers.push(t));for(const r of e){if(null!==this.getView(r.id))throw new Error(J(0,"A view with id '{0}' is already registered",r.id));i.push(r)}}removeViews(e,t){const i=this._views.get(t);if(!i)return[];const r=[],n=[];for(const s of i)e.includes(s)?r.push(s):n.push(s);return r.length&&(n.length?this._views.set(t,n):(this._views.delete(t),this._viewContainers.splice(this._viewContainers.indexOf(t),1))),r}}),un("viewsService"),un("viewDescriptorService"),function(e){e[e.Default=0]="Default",e[e.Expand=1]="Expand"}(gb||(gb={})),function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"}(fb||(fb={}));class vb extends Error{constructor(e){super(J(0,"No tree view with id '{0}' registered.",e)),this.name="NoTreeViewError"}static is(e){return"NoTreeViewError"===e.name}}class _b{constructor(){this._dragOperations=new Map}removeDragOperationTransfer(e){if(e&&this._dragOperations.has(e)){const t=this._dragOperations.get(e);return this._dragOperations.delete(e),t}}addDragOperationTransfer(e,t){this._dragOperations.set(e,t)}}function yb(e,t){if(hi(e))return{label:e};if(e&&"object"==typeof e&&"string"==typeof e.label){let t;return Array.isArray(e.highlights)&&(t=e.highlights.filter((e=>2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1])),t=t.length?t:void 0),{label:e.label,highlights:t}}}class wb{constructor(e,t,i){function r(e){return e&&e.$treeViewId&&(e.$treeItemHandle||e.$selectedTreeItems||e.$focusedTreeItem)}this._proxy=e,this.commands=t,this.logService=i,this.treeViews=new Map,this.treeDragAndDropService=new _b,t.registerArgumentProcessor({processArgument:e=>r(e)?this.convertArgument(e):Array.isArray(e)&&e.length>0?e.map((e=>r(e)?this.convertArgument(e):e)):e})}registerTreeDataProvider(e,t,i){const r=this.createTreeView(e,{treeDataProvider:t},i);return{dispose:()=>r.dispose()}}createTreeView(e,t,i){if(!t||!t.treeDataProvider)throw new Error("Options with treeDataProvider is mandatory");const r=t.dragAndDropController?.dropMimeTypes??[],n=t.dragAndDropController?.dragMimeTypes??[],s=!!t.dragAndDropController?.handleDrag,o=!!t.dragAndDropController?.handleDrop,a=this.createExtHostTreeView(e,t,i),l={showCollapseAll:!!t.showCollapseAll,canSelectMany:!!t.canSelectMany,dropMimeTypes:r,dragMimeTypes:n,hasHandleDrag:s,hasHandleDrop:o,manuallyManageCheckboxes:!!t.manageCheckboxStateManually},c=this._proxy.$registerTreeViewDataProvider(e,l),u={get onDidCollapseElement(){return a.onDidCollapseElement},get onDidExpandElement(){return a.onDidExpandElement},get selection(){return a.selectedElements},get onDidChangeSelection(){return a.onDidChangeSelection},get activeItem(){return Yg(i,"treeViewActiveItem"),a.focusedElement},get onDidChangeActiveItem(){return Yg(i,"treeViewActiveItem"),a.onDidChangeActiveItem},get visible(){return a.visible},get onDidChangeVisibility(){return a.onDidChangeVisibility},get onDidChangeCheckboxState(){return a.onDidChangeCheckboxState},get message(){return a.message},set message(e){so(e)&&Yg(i,"treeViewMarkdownMessage"),a.message=e},get title(){return a.title},set title(e){a.title=e},get description(){return a.description},set description(e){a.description=e},get badge(){return a.badge},set badge(e){void 0!==e&&qc.isViewBadge(e)?a.badge={value:Math.floor(Math.abs(e.value)),tooltip:e.tooltip}:void 0===e&&(a.badge=void 0)},reveal:(e,t)=>a.reveal(e,t),dispose:async()=>{await c,this.treeViews.delete(e),a.dispose()}};return u}$getChildren(e,t){const i=this.treeViews.get(e);return i?i.getChildren(t):Promise.reject(new vb(e))}async $handleDrop(e,t,i,r,n,s,o,a){const l=this.treeViews.get(e);if(!l)return Promise.reject(new vb(e));const c=pp.toDataTransfer(i,(async i=>(await this._proxy.$resolveDropFileData(e,t,i)).buffer));return o===e&&a&&await this.addAdditionalTransferItems(c,l,a,n,s),l.onDrop(c,r,n)}async addAdditionalTransferItems(e,t,i,r,n){const s=this.treeDragAndDropService.removeDragOperationTransfer(n);if(s)(await s)?.forEach(((t,i)=>{t&&e.set(i,t)}));else if(n&&t.handleDrag){const s=t.handleDrag(i,e,r);this.treeDragAndDropService.addDragOperationTransfer(n,s),await s}return e}async $handleDrag(e,t,i,r){const n=this.treeViews.get(e);if(!n)return Promise.reject(new vb(e));const s=await this.addAdditionalTransferItems(new eu,n,t,r,i);return s&&!r.isCancellationRequested?pp.from(s):void 0}async $hasResolve(e){const t=this.treeViews.get(e);if(!t)throw new vb(e);return t.hasResolve}$resolve(e,t,i){const r=this.treeViews.get(e);if(!r)throw new vb(e);return r.resolveTreeItem(t,i)}$setExpanded(e,t,i){const r=this.treeViews.get(e);if(!r)throw new vb(e);r.setExpanded(t,i)}$setSelectionAndFocus(e,t,i){const r=this.treeViews.get(e);if(!r)throw new vb(e);r.setSelectionAndFocus(t,i)}$setVisible(e,t){const i=this.treeViews.get(e);if(!i){if(!t)return;throw new vb(e)}i.setVisible(t)}$changeCheckboxState(e,t){const i=this.treeViews.get(e);if(!i)throw new vb(e);i.setCheckboxState(t)}createExtHostTreeView(e,t,i){const r=new bb(e,t,this._proxy,this.commands.converter,this.logService,i);return this.treeViews.set(e,r),r}convertArgument(e){const t=this.treeViews.get(e.$treeViewId);return t&&"$treeItemHandle"in e?t.getExtensionElement(e.$treeItemHandle):t&&"$focusedTreeItem"in e&&e.$focusedTreeItem?t.focusedElement:null}}class bb extends x{static{this.LABEL_HANDLE_PREFIX="0"}static{this.ID_HANDLE_PREFIX="1"}get visible(){return this._visible}get selectedElements(){return this._selectedHandles.map((e=>this.getExtensionElement(e))).filter((e=>!_i(e)))}get focusedElement(){return this._focusedHandle?this.getExtensionElement(this._focusedHandle):void 0}constructor(e,t,i,r,n,s){if(super(),this.viewId=e,this.proxy=i,this.commands=r,this.logService=n,this.extension=s,this.roots=void 0,this.elements=new Map,this.nodes=new Map,this._visible=!1,this._selectedHandles=[],this._focusedHandle=void 0,this._onDidExpandElement=this._register(new B),this.onDidExpandElement=this._onDidExpandElement.event,this._onDidCollapseElement=this._register(new B),this.onDidCollapseElement=this._onDidCollapseElement.event,this._onDidChangeSelection=this._register(new B),this.onDidChangeSelection=this._onDidChangeSelection.event,this._onDidChangeActiveItem=this._register(new B),this.onDidChangeActiveItem=this._onDidChangeActiveItem.event,this._onDidChangeVisibility=this._register(new B),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._onDidChangeCheckboxState=this._register(new B),this.onDidChangeCheckboxState=this._onDidChangeCheckboxState.event,this._onDidChangeData=this._register(new B),this.refreshPromise=Promise.resolve(),this.refreshQueue=Promise.resolve(),this._message="",this._title="",this._refreshCancellationSource=new Ht,s.contributes&&s.contributes.views)for(const l in s.contributes.views)for(const t of s.contributes.views[l])t.id===e&&(this._title=t.name);let o,a;this.dataProvider=t.treeDataProvider,this.dndController=t.dragAndDropController,this.dataProvider.onDidChangeTreeData&&this._register(this.dataProvider.onDidChangeTreeData((e=>this._onDidChangeData.fire({message:!1,element:e})))),this._register($.debounce(this._onDidChangeData.event,((e,t)=>(e||(e={message:!1,elements:[]}),!1!==t.element&&(o||(o=new Promise((e=>a=e)),this.refreshPromise=this.refreshPromise.then((()=>o))),Array.isArray(t.element)?e.elements.push(...t.element):e.elements.push(t.element)),t.message&&(e.message=!0),e)),200,!0)((({message:e,elements:t})=>{t.length&&(this.refreshQueue=this.refreshQueue.then((()=>{const e=a;return o=null,this.refresh(t).then((()=>e()))}))),e&&this.proxy.$setMessage(this.viewId,Xd.fromStrict(this._message)??"")})))}async getChildren(e){const t=e?this.getExtensionElement(e):void 0;if(e&&!t)return this.logService.error(`No tree item with id '${e}' found.`),Promise.resolve([]);let i=this.getChildrenNodes(e);return i||(i=await this.fetchChildrenNodes(t)),i?i.map((e=>e.item)):void 0}getExtensionElement(e){return this.elements.get(e)}reveal(e,t){const i=!!_i((t=t||{select:!0,focus:!1}).select)||t.select,r=!_i(t.focus)&&t.focus,n=!_i(t.expand)&&t.expand;return"function"!=typeof this.dataProvider.getParent?Promise.reject(new Error("Required registered TreeDataProvider to implement 'getParent' method to access 'reveal' method")):e?this.refreshPromise.then((()=>this.resolveUnknownParentChain(e))).then((t=>this.resolveTreeNode(e,t[t.length-1]).then((e=>this.proxy.$reveal(this.viewId,{item:e.item,parentChain:t.map((e=>e.item))},{select:i,focus:r,expand:n})))),(e=>this.logService.error(e))):this.proxy.$reveal(this.viewId,void 0,{select:i,focus:r,expand:n})}get message(){return this._message}set message(e){this._message=e,this._onDidChangeData.fire({message:!0,element:!1})}get title(){return this._title}set title(e){this._title=e,this.proxy.$setTitle(this.viewId,e,this._description)}get description(){return this._description}set description(e){this._description=e,this.proxy.$setTitle(this.viewId,this._title,e)}get badge(){return this._badge}set badge(e){this._badge?.value===e?.value&&this._badge?.tooltip===e?.tooltip||(this._badge=dp.from(e),this.proxy.$setBadge(this.viewId,e))}setExpanded(e,t){const i=this.getExtensionElement(e);i&&(t?this._onDidExpandElement.fire(Object.freeze({element:i})):this._onDidCollapseElement.fire(Object.freeze({element:i})))}setSelectionAndFocus(e,t){const i=!Mr(this._selectedHandles,e);this._selectedHandles=e;const r=this._focusedHandle!==t;this._focusedHandle=t,i&&this._onDidChangeSelection.fire(Object.freeze({selection:this.selectedElements})),r&&this._onDidChangeActiveItem.fire(Object.freeze({activeItem:this.focusedElement}))}setVisible(e){e!==this._visible&&(this._visible=e,this._onDidChangeVisibility.fire(Object.freeze({visible:this._visible})))}async setCheckboxState(e){const t=(await Promise.all(e.map((async e=>{const t=this.getExtensionElement(e.treeItemHandle);return t?{extensionItem:t,treeItem:await this.dataProvider.getTreeItem(t),newState:e.newState?Qc.Checked:Qc.Unchecked}:Promise.resolve(void 0)})))).filter((e=>void 0!==e));t.forEach((e=>{e.treeItem.checkboxState=e.newState?Qc.Checked:Qc.Unchecked})),this._onDidChangeCheckboxState.fire({items:t.map((e=>[e.extensionItem,e.newState]))})}async handleDrag(e,t,i){const r=[];for(const n of e){const e=this.getExtensionElement(n);e&&r.push(e)}if(this.dndController?.handleDrag&&0!==r.length)return await this.dndController.handleDrag(r,t,i),t}get hasHandleDrag(){return!!this.dndController?.handleDrag}async onDrop(e,t,i){const r=t?this.getExtensionElement(t):void 0;if((r||!t)&&this.dndController?.handleDrop)return ar((()=>this.dndController?.handleDrop?this.dndController.handleDrop(r,e,i):void 0))}get hasResolve(){return!!this.dataProvider.resolveTreeItem}async resolveTreeItem(e,t){if(!this.dataProvider.resolveTreeItem)return;const i=this.elements.get(e);if(i){const e=this.nodes.get(i);if(e){const r=await this.dataProvider.resolveTreeItem(e.extensionItem,i,t)??e.extensionItem;return this.validateTreeItem(r),e.item.tooltip=this.getTooltip(r.tooltip),e.item.command=this.getCommand(e.disposableStore,r.command),e.item}}}resolveUnknownParentChain(e){return this.resolveParent(e).then((e=>e?this.resolveUnknownParentChain(e).then((t=>this.resolveTreeNode(e,t[t.length-1]).then((e=>(t.push(e),t))))):Promise.resolve([])))}resolveParent(e){const t=this.nodes.get(e);return t?Promise.resolve(t.parent?this.elements.get(t.parent.item.handle):void 0):ar((()=>this.dataProvider.getParent(e)))}resolveTreeNode(e,t){const i=this.nodes.get(e);return i?Promise.resolve(i):ar((()=>this.dataProvider.getTreeItem(e))).then((i=>this.createHandle(e,i,t,!0))).then((e=>this.getChildren(t?t.item.handle:void 0).then((()=>{const t=this.getExtensionElement(e);if(t){const e=this.nodes.get(t);if(e)return Promise.resolve(e)}throw new Error(`Cannot resolve tree item for element ${e} from extension ${this.extension.identifier.value}`)}))))}getChildrenNodes(e){if(e){let t;if("string"==typeof e){const i=this.getExtensionElement(e);t=i?this.nodes.get(i):void 0}else t=e;return t&&t.children||void 0}return this.roots}async fetchChildrenNodes(e){this.clearChildren(e);const t=new Ht(this._refreshCancellationSource.token);try{const i=e?this.nodes.get(e):void 0,r=await this.dataProvider.getChildren(e);if(t.token.isCancellationRequested)return;const n=await Promise.all(Hr(r||[]).map((async e=>{const r=await this.dataProvider.getTreeItem(e);return r&&!t.token.isCancellationRequested?this.createAndRegisterTreeNode(e,r,i):null})));if(t.token.isCancellationRequested)return;return Hr(n)}finally{t.dispose()}}refresh(e){if(e.some((e=>!e)))return this._refreshCancellationSource.dispose(!0),this._refreshCancellationSource=new Ht,this.clearAll(),this.proxy.$refresh(this.viewId);{const t=this.getHandlesToRefresh(e);if(t.length)return this.refreshHandles(t)}return Promise.resolve(void 0)}getHandlesToRefresh(e){const t=new Set,i=e.map((e=>this.nodes.get(e)));for(const n of i)if(n&&!t.has(n.item.handle)){let e=n;for(;e&&e.parent&&-1===i.findIndex((t=>e&&e.parent&&t&&t.item.handle===e.parent.item.handle));){const t=this.elements.get(e.parent.item.handle);e=t?this.nodes.get(t):void 0}e&&!e.parent&&t.add(n.item.handle)}const r=[];return t.forEach((e=>{const i=this.elements.get(e);if(i){const n=this.nodes.get(i);!n||n.parent&&t.has(n.parent.item.handle)||r.push(e)}})),r}refreshHandles(e){const t={};return Promise.all(e.map((e=>this.refreshNode(e).then((i=>{i&&(t[e]=i.item)}))))).then((()=>Object.keys(t).length?this.proxy.$refresh(this.viewId,t):void 0))}refreshNode(e){const t=this.getExtensionElement(e);if(t){const e=this.nodes.get(t);if(e)return this.clearChildren(t),ar((()=>this.dataProvider.getTreeItem(t))).then((i=>{if(i){const r=this.createTreeNode(t,i,e.parent);return this.updateNodeCache(t,r,e,e.parent),e.dispose(),r}return null}))}return Promise.resolve(null)}createAndRegisterTreeNode(e,t,i){const r=this.createTreeNode(e,t,i);if(t.id&&this.elements.has(r.item.handle))throw new Error(J(0,"Element with id {0} is already registered",t.id));return this.addNodeToCache(e,r),this.addNodeToParentCache(r,i),r}getTooltip(e){return tc.isMarkdownString(e)?Xd.from(e):e}getCommand(e,t){return t?{...this.commands.toInternal(t,e),originalId:t.command}:void 0}getCheckbox(e){if(void 0===e.checkboxState)return;let t,i,r;return"number"==typeof e.checkboxState?t=e.checkboxState:(t=e.checkboxState.state,i=e.checkboxState.tooltip,r=e.checkboxState.accessibilityInformation),{isChecked:t===Qc.Checked,tooltip:i,accessibilityInformation:r}}validateTreeItem(e){if(!Kc.isTreeItem(e,this.extension))throw new Error(`Extension ${this.extension.identifier.value} has provided an invalid tree item.`)}createTreeNode(e,t,i){this.validateTreeItem(t);const r=new b,n=this.createHandle(e,t,i),s=this.getLightIconPath(t);return{item:{handle:n,parentHandle:i?i.item.handle:void 0,label:yb(t.label),description:t.description,resourceUri:t.resourceUri,tooltip:this.getTooltip(t.tooltip),command:this.getCommand(r,t.command),contextValue:t.contextValue,icon:s,iconDark:this.getDarkIconPath(t)||s,themeIcon:this.getThemeIcon(t),collapsibleState:_i(t.collapsibleState)?Gc.None:t.collapsibleState,accessibilityInformation:t.accessibilityInformation,checkbox:this.getCheckbox(t)},extensionItem:t,parent:i,children:void 0,disposableStore:r,dispose(){r.dispose()}}}getThemeIcon(e){return e.iconPath instanceof ru?e.iconPath:void 0}createHandle(e,{id:t,label:i,resourceUri:r},n,s){if(t)return`${bb.ID_HANDLE_PREFIX}/${t}`;const o=yb(i),a=n?n.item.handle:bb.LABEL_HANDLE_PREFIX;let l=o?o.label:r?Qi(r):"";l=-1!==l.indexOf("/")?l.replace("/","//"):l;const c=this.nodes.has(e)?this.nodes.get(e).item.handle:void 0,u=this.getChildrenNodes(n)||[];let d,h=0;do{if(d=`${a}/${h}:${l}`,s||!this.elements.has(d)||c===d)break;h++}while(h<=u.length);return d}getLightIconPath(e){if(e.iconPath&&!(e.iconPath instanceof ru))return"string"==typeof e.iconPath||pt.isUri(e.iconPath)?this.getIconPath(e.iconPath):this.getIconPath(e.iconPath.light)}getDarkIconPath(e){if(e.iconPath&&!(e.iconPath instanceof ru)&&e.iconPath.dark)return this.getIconPath(e.iconPath.dark)}getIconPath(e){return pt.isUri(e)?e:pt.file(e)}addNodeToCache(e,t){this.elements.set(t.item.handle,e),this.nodes.set(e,t)}updateNodeCache(e,t,i,r){this.elements.delete(t.item.handle),this.nodes.delete(e),t.item.handle!==i.item.handle&&this.elements.delete(i.item.handle),this.addNodeToCache(e,t);const n=this.getChildrenNodes(r)||[],s=n.filter((e=>e.item.handle===i.item.handle))[0];s&&n.splice(n.indexOf(s),1,t)}addNodeToParentCache(e,t){t?(t.children||(t.children=[]),t.children.push(e)):(this.roots||(this.roots=[]),this.roots.push(e))}clearChildren(e){if(e){const t=this.nodes.get(e);if(t){if(t.children)for(const e of t.children){const t=this.elements.get(e.item.handle);t&&this.clear(t)}t.children=void 0}}else this.clearAll()}clear(e){const t=this.nodes.get(e);if(t){if(t.children)for(const e of t.children){const t=this.elements.get(e.item.handle);t&&this.clear(t)}this.nodes.delete(e),this.elements.delete(t.item.handle),t.dispose()}}clearAll(){this.roots=void 0,this.elements.clear(),this.nodes.forEach((e=>e.dispose())),this.nodes.clear()}dispose(){this._refreshCancellationSource.dispose(),this.clearAll(),this.proxy.$disposeTree(this.viewId)}}class xb{static{this.HandlePool=0}constructor(e){this.handles=new qa,this.handlers=new Map,this._proxy=e.getProxy(Ft.MainThreadUrls)}registerUriHandler(e,t){const i=e.identifier;if(this.handles.has(i))throw new Error(`Protocol handler already registered for extension ${i}`);const r=xb.HandlePool++;return this.handles.add(i),this.handlers.set(r,t),this._proxy.$registerUriHandler(r,i,e.displayName||e.name),w((()=>{this.handles.delete(i),this.handlers.delete(r),this._proxy.$unregisterUriHandler(r)}))}$handleExternalUri(e,t){const i=this.handlers.get(e);if(!i)return Promise.resolve(void 0);try{i.handleUri(pt.revive(t))}catch(n){r(n)}return Promise.resolve(void 0)}async createAppUri(e){return pt.revive(await this._proxy.$createAppUri(e))}}const Cb=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/,Db=/^-(\d{4})(\d{2})(\d{2})$/;function Sb(e){if(!function(e){return"*"===(e=e.trim())||Cb.test(e)}(e))return null;if("*"===(e=e.trim()))return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};const t=e.match(Cb);return t?{hasCaret:"^"===t[1],hasGreaterEquals:">="===t[1],majorBase:"x"===t[2]?0:parseInt(t[2],10),majorMustEqual:"x"!==t[2],minorBase:"x"===t[4]?0:parseInt(t[4],10),minorMustEqual:"x"!==t[4],patchBase:"x"===t[6]?0:parseInt(t[6],10),patchMustEqual:"x"!==t[6],preRelease:t[8]||null}:null}function Eb(e){if(!e)return null;const t=e.majorBase,i=e.majorMustEqual,r=e.minorBase;let n=e.minorMustEqual;const s=e.patchBase;let o=e.patchMustEqual;e.hasCaret&&(0===t||(n=!1),o=!1);let a=0;if(e.preRelease){const t=Db.exec(e.preRelease);if(t){const[,e,i,r]=t;a=Date.UTC(Number(e),Number(i)-1,Number(r))}}return{majorBase:t,majorMustEqual:i,minorBase:r,minorMustEqual:n,patchBase:s,patchMustEqual:o,isMinimum:e.hasGreaterEquals,notBefore:a}}class kb{constructor(){this.buffers=[]}add(e){let t=this.buffers.indexOf(e);return t<0&&(t=this.buffers.length,this.buffers.push(e)),t}}function Ib(e,t){if(t.serializeBuffersForPostMessage){const t=new kb,i=(e,i)=>{if(i instanceof ArrayBuffer){return{$$vscode_array_buffer_reference$$:!0,index:t.add(i)}}if(ArrayBuffer.isView(i)){const e=function(e){switch(e.constructor.name){case"Int8Array":return 1;case"Uint8Array":return 2;case"Uint8ClampedArray":return 3;case"Int16Array":return 4;case"Uint16Array":return 5;case"Int32Array":return 6;case"Uint32Array":return 7;case"Float32Array":return 8;case"Float64Array":return 9;case"BigInt64Array":return 10;case"BigUint64Array":return 11}return}(i);if(e){return{$$vscode_array_buffer_reference$$:!0,index:t.add(i.buffer),view:{type:e,byteLength:i.byteLength,byteOffset:i.byteOffset}}}}return i};return{message:JSON.stringify(e,i),buffers:t.buffers.map((e=>{const t=new Uint8Array(e);return I.wrap(t)}))}}return{message:JSON.stringify(e),buffers:[]}}const Tb="vscode-cdn.net",Pb=`vscode-resource.${Tb}`,Ab=`'self' https://*.${Tb}`;function Rb(e,t){return e.scheme===Fi.http||e.scheme===Fi.https?e:(t&&t.authority&&t.isRemote&&e.scheme===Fi.file&&(e=pt.from({scheme:Fi.vscodeRemote,authority:t.authority,path:e.path})),pt.from({scheme:Fi.https,authority:`${e.scheme}+${i=e.authority,i.replace(/./g,(e=>{const t=e.charCodeAt(0);return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57?e:"-"+t.toString(16).padStart(4,"0")}))}.${Pb}`,path:e.path,fragment:e.fragment,query:e.query}));var i}class Fb{#_;#o;#y;#w;#b;#x;#C;#D;#S;#E;#k;#I;constructor(e,t,i,r,n,s,o){this.#C="",this.#S=!1,this.#E=!1,this._onMessageEmitter=new B,this.onDidReceiveMessage=this._onMessageEmitter.event,this.#T=new B,this._onDidDispose=this.#T.event,this.#_=e,this.#o=t,this.#D=i,this.#w=r,this.#b=n,this.#x=s,this.#k=$b(s),this.#I=function(e){try{const t=Eb(Sb(e.engines.vscode));return!!t&&(t.majorBase<1||1===t.majorBase&&t.minorBase<60)}catch{return!1}}(s),this.#y=o}#T;dispose(){this.#S=!0,this.#T.fire(),this.#T.dispose(),this._onMessageEmitter.dispose()}asWebviewUri(e){return this.#E=!0,Rb(e,this.#w)}get cspSource(){const e=this.#x.extensionLocation;if(e.scheme===Fi.https||e.scheme===Fi.http){let t=e.toString();return t.endsWith("/")||(t+="/"),t+" "+Ab}return Ab}get html(){return this.assertNotDisposed(),this.#C}set html(e){this.assertNotDisposed(),this.#C!==e&&(this.#C=e,this.#I&&!this.#E&&/(["'])vscode-resource:([^\s'"]+?)(["'])/i.test(e)&&(this.#E=!0,this.#y.report("Webview vscode-resource: uris",this.#x,"Please migrate to use the 'webview.asWebviewUri' api instead: https://aka.ms/vscode-webview-use-aswebviewuri")),this.#o.$setHtml(this.#_,this.rewriteOldResourceUrlsIfNeeded(e)))}get options(){return this.assertNotDisposed(),this.#D}set options(e){this.assertNotDisposed(),As(this.#D,e)||this.#o.$setOptions(this.#_,Mb(this.#x,this.#b,e)),this.#D=e}async postMessage(e){if(this.#S)return!1;const t=Ib(e,{serializeBuffersForPostMessage:this.#k});return this.#o.$postMessage(this.#_,t.message,...t.buffers)}assertNotDisposed(){if(this.#S)throw new Error("Webview is disposed")}rewriteOldResourceUrlsIfNeeded(e){if(!this.#I)return e;const t=this.#x.extensionLocation?.scheme===Fi.vscodeRemote,i=this.#x.extensionLocation.scheme===Fi.vscodeRemote?this.#x.extensionLocation.authority:void 0;return e.replace(/(["'])(?:vscode-resource):(\/\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,((e,r,n,s,o,a)=>`${r}${Rb(pt.from({scheme:s||"file",path:decodeURIComponent(o)}),{isRemote:t,authority:i}).toString()}${a}`)).replace(/(["'])(?:vscode-webview-resource):(\/\/[^\s\/'"]+\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,((e,r,n,s,o,a)=>`${r}${Rb(pt.from({scheme:s||"file",path:decodeURIComponent(o)}),{isRemote:t,authority:i}).toString()}${a}`))}}function $b(e){try{const t=Eb(Sb(e.engines.vscode));return!!t&&t.majorBase>=1&&t.minorBase>=57}catch{return!1}}class Lb{constructor(e,t,i,r,n){this.remoteInfo=t,this.workspace=i,this._logService=r,this._deprecationService=n,this._webviews=new Map,this._webviewProxy=e.getProxy(Ft.MainThreadWebviews)}$onMessage(e,t,i){const r=this.getWebview(e);if(r){const{message:e}=function(e,t){const i=t.map((e=>{const t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(e.buffer),t})),r=t.length?(e,t)=>{if(t&&"object"==typeof t&&t.$$vscode_array_buffer_reference$$){const e=t,{index:r}=e,n=i[r];if(e.view)switch(e.view.type){case 1:return new Int8Array(n,e.view.byteOffset,e.view.byteLength/Int8Array.BYTES_PER_ELEMENT);case 2:return new Uint8Array(n,e.view.byteOffset,e.view.byteLength/Uint8Array.BYTES_PER_ELEMENT);case 3:return new Uint8ClampedArray(n,e.view.byteOffset,e.view.byteLength/Uint8ClampedArray.BYTES_PER_ELEMENT);case 4:return new Int16Array(n,e.view.byteOffset,e.view.byteLength/Int16Array.BYTES_PER_ELEMENT);case 5:return new Uint16Array(n,e.view.byteOffset,e.view.byteLength/Uint16Array.BYTES_PER_ELEMENT);case 6:return new Int32Array(n,e.view.byteOffset,e.view.byteLength/Int32Array.BYTES_PER_ELEMENT);case 7:return new Uint32Array(n,e.view.byteOffset,e.view.byteLength/Uint32Array.BYTES_PER_ELEMENT);case 8:return new Float32Array(n,e.view.byteOffset,e.view.byteLength/Float32Array.BYTES_PER_ELEMENT);case 9:return new Float64Array(n,e.view.byteOffset,e.view.byteLength/Float64Array.BYTES_PER_ELEMENT);case 10:return new BigInt64Array(n,e.view.byteOffset,e.view.byteLength/BigInt64Array.BYTES_PER_ELEMENT);case 11:return new BigUint64Array(n,e.view.byteOffset,e.view.byteLength/BigUint64Array.BYTES_PER_ELEMENT);default:throw new Error("Unknown array buffer view type")}return n}return t}:void 0;return{message:JSON.parse(e,r),arrayBuffers:i}}(t,i.value);r._onMessageEmitter.fire(e)}}$onMissingCsp(e,t){this._logService.warn(`${t} created a webview without a content security policy: https://aka.ms/vscode-webview-missing-csp`)}createNewWebview(e,t,i){const r=new Fb(e,this._webviewProxy,function(e){return{enableCommandUris:e.enableCommandUris,enableScripts:e.enableScripts,enableForms:e.enableForms,portMapping:e.portMapping,localResourceRoots:e.localResourceRoots?.map((e=>pt.from(e)))}}(t),this.remoteInfo,this.workspace,i,this._deprecationService);return this._webviews.set(e,r),r._onDidDispose((()=>{this._webviews.delete(e)})),r}deleteWebview(e){this._webviews.delete(e)}getWebview(e){return this._webviews.get(e)}}function Ob(e){return{id:e.identifier,location:e.extensionLocation}}function Mb(e,t,i){return{enableCommandUris:i.enableCommandUris,enableScripts:i.enableScripts,enableForms:i.enableForms,portMapping:i.portMapping,localResourceRoots:i.localResourceRoots||Nb(e,t)}}function Nb(e,t){return[...(t?.getWorkspaceFolders()||[]).map((e=>e.uri)),e.extensionLocation]}class Hb{constructor(e,t,i){this._proxy=e,this._editors=t,this._remoteInfo=i,this._handlePool=0,this._disposables=new b,this._insets=new Map,this._disposables.add(t.onDidChangeVisibleTextEditors((()=>{const e=t.getVisibleTextEditors();for(const t of this._insets.values())e.indexOf(t.editor)<0&&t.inset.dispose()})))}dispose(){this._insets.forEach((e=>e.inset.dispose())),this._disposables.dispose()}createWebviewEditorInset(e,t,i,r,n){let s;for(const h of this._editors.getVisibleTextEditors(!0))if(h.value===e){s=h;break}if(!s)throw new Error("not a visible editor");const o=this,a=this._handlePool++,l=new B,c=new B,u=new class{constructor(){this._html="",this._options=Object.create(null)}asWebviewUri(e){return Rb(e,o._remoteInfo)}get cspSource(){return Ab}set options(e){this._options=e,o._proxy.$setOptions(a,e)}get options(){return this._options}set html(e){this._html=e,o._proxy.$setHtml(a,e)}get html(){return this._html}get onDidReceiveMessage(){return l.event}postMessage(e){return o._proxy.$postMessage(a,e)}},d=new class{constructor(){this.editor=e,this.line=t,this.height=i,this.webview=u,this.onDidDispose=c.event}dispose(){o._insets.has(a)&&(o._insets.delete(a),o._proxy.$disposeEditorInset(a),c.fire(),c.dispose(),l.dispose())}};return this._proxy.$createEditorInset(a,s.id,s.value.document.uri,t+1,i,r||{},n.identifier,n.extensionLocation),this._insets.set(a,{editor:e,inset:d,onDidReceiveMessage:l}),d}$onDidDispose(e){const t=this._insets.get(e);t&&t.inset.dispose()}$onDidReceiveMessage(e,t){const i=this._insets.get(e);i?.onDidReceiveMessage.fire(t)}}class Ub{constructor(e){this._handlePool=0,this._proxy=e.getProxy(Ft.MainThreadLabelService)}$registerResourceLabelFormatter(e){const t=this._handlePool++;return this._proxy.$registerResourceLabelFormatter(t,e),w((()=>{this._proxy.$unregisterResourceLabelFormatter(t)}))}}class Bb{constructor(e,t,i,r){this.start=e,this.deletedCount=t,this.deletedItems=i,this.items=r}asApiEvent(){return{range:new Ku(this.start,this.start+this.deletedCount),addedCells:this.items.map((e=>e.apiCell)),removedCells:this.deletedItems}}}class Vb{static asModelAddData(e,t){return{EOL:t.eol,lines:t.source,languageId:t.language,uri:t.uri,isDirty:!1,versionId:1,notebook:e}}constructor(e,t,i){this.notebook=e,this._extHostDocument=t,this._cellData=i,this.handle=i.handle,this.uri=pt.revive(i.uri),this.cellKind=i.cellKind,this._outputs=i.outputs.map(Yh.to),this._internalMetadata=i.internalMetadata??{},this._metadata=Object.freeze(i.metadata??{}),this._previousResult=Object.freeze(qh.to(i.internalMetadata??{}))}get internalMetadata(){return this._internalMetadata}get apiCell(){if(!this._apiCell){const e=this,t=this._extHostDocument.getDocument(this.uri);if(!t)throw new Error(`MISSING extHostDocument for notebook cell: ${this.uri}`);const i={get index(){return e.notebook.getCellIndex(e)},notebook:e.notebook.apiNotebook,kind:Gh.to(this._cellData.cellKind),document:t.document,get mime(){return e._mime},set mime(t){e._mime=t},get outputs(){return e._outputs.slice(0)},get metadata(){return e._metadata},get executionSummary(){return e._previousResult}};this._apiCell=Object.freeze(i)}return this._apiCell}setOutputs(e){this._outputs=e.map(Yh.to)}setOutputItems(e,t,i){const r=i.map(Zh.to),n=this._outputs.find((t=>t.id===e));if(n&&(t||(n.items.length=0),n.items.push(...r),n.items.length>1&&n.items.every((e=>Ta(e.mime))))){const e=new Map,t=[];n.items.forEach((i=>{let r;e.has(i.mime)?r=e.get(i.mime):(r=[],e.set(i.mime,r),t.push(i.mime)),r.push(i.data)})),n.items.length=0,t.forEach((t=>{const i=Aa(e.get(t));n.items.push({mime:t,data:i.data.buffer})}))}}setMetadata(e){this._metadata=Object.freeze(e)}setInternalMetadata(e){this._internalMetadata=e,this._previousResult=Object.freeze(qh.to(e))}setMime(e){}}class Wb{static{this._handlePool=0}constructor(e,t,i,r,n){this._proxy=e,this._textDocumentsAndEditors=t,this._textDocuments=i,this.uri=r,this.handle=Wb._handlePool++,this._cells=[],this._versionId=0,this._isDirty=!1,this._disposed=!1,this._notebookType=n.viewType,this._metadata=Object.freeze(n.metadata??Object.create(null)),this._spliceNotebookCells([[0,0,n.cells]],!0,void 0),this._versionId=n.versionId}dispose(){this._disposed=!0}get versionId(){return this._versionId}get apiNotebook(){if(!this._notebook){const e=this,t={get uri(){return e.uri},get version(){return e._versionId},get notebookType(){return e._notebookType},get isDirty(){return e._isDirty},get isUntitled(){return e.uri.scheme===Fi.untitled},get isClosed(){return e._disposed},get metadata(){return e._metadata},get cellCount(){return e._cells.length},cellAt:t=>(t=e._validateIndex(t),e._cells[t].apiCell),getCells:t=>(t?e._getCells(t):e._cells).map((e=>e.apiCell)),save:()=>e._save()};this._notebook=Object.freeze(t)}return this._notebook}acceptDocumentPropertiesChanged(e){e.metadata&&(this._metadata=Object.freeze({...this._metadata,...e.metadata}))}acceptDirty(e){this._isDirty=e}acceptModelChanged(e,t,i){this._versionId=e.versionId,this._isDirty=t,this.acceptDocumentPropertiesChanged({metadata:i});const r={notebook:this.apiNotebook,metadata:i,cellChanges:[],contentChanges:[]},n=[];for(const o of e.rawEvents)o.kind===Sa.ModelChange?this._spliceNotebookCells(o.changes,!1,r.contentChanges):o.kind===Sa.Move?this._moveCells(o.index,o.length,o.newIdx,r.contentChanges):o.kind===Sa.Output?(this._setCellOutputs(o.index,o.outputs),n.push({cell:this._cells[o.index].apiCell,outputs:this._cells[o.index].apiCell.outputs})):o.kind===Sa.OutputItem?(this._setCellOutputItems(o.index,o.outputId,o.append,o.outputItems),n.push({cell:this._cells[o.index].apiCell,outputs:this._cells[o.index].apiCell.outputs})):o.kind===Sa.ChangeCellLanguage?(this._changeCellLanguage(o.index,o.language),n.push({cell:this._cells[o.index].apiCell,document:this._cells[o.index].apiCell.document})):o.kind===Sa.ChangeCellContent?n.push({cell:this._cells[o.index].apiCell,document:this._cells[o.index].apiCell.document}):o.kind===Sa.ChangeCellMime?this._changeCellMime(o.index,o.mime):o.kind===Sa.ChangeCellMetadata?(this._changeCellMetadata(o.index,o.metadata),n.push({cell:this._cells[o.index].apiCell,metadata:this._cells[o.index].apiCell.metadata})):o.kind===Sa.ChangeCellInternalMetadata&&(this._changeCellInternalMetadata(o.index,o.internalMetadata),n.push({cell:this._cells[o.index].apiCell,executionSummary:this._cells[o.index].apiCell.executionSummary}));const s=new Map;for(let o=0;o<n.length;o++){const e=n[o],t=s.get(e.cell);if(void 0===t){const t=r.cellChanges.push({document:void 0,executionSummary:void 0,metadata:void 0,outputs:void 0,...e});s.set(e.cell,t-1)}else r.cellChanges[t]={...r.cellChanges[t],...e}}return r}_validateIndex(e){return(e|=0)<0?0:e>=this._cells.length?this._cells.length-1:e}_validateRange(e){let t=0|e.start,i=0|e.end;return t<0&&(t=0),i>this._cells.length&&(i=this._cells.length),e.with({start:t,end:i})}_getCells(e){const t=[];for(let i=(e=this._validateRange(e)).start;i<e.end;i++)t.push(this._cells[i]);return t}async _save(){return this._disposed?Promise.reject(new Error("Notebook has been closed")):this._proxy.$trySaveNotebook(this.uri)}_spliceNotebookCells(e,t,i){if(this._disposed)return;const r=[],n=[],s=[];if(e.reverse().forEach((e=>{const i=e[2].map((e=>{const i=new Vb(this,this._textDocumentsAndEditors,e);return t||n.push(Vb.asModelAddData(this.apiNotebook,e)),i})),o=new Bb(e[0],e[1],[],i),a=this._cells.splice(e[0],e[1],...i);for(const t of a)s.push(t.uri),o.deletedItems.push(t.apiCell);r.push(o)})),this._textDocumentsAndEditors.acceptDocumentsAndEditorsDelta({addedDocuments:n,removedDocuments:s}),i)for(const o of r)i.push(o.asApiEvent())}_moveCells(e,t,i,r){const n=this._cells.splice(e,t);this._cells.splice(i,0,...n);const s=[new Bb(e,t,n.map((e=>e.apiCell)),[]),new Bb(i,0,[],n)];for(const o of s)r.push(o.asApiEvent())}_setCellOutputs(e,t){this._cells[e].setOutputs(t)}_setCellOutputItems(e,t,i,r){this._cells[e].setOutputItems(t,i,r)}_changeCellLanguage(e,t){const i=this._cells[e];i.apiCell.document.languageId!==t&&this._textDocuments.$acceptModelLanguageChanged(i.uri,t)}_changeCellMime(e,t){this._cells[e].apiCell.mime=t}_changeCellMetadata(e,t){this._cells[e].setMetadata(t)}_changeCellInternalMetadata(e,t){this._cells[e].setInternalMetadata(t)}getCellFromApiCell(e){return this._cells.find((t=>t.apiCell===e))}getCellFromIndex(e){return this._cells[e]}getCell(e){return this._cells.find((t=>t.handle===e))}getCellIndex(e){return this._cells.indexOf(e)}}class zb{static{this.apiEditorsToExtHost=new WeakMap}constructor(e,t,i,r,n,s){this.id=e,this._proxy=t,this.notebookData=i,this._selections=[],this._visibleRanges=[],this._visible=!1,this._selections=n,this._visibleRanges=r,this._viewColumn=s}get apiEditor(){if(!this._editor){const e=this;this._editor={get notebook(){return e.notebookData.apiNotebook},get selection(){return e._selections[0]},set selection(e){this.selections=[e]},get selections(){return e._selections},set selections(t){if(!Array.isArray(t)||!t.every(Ku.isNotebookRange))throw u("selections");e._selections=t,e._trySetSelections(t)},get visibleRanges(){return e._visibleRanges},revealRange(t,i){e._proxy.$tryRevealRange(e.id,jh.from(t),i??td.Default)},get viewColumn(){return e._viewColumn}},zb.apiEditorsToExtHost.set(this._editor,this)}return this._editor}get visible(){return this._visible}_acceptVisibility(e){this._visible=e}_acceptVisibleRanges(e){this._visibleRanges=e}_acceptSelections(e){this._selections=e}_trySetSelections(e){this._proxy.$trySetSelections(this.id,e.map(jh.from))}_acceptViewColumn(e){this._viewColumn=e}}class jb{static{this._notebookStatusBarItemProviderHandlePool=0}get activeNotebookEditor(){return this._activeNotebookEditor?.apiEditor}get visibleNotebookEditors(){return this._visibleNotebookEditors.map((e=>e.apiEditor))}constructor(e,t,i,r,s){this._textDocumentsAndEditors=i,this._textDocuments=r,this._extHostFileSystem=s,this._notebookStatusBarItemProviders=new Map,this._documents=new Li,this._editors=new Map,this._onDidChangeActiveNotebookEditor=new B({onListenerError:n}),this.onDidChangeActiveNotebookEditor=this._onDidChangeActiveNotebookEditor.event,this._visibleNotebookEditors=[],this._onDidOpenNotebookDocument=new B({onListenerError:n}),this.onDidOpenNotebookDocument=this._onDidOpenNotebookDocument.event,this._onDidCloseNotebookDocument=new B({onListenerError:n}),this.onDidCloseNotebookDocument=this._onDidCloseNotebookDocument.event,this._onDidChangeVisibleNotebookEditors=new B({onListenerError:n}),this.onDidChangeVisibleNotebookEditors=this._onDidChangeVisibleNotebookEditors.event,this._statusBarCache=new Vy("NotebookCellStatusBarCache"),this._handlePool=0,this._notebookSerializer=new Map,this._notebookProxy=e.getProxy(Ft.MainThreadNotebook),this._notebookDocumentsProxy=e.getProxy(Ft.MainThreadNotebookDocuments),this._notebookEditorsProxy=e.getProxy(Ft.MainThreadNotebookEditors),this._commandsConverter=t.converter,t.registerArgumentProcessor({processArgument:e=>{if(e&&13===e.$mid){const t=e.notebookEditor?.notebookUri,i=e.cell.handle,r=this._documents.get(t),n=r?.getCell(i);if(n)return n.apiCell}if(e&&14===e.$mid){const t=e.uri,i=this._documents.get(t);if(i)return i.apiNotebook}return e}}),jb._registerApiCommands(t)}getEditorById(e){const t=this._editors.get(e);if(!t)throw new Error(`unknown text editor: ${e}. known editors: ${[...this._editors.keys()]} `);return t}getIdByEditor(e){for(const[t,i]of this._editors)if(i.apiEditor===e)return t}get notebookDocuments(){return[...this._documents.values()]}getNotebookDocument(e,t){const i=this._documents.get(e);if(!i&&!t)throw new Error(`NO notebook document for '${e}'`);return i}static _convertNotebookRegistrationData(e,t){if(!t)return;const i=t.filenamePattern.map((e=>Xh.from(e))).filter((e=>void 0!==e));if(!t.filenamePattern||i)return{extension:e.identifier,providerDisplayName:e.displayName||e.name,displayName:t.displayName,filenamePattern:i,exclusive:t.exclusive||!1};console.warn(`Notebook content provider view options file name pattern is invalid ${t.filenamePattern}`)}registerNotebookCellStatusBarItemProvider(e,t,i){const r=jb._notebookStatusBarItemProviderHandlePool++,n="function"==typeof i.onDidChangeCellStatusBarItems?jb._notebookStatusBarItemProviderHandlePool++:void 0;let s;return this._notebookStatusBarItemProviders.set(r,i),this._notebookProxy.$registerNotebookCellStatusBarItemProvider(r,n,t),void 0!==n&&(s=i.onDidChangeCellStatusBarItems((e=>this._notebookProxy.$emitCellStatusBarEvent(n)))),new _l((()=>{this._notebookStatusBarItemProviders.delete(r),this._notebookProxy.$unregisterNotebookCellStatusBarItemProvider(r,n),s?.dispose()}))}async createNotebookDocument(e){const t=await this._notebookDocumentsProxy.$tryCreateNotebook({viewType:e.viewType,content:e.content&&Qh.from(e.content)});return pt.revive(t)}async openNotebookDocument(e){const t=this._documents.get(e);if(t)return t.apiNotebook;const i=await this._notebookDocumentsProxy.$tryOpenNotebook(e),r=this._documents.get(pt.revive(i));return yi(r?.apiNotebook)}async showNotebookDocument(e,t){let i;pt.isUri(e)&&(e=await this.openNotebookDocument(e)),i="object"==typeof t?{position:Yd.from(t.viewColumn),preserveFocus:t.preserveFocus,selections:t.selections&&t.selections.map(jh.from),pinned:"boolean"==typeof t.preview?!t.preview:void 0}:{preserveFocus:!1};const r=await this._notebookEditorsProxy.$tryShowNotebookDocument(e.uri,e.notebookType,i),n=r&&this._editors.get(r)?.apiEditor;if(n)return n;throw r?new Error(`Could NOT open editor for "${e.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${e.uri.toString()}".`)}async $provideNotebookCellStatusBarItems(e,t,i,r){const n=this._notebookStatusBarItemProviders.get(e),s=pt.revive(t),o=this._documents.get(s);if(!o||!n)return;const a=o.getCellFromIndex(i);if(!a)return;const l=await n.provideCellStatusBarItems(a.apiCell,r);if(!l)return;const c=new b;return{cacheId:this._statusBarCache.add([c]),items:(Array.isArray(l)?l:[l]).map((e=>ep.from(e,this._commandsConverter,c)))}}$releaseNotebookCellStatusBarItems(e){this._statusBarCache.delete(e)}registerNotebookSerializer(e,t,i,r,n){if(Ut(t))throw new Error("viewType cannot be empty or just whitespace");const s=this._handlePool++;return this._notebookSerializer.set(s,{viewType:t,serializer:i,options:r}),this._notebookProxy.$registerNotebookSerializer(s,{id:e.identifier,location:e.extensionLocation},t,ip.from(r),jb._convertNotebookRegistrationData(e,n)),w((()=>{this._notebookProxy.$unregisterNotebookSerializer(s)}))}async $dataToNotebook(e,t,i){const r=this._notebookSerializer.get(e);if(!r)throw new Error("NO serializer found");const n=await r.serializer.deserializeNotebook(t.buffer,i);return new It(Qh.from(n))}async $notebookToData(e,t,i){const r=this._notebookSerializer.get(e);if(!r)throw new Error("NO serializer found");const n=await r.serializer.serializeNotebook(Qh.to(t.value),i);return I.wrap(n)}async $saveNotebook(e,t,i,r,n){const s=pt.revive(t),o=this._notebookSerializer.get(e);if(!o)throw new Error("NO serializer found");const a=this._documents.get(s);if(!a)throw new Error("Document NOT found");if(a.versionId!==i)throw new Error("Document version mismatch");if(!this._extHostFileSystem.value.isWritableFileSystem(s.scheme))throw new ha(J(0,"Unable to modify read-only file '{0}'",this._resourceForError(s)),6);await this._validateWriteFile(s,r);const l={metadata:Rs(a.apiNotebook.metadata,(e=>!(o.options?.transientDocumentMetadata??{})[e])),cells:[]};for(const h of a.apiNotebook.getCells()){const e=new Gu(h.kind,h.document.getText(),h.document.languageId,h.mime,o.options?.transientOutputs?[]:[...h.outputs],h.metadata,h.executionSummary);e.metadata=Rs(h.metadata,(e=>!(o.options?.transientCellMetadata??{})[e])),l.cells.push(e)}const c=await o.serializer.serializeNotebook(l,n);await this._extHostFileSystem.value.writeFile(s,c);const u=this._extHostFileSystem.getFileSystemProviderExtUri(s.scheme),d=await this._extHostFileSystem.value.stat(s);return{name:u.basename(s),isFile:0!=(d.type&sa.File),isDirectory:0!=(d.type&sa.Directory),isSymbolicLink:0!=(d.type&sa.SymbolicLink),mtime:d.mtime,ctime:d.ctime,size:d.size,readonly:Boolean((d.permissions??0)&oa.Readonly)||!this._extHostFileSystem.value.isWritableFileSystem(s.scheme),locked:Boolean((d.permissions??0)&oa.Locked),etag:pa({mtime:d.mtime,size:d.size}),children:void 0}}async _validateWriteFile(e,t){const i=await this._extHostFileSystem.value.stat(e);if("number"==typeof t?.mtime&&"string"==typeof t.etag&&""!==t.etag&&"number"==typeof i.mtime&&"number"==typeof i.size&&t.mtime<i.mtime&&t.etag!==pa({mtime:t.mtime,size:i.size}))throw new ha(J(0,"File Modified Since"),3,t)}_resourceForError(e){return e.scheme===Fi.file?e.fsPath:e.toString()}_createExtHostEditor(e,t,i){if(this._editors.has(t))throw new Error(`editor with id ALREADY EXSIST: ${t}`);const r=new zb(t,this._notebookEditorsProxy,e,i.visibleRanges.map(jh.to),i.selections.map(jh.to),"number"==typeof i.viewColumn?Yd.to(i.viewColumn):void 0);this._editors.set(t,r)}$acceptDocumentAndEditorsDelta(e){if(e.value.removedDocuments)for(const t of e.value.removedDocuments){const e=pt.revive(t),i=this._documents.get(e);i&&(i.dispose(),this._documents.delete(e),this._textDocumentsAndEditors.$acceptDocumentsAndEditorsDelta({removedDocuments:i.apiNotebook.getCells().map((e=>e.document.uri))}),this._onDidCloseNotebookDocument.fire(i.apiNotebook));for(const t of this._editors.values())t.notebookData.uri.toString()===e.toString()&&this._editors.delete(t.id)}if(e.value.addedDocuments){const t=[];for(const i of e.value.addedDocuments){const e=pt.revive(i.uri);if(this._documents.has(e))throw new Error(`adding EXISTING notebook ${e} `);const r=new Wb(this._notebookDocumentsProxy,this._textDocumentsAndEditors,this._textDocuments,e,i);t.push(...i.cells.map((e=>Vb.asModelAddData(r.apiNotebook,e)))),this._documents.get(e)?.dispose(),this._documents.set(e,r),this._textDocumentsAndEditors.$acceptDocumentsAndEditorsDelta({addedDocuments:t}),this._onDidOpenNotebookDocument.fire(r.apiNotebook)}}if(e.value.addedEditors)for(const t of e.value.addedEditors){if(this._editors.has(t.id))return;const e=pt.revive(t.documentUri),i=this._documents.get(e);i&&this._createExtHostEditor(i,t.id,t)}if(e.value.removedEditors)for(const t of e.value.removedEditors){const e=this._editors.get(t);e&&(this._editors.delete(t),this._activeNotebookEditor?.id===e.id&&(this._activeNotebookEditor=void 0))}if(e.value.visibleEditors){this._visibleNotebookEditors=e.value.visibleEditors.map((e=>this._editors.get(e))).filter((e=>!!e));const t=new Set;this._visibleNotebookEditors.forEach((e=>t.add(e.id)));for(const e of this._editors.values()){const i=t.has(e.id);e._acceptVisibility(i)}this._visibleNotebookEditors=[...this._editors.values()].map((e=>e)).filter((e=>e.visible)),this._onDidChangeVisibleNotebookEditors.fire(this.visibleNotebookEditors)}if(null===e.value.newActiveEditor)this._activeNotebookEditor=void 0;else if(e.value.newActiveEditor){this._editors.get(e.value.newActiveEditor)||console.error(`FAILED to find active notebook editor ${e.value.newActiveEditor}`),this._activeNotebookEditor=this._editors.get(e.value.newActiveEditor)}void 0!==e.value.newActiveEditor&&this._onDidChangeActiveNotebookEditor.fire(this._activeNotebookEditor?.apiEditor)}static _registerApiCommands(e){const t=Yf.String.with("notebookType","A notebook type"),i=new em("vscode.executeDataToNotebook","_executeDataToNotebook","Invoke notebook serializer",[t,new Yf("data","Bytes to convert to data",(e=>e instanceof Uint8Array),(e=>I.wrap(e)))],new Xf("Notebook Data",(e=>Qh.to(e.value)))),r=new em("vscode.executeNotebookToData","_executeNotebookToData","Invoke notebook serializer",[t,new Yf("NotebookData","Notebook data to convert to bytes",(e=>!0),(e=>new It(Qh.from(e))))],new Xf("Bytes",(e=>e.buffer)));e.registerApiCommand(i),e.registerApiCommand(r)}}let qb=class{constructor(e){this._actual=new ju(qu.Dark),this._onDidChangeActiveColorTheme=new B}get activeColorTheme(){return this._actual}$onColorThemeChange(e){let t;switch(e){case"light":t=qu.Light;break;case"hcDark":t=qu.HighContrast;break;case"hcLight":t=qu.HighContrastLight;break;default:t=qu.Dark}this._actual=new ju(t),this._onDidChangeActiveColorTheme.fire(this._actual)}get onDidChangeActiveColorTheme(){return this._onDidChangeActiveColorTheme.event}};qb=vs([_s(0,ps)],qb);class Kb{constructor(e){this._authenticationProviders=new Map,this._providers=[],this._onDidChangeSessions=new B,this.onDidChangeSessions=this._onDidChangeSessions.event,this._getSessionTaskSingler=new Gb,this._getSessionsTaskSingler=new Gb,this._proxy=e.getProxy(Ft.MainThreadAuthentication)}$setProviders(e){return this._providers=e,Promise.resolve()}async getSession(e,t,i,r={}){const n=ja.toKey(e.identifier),s=[...i].sort().join(" ");return await this._getSessionTaskSingler.getOrCreate(`${n} ${t} ${s}`,(async()=>{await this._proxy.$ensureProvider(t);const s=e.displayName||e.name;return this._proxy.$getSession(t,i,n,s,r)}))}async getSessions(e,t,i){const r=ja.toKey(e.identifier),n=[...i].sort().join(" ");return await this._getSessionsTaskSingler.getOrCreate(`${r} ${n}`,(async()=>{await this._proxy.$ensureProvider(t);const n=e.displayName||e.name;return this._proxy.$getSessions(t,i,r,n)}))}async removeSession(e,t){const i=this._authenticationProviders.get(e);return i?i.provider.removeSession(t):this._proxy.$removeSession(e,t)}registerAuthenticationProvider(e,t,i,r){if(this._authenticationProviders.get(e))throw new Error(`An authentication provider with id '${e}' is already registered.`);this._authenticationProviders.set(e,{label:t,provider:i,options:r??{supportsMultipleAccounts:!1}}),this._providers.find((t=>t.id===e))||this._providers.push({id:e,label:t});const n=i.onDidChangeSessions((t=>{this._proxy.$sendDidChangeSessions(e,{added:t.added??[],changed:t.changed??[],removed:t.removed??[]})}));return this._proxy.$registerAuthenticationProvider(e,t,r?.supportsMultipleAccounts??!1),new _l((()=>{n.dispose(),this._authenticationProviders.delete(e);const t=this._providers.findIndex((t=>t.id===e));t>-1&&this._providers.splice(t),this._proxy.$unregisterAuthenticationProvider(e)}))}$createSession(e,t,i){const r=this._authenticationProviders.get(e);if(r)return Promise.resolve(r.provider.createSession(t,i));throw new Error(`Unable to find authentication provider with handle: ${e}`)}$removeSession(e,t){const i=this._authenticationProviders.get(e);if(i)return Promise.resolve(i.provider.removeSession(t));throw new Error(`Unable to find authentication provider with handle: ${e}`)}$getSessions(e,t){const i=this._authenticationProviders.get(e);if(i)return Promise.resolve(i.provider.getSessions(t));throw new Error(`Unable to find authentication provider with handle: ${e}`)}$onDidChangeAuthenticationSessions(e,t){return this._onDidChangeSessions.fire({provider:{id:e,label:t}}),Promise.resolve()}}class Gb{constructor(){this._inFlightPromises=new Map}getOrCreate(e,t){const i=this._inFlightPromises.get(e);if(i)return i;const r=t().finally((()=>this._inFlightPromises.delete(e)));return this._inFlightPromises.set(e,r),r}}class Qb{constructor(e,t){this._providers=new Map,this._itemsBySourceAndUriMap=new Map,this._proxy=e.getProxy(Ft.MainThreadTimeline),t.registerArgumentProcessor({processArgument:(e,t)=>{if(!e||12!==e.$mid)return e;if(this._providers.get(e.source)&&ja.equals(t,this._providers.get(e.source)?.extension)){const t=void 0===e.uri?void 0:pt.revive(e.uri);return this._itemsBySourceAndUriMap.get(e.source)?.get(Jb(t))?.get(e.handle)}}})}async $getTimeline(e,t,i,r){const n=this._providers.get(e);return n?.provider.provideTimeline(pt.revive(t),i,r)}registerTimelineProvider(e,t,i,r){const n=new b,s=this.convertTimelineItem(t.id,r,n).bind(this);let o;t.onDidChange&&(o=t.onDidChange((e=>this._proxy.$emitTimelineChangeEvent({uri:void 0,reset:!0,...e,id:t.id})),this));const a=this._itemsBySourceAndUriMap;return this.registerTimelineProviderCore({...t,scheme:e,onDidChange:void 0,async provideTimeline(e,i,r){i?.resetCache&&(n.clear(),a.get(t.id)?.clear());const o=await t.provideTimeline(e,i,r);if(null==o)return;const l=s(e,i);return{...o,source:t.id,items:o.items.map(l)}},dispose(){for(const e of a.values())e.get(t.id)?.clear();o?.dispose(),n.dispose()}},i)}convertTimelineItem(e,t,i){return(r,n)=>{let s;if(n?.cacheResults){let t=this._itemsBySourceAndUriMap.get(e);void 0===t&&(t=new Map,this._itemsBySourceAndUriMap.set(e,t));const i=Jb(r);s=t.get(i),void 0===s&&(s=new Map,t.set(i,s))}return r=>{const{iconPath:n,...o}=r,a=`${e}|${r.id??r.timestamp}`;let l,c,u,d;return s?.set(a,r),r.iconPath&&(n instanceof ru?u={id:n.id,color:n.color}:pt.isUri(n)?(l=n,c=n):({light:l,dark:c}=n)),tc.isMarkdownString(o.tooltip)?d=Xd.from(o.tooltip):hi(o.tooltip)?d=o.tooltip:tc.isMarkdownString(o.detail)?(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),d=Xd.from(o.detail)):hi(o.detail)&&(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),d=o.detail),{...o,id:o.id??void 0,handle:a,source:e,command:r.command?t.toInternal(r.command,i):void 0,icon:l,iconDark:c,themeIcon:u,tooltip:d,accessibilityInformation:r.accessibilityInformation}}}}registerTimelineProviderCore(e,t){if(this._providers.get(e.id))throw new Error(`Timeline Provider ${e.id} already exists.`);return this._proxy.$registerTimelineProvider({id:e.id,label:e.label,scheme:e.scheme}),this._providers.set(e.id,{provider:e,extension:t}),w((()=>{for(const t of this._itemsBySourceAndUriMap.values())t.get(e.id)?.clear();this._providers.delete(e.id),this._proxy.$unregisterTimelineProvider(e.id),e.dispose()}))}}function Jb(e){return e?.toString()}class Zb extends x{#_;#o;#P;#A;#S;#R;#F;#$;#L;constructor(e,t,i,r,n,s){super(),this.#S=!1,this.#O=this._register(new B),this.onDidChangeVisibility=this.#O.event,this.#M=this._register(new B),this.onDidDispose=this.#M.event,this.#P=i,this.#F=r,this.#_=e,this.#o=t,this.#A=n,this.#R=s}dispose(){this.#S||(this.#S=!0,this.#M.fire(),this.#A.dispose(),super.dispose())}#O;#M;get title(){return this.assertNotDisposed(),this.#F}set title(e){this.assertNotDisposed(),this.#F!==e&&(this.#F=e,this.#o.$setWebviewViewTitle(this.#_,e))}get description(){return this.assertNotDisposed(),this.#$}set description(e){this.assertNotDisposed(),this.#$!==e&&(this.#$=e,this.#o.$setWebviewViewDescription(this.#_,e))}get visible(){return this.#R}get webview(){return this.#A}get viewType(){return this.#P}_setVisible(e){e===this.#R||this.#S||(this.#R=e,this.#O.fire())}get badge(){return this.assertNotDisposed(),this.#L}set badge(e){this.assertNotDisposed(),e?.value===this.#L?.value&&e?.tooltip===this.#L?.tooltip||(this.#L=dp.from(e),this.#o.$setWebviewViewBadge(this.#_,e))}show(e){this.assertNotDisposed(),this.#o.$show(this.#_,!!e)}assertNotDisposed(){if(this.#S)throw new Error("Webview is disposed")}}class Yb{constructor(e,t){this._extHostWebview=t,this._viewProviders=new Map,this._webviewViews=new Map,this._proxy=e.getProxy(Ft.MainThreadWebviewViews)}registerWebviewViewProvider(e,t,i,r){if(this._viewProviders.has(t))throw new Error(`View provider for '${t}' already registered`);return this._viewProviders.set(t,{provider:i,extension:e}),this._proxy.$registerWebviewViewProvider(Ob(e),t,{retainContextWhenHidden:r?.retainContextWhenHidden,serializeBuffersForPostMessage:$b(e)}),new _l((()=>{this._viewProviders.delete(t),this._proxy.$unregisterWebviewViewProvider(t)}))}async $resolveWebviewView(e,t,i,r,n){const s=this._viewProviders.get(t);if(!s)throw new Error(`No view provider found for '${t}'`);const{provider:o,extension:a}=s,l=this._extHostWebview.createNewWebview(e,{},a),c=new Zb(e,this._proxy,t,i,l,!0);this._webviewViews.set(e,c),await o.resolveWebviewView(c,{state:r},n)}async $onDidChangeWebviewViewVisibility(e,t){this.getWebviewView(e)._setVisible(t)}async $disposeWebviewView(e){const t=this.getWebviewView(e);this._webviewViews.delete(e),t.dispose(),this._extHostWebview.deleteWebview(e)}getWebviewView(e){const t=this._webviewViews.get(e);if(!t)throw new Error("No webview found");return t}}class Xb{constructor(e,t){this.document=e,this._storagePath=t,this._backupCounter=1,this._edits=new Vy("custom documents")}addEdit(e){return this._edits.add([e])}async undo(e,t){await this.getEdit(e).undo(),t||this.disposeBackup()}async redo(e,t){await this.getEdit(e).redo(),t||this.disposeBackup()}disposeEdits(e){for(const t of e)this._edits.delete(t)}getNewBackupUri(){if(!this._storagePath)throw new Error("Backup requires a valid storage path");const e=Xr((t=this.document.uri).scheme===Fi.file||t.scheme===Fi.untitled?t.fsPath:t.toString())+""+this._backupCounter++;var t;return Zi(this._storagePath,e)}updateBackup(e){this._backup?.delete(),this._backup=e}disposeBackup(){this._backup?.delete(),this._backup=void 0}getEdit(e){const t=this._edits.get(e,0);if(!t)throw new Error("No edit found");return t}}class ex{constructor(){this._documents=new Map}get(e,t){return this._documents.get(this.key(e,t))}add(e,t,i){const r=this.key(e,t.uri);if(this._documents.has(r))throw new Error(`Document already exists for viewType:${e} resource:${t.uri}`);const n=new Xb(t,i);return this._documents.set(r,n),n}delete(e,t){const i=this.key(e,t.uri);this._documents.delete(i)}key(e,t){return`${e}@@@${t}`}}class tx{constructor(){this._providers=new Map}addTextProvider(e,t,i){return this.add(0,e,t,i)}addCustomProvider(e,t,i){return this.add(1,e,t,i)}get(e){return this._providers.get(e)}add(e,t,i,r){if(this._providers.has(t))throw new Error(`Provider for viewType:${t} already registered`);return this._providers.set(t,{type:e,extension:i,provider:r}),new _l((()=>this._providers.delete(t)))}}class ix{constructor(e,t,i,r,n){this._extHostDocuments=t,this._extensionStoragePaths=i,this._extHostWebview=r,this._extHostWebviewPanels=n,this._editorProviders=new tx,this._documents=new ex,this._proxy=e.getProxy(Ft.MainThreadCustomEditors)}registerCustomEditorProvider(e,t,i,r){const n=new b;return!function(e){return"function"==typeof e.resolveCustomTextEditor}(i)?(n.add(this._editorProviders.addCustomProvider(t,e,i)),rx(i)&&n.add(i.onDidChangeCustomDocument((e=>{const i=this.getCustomDocumentEntry(t,e.document.uri);if(function(e){return"function"==typeof e.undo&&"function"==typeof e.redo}(e)){const r=i.addEdit(e);this._proxy.$onDidEdit(e.document.uri,t,r,e.label)}else this._proxy.$onContentChange(e.document.uri,t)}))),this._proxy.$registerCustomEditorProvider(Ob(e),t,r.webviewOptions||{},!!r.supportsMultipleEditorsPerDocument,$b(e))):(n.add(this._editorProviders.addTextProvider(t,e,i)),this._proxy.$registerTextEditorProvider(Ob(e),t,r.webviewOptions||{},{supportsMove:!!i.moveCustomTextEditor},$b(e))),_l.from(n,new _l((()=>{this._proxy.$unregisterEditorProvider(t)})))}async $createCustomDocument(e,t,i,r,n){const s=this._editorProviders.get(t);if(!s)throw new Error(`No provider found for '${t}'`);if(1!==s.type)throw new Error(`Invalid provide type for '${t}'`);const o=pt.revive(e),a=await s.provider.openCustomDocument(o,{backupId:i,untitledDocumentData:r?.buffer},n);let l;return rx(s.provider)&&this._extensionStoragePaths&&(l=this._extensionStoragePaths.workspaceValue(s.extension)??this._extensionStoragePaths.globalValue(s.extension)),this._documents.add(t,a,l),{editable:rx(s.provider)}}async $disposeCustomDocument(e,t){const i=this._editorProviders.get(t);if(!i)throw new Error(`No provider found for '${t}'`);if(1!==i.type)throw new Error(`Invalid provider type for '${t}'`);const r=pt.revive(e),{document:n}=this.getCustomDocumentEntry(t,r);this._documents.delete(t,n),n.dispose()}async $resolveCustomEditor(e,t,i,r,n,s){const o=this._editorProviders.get(i);if(!o)throw new Error(`No provider found for '${i}'`);const a=Yd.to(n),l=this._extHostWebview.createNewWebview(t,r.contentOptions,o.extension),c=this._extHostWebviewPanels.createNewWebviewPanel(t,i,r.title,a,r.options,l,r.active),u=pt.revive(e);switch(o.type){case 1:{const{document:e}=this.getCustomDocumentEntry(i,u);return o.provider.resolveCustomEditor(e,c,s)}case 0:{const e=this._extHostDocuments.getDocument(u);return o.provider.resolveCustomTextEditor(e,c,s)}default:throw new Error("Unknown webview provider type")}}$disposeEdits(e,t,i){this.getCustomDocumentEntry(t,e).disposeEdits(i)}async $onMoveCustomEditor(e,t,i){const r=this._editorProviders.get(i);if(!r)throw new Error(`No provider found for '${i}'`);if(!r.provider.moveCustomTextEditor)throw new Error(`Provider does not implement move '${i}'`);const n=this._extHostWebviewPanels.getWebviewPanel(e);if(!n)throw new Error("No webview found");const s=pt.revive(t),o=this._extHostDocuments.getDocument(s);await r.provider.moveCustomTextEditor(o,n,Ot.None)}async $undo(e,t,i,r){return this.getCustomDocumentEntry(t,e).undo(i,r)}async $redo(e,t,i,r){return this.getCustomDocumentEntry(t,e).redo(i,r)}async $revert(e,t,i){const r=this.getCustomDocumentEntry(t,e),n=this.getCustomEditorProvider(t);await n.revertCustomDocument(r.document,i),r.disposeBackup()}async $onSave(e,t,i){const r=this.getCustomDocumentEntry(t,e),n=this.getCustomEditorProvider(t);await n.saveCustomDocument(r.document,i),r.disposeBackup()}async $onSaveAs(e,t,i,r){const n=this.getCustomDocumentEntry(t,e);return this.getCustomEditorProvider(t).saveCustomDocumentAs(n.document,pt.revive(i),r)}async $backup(e,t,i){const r=this.getCustomDocumentEntry(t,e),n=this.getCustomEditorProvider(t),s=await n.backupCustomDocument(r.document,{destination:r.getNewBackupUri()},i);return r.updateBackup(s),s.id}getCustomDocumentEntry(e,t){const i=this._documents.get(e,pt.revive(t));if(!i)throw new Error("No custom document found");return i}getCustomEditorProvider(e){const t=this._editorProviders.get(e),i=t?.provider;if(!i||!rx(i))throw new Error("Custom document is not editable");return i}}function rx(e){return!!e.onDidChangeCustomDocument}class nx extends x{#_;#o;#P;#A;#D;#F;#N;#H;#U;#B;#S;#M;#V;constructor(e,t,i,r){super(),this.#H=void 0,this.#U=!0,this.#S=!1,this.#M=this._register(new B),this.onDidDispose=this.#M.event,this.#V=this._register(new B),this.onDidChangeViewState=this.#V.event,this.#_=e,this.#o=t,this.#A=i,this.#P=r.viewType,this.#D=r.panelOptions,this.#H=r.viewColumn,this.#F=r.title,this.#B=r.active}dispose(){this.#S||(this.#S=!0,this.#M.fire(),this.#o.$disposeWebview(this.#_),this.#A.dispose(),super.dispose())}get webview(){return this.assertNotDisposed(),this.#A}get viewType(){return this.assertNotDisposed(),this.#P}get title(){return this.assertNotDisposed(),this.#F}set title(e){this.assertNotDisposed(),this.#F!==e&&(this.#F=e,this.#o.$setTitle(this.#_,e))}get iconPath(){return this.assertNotDisposed(),this.#N}set iconPath(e){this.assertNotDisposed(),this.#N!==e&&(this.#N=e,this.#o.$setIconPath(this.#_,pt.isUri(e)?{light:e,dark:e}:e))}get options(){return this.#D}get viewColumn(){if(this.assertNotDisposed(),!("number"==typeof this.#H&&this.#H<0))return this.#H}get active(){return this.assertNotDisposed(),this.#B}get visible(){return this.assertNotDisposed(),this.#U}_updateViewState(e){this.#S||this.active===e.active&&this.visible===e.visible&&this.viewColumn===e.viewColumn||(this.#B=e.active,this.#U=e.visible,this.#H=e.viewColumn,this.#V.fire({webviewPanel:this}))}reveal(e,t){this.assertNotDisposed(),this.#o.$reveal(this.#_,{viewColumn:void 0===e?void 0:Yd.from(e),preserveFocus:!!t})}assertNotDisposed(){if(this.#S)throw new Error("Webview is disposed")}}class sx{static newHandle(){return js()}constructor(e,t,i){this.webviews=t,this.workspace=i,this._webviewPanels=new Map,this._serializers=new Map,this._proxy=e.getProxy(Ft.MainThreadWebviewPanels)}createWebviewPanel(e,t,i,r,n={}){const s="object"==typeof r?r.viewColumn:r,o={viewColumn:Yd.from(s),preserveFocus:"object"==typeof r&&!!r.preserveFocus},a=$b(e),l=sx.newHandle();this._proxy.$createWebviewPanel(Ob(e),l,t,{title:i,panelOptions:ox(n),webviewOptions:Mb(e,this.workspace,n),serializeBuffersForPostMessage:a},o);const c=this.webviews.createNewWebview(l,n,e);return this.createNewWebviewPanel(l,t,i,s,n,c,!0)}$onDidChangeWebviewPanelViewStates(e){const t=Object.keys(e);t.sort(((t,i)=>{const r=e[t],n=e[i];return r.active?1:n.active?-1:+r.visible-+n.visible}));for(const i of t){const t=this.getWebviewPanel(i);if(!t)continue;const r=e[i];t._updateViewState({active:r.active,visible:r.visible,viewColumn:Yd.to(r.position)})}}async $onDidDisposeWebviewPanel(e){const t=this.getWebviewPanel(e);t?.dispose(),this._webviewPanels.delete(e),this.webviews.deleteWebview(e)}registerWebviewPanelSerializer(e,t,i){if(this._serializers.has(t))throw new Error(`Serializer for '${t}' already registered`);return this._serializers.set(t,{serializer:i,extension:e}),this._proxy.$registerSerializer(t,{serializeBuffersForPostMessage:$b(e)}),new _l((()=>{this._serializers.delete(t),this._proxy.$unregisterSerializer(t)}))}async $deserializeWebviewPanel(e,t,i,r){const n=this._serializers.get(t);if(!n)throw new Error(`No serializer found for '${t}'`);const{serializer:s,extension:o}=n,a=this.webviews.createNewWebview(e,i.webviewOptions,o),l=this.createNewWebviewPanel(e,t,i.title,r,i.panelOptions,a,i.active);await s.deserializeWebviewPanel(l,i.state)}createNewWebviewPanel(e,t,i,r,n,s,o){const a=new nx(e,this._proxy,s,{viewType:t,title:i,viewColumn:r,panelOptions:n,active:o});return this._webviewPanels.set(e,a),a}getWebviewPanel(e){return this._webviewPanels.get(e)}}function ox(e){return{enableFindWidget:e.enableFindWidget,retainContextWhenHidden:e.retainContextWhenHidden}}let ax=class{constructor(e,t){this._proxy=e.getProxy(Ft.MainThreadBulkEdits),this._versionInformationProvider={getTextDocumentVersion:e=>t.getDocument(e)?.version,getNotebookDocumentVersion:()=>{}}}applyWorkspaceEdit(e,t,i){const r=sh.from(e,this._versionInformationProvider);return this._proxy.$tryApplyWorkspaceEdit(r,void 0,i?.isRefactoring??!1)}};ax=vs([_s(0,ps)],ax);let lx=class{constructor(e,t,i){this.editors=i,this.resultsChangedEmitter=new B,this.controllers=new Map,this.onResultsChanged=this.resultsChangedEmitter.event,this.results=[],this.proxy=e.getProxy(Ft.MainThreadTesting),this.observer=new mx(this.proxy),this.runTracker=new ux(this.proxy),t.registerArgumentProcessor({processArgument:e=>{switch(e?.$mid){case 15:{const t=e,i=t.tests[t.tests.length-1].item.extId,r=this.controllers.get(Fo.root(i));return r?.collection.tree.get(i)?.actual??(e=>{let t;for(const i of e.tests){const e=Nf(i.item);ra(e).parent=t,t=e}return t})(e)}case 17:{const{extId:t,message:i}=e;return{test:this.controllers.get(Fo.root(t))?.collection.tree.get(t)?.actual,message:np.to(i)}}default:return e}}}),t.registerCommand(!1,"testing.getExplorerSelection",(async()=>{const e=await t.executeCommand("_testing.getExplorerSelection"),i=e=>{const t=this.controllers.get(Fo.root(e));if(t)return Fo.isRoot(e)?t.controller:t.collection.tree.get(e)?.actual};return{include:e?.include.map(i).filter(vi)||[],exclude:e?.exclude.map(i).filter(vi)||[]}}))}createTestController(e,t,i,r){if(this.controllers.has(t))throw new Error(`Attempt to insert a duplicate controller with ID "${t}"`);const n=new b,s=n.add(new Bf(t,i,this.editors));s.root.label=i;const o=new Map,a=this.proxy,l={items:s.root.children,get label(){return i},set label(e){i=e,s.root.label=e,a.$updateController(t,{label:i})},get refreshHandler(){return r},set refreshHandler(e){r=e,a.$updateController(t,{canRefresh:!!e})},get id(){return t},createRunProfile:(e,i,r,n,s,a)=>{let l=Xr(e);for(;o.has(l);)l++;return new vx(this.proxy,o,t,l,e,i,r,n,s,a)},createTestItem:(e,i,r)=>new Hf(t,e,i,r),createTestRun:(i,r,n=!0)=>this.runTracker.createTestRun(e,t,s,i,r,n),invalidateTestResults:e=>{if(void 0===e)this.proxy.$markTestRetired(void 0);else{const i=e instanceof Array?e:[e];this.proxy.$markTestRetired(i.map((e=>Fo.fromExtHostTestItem(e,t).toString())))}},set resolveHandler(e){s.resolveHandler=e},get resolveHandler(){return s.resolveHandler},dispose:()=>{n.dispose()}};a.$registerTestController(t,i,!!r),n.add(w((()=>a.$unregisterTestController(t))));const c={controller:l,collection:s,profiles:o,extension:e};return this.controllers.set(t,c),n.add(w((()=>this.controllers.delete(t)))),n.add(s.onDidGenerateDiff((e=>a.$publishDiff(t,e.map(qo.serialize))))),l}createTestObserver(){return this.observer.checkout()}async runTests(e,t=Ot.None){const i=dx(e);if(!i)throw new Error("The request passed to `vscode.test.runTests` must include a profile");const r=this.controllers.get(i.controllerId);if(!r)throw new Error("Controller not found");await this.proxy.$runTests({isUiTriggered:!1,targets:[{testIds:e.include?.map((e=>Fo.fromExtHostTestItem(e,r.collection.root.id).toString()))??[r.collection.root.id],profileGroup:_x[i.kind],profileId:i.profileId,controllerId:i.controllerId}],exclude:e.exclude?.map((e=>e.id))},t)}$syncTests(){for(const{collection:e}of this.controllers.values())e.flushDiff();return Promise.resolve()}$provideFileCoverage(e,t,i){const r=Kr(this.runTracker.trackers,(i=>i.id===e?i.getCoverage(t):void 0));return r?.provideFileCoverage(i)??Promise.resolve([])}$resolveFileCoverage(e,t,i,r){const n=Kr(this.runTracker.trackers,(i=>i.id===e?i.getCoverage(t):void 0));return n?.resolveFileCoverage(i,r)??Promise.resolve([])}$configureRunProfile(e,t){this.controllers.get(e)?.profiles.get(t)?.configureHandler?.()}async $refreshTests(e,t){await(this.controllers.get(e)?.controller.refreshHandler?.(t))}$publishTestResults(e){this.results=Object.freeze(e.map((e=>Es(ap.to(e)))).concat(this.results).sort(((e,t)=>t.completedAt-e.completedAt)).slice(0,32)),this.resultsChangedEmitter.fire()}async $expandTest(e,t){const i=this.controllers.get(Fo.fromString(e).controllerId)?.collection;i&&(await i.expand(e,t<0?1/0:t),i.flushDiff())}$acceptDiff(e){this.observer.applyDiff(e.map(qo.deserialize))}async $runControllerTests(e,t){return Promise.all(e.map((e=>this.runControllerTestRequest(e,!1,t))))}async $startContinuousRun(e,t){const i=new Ht(t),r=await Promise.all(e.map((e=>this.runControllerTestRequest(e,!0,i.token))));return t.isCancellationRequested||r.some((e=>e.error))||await new Promise((e=>t.onCancellationRequested(e))),i.dispose(!0),r}async runControllerTestRequest(e,t,i){const r=this.controllers.get(e.controllerId);if(!r)return{};const{collection:n,profiles:s,extension:o}=r,a=s.get(e.profileId);if(!a)return{};const l=e.testIds.map((e=>n.tree.get(e))).filter(vi),c=e.excludeExtIds.map((e=>r.collection.tree.get(e))).filter(vi).filter((e=>l.some((t=>2===t.fullId.compare(e.fullId)))));if(!l.length)return{};const u=new fd(l.some((e=>e.actual instanceof Uf))?void 0:l.map((e=>e.actual)),c.map((e=>e.actual)),a,t),d="runId"in e&&this.runTracker.prepareForMainThreadTestRun(u,hx.fromInternal(e,r.collection),o,i);try{return await a.runHandler(u,i),{}}catch(_C){return{error:String(_C)}}finally{d&&(d.hasRunningTasks&&!i.isCancellationRequested&&await $.toPromise(d.onEnd),d.dispose())}}$cancelExtensionTestRun(e){void 0===e?this.runTracker.cancelAllRuns():this.runTracker.cancelRunById(e)}};lx=vs([_s(0,ps)],lx);class cx extends x{get hasRunningTasks(){return this.tasks.size>0}get id(){return this.dto.id}constructor(e,t,i,r){super(),this.dto=e,this.proxy=t,this.extension=i,this.state=0,this.tasks=new Map,this.sharedTestIds=new Set,this.endEmitter=this._register(new B),this.onEnd=this.endEmitter.event,this.cts=this._register(new Ht(r));const n=this._register(new gr((()=>this.forciblyEndTasks()),1e4));this._register(this.cts.token.onCancellationRequested((()=>n.schedule())))}cancel(){0===this.state?(this.cts.cancel(),this.state=1):1===this.state&&this.forciblyEndTasks()}getCoverage(e){return this.tasks.get(e)?.coverage}createRun(e){const t=this.dto.id,i=this.dto.controllerId,r=js(),n=new px(this.proxy,t,r),s=e=>(t,...i)=>{a?console.warn(`Setting the state of test "${t.id}" is a no-op after the run ends.`):this.dto.isIncluded(t)&&(this.ensureTestIsKnown(t),e(t,...i))},o=(e,n)=>{const s=n instanceof Array?n.map(np.from):[np.from(n)];if(s.some((e=>void 0!==e.contextValue))&&Yg(this.extension,"testMessageContextValue"),e.uri&&e.range){const t={range:zd.from(e.range),uri:e.uri};for(const e of s)e.location=e.location||t}this.proxy.$appendTestMessagesInRun(t,r,Fo.fromExtHostTestItem(e,i).toString(),s)};let a=!1;const l={isPersisted:this.dto.isPersisted,token:this.cts.token,name:e,get coverageProvider(){return n.coverageProvider},set coverageProvider(e){n.coverageProvider=e},enqueued:s((e=>{this.proxy.$updateTestStateInRun(t,r,Fo.fromExtHostTestItem(e,i).toString(),1)})),skipped:s((e=>{this.proxy.$updateTestStateInRun(t,r,Fo.fromExtHostTestItem(e,i).toString(),5)})),started:s((e=>{this.proxy.$updateTestStateInRun(t,r,Fo.fromExtHostTestItem(e,i).toString(),2)})),errored:s(((e,n,s)=>{o(e,n),this.proxy.$updateTestStateInRun(t,r,Fo.fromExtHostTestItem(e,i).toString(),6,s)})),failed:s(((e,n,s)=>{o(e,n),this.proxy.$updateTestStateInRun(t,r,Fo.fromExtHostTestItem(e,i).toString(),4,s)})),passed:s(((e,i)=>{this.proxy.$updateTestStateInRun(t,r,Fo.fromExtHostTestItem(e,this.dto.controllerId).toString(),3,i)})),appendOutput:(e,n,s)=>{a||(s&&(this.dto.isIncluded(s)?this.ensureTestIsKnown(s):s=void 0),this.proxy.$appendOutputToRun(t,r,I.fromString(e),n&&ph.from(n),s&&Fo.fromExtHostTestItem(s,i).toString()))},end:()=>{a||(a=!0,this.proxy.$finishedTestRunTask(t,r),this.tasks.delete(r),this.tasks.size||this.markEnded())}};return this.tasks.set(r,{run:l,coverage:n}),this.proxy.$startedTestRunTask(t,{id:r,name:e,running:!0}),l}forciblyEndTasks(){for(const{run:e}of this.tasks.values())e.end()}markEnded(){2!==this.state&&(this.state=2,this.endEmitter.fire())}ensureTestIsKnown(e){if(!(e instanceof Hf))throw new Xo(e.id);if(this.sharedTestIds.has(Fo.fromExtHostTestItem(e,this.dto.controllerId).toString()))return;const t=[],i=this.dto.colllection.root;for(;;){const r=op.from(e);if(t.unshift(r),this.sharedTestIds.has(r.extId))break;if(this.sharedTestIds.add(r.extId),e===i)break;e=e.parent||i}this.proxy.$addTestsToRun(this.dto.controllerId,this.dto.id,t)}}class ux{get trackers(){return this.tracked.values()}constructor(e){this.proxy=e,this.tracked=new Map}prepareForMainThreadTestRun(e,t,i,r){return this.getTracker(e,t,i,r)}cancelRunById(e){for(const t of this.tracked.values())if(t.id===e)return void t.cancel()}cancelAllRuns(){for(const e of this.tracked.values())e.cancel()}createTestRun(e,t,i,r,n,s){const o=this.tracked.get(r);if(o)return o.createRun(n);const a=hx.fromPublic(t,i,r,s),l=dx(r);this.proxy.$startedExtensionTestRun({controllerId:t,continuous:!!r.continuous,profile:l&&{group:_x[l.kind],id:l.profileId},exclude:r.exclude?.map((e=>Fo.fromExtHostTestItem(e,i.root.id).toString()))??[],id:a.id,include:r.include?.map((e=>Fo.fromExtHostTestItem(e,i.root.id).toString()))??[i.root.id],persist:s});const c=this.getTracker(r,a,e);return c.onEnd((()=>{this.proxy.$finishedExtensionTestRun(a.id),c.dispose()})),c.createRun(n)}getTracker(e,t,i,r){const n=new cx(t,this.proxy,i,r);return this.tracked.set(e,n),n.onEnd((()=>this.tracked.delete(e))),n}}const dx=e=>{if(e.profile){if(!(e.profile instanceof vx))throw new Error("TestRunRequest.profile is not an instance created from TestController.createRunProfile");return e.profile}};class hx{static fromPublic(e,t,i,r){return new hx(e,js(),i.include?.map((t=>Fo.fromExtHostTestItem(t,e).toString()))??[e],i.exclude?.map((t=>Fo.fromExtHostTestItem(t,e).toString()))??[],r,t)}static fromInternal(e,t){return new hx(e.controllerId,e.runId,e.testIds,e.excludeExtIds,!0,t)}constructor(e,t,i,r,n,s){this.controllerId=e,this.id=t,this.isPersisted=n,this.colllection=s,this.includePrefix=i.map((e=>e+"\0")),this.excludePrefix=r.map((e=>e+"\0"))}isIncluded(e){const t=Fo.fromExtHostTestItem(e,this.controllerId).toString()+"\0";for(const i of this.excludePrefix)if(t===i||t.startsWith(i))return!1;for(const i of this.includePrefix)if(t===i||t.startsWith(i))return!0;return!1}}class px{set coverageProvider(e){if(this._coverageProvider)throw new Error("The TestCoverageProvider cannot be replaced after being provided");e&&(this._coverageProvider=e,this.proxy.$signalCoverageAvailable(this.runId,this.taskId))}get coverageProvider(){return this._coverageProvider}constructor(e,t,i){this.proxy=e,this.runId=t,this.taskId=i}async provideFileCoverage(e){if(!this._coverageProvider)return[];this.fileCoverage||(this.fileCoverage=(async()=>this._coverageProvider.provideFileCoverage(e))());try{const e=await this.fileCoverage;return e?.map(lp.fromFile)??[]}catch(_C){throw this.fileCoverage=void 0,_C}}async resolveFileCoverage(e,t){const i=await this.fileCoverage;let r=i?.[e];return this._coverageProvider&&i&&r?(r.detailedCoverage||(r=i[e]=await(this._coverageProvider.resolveFileCoverage?.(r,t))??r),r.detailedCoverage?.map(lp.fromDetailed)??[]):[]}}class gx{get isEmpty(){return 0===this.added.size&&0===this.removed.size&&0===this.updated.size}constructor(e){this.emitter=e,this.added=new Set,this.updated=new Set,this.removed=new Set,this.alreadyRemoved=new Set}add(e){this.added.add(e)}update(e){Object.assign(e.revived,op.toPlain(e.item)),this.added.has(e)||this.updated.add(e)}remove(e){if(this.added.has(e))return void this.added.delete(e);this.updated.delete(e);const t=Fo.parentId(e.item.extId);t&&this.alreadyRemoved.has(t.toString())?this.alreadyRemoved.add(e.item.extId):this.removed.add(e)}getChangeEvent(){const{added:e,updated:t,removed:i}=this;return{get added(){return[...e].map((e=>e.revived))},get updated(){return[...t].map((e=>e.revived))},get removed(){return[...i].map((e=>e.revived))}}}complete(){this.isEmpty||this.emitter.fire(this.getChangeEvent())}}class fx extends Ko{constructor(){super(...arguments),this.changeEmitter=new B,this.onDidChangeTests=this.changeEmitter.event}get rootTests(){return super.roots}getMirroredTestDataById(e){return this.items.get(e)}getMirroredTestDataByReference(e){return this.items.get(e.id)}createItem(e,t){return{...e,revived:op.toPlain(e.item),depth:t?t.depth+1:0,children:new Set}}createChangeCollector(){return new gx(this.changeEmitter)}}class mx{constructor(e){this.proxy=e}checkout(){this.current||(this.current=this.createObserverData());const e=this.current;return e.observers++,{onDidChangeTest:e.tests.onDidChangeTests,get tests(){return[...e.tests.rootTests].map((e=>e.revived))},dispose:m((()=>{0==--e.observers&&(this.proxy.$unsubscribeFromDiffs(),this.current=void 0)}))}}getMirroredTestDataByReference(e){return this.current?.tests.getMirroredTestDataByReference(e)}applyDiff(e){this.current?.tests.apply(e)}createObserverData(){const e=new fx;return this.proxy.$subscribeToDiffs(),{observers:0,tests:e}}}class vx{#o;#W;get label(){return this._label}set label(e){e!==this._label&&(this._label=e,this.#o.$updateTestRunConfig(this.controllerId,this.profileId,{label:e}))}get supportsContinuousRun(){return this._supportsContinuousRun}set supportsContinuousRun(e){e!==this._supportsContinuousRun&&(this._supportsContinuousRun=e,this.#o.$updateTestRunConfig(this.controllerId,this.profileId,{supportsContinuousRun:e}))}get isDefault(){return this._isDefault}set isDefault(e){e!==this._isDefault&&(this._isDefault=e,this.#o.$updateTestRunConfig(this.controllerId,this.profileId,{isDefault:e}))}get tag(){return this._tag}set tag(e){e?.id!==this._tag?.id&&(this._tag=e,this.#o.$updateTestRunConfig(this.controllerId,this.profileId,{tag:e?sp.namespace(this.controllerId,e.id):null}))}get configureHandler(){return this._configureHandler}set configureHandler(e){e!==this._configureHandler&&(this._configureHandler=e,this.#o.$updateTestRunConfig(this.controllerId,this.profileId,{hasConfigurationHandler:!!e}))}constructor(e,t,i,r,n,s,o,a=!1,l=void 0,c=!1){this.controllerId=i,this.profileId=r,this._label=n,this.kind=s,this.runHandler=o,this._isDefault=a,this._tag=l,this._supportsContinuousRun=c,this.#o=e,this.#W=t,t.set(r,this);const u=_x[s];if("number"!=typeof u)throw new Error(`Unknown TestRunProfile.group ${s}`);this.#o.$publishTestRunProfile({profileId:r,controllerId:i,tag:l?sp.namespace(this.controllerId,l.id):null,label:n,group:u,isDefault:a,hasConfigurationHandler:!1,supportsContinuousRun:c})}dispose(){this.#W?.delete(this.profileId)&&(this.#W=void 0,this.#o.$removeTestProfile(this.controllerId,this.profileId))}}const _x={[hd.Coverage]:8,[hd.Debug]:4,[hd.Run]:2};class yx{static{this.supportedSchemes=new Set([Fi.http,Fi.https])}constructor(e){this._openers=new Map,this._proxy=e.getProxy(Ft.MainThreadUriOpeners)}registerExternalUriOpener(e,t,i,r){if(this._openers.has(t))throw new Error(`Opener with id '${t}' already registered`);const n=r.schemes.find((e=>!yx.supportedSchemes.has(e)));if(n)throw new Error(`Scheme '${n}' is not supported. Only http and https are currently supported.`);return this._openers.set(t,i),this._proxy.$registerUriOpener(t,r.schemes,e,r.label),w((()=>{this._openers.delete(t),this._proxy.$unregisterUriOpener(t)}))}async $canOpenUri(e,t,i){const r=this._openers.get(e);if(!r)throw new Error(`Unknown opener with id: ${e}`);const n=pt.revive(t);return r.canOpenExternalUri(n,i)}async $openUri(e,t,i){const r=this._openers.get(e);if(!r)throw new Error(`Unknown opener id: '${e}'`);return r.openExternalUri(pt.revive(t.resolvedUri),{sourceUri:pt.revive(t.sourceUri)},i)}}var wx;!function(e){e[e.Output=1]="Output",e[e.OutputItems=2]="OutputItems",e[e.ExecutionState=3]="ExecutionState"}(wx||(wx={}));let bx=class{constructor(e,t,i,r,n){this._initData=t,this._extHostNotebook=i,this._commands=r,this._logService=n,this._activeExecutions=new Li,this._activeNotebookExecutions=new Li,this._kernelDetectionTask=new Map,this._kernelDetectionTaskHandlePool=0,this._kernelSourceActionProviders=new Map,this._kernelSourceActionProviderHandlePool=0,this._kernelSourceActionProviderCache=new Vy("NotebookKernelSourceActionProviderCache"),this._kernelData=new Map,this._handlePool=0,this._onDidChangeCellExecutionState=new B,this.onDidChangeNotebookCellExecutionState=this._onDidChangeCellExecutionState.event,this._proxy=e.getProxy(Ft.MainThreadNotebookKernels);const s=new em("notebook.selectKernel","_notebook.selectKernel","Trigger kernel picker for specified notebook editor widget",[new Yf("options","Select kernel options",(e=>!0),(e=>{if(e&&"notebookEditor"in e&&"id"in e){const t=this._extHostNotebook.getIdByEditor(e.notebookEditor);return{id:e.id,extension:e.extension,notebookEditorId:t}}if(e&&"notebookEditor"in e){const t=this._extHostNotebook.getIdByEditor(e.notebookEditor);if(void 0===t)throw new Error(`Cannot invoke 'notebook.selectKernel' for unrecognized notebook editor ${e.notebookEditor.notebook.uri.toString()}`);return{notebookEditorId:t}}return e}))],Xf.Void);this._commands.registerApiCommand(s)}createNotebookController(e,t,i,r,n,s){for(const w of this._kernelData.values())if(w.controller.id===t&&ja.equals(e.identifier,w.extensionId))throw new Error(`notebook controller with id '${t}' ALREADY exist`);const o=this._handlePool++,a=this;this._logService.trace(`NotebookController[${o}], CREATED by ${e.identifier.value}, ${t}`);const l=()=>console.warn(`NO execute handler from notebook controller '${p.id}' of extension: '${e.identifier}'`);let c=!1;const u=new b,d=new B,h=new B,p={id:Ix(e.identifier,t),notebookType:i,extensionId:e.identifier,extensionLocation:e.extensionLocation,label:r||e.identifier.value,preloads:s?s.map(rp.from):[]};let g,f=n??l;this._proxy.$addKernel(o,p).catch((e=>{console.log(e),c=!0}));let m=0;const v=()=>{if(c)return;const e=++m;Promise.resolve().then((()=>{e===m&&this._proxy.$updateKernel(o,p)}))},_=new Li,y={get id(){return t},get notebookType(){return p.notebookType},onDidChangeSelectedNotebooks:d.event,get label(){return p.label},set label(t){p.label=t??e.displayName??e.name,v()},get detail(){return p.detail??""},set detail(e){p.detail=e,v()},get description(){return p.description??""},set description(e){p.description=e,v()},get supportedLanguages(){return p.supportedLanguages},set supportedLanguages(e){p.supportedLanguages=e,v()},get supportsExecutionOrder(){return p.supportsExecutionOrder??!1},set supportsExecutionOrder(e){p.supportsExecutionOrder=e,v()},get rendererScripts(){return p.preloads?p.preloads.map(rp.to):[]},get executeHandler(){return f},set executeHandler(e){f=e??l},get interruptHandler(){return g},set interruptHandler(e){g=e,p.supportsInterrupt=Boolean(e),v()},createNotebookCellExecution(t){if(c)throw new Error("notebook controller is DISPOSED");if(!_.has(t.notebook.uri))throw a._logService.trace(`NotebookController[${o}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(_.keys()).map((e=>e.toString()))),new Error(`notebook controller is NOT associated to notebook: ${t.notebook.uri.toString()}`);return a._createNotebookCellExecution(t,Ix(e.identifier,this.id))},createNotebookExecution(t){if(Yg(e,"notebookExecution"),c)throw new Error("notebook controller is DISPOSED");if(!_.has(t.uri))throw a._logService.trace(`NotebookController[${o}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(_.keys()).map((e=>e.toString()))),new Error(`notebook controller is NOT associated to notebook: ${t.uri.toString()}`);return a._createNotebookExecution(t,Ix(e.identifier,this.id))},dispose:()=>{c||(this._logService.trace(`NotebookController[${o}], DISPOSED`),c=!0,this._kernelData.delete(o),u.dispose(),d.dispose(),h.dispose(),this._proxy.$removeKernel(o))},updateNotebookAffinity(t,i){i===rd.Hidden&&Yg(e,"notebookControllerAffinityHidden"),a._proxy.$updateNotebookPriority(o,t.uri,i)},onDidReceiveMessage:h.event,postMessage:(t,i)=>(Yg(e,"notebookMessaging"),a._proxy.$postMessage(o,i&&a._extHostNotebook.getIdByEditor(i),t)),asWebviewUri:t=>(Yg(e,"notebookMessaging"),Rb(t,a._initData.remote))};return this._kernelData.set(o,{extensionId:e.identifier,controller:y,onDidReceiveMessage:h,onDidChangeSelection:d,associatedNotebooks:_}),y}getIdByController(e){for(const[t,i]of this._kernelData)if(i.controller===e)return Ix(i.extensionId,e.id);return null}createNotebookControllerDetectionTask(e,t){const i=this._kernelDetectionTaskHandlePool++,r=this;this._logService.trace(`NotebookControllerDetectionTask[${i}], CREATED by ${e.identifier.value}`),this._proxy.$addKernelDetectionTask(i,t);const n={dispose:()=>{this._kernelDetectionTask.delete(i),r._proxy.$removeKernelDetectionTask(i)}};return this._kernelDetectionTask.set(i,n),n}registerKernelSourceActionProvider(e,t,i){const r=this._kernelSourceActionProviderHandlePool++,n="function"==typeof i.onDidChangeNotebookKernelSourceActions?r:void 0,s=this;let o;return this._kernelSourceActionProviders.set(r,i),this._logService.trace(`NotebookKernelSourceActionProvider[${r}], CREATED by ${e.identifier.value}`),this._proxy.$addKernelSourceActionProvider(r,r,t),void 0!==n&&(o=i.onDidChangeNotebookKernelSourceActions((e=>this._proxy.$emitNotebookKernelSourceActionsChangeEvent(n)))),{dispose:()=>{this._kernelSourceActionProviders.delete(r),s._proxy.$removeKernelSourceActionProvider(r,r),o?.dispose()}}}async $provideKernelSourceActions(e,t){const i=this._kernelSourceActionProviders.get(e);if(i){const e=new b;this._kernelSourceActionProviderCache.add([e]);return(await i.provideNotebookKernelSourceActions(t)??[]).map((t=>tp.from(t,this._commands.converter,e)))}return[]}$acceptNotebookAssociation(e,t,i){const r=this._kernelData.get(e);if(r){const n=this._extHostNotebook.getNotebookDocument(pt.revive(t));i?r.associatedNotebooks.set(n.uri,!0):r.associatedNotebooks.delete(n.uri),this._logService.trace(`NotebookController[${e}] ASSOCIATE notebook`,n.uri.toString(),i),r.onDidChangeSelection.fire({selected:i,notebook:n.apiNotebook})}}async $executeCells(e,t,i){const r=this._kernelData.get(e);if(!r)return;const n=this._extHostNotebook.getNotebookDocument(pt.revive(t)),s=[];for(const a of i){const e=n.getCell(a);e&&s.push(e.apiCell)}try{this._logService.trace(`NotebookController[${e}] EXECUTE cells`,n.uri.toString(),s.length),await r.controller.executeHandler.call(r.controller,s,n.apiNotebook,r.controller)}catch(o){this._logService.error(`NotebookController[${e}] execute cells FAILED`,o),console.error(o)}}async $cancelCells(e,t,i){const r=this._kernelData.get(e);if(!r)return;const n=this._extHostNotebook.getNotebookDocument(pt.revive(t));if(r.controller.interruptHandler)await r.controller.interruptHandler.call(r.controller,n.apiNotebook);else for(const s of i){const e=n.getCell(s);e&&this._activeExecutions.get(e.uri)?.cancel()}if(r.controller.interruptHandler){const e=this._activeNotebookExecutions.get(n.uri);i.length&&Array.isArray(e)&&e.length&&e.forEach((e=>e.dispose()))}}$acceptKernelMessageFromRenderer(e,t,i){const r=this._kernelData.get(e);if(!r)return;const n=this._extHostNotebook.getEditorById(t);r.onDidReceiveMessage.fire(Object.freeze({editor:n.apiEditor,message:i}))}$cellExecutionChanged(e,t,i){const r=this._extHostNotebook.getNotebookDocument(pt.revive(e)).getCell(t);if(r){const e=i?Kh.to(i):Xu.Idle;void 0!==e&&this._onDidChangeCellExecutionState.fire({cell:r.apiCell,state:e})}}_createNotebookCellExecution(e,t){if(e.index<0)throw new Error("CANNOT execute cell that has been REMOVED from notebook");const i=this._extHostNotebook.getNotebookDocument(e.notebook.uri).getCellFromApiCell(e);if(!i)throw new Error("invalid cell");if(this._activeExecutions.has(i.uri))throw new Error(`duplicate execution for ${i.uri}`);const r=new Sx(t,i,this._proxy);this._activeExecutions.set(i.uri,r);const n=r.onDidChangeState((()=>{r.state===xx.Resolved&&(r.dispose(),n.dispose(),this._activeExecutions.delete(i.uri))}));return r.asApiObject()}_createNotebookExecution(e,t){const i=this._extHostNotebook.getNotebookDocument(e.uri),r=e.getCells().find((e=>{const t=i.getCellFromApiCell(e);return t&&this._activeExecutions.has(t.uri)}));if(r)throw new Error(`duplicate cell execution for ${r.document.uri}`);if(this._activeNotebookExecutions.has(i.uri))throw new Error(`duplicate notebook execution for ${i.uri}`);const n=new Ex(t,i,this._proxy),s=n.onDidChangeState((()=>{n.state===Cx.Resolved&&(n.dispose(),s.dispose(),this._activeNotebookExecutions.delete(i.uri))}));return this._activeNotebookExecutions.set(i.uri,[n,s]),n.asApiObject()}};var xx,Cx,Dx;bx=vs([_s(4,Gn)],bx),function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"}(xx||(xx={}));class Sx extends x{static{this.HANDLE=0}get state(){return this._state}constructor(e,t,i){super(),this._cell=t,this._proxy=i,this._handle=Sx.HANDLE++,this._onDidChangeState=new B,this.onDidChangeState=this._onDidChangeState.event,this._state=xx.Init,this._tokenSource=this._register(new Ht),this._collector=new kx(10,(e=>this.update(e))),this._executionOrder=t.internalMetadata.executionOrder,this._proxy.$createExecution(this._handle,e,this._cell.notebook.uri,this._cell.handle)}cancel(){this._tokenSource.cancel()}async updateSoon(e){await this._collector.addItem(e)}async update(e){const t=Array.isArray(e)?e:[e];return this._proxy.$updateExecution(this._handle,new It(t))}verifyStateForOutput(){if(this._state===xx.Init)throw new Error("Must call start before modifying cell output");if(this._state===xx.Resolved)throw new Error("Cannot modify cell output after calling resolve")}cellIndexToHandle(e){let t=this._cell;if(e&&(t=this._cell.notebook.getCellFromApiCell(e)),!t)throw new Error("INVALID cell");return t.handle}validateAndConvertOutputs(e){return e.map((e=>{const t=Zu.ensureUniqueMimeTypes(e.items,!0);return t===e.items?Yh.from(e):Yh.from({items:t,id:e.id,metadata:e.metadata})}))}async updateOutputs(e,t,i){const r=this.cellIndexToHandle(t),n=this.validateAndConvertOutputs(qr(e));return this.updateSoon({editType:wx.Output,cellHandle:r,append:i,outputs:n})}async updateOutputItems(e,t,i){return e=Zu.ensureUniqueMimeTypes(qr(e),!0),this.updateSoon({editType:wx.OutputItems,items:e.map(Zh.from),outputId:t.id,append:i})}asApiObject(){const e=this,t={get token(){return e._tokenSource.token},get cell(){return e._cell.apiCell},get executionOrder(){return e._executionOrder},set executionOrder(t){e._executionOrder=t,e.update([{editType:wx.ExecutionState,executionOrder:e._executionOrder}])},start(t){if(e._state===xx.Resolved||e._state===xx.Started)throw new Error("Cannot call start again");e._state=xx.Started,e._onDidChangeState.fire(),e.update({editType:wx.ExecutionState,runStartTime:t})},end(t,i){if(e._state===xx.Resolved)throw new Error("Cannot call resolve twice");e._state=xx.Resolved,e._onDidChangeState.fire(),e._collector.flush(),e._proxy.$completeExecution(e._handle,new It({runEndTime:i,lastRunSuccess:t}))},clearOutput:t=>(e.verifyStateForOutput(),e.updateOutputs([],t,!1)),appendOutput:(t,i)=>(e.verifyStateForOutput(),e.updateOutputs(t,i,!0)),replaceOutput:(t,i)=>(e.verifyStateForOutput(),e.updateOutputs(t,i,!1)),appendOutputItems:(t,i)=>(e.verifyStateForOutput(),e.updateOutputItems(t,i,!0)),replaceOutputItems:(t,i)=>(e.verifyStateForOutput(),e.updateOutputItems(t,i,!1))};return Object.freeze(t)}}!function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"}(Cx||(Cx={}));class Ex extends x{static{this.HANDLE=0}get state(){return this._state}constructor(e,t,i){super(),this._notebook=t,this._proxy=i,this._handle=Ex.HANDLE++,this._onDidChangeState=new B,this.onDidChangeState=this._onDidChangeState.event,this._state=Cx.Init,this._tokenSource=this._register(new Ht),this._proxy.$createNotebookExecution(this._handle,e,this._notebook.uri)}cancel(){this._tokenSource.cancel()}asApiObject(){const e={start:()=>{if(this._state===Cx.Resolved||this._state===Cx.Started)throw new Error("Cannot call start again");this._state=Cx.Started,this._onDidChangeState.fire(),this._proxy.$beginNotebookExecution(this._handle)},end:()=>{if(this._state===Cx.Resolved)throw new Error("Cannot call resolve twice");this._state=Cx.Resolved,this._onDidChangeState.fire(),this._proxy.$completeNotebookExecution(this._handle)}};return Object.freeze(e)}}class kx{constructor(e,t){this.delay=e,this.callback=t,this.batch=[],this.startedTimer=Date.now()}addItem(e){return this.batch.push(e),this.currentDeferred||(this.currentDeferred=new vr,this.startedTimer=Date.now(),cr(this.delay).then((()=>this.flush()))),Date.now()-this.startedTimer>this.delay?this.flush():this.currentDeferred.p}flush(){if(0===this.batch.length||!this.currentDeferred)return Promise.resolve();const e=this.currentDeferred;this.currentDeferred=void 0;const t=this.batch;return this.batch=[],this.callback(t).finally((()=>e.complete()))}}function Ix(e,t){return`${e.value}/${t}`}!function(e){e[e.Information=1]="Information",e[e.Warning=2]="Warning"}(Dx||(Dx={}));class Tx{constructor(e,t){this._extHostNotebook=t,this._rendererMessageEmitters=new Map,this.proxy=e.getProxy(Ft.MainThreadNotebookRenderers)}$postRendererMessage(e,t,i){const r=this._extHostNotebook.getEditorById(e);this._rendererMessageEmitters.get(t)?.fire({editor:r.apiEditor,message:i})}createRendererMessaging(e,t){if(!e.contributes?.notebookRenderer?.some((e=>e.id===t)))throw new Error(`Extensions may only call createRendererMessaging() for renderers they contribute (got ${t})`);return{onDidReceiveMessage:(e,i,r)=>this.getOrCreateEmitterFor(t).event(e,i,r),postMessage:(e,i)=>{zb.apiEditorsToExtHost.has(e)&&([e,i]=[i,e]);const r=i&&zb.apiEditorsToExtHost.get(i);return this.proxy.$postMessage(r?.id,t,e)}}}getOrCreateEmitterFor(e){let t=this._rendererMessageEmitters.get(e);return t||(t=new B({onDidRemoveLastListener:()=>{t?.dispose(),this._rendererMessageEmitters.delete(e)}}),this._rendererMessageEmitters.set(e,t),t)}}let Px=class{constructor(e,t){this._logService=e,this._notebooksAndEditors=t,this._onDidChangeNotebookEditorSelection=new B({onListenerError:n}),this._onDidChangeNotebookEditorVisibleRanges=new B({onListenerError:n}),this.onDidChangeNotebookEditorSelection=this._onDidChangeNotebookEditorSelection.event,this.onDidChangeNotebookEditorVisibleRanges=this._onDidChangeNotebookEditorVisibleRanges.event}$acceptEditorPropertiesChanged(e,t){this._logService.debug("ExtHostNotebook#$acceptEditorPropertiesChanged",e,t);const i=this._notebooksAndEditors.getEditorById(e);t.visibleRanges&&i._acceptVisibleRanges(t.visibleRanges.ranges.map(jh.to)),t.selections&&i._acceptSelections(t.selections.selections.map(jh.to)),t.visibleRanges&&this._onDidChangeNotebookEditorVisibleRanges.fire({notebookEditor:i.apiEditor,visibleRanges:i.apiEditor.visibleRanges}),t.selections&&this._onDidChangeNotebookEditorSelection.fire(Object.freeze({notebookEditor:i.apiEditor,selections:i.apiEditor.selections}))}$acceptEditorViewColumns(e){for(const t in e){this._notebooksAndEditors.getEditorById(t)._acceptViewColumn(Yd.to(e[t]))}}};Px=vs([_s(0,Gn)],Px);class Ax{constructor(e){this._notebooksAndEditors=e,this._onDidSaveNotebookDocument=new B,this.onDidSaveNotebookDocument=this._onDidSaveNotebookDocument.event,this._onDidChangeNotebookDocument=new B,this.onDidChangeNotebookDocument=this._onDidChangeNotebookDocument.event}$acceptModelChanged(e,t,i,r){const n=this._notebooksAndEditors.getNotebookDocument(pt.revive(e)).acceptModelChanged(t.value,i,r);this._onDidChangeNotebookDocument.fire(n)}$acceptDirtyStateChanged(e,t){this._notebooksAndEditors.getNotebookDocument(pt.revive(e)).acceptDirty(t)}$acceptModelSaved(e){const t=this._notebooksAndEditors.getNotebookDocument(pt.revive(e));this._onDidSaveNotebookDocument.fire(t.apiNotebook)}}class Rx{constructor(e,t,i,r,n){this._extHostNotebooks=t,this._textDocumentsAndEditors=i,this._commands=r;const s=new em("interactive.open","_interactive.open","Open interactive window and return notebook editor and input URI",[new Yf("showOptions","Show Options",(e=>!0),(e=>e)),new Yf("resource","Interactive resource Uri",(e=>!0),(e=>e)),new Yf("controllerId","Notebook controller Id",(e=>!0),(e=>e)),new Yf("title","Interactive editor title",(e=>!0),(e=>e))],new Xf("Notebook and input URI",(e=>{if(n.debug("[ExtHostInteractive] open iw with notebook editor id",e.notebookEditorId),void 0!==e.notebookEditorId){const t=this._extHostNotebooks.getEditorById(e.notebookEditorId);return n.debug("[ExtHostInteractive] notebook editor found",t.id),{notebookUri:pt.revive(e.notebookUri),inputUri:pt.revive(e.inputUri),notebookEditor:t.apiEditor}}return n.debug("[ExtHostInteractive] notebook editor not found, uris for the interactive document",e.notebookUri,e.inputUri),{notebookUri:pt.revive(e.notebookUri),inputUri:pt.revive(e.inputUri)}})));this._commands.registerApiCommand(s)}$willAddInteractiveDocument(e,t,i,r){this._textDocumentsAndEditors.acceptDocumentsAndEditorsDelta({addedDocuments:[{EOL:t,lines:[""],languageId:i,uri:e,isDirty:!1,versionId:1,notebook:this._extHostNotebooks.getNotebookDocument(pt.revive(r))?.apiNotebook}]})}$willRemoveInteractiveDocument(e,t){this._textDocumentsAndEditors.acceptDocumentsAndEditorsDelta({removedDocuments:[e]})}}new zn("debugType",void 0,{type:"string",description:J(0,"Debug type of the active debug session. For example 'python'.")}),new zn("debugConfigurationType",void 0,{type:"string",description:J(0,"Debug type of the selected launch configuration. For example 'python'.")}),new zn("debugState","inactive",{type:"string",description:J(0,"State that the focused debug session is in. One of the following: 'inactive', 'initializing', 'stopped' or 'running'.")});var Fx,$x,Lx,Ox;new zn("debugUx","default",{type:"string",description:J(0,"Debug UX state. When there are no debug configurations it is 'simple', otherwise 'default'. Used to decide when to show welcome views in the debug viewlet.")}),new zn("hasDebugged",!1,{type:"boolean",description:J(0,"True when a debug session has been started at least once, false otherwise.")}),new zn("inDebugMode",!1,{type:"boolean",description:J(0,"True when debugging, false otherwise.")}),new zn("inDebugRepl",!1,{type:"boolean",description:J(0,"True when focus is in the debug console, false otherwise.")}),new zn("breakpointWidgetVisible",!1,{type:"boolean",description:J(0,"True when breakpoint editor zone widget is visible, false otherwise.")}),new zn("inBreakpointWidget",!1,{type:"boolean",description:J(0,"True when focus is in the breakpoint editor zone widget, false otherwise.")}),new zn("breakpointsFocused",!0,{type:"boolean",description:J(0,"True when the BREAKPOINTS view is focused, false otherwise.")}),new zn("watchExpressionsFocused",!0,{type:"boolean",description:J(0,"True when the WATCH view is focused, false otherwsie.")}),new zn("watchExpressionsExist",!1,{type:"boolean",description:J(0,"True when at least one watch expression exists, false otherwise.")}),new zn("variablesFocused",!0,{type:"boolean",description:J(0,"True when the VARIABLES views is focused, false otherwsie")}),new zn("expressionSelected",!1,{type:"boolean",description:J(0,"True when an expression input box is open in either the WATCH or the VARIABLES view, false otherwise.")}),new zn("breakpointInputFocused",!1,{type:"boolean",description:J(0,"True when the input box has focus in the BREAKPOINTS view.")}),new zn("callStackItemType",void 0,{type:"string",description:J(0,"Represents the item type of the focused element in the CALL STACK view. For example: 'session', 'thread', 'stackFrame'")}),new zn("callStackSessionIsAttach",!1,{type:"boolean",description:J(0,"True when the session in the CALL STACK view is attach, false otherwise. Used internally for inline menus in the CALL STACK view.")}),new zn("callStackItemStopped",!1,{type:"boolean",description:J(0,"True when the focused item in the CALL STACK is stopped. Used internaly for inline menus in the CALL STACK view.")}),new zn("callStackSessionHasOneThread",!1,{type:"boolean",description:J(0,"True when the focused session in the CALL STACK view has exactly one thread. Used internally for inline menus in the CALL STACK view.")}),new zn("watchItemType",void 0,{type:"string",description:J(0,"Represents the item type of the focused element in the WATCH view. For example: 'expression', 'variable'")}),new zn("canViewMemory",void 0,{type:"boolean",description:J(0,"Indicates whether the item in the view has an associated memory refrence.")}),new zn("breakpointItemType",void 0,{type:"string",description:J(0,"Represents the item type of the focused element in the BREAKPOINTS view. For example: 'breakpoint', 'exceptionBreakppint', 'functionBreakpoint', 'dataBreakpoint'")}),new zn("breakpointSupportsCondition",!1,{type:"boolean",description:J(0,"True when the focused breakpoint supports conditions.")}),new zn("loadedScriptsSupported",!1,{type:"boolean",description:J(0,"True when the focused sessions supports the LOADED SCRIPTS view")}),new zn("loadedScriptsItemType",void 0,{type:"string",description:J(0,"Represents the item type of the focused element in the LOADED SCRIPTS view.")}),new zn("focusedSessionIsAttach",!1,{type:"boolean",description:J(0,"True when the focused session is 'attach'.")}),new zn("stepBackSupported",!1,{type:"boolean",description:J(0,"True when the focused session supports 'stepBack' requests.")}),new zn("restartFrameSupported",!1,{type:"boolean",description:J(0,"True when the focused session supports 'restartFrame' requests.")}),new zn("stackFrameSupportsRestart",!1,{type:"boolean",description:J(0,"True when the focused stack frame suppots 'restartFrame'.")}),new zn("jumpToCursorSupported",!1,{type:"boolean",description:J(0,"True when the focused session supports 'jumpToCursor' request.")}),new zn("stepIntoTargetsSupported",!1,{type:"boolean",description:J(0,"True when the focused session supports 'stepIntoTargets' request.")}),new zn("breakpointsExist",!1,{type:"boolean",description:J(0,"True when at least one breakpoint exists.")}),new zn("debuggersAvailable",!1,{type:"boolean",description:J(0,"True when there is at least one debug extensions active.")}),new zn("debugExtensionAvailable",!0,{type:"boolean",description:J(0,"True when there is at least one debug extension installed and enabled.")}),new zn("debugProtocolVariableMenuContext",void 0,{type:"string",description:J(0,"Represents the context the debug adapter sets on the focused variable in the VARIABLES view.")}),new zn("debugSetVariableSupported",!1,{type:"boolean",description:J(0,"True when the focused session supports 'setVariable' request.")}),new zn("debugSetExpressionSupported",!1,{type:"boolean",description:J(0,"True when the focused session supports 'setExpression' request.")}),new zn("breakWhenValueChangesSupported",!1,{type:"boolean",description:J(0,"True when the focused session supports to break when value changes.")}),new zn("breakWhenValueIsAccessedSupported",!1,{type:"boolean",description:J(0,"True when the focused breakpoint supports to break when value is accessed.")}),new zn("breakWhenValueIsReadSupported",!1,{type:"boolean",description:J(0,"True when the focused breakpoint supports to break when value is read.")}),new zn("terminateDebuggeeSupported",!1,{type:"boolean",description:J(0,"True when the focused session supports the terminate debuggee capability.")}),new zn("suspendDebuggeeSupported",!1,{type:"boolean",description:J(0,"True when the focused session supports the suspend debuggee capability.")}),new zn("variableEvaluateNamePresent",!1,{type:"boolean",description:J(0,"True when the focused variable has an 'evalauteName' field set.")}),new zn("variableIsReadonly",!1,{type:"boolean",description:J(0,"True when the focused variable is read-only.")}),new zn("exceptionWidgetVisible",!1,{type:"boolean",description:J(0,"True when the exception widget is visible.")}),new zn("multiSessionRepl",!1,{type:"boolean",description:J(0,"True when there is more than 1 debug console.")}),new zn("multiSessionDebug",!1,{type:"boolean",description:J(0,"True when there is more than 1 active debug session.")}),new zn("disassembleRequestSupported",!1,{type:"boolean",description:J(0,"True when the focused sessions supports disassemble request.")}),new zn("disassemblyViewFocus",!1,{type:"boolean",description:J(0,"True when the Disassembly View is focused.")}),new zn("languageSupportsDisassembleRequest",!1,{type:"boolean",description:J(0,"True when the language in the current editor supports disassemble request.")}),new zn("focusedStackFrameHasInstructionReference",!1,{type:"boolean",description:J(0,"True when the focused stack frame has instruction pointer reference.")}),J(0,"Controls when the internal Debug Console should open."),function(e){e[e.Initial=1]="Initial",e[e.Dynamic=2]="Dynamic"}(Fx||(Fx={})),function(e){e.UnverifiedBreakpoints="unverifiedBreakpoints"}($x||($x={})),un("debugService"),un("editSessionIdentityService"),function(e){e[e.Complete=100]="Complete",e[e.Partial=50]="Partial",e[e.None=0]="None"}(Lx||(Lx={}));class Mx{constructor(e){this.handlers=new Map,this.proxy=e.getProxy(Ft.MainThreadProfileContentHandlers)}registrProfileContentHandler(e,t,i){if(Yg(e,"profileContentHandlers"),this.handlers.has(t))throw new Error(`Handler with id '${t}' already registered`);return this.handlers.set(t,i),this.proxy.$registerProfileContentHandler(t,i.name,i.description,e.identifier.value),w((()=>{this.handlers.delete(t),this.proxy.$unregisterProfileContentHandler(t)}))}async $saveProfile(e,t,i,r){const n=this.handlers.get(e);if(!n)throw new Error(`Unknown handler with id: ${e}`);return n.saveProfile(t,i,r)}async $readProfile(e,t,i){const r=this.handlers.get(e);if(!r)throw new Error(`Unknown handler with id: ${e}`);return r.readProfile(hi(t)?t:pt.revive(t),i)}}class Nx{static{this.handlePool=0}constructor(e,t){this.uriTransformer=t,this.providers=new Map,this.proxy=e.getProxy(Ft.MainThreadQuickDiff)}$provideOriginalResource(e,t,i){const r=pt.revive(t),n=this.providers.get(e);return n?ar((()=>n.provideOriginalResource(r,i))).then((e=>e||null)):Promise.resolve(null)}registerQuickDiffProvider(e,t,i,r){const n=Nx.handlePool++;return this.providers.set(n,t),this.proxy.$registerQuickDiffProvider(n,Kd.from(e,this.uriTransformer),i,r),{dispose:()=>{this.proxy.$unregisterQuickDiffProvider(n),this.providers.delete(n)}}}}class Hx{static{this._pool=0}constructor(e,t){this.extension=e,this.provider=t,this.handle=Hx._pool++}}class Ux{static{this._nextId=0}constructor(e,t){this.logService=t,this._chatProvider=new Map,this._chatSessions=new Map,this._onDidPerformUserAction=new B,this.onDidPerformUserAction=this._onDidPerformUserAction.event,this._proxy=e.getProxy(Ft.MainThreadChat)}registerChatProvider(e,t,i){const r=new Hx(e,i);return this._chatProvider.set(r.handle,r),this._proxy.$registerChatProvider(r.handle,t),w((()=>{this._proxy.$unregisterChatProvider(r.handle),this._chatProvider.delete(r.handle)}))}transferChatSession(e,t){const i=v.find(this._chatSessions.keys(),(t=>this._chatSessions.get(t)===e))??0;"number"==typeof i&&this._proxy.$transferChatSession(i,t)}addChatRequest(e){this._proxy.$addRequest(e)}sendInteractiveRequestToProvider(e,t){this._proxy.$sendRequestToProvider(e,t)}async $prepareChat(e,t,i){const r=this._chatProvider.get(e);if(!r)return;const n=await r.provider.prepareSession(t,i);if(!n)return;const s=Ux._nextId++;return this._chatSessions.set(s,n),{id:s,requesterUsername:n.requester?.name,requesterAvatarIconUri:n.requester?.icon,responderUsername:n.responder?.name,responderAvatarIconUri:n.responder?.icon,inputPlaceholder:n.inputPlaceholder}}async $resolveRequest(e,t,i,r){const n=this._chatProvider.get(e);if(!n)return;const s=this._chatSessions.get(t);if(!s)return;if(!n.provider.resolveRequest)return;const o=await n.provider.resolveRequest(s,i,r);return o?{message:"string"==typeof o.message?o.message:gp.from(o.message)}:void 0}async $provideWelcomeMessage(e,t){const i=this._chatProvider.get(e);if(!i)return;if(!i.provider.provideWelcomeMessage)return;const r=await i.provider.provideWelcomeMessage(t);return r?r.map((e=>"string"==typeof e?e:e.map((e=>gp.from(e))))):void 0}async $provideFollowups(e,t,i){const r=this._chatProvider.get(e);if(!r)return;const n=this._chatSessions.get(t);if(!n)return;if(!r.provider.provideFollowups)return;const s=await r.provider.provideFollowups(n,i);return s?.map((e=>fp.from(e)))}$removeRequest(e,t,i){const r=this._chatProvider.get(e);if(!r)return;const n=this._chatSessions.get(t);n&&r.provider.removeRequest&&r.provider.removeRequest(n,i)}async $provideReply(e,t,i,r){const n=this._chatProvider.get(e);if(!n)return;const s=this._chatSessions.get(t);if(!s)return;const o={session:s,message:"string"==typeof i.message?i.message:gp.to(i.message),variables:{}};if(i.variables)for(const p of Object.keys(i.variables))o.variables[p]=i.variables[p].map(_p.to);const a=F.create(!1);let l;const c={report:i=>{if(!r.isCancellationRequested)if(void 0===l&&(l=a.elapsed()),"responseId"in i)this._proxy.$acceptResponseProgress(e,t,{requestId:i.responseId});else if("placeholder"in i&&"resolvedContent"in i){or(Promise.all([this._proxy.$acceptResponseProgress(e,t,{placeholder:i.placeholder}),i.resolvedContent]),r).then((i=>{if(!i)return;const[r,n]=i;this._proxy.$acceptResponseProgress(e,t,n,r??void 0)}))}else"content"in i?this._proxy.$acceptResponseProgress(e,t,{content:"string"==typeof i.content?i.content:Xd.from(i.content)}):this._proxy.$acceptResponseProgress(e,t,i)}};let u;try{u=await n.provider.provideResponseWithProgress(o,c,r),u||(u={errorDetails:{message:J(0,"Provider returned null response")}})}catch(h){u={errorDetails:{message:J(0,"Error from provider: {0}",h.message),responseIsIncomplete:!0}},this.logService.error(h)}try{if(s.saveState&&this._chatSessions.has(t)){const e=s.saveState();this._proxy.$acceptChatState(t,e)}}catch(h){this.logService.warn(h)}const d={firstProgress:l??0,totalElapsed:a.elapsed()};return{errorDetails:u.errorDetails,timings:d}}async $provideSlashCommands(e,t,i){const r=this._chatProvider.get(e);if(!r)return;const n=this._chatSessions.get(t);if(!n)return;if(!r.provider.provideSlashCommands)return;const s=await r.provider.provideSlashCommands(n,i);return s?.map((e=>({...e,kind:Ch.from(e.kind)})))}$releaseSession(e){this._chatSessions.delete(e)}async $onDidPerformUserAction(e){this._onDidPerformUserAction.fire(e)}}class Bx{static{this._pool=0}constructor(e,t){this.extension=e,this.provider=t,this.handle=Bx._pool++}}class Vx{constructor(e){this.session=e,this.responses=[]}}class Wx{static{this._nextId=0}constructor(e,t,i,r){this._documents=i,this._logService=r,this._inputProvider=new Map,this._inputSessions=new Map,this._proxy=e.getProxy(Ft.MainThreadInlineChat),t.registerApiCommand(new em("vscode.editorChat.start","inlineChat.start","Invoke a new editor chat session",[new Yf("Run arguments","",(e=>!0),(e=>{if(e)return{initialRange:e.initialRange?zd.from(e.initialRange):void 0,initialSelection:e.initialSelection?Wd.from(e.initialSelection):void 0,message:e.message,autoSend:e.autoSend,position:e.position?qd.from(e.position):void 0}}))],Xf.Void))}registerProvider(e,t){const i=new Bx(e,t);return this._inputProvider.set(i.handle,i),this._proxy.$registerInteractiveEditorProvider(i.handle,t.label,e.identifier.value,"function"==typeof t.handleInteractiveEditorResponseFeedback),w((()=>{this._proxy.$unregisterInteractiveEditorProvider(i.handle),this._inputProvider.delete(i.handle)}))}async $prepareSession(e,t,i,r){const n=this._inputProvider.get(e);if(!n)return void this._logService.warn("CANNOT prepare session because the PROVIDER IS GONE");const s=this._documents.getDocument(pt.revive(t)),o=Wd.to(i),a=await n.provider.prepareInteractiveEditorSession({document:s,selection:o},r);if(!a)return;if(a.wholeRange&&!a.wholeRange.contains(o))throw new Error("InteractiveEditorSessionProvider returned a wholeRange that does not contain the selection.");const l=Wx._nextId++;return this._inputSessions.set(l,new Vx(a)),{id:l,placeholder:a.placeholder,slashCommands:a.slashCommands?.map((e=>({command:e.command,detail:e.detail,refer:e.refer,executeImmediately:e.executeImmediately}))),wholeRange:zd.from(a.wholeRange),message:a.message}}async $provideResponse(e,t,i,r){const n=this._inputProvider.get(e);if(!n)return;const s=this._inputSessions.get(t.id);if(!s)return;const o={session:s.session,prompt:i.prompt,selection:Wd.to(i.selection),wholeRange:zd.to(i.wholeRange),attempt:i.attempt,live:i.live};let a=!1;const l={report:e=>{if(!i.live)throw new Error("Progress reporting is only supported for live sessions");a||r.isCancellationRequested||(e.message||e.edits)&&this._proxy.$handleProgressChunk(i.requestId,{message:e.message,edits:e.edits?.map(nh.from)})}},c="function"==typeof n.provider.provideInteractiveEditorResponse2?n.provider.provideInteractiveEditorResponse2(o,l,r):n.provider.provideInteractiveEditorResponse(o,r);Promise.resolve(c).finally((()=>a=!0));const u=await c;if(u){const e=s.responses.push(u)-1,t={wholeRange:zd.from(u.wholeRange),placeholder:u.placeholder};if(Wx._isMessageResponse(u))return{...t,id:e,type:"message",message:Xd.from(u.contents)};const{edits:i}=u;if(i instanceof Al)return{...t,id:e,type:"bulkEdit",edits:sh.from(i)};if(Array.isArray(i))return{...t,id:e,type:"editorEdit",edits:i.map(nh.from)}}}$handleFeedback(e,t,i,r){const n=this._inputProvider.get(e),s=this._inputSessions.get(t),o=s?.responses[i];if(n&&o){let e;switch(r){case 1:e=Nd.Helpful;break;case 0:e=Nd.Unhelpful;break;case 2:e=Nd.Undone;break;case 3:e=Nd.Accepted}n.provider.handleInteractiveEditorResponseFeedback?.(s.session,o,e)}}$releaseSession(e,t){const i=this._inputSessions.get(t),r=this._inputProvider.get(e);i&&r&&r.provider.releaseInteractiveEditorSession?.(i.session),this._inputSessions.delete(t)}static _isMessageResponse(e){return"object"==typeof e&&"object"==typeof e.contents}}class zx{constructor(e,t,i,r={timeout:1500,errors:3}){this._logService=e,this._notebooksAndEditors=t,this._mainThreadBulkEdits=i,this._thresholds=r,this._onWillSaveNotebookDocumentEvent=new W}dispose(){}getOnWillSaveNotebookDocumentEvent(e){return(t,i,r)=>{const n=function(e){t.call(i,e)};return n.extension=e,this._onWillSaveNotebookDocumentEvent.event(n,void 0,r)}}async $participateInSave(e,t,i){const r=pt.revive(e),n=this._notebooksAndEditors.getNotebookDocument(r);if(!n)throw new Error("Unable to resolve notebook document");const s=[];if(await this._onWillSaveNotebookDocumentEvent.fireAsync({notebook:n.apiNotebook,reason:Lh.to(t)},i,(async(e,t)=>{const r=Date.now(),n=await await Promise.resolve(e);Date.now()-r>this._thresholds.timeout&&this._logService.warn("onWillSaveNotebookDocument-listener from extension",t.extension.identifier),i.isCancellationRequested||n&&(n instanceof Al?s.push(n):this._logService.warn("onWillSaveNotebookDocument-listener from extension",t.extension.identifier,"ignored due to invalid data"))})),i.isCancellationRequested)return!1;if(0===s.length)return!0;const o={edits:[]};for(const a of s){const{edits:e}=sh.from(a);o.edits=o.edits.concat(e)}return this._mainThreadBulkEdits.$tryApplyWorkspaceEdit(o)}}class jx{constructor(e){this._IssueUriRequestHandlers=new Map,this._proxy=e.getProxy(Ft.MainThreadIssueReporter)}async $getIssueReporterUri(e,t){if(0===this._IssueUriRequestHandlers.size)throw new Error("No issue request handlers registered");const i=this._IssueUriRequestHandlers.get(e);if(!i)throw new Error("Issue request handler not found");const r=await i.handleIssueUrlRequest();if(!r)throw new Error("Issue request handler returned no result");return r}registerIssueUriRequestHandler(e,t){const i=e.identifier.value;return this._IssueUriRequestHandlers.set(i,t),this._proxy.$registerIssueUriRequestHandler(i),new _l((()=>{this._proxy.$unregisterIssueUriRequestHandler(i),this._IssueUriRequestHandlers.delete(i)}))}}class qx{static{this.handlePool=0}constructor(e,t){this.uriTransformer=t,this.providers=new Map,this.proxy=e.getProxy(Ft.MainThreadShare)}async $provideShare(e,t,i){const r=this.providers.get(e);return await(r?.provideShare({selection:zd.to(t.selection),resourceUri:pt.revive(t.resourceUri)},i))??void 0}registerShareProvider(e,t){const i=qx.handlePool++;return this.providers.set(i,t),this.proxy.$registerShareProvider(i,Kd.from(e,this.uriTransformer),t.id,t.label,t.priority),{dispose:()=>{this.proxy.$unregisterShareProvider(i),this.providers.delete(i)}}}}class Kx{static{this._idPool=1}constructor(e,t){this._logService=t,this._providers=new Map,this._pendingRequest=new Map,this._chatAccessAllowList=new Ka,this._proxy=e.getProxy(Ft.MainThreadChatProvider)}registerProvider(e,t,i,r){const n=Kx._idPool++;return this._providers.set(n,{extension:e,provider:i}),this._proxy.$registerProvider(n,t,{extension:e,displayName:r.name??e.value}),w((()=>{this._proxy.$unregisterProvider(n),this._providers.delete(n)}))}async $provideChatResponse(e,t,i,r,n){const s=this._providers.get(e);if(!s)return;const o=new Fw((async e=>{n.isCancellationRequested?this._logService.warn(`[CHAT](${s.extension.value}) CANNOT send progress because the REQUEST IS CANCELLED`):await this._proxy.$handleProgressChunk(t,{index:e.index,part:e.part})}),{async:!0});return s.provider.provideChatResponse(i.map(mp.to),r,o,n)}allowListExtensionWhile(e,t){this._chatAccessAllowList.set(e,t),t.finally((()=>this._chatAccessAllowList.delete(e)))}async requestChatResponseProvider(e,t){if(!this._chatAccessAllowList.has(e))throw new Error("Extension is NOT allowed to make chat requests");const i=this;return{get isRevoked(){return!i._chatAccessAllowList.has(e)},async makeRequest(r,n,s,o){if(!i._chatAccessAllowList.has(e))throw new Error("Access to chat has been revoked");const a=1e6*Math.random()|0;i._pendingRequest.set(a,s);try{await i._proxy.$fetchResponse(e,t,a,r.map(mp.from),n,o)}finally{i._pendingRequest.delete(a)}}}}async $handleResponseFragment(e,t){this._pendingRequest.get(e)?.report(t)}}class Gx{static{this._idPool=0}constructor(e,t,i){this._extHostChatProvider=t,this._logService=i,this._commands=new Map,this._proxy=e.getProxy(Ft.MainThreadChatSlashCommands)}registerCommand(e,t,i,r){const n=Gx._idPool++;return this._commands.set(n,{extension:e,command:i}),this._proxy.$registerCommand(n,t,r.description),w((()=>{this._proxy.$unregisterCommand(n),this._commands.delete(n)}))}async $executeCommand(e,t,i,r,n){const s=this._commands.get(e);if(!s)return void this._logService.warn(`[CHAT](${e}) CANNOT execute command because the command is not registered`);let o=!1;const a=new vr;n.onCancellationRequested((()=>a.complete())),setTimeout((()=>a.complete()),3e3),this._extHostChatProvider.allowListExtensionWhile(s.extension,a.p);const l=s.command({role:Hd.User,content:i},{history:r.history.map(mp.to)},new Fw((e=>{!function(){if(o)throw new Error("Only valid while executing the command")}(),this._proxy.$handleProgressChunk(t,{content:e.message.value})})),n);try{await or(Promise.resolve(l),n)}finally{o=!0,a.complete()}}}class Qx{static{this._idPool=0}constructor(e){this._resolver=new Map,this._proxy=e.getProxy(Ft.MainThreadChatVariables)}async $resolveVariable(e,t,i){const r=this._resolver.get(e);if(r)try{const e=await r.resolver.resolve(r.data.name,{message:t},i);if(e)return e.map(_p.from)}catch(s){n(s)}}registerVariableResolver(e,t,i,r){const n=Qx._idPool++;return this._resolver.set(n,{extension:e.identifier,data:{name:t,description:i},resolver:r}),this._proxy.$registerVariable(n,{name:t,description:i}),w((()=>{this._resolver.delete(n),this._proxy.$unregisterVariable(n)}))}}class Jx{constructor(e){this._relatedInformationProviders=new Map,this._nextHandle=0,this._proxy=e.getProxy(Ft.MainThreadAiRelatedInformation)}async $provideAiRelatedInformation(e,t,i){if(0===this._relatedInformationProviders.size)throw new Error("No related information providers registered");const r=this._relatedInformationProviders.get(e);if(!r)throw new Error("related information provider not found");return await r.provideRelatedInformation(t,i)??[]}getRelatedInformation(e,t,i){return this._proxy.$getAiRelatedInformation(t,i)}registerRelatedInformationProvider(e,t,i){const r=this._nextHandle;return this._nextHandle++,this._relatedInformationProviders.set(r,i),this._proxy.$registerAiRelatedInformationProvider(r,t),new _l((()=>{this._proxy.$unregisterAiRelatedInformationProvider(r),this._relatedInformationProviders.delete(r)}))}}class Zx{constructor(e){this._AiEmbeddingVectorProviders=new Map,this._nextHandle=0,this._proxy=e.getProxy(Ft.MainThreadAiEmbeddingVector)}async $provideAiEmbeddingVector(e,t,i){if(0===this._AiEmbeddingVectorProviders.size)throw new Error("No embedding vector providers registered");const r=this._AiEmbeddingVectorProviders.get(e);if(!r)throw new Error("Embedding vector provider not found");const n=await r.provideEmbeddingVector(t,i);if(!n)throw new Error("Embedding vector provider returned undefined");return n}registerEmbeddingVectorProvider(e,t,i){const r=this._nextHandle;return this._nextHandle++,this._AiEmbeddingVectorProviders.set(r,i),this._proxy.$registerAiEmbeddingVectorProvider(t,r),new _l((()=>{this._proxy.$unregisterAiEmbeddingVectorProvider(r),this._AiEmbeddingVectorProviders.delete(r)}))}}function Yx(e){const t=e.get(as),i=e.get(zs),r=e.get(gf),n=e.get(Gm),s=e.get(og),o=e.get(Gf),a=e.get(zg),c=e.get(fs),u=e.get(ps),d=e.get(cf),p=e.get(ff),g=e.get(Qn),f=e.get(Gn),m=e.get(Cf),v=e.get($v),_=e.get(A_),w=e.get(Lm),b=e.get(Jv),x=e.get(Hm);u.set($t.ExtHostFileSystemInfo,i),u.set($t.ExtHostLogLevelServiceShape,g),u.set($t.ExtHostWorkspace,s),u.set($t.ExtHostConfiguration,a),u.set($t.ExtHostExtensionService,n),u.set($t.ExtHostStorage,d),u.set($t.ExtHostTunnelService,m),u.set($t.ExtHostWindow,_),u.set($t.ExtHostSecretState,w),u.set($t.ExtHostTelemetry,o),u.set($t.ExtHostEditorTabs,b),u.set($t.ExtHostManagedSockets,x);const C=u.set($t.ExtHostDecorations,e.get(gv)),D=u.set($t.ExtHostDocumentsAndEditors,e.get(Fv)),S=u.set($t.ExtHostCommands,e.get(Jf)),E=u.set($t.ExtHostTerminalService,e.get(tm)),k=u.set($t.ExtHostDebugService,e.get(h_)),I=u.set($t.ExtHostSearch,e.get(S_)),T=u.set($t.ExtHostTask,e.get(Qv)),P=u.set($t.ExtHostOutputService,e.get(dv)),A=u.set($t.ExtHostLocalization,e.get(Nm)),R=u.set($t.ExtHostUrls,new xb(u)),F=u.set($t.ExtHostDocuments,new Ay(u,D)),L=u.set($t.ExtHostDocumentContentProviders,new Ty(u,D,f)),O=u.set($t.ExtHostDocumentSaveParticipant,new Py(f,F,u.getProxy(Ft.MainThreadBulkEdits))),M=u.set($t.ExtHostNotebook,new jb(u,S,D,F,r)),N=u.set($t.ExtHostNotebookDocuments,new Ax(M)),H=u.set($t.ExtHostNotebookEditors,new Px(f,M)),U=u.set($t.ExtHostNotebookKernels,new bx(u,t,M,S,f)),V=u.set($t.ExtHostNotebookRenderers,new Tx(u,M)),W=u.set($t.ExtHostNotebookDocumentSaveParticipant,new zx(f,M,u.getProxy(Ft.MainThreadBulkEdits))),z=u.set($t.ExtHostEditors,new rb(u,D)),j=u.set($t.ExtHostTreeViews,new wb(u.getProxy(Ft.MainThreadTreeViews),S,f)),K=u.set($t.ExtHostEditorInsets,new Hb(u.getProxy(Ft.MainThreadEditorInsets),z,t.remote)),G=u.set($t.ExtHostDiagnostics,new ky(u,f,i,D)),Q=u.set($t.ExtHostLanguages,new Iw(u,F,S.converter,c)),J=u.set($t.ExtHostLanguageFeatures,new kw(u,c,F,S,G,f,v,o)),Z=u.set($t.ExtHostFileSystem,new Ny(u,J)),Y=u.set($t.ExtHostFileSystemEventService,new Uy(u,f,D)),X=u.set($t.ExtHostQuickOpen,Uw(u,s,S)),ee=u.set($t.ExtHostSCM,new Xw(u,S,F,f)),te=u.set($t.ExtHostQuickDiff,new Nx(u,c)),ie=u.set($t.ExtHostShare,new qx(u,c)),re=u.set($t.ExtHostComments,Dy(u,S,F)),ne=u.set($t.ExtHostProgress,new Lw(u.getProxy(Ft.MainThreadProgress))),se=u.set($t.ExtHosLabelService,new Ub(u)),oe=u.set($t.ExtHostTheming,new qb(u)),ae=u.set($t.ExtHostAuthentication,new Kb(u)),le=u.set($t.ExtHostTimeline,new Qb(u,S)),ce=u.set($t.ExtHostWebviews,new Lb(u,t.remote,s,f,v)),ue=u.set($t.ExtHostWebviewPanels,new sx(u,ce,s)),de=u.set($t.ExtHostCustomEditors,new ix(u,F,p,ce,ue)),he=u.set($t.ExtHostWebviewViews,new Yb(u,ce)),pe=u.set($t.ExtHostTesting,new lx(u,S,D)),ge=u.set($t.ExtHostUriOpeners,new yx(u)),fe=u.set($t.ExtHostProfileContentHandlers,new Mx(u));u.set($t.ExtHostInteractive,new Rx(u,M,D,S,f));const me=u.set($t.ExtHostInlineChat,new Wx(u,S,F,f)),ve=u.set($t.ExtHostChatProvider,new Kx(u,f)),_e=u.set($t.ExtHostChatSlashCommands,new Gx(u,ve,f)),ye=u.set($t.ExtHostChatVariables,new Qx(u)),we=u.set($t.ExtHostChat,new Ux(u,f)),be=u.set($t.ExtHostAiRelatedInformation,new Jx(u)),xe=u.set($t.ExtHostAiEmbeddingVector,new Zx(u)),Ce=u.set($t.ExtHostIssueReporter,new jx(u)),De=u.set($t.ExtHostStatusBar,new ib(u,S.converter)),Se=new ax(u,D),Ee=new by(u),ke=new Tw(u,f),Ie=new Iy(u);return _y.register(S),function(e,i,a){const c=function(){let t=!e.isUnderDevelopment;function i(){t||(f.info(`Extension '${e.identifier.value}' uses a document selector without scheme. Learn more about this: https://go.microsoft.com/fwlink/?linkid=872305`),t=!0)}return function t(r){if(Array.isArray(r))r.forEach(t);else if("string"==typeof r)i();else{const t=r;void 0===t.scheme&&i(),"boolean"==typeof t.exclusive&&Yg(e,"documentFiltersExclusive")}return r}}(),u={getSession:(t,i,r)=>ae.getSession(e,t,i,r),getSessions:(t,i)=>(Yg(e,"authGetSessions"),ae.getSessions(e,t,i)),hasSession:async(t,i)=>(Yg(e,"authSession"),!!(await ae.getSession(e,t,i,{silent:!0}))),get onDidChangeSessions(){return ae.onDidChangeSessions},registerAuthenticationProvider:(e,t,i,r)=>ae.registerAuthenticationProvider(e,t,i,r)},d={registerCommand:(t,i,r)=>S.registerCommand(!0,t,i,r,void 0,e),registerTextEditorCommand:(t,i,r)=>S.registerCommand(!0,t,((...e)=>{const n=z.getActiveTextEditor();if(n)return n.edit((t=>{i.apply(r,[n,t,...e])})).then((e=>{e||f.warn("Edits from command "+t+" were not applied.")}),(e=>{f.warn("An error occurred while running command "+t,e)}));f.warn("Cannot execute "+t+" because there is no active text editor.")}),void 0,void 0,e),registerDiffInformationCommand:(t,i,r)=>(Yg(e,"diffCommand"),S.registerCommand(!0,t,(async(...e)=>{const n=D.activeEditor(!0);if(!n)return void f.warn("Cannot execute "+t+" because there is no active text editor.");const s=await z.getDiffInformation(n.id);i.apply(r,[s,...e])}),void 0,void 0,e)),executeCommand:(e,...t)=>S.executeCommand(e,...t),getCommands:(e=!1)=>S.getCommands(e)},p={get machineId(){return t.telemetryInfo.machineId},get sessionId(){return t.telemetryInfo.sessionId},get language(){return t.environment.appLanguage},get appName(){return t.environment.appName},get appRoot(){return t.environment.appRoot?.fsPath??""},get appHost(){return t.environment.appHost},get uriScheme(){return t.environment.appUriScheme},get clipboard(){return Ee.value},get shell(){return E.getDefaultShell(!1)},get onDidChangeShell(){return Yg(e,"envShellEvent"),E.onDidChangeShell},get isTelemetryEnabled(){return o.getTelemetryConfiguration()},get onDidChangeTelemetryEnabled(){return o.onDidChangeTelemetryEnabled},get telemetryConfiguration(){return Yg(e,"telemetry"),o.getTelemetryDetails()},get onDidChangeTelemetryConfiguration(){return Yg(e,"telemetry"),o.onDidChangeTelemetryConfiguration},get isNewAppInstall(){return Kf(t.telemetryInfo.firstSessionDate)},createTelemetryLogger:(t,i)=>(qf.validateSender(t),o.instantiateLogger(e,t,i)),openExternal:(e,i)=>_.openUri(e,{allowTunneling:!!t.remote.authority,allowContributedOpeners:i?.allowContributedOpeners}),async asExternalUri(e){if(e.scheme===t.environment.appUriScheme)return R.createAppUri(e);try{return await _.asExternalUri(e,{allowTunneling:!!t.remote.authority})}catch(i){if(my(e,Fi.http)||my(e,Fi.https))return e;throw i}},get remoteName(){return za(t.remote.authority)},get remoteAuthority(){return Yg(e,"resolvers"),t.remote.authority},get uiKind(){return t.uiKind},get logLevel(){return f.getLevel()},get onDidChangeLogLevel(){return f.onDidChangeLogLevel},registerIssueUriRequestHandler:t=>(Yg(e,"handleIssueUri"),Ce.registerIssueUriRequestHandler(e,t)),get appQuality(){return Yg(e,"resolvers"),t.quality},get appCommit(){return Yg(e,"resolvers"),t.commit}},g={createTestController:(t,i,r)=>pe.createTestController(e,t,i,r),createTestObserver:()=>(Yg(e,"testObserver"),pe.createTestObserver()),runTests:t=>(Yg(e,"testObserver"),pe.runTests(t)),get onDidChangeTestResults(){return Yg(e,"testObserver"),pe.onResultsChanged},get testResults(){return Yg(e,"testObserver"),pe.results}},w=t.remote.isRemote?Wu.Workspace:Wu.UI,x={getExtension(t,r){Zg(e,"extensionsAny")||(r=!1);const s=i.mine.getExtensionDescription(t);if(s)return new Qm(n,e.identifier,s,w,!1);if(r){const r=i.all.getExtensionDescription(t);if(r)return new Qm(n,e.identifier,r,w,!0)}},get all(){const t=[];for(const r of i.mine.getAllExtensionDescriptions())t.push(new Qm(n,e.identifier,r,w,!1));return t},get allAcrossExtensionHosts(){Yg(e,"extensionsAny");const t=new qa(i.mine.getAllExtensionDescriptions().map((e=>e.identifier))),r=[];for(const s of i.all.getAllExtensionDescriptions()){const i=!t.has(s.identifier);r.push(new Qm(n,e.identifier,s,w,i))}return r},get onDidChange(){return Zg(e,"extensionsAny")?$.any(i.mine.onDidChange,i.all.onDidChange):i.mine.onDidChange}},ce={createDiagnosticCollection:t=>G.createDiagnosticCollection(e.identifier,t),get onDidChangeDiagnostics(){return G.onDidChangeDiagnostics},getDiagnostics:e=>G.getDiagnostics(e),getLanguages:()=>Q.getLanguages(),setTextDocumentLanguage:(e,t)=>Q.changeLanguage(e.uri,t),match(e,t){const i=F.getDocumentData(t.uri)?.notebook;return hy(Wh.from(e),t.uri,t.languageId,!0,i?.uri,i?.notebookType)},registerCodeActionsProvider:(t,i,r)=>J.registerCodeActionProvider(e,c(t),i,r),registerDocumentPasteEditProvider:(t,i,r)=>(Yg(e,"documentPaste"),J.registerDocumentPasteEditProvider(e,c(t),i,r)),registerCodeLensProvider:(t,i)=>J.registerCodeLensProvider(e,c(t),i),registerDefinitionProvider:(t,i)=>J.registerDefinitionProvider(e,c(t),i),registerDeclarationProvider:(t,i)=>J.registerDeclarationProvider(e,c(t),i),registerImplementationProvider:(t,i)=>J.registerImplementationProvider(e,c(t),i),registerTypeDefinitionProvider:(t,i)=>J.registerTypeDefinitionProvider(e,c(t),i),registerHoverProvider:(t,i)=>J.registerHoverProvider(e,c(t),i,e.identifier),registerEvaluatableExpressionProvider:(t,i)=>J.registerEvaluatableExpressionProvider(e,c(t),i,e.identifier),registerInlineValuesProvider:(t,i)=>J.registerInlineValuesProvider(e,c(t),i,e.identifier),registerDocumentHighlightProvider:(t,i)=>J.registerDocumentHighlightProvider(e,c(t),i),registerLinkedEditingRangeProvider:(t,i)=>J.registerLinkedEditingRangeProvider(e,c(t),i),registerReferenceProvider:(t,i)=>J.registerReferenceProvider(e,c(t),i),registerRenameProvider:(t,i)=>J.registerRenameProvider(e,c(t),i),registerDocumentSymbolProvider:(t,i,r)=>J.registerDocumentSymbolProvider(e,c(t),i,r),registerWorkspaceSymbolProvider:t=>J.registerWorkspaceSymbolProvider(e,t),registerDocumentFormattingEditProvider:(t,i)=>J.registerDocumentFormattingEditProvider(e,c(t),i),registerDocumentRangeFormattingEditProvider:(t,i)=>J.registerDocumentRangeFormattingEditProvider(e,c(t),i),registerOnTypeFormattingEditProvider:(t,i,r,...n)=>J.registerOnTypeFormattingEditProvider(e,c(t),i,[r].concat(n)),registerDocumentSemanticTokensProvider:(t,i,r)=>J.registerDocumentSemanticTokensProvider(e,c(t),i,r),registerDocumentRangeSemanticTokensProvider:(t,i,r)=>J.registerDocumentRangeSemanticTokensProvider(e,c(t),i,r),registerSignatureHelpProvider:(t,i,r,...n)=>"object"==typeof r?J.registerSignatureHelpProvider(e,c(t),i,r):J.registerSignatureHelpProvider(e,c(t),i,void 0===r?[]:[r,...n]),registerCompletionItemProvider:(t,i,...r)=>J.registerCompletionItemProvider(e,c(t),i,r),registerInlineCompletionItemProvider:(t,i,r)=>(i.handleDidShowCompletionItem&&Yg(e,"inlineCompletionsAdditions"),i.handleDidPartiallyAcceptCompletionItem&&Yg(e,"inlineCompletionsAdditions"),r&&Yg(e,"inlineCompletionsAdditions"),J.registerInlineCompletionsProvider(e,c(t),i,r)),registerDocumentLinkProvider:(t,i)=>J.registerDocumentLinkProvider(e,c(t),i),registerColorProvider:(t,i)=>J.registerColorProvider(e,c(t),i),registerFoldingRangeProvider:(t,i)=>J.registerFoldingRangeProvider(e,c(t),i),registerSelectionRangeProvider:(t,i)=>J.registerSelectionRangeProvider(e,t,i),registerCallHierarchyProvider:(t,i)=>J.registerCallHierarchyProvider(e,t,i),registerTypeHierarchyProvider:(t,i)=>J.registerTypeHierarchyProvider(e,t,i),setLanguageConfiguration:(t,i)=>J.setLanguageConfiguration(e,t,i),getTokenInformationAtPosition:(t,i)=>(Yg(e,"tokenInformation"),Q.tokenAtPosition(t,i)),registerInlayHintsProvider:(t,i)=>J.registerInlayHintsProvider(e,t,i),createLanguageStatusItem:(t,i)=>Q.createLanguageStatusItem(e,t,i),registerDocumentDropEditProvider:(t,i,r)=>J.registerDocumentOnDropEditProvider(e,t,i,Zg(e,"dropMetadata")?r:void 0)},Te={get activeTextEditor(){return z.getActiveTextEditor()},get visibleTextEditors(){return z.getVisibleTextEditors()},get activeTerminal(){return E.activeTerminal},get terminals(){return E.terminals},async showTextDocument(e,t,i){const r=await(pt.isUri(e)?Promise.resolve(Pe.openTextDocument(e)):Promise.resolve(e));return z.showTextDocument(r,t,i)},createTextEditorDecorationType:t=>z.createTextEditorDecorationType(e,t),onDidChangeActiveTextEditor:(e,t,i)=>z.onDidChangeActiveTextEditor(e,t,i),onDidChangeVisibleTextEditors:(e,t,i)=>z.onDidChangeVisibleTextEditors(e,t,i),onDidChangeTextEditorSelection:(e,t,i)=>z.onDidChangeTextEditorSelection(e,t,i),onDidChangeTextEditorOptions:(e,t,i)=>z.onDidChangeTextEditorOptions(e,t,i),onDidChangeTextEditorVisibleRanges:(e,t,i)=>z.onDidChangeTextEditorVisibleRanges(e,t,i),onDidChangeTextEditorViewColumn:(e,t,i)=>z.onDidChangeTextEditorViewColumn(e,t,i),onDidCloseTerminal:(e,t,i)=>E.onDidCloseTerminal(e,t,i),onDidOpenTerminal:(e,t,i)=>E.onDidOpenTerminal(e,t,i),onDidChangeActiveTerminal:(e,t,i)=>E.onDidChangeActiveTerminal(e,t,i),onDidChangeTerminalDimensions:(t,i,r)=>(Yg(e,"terminalDimensions"),E.onDidChangeTerminalDimensions(t,i,r)),onDidChangeTerminalState:(e,t,i)=>E.onDidChangeTerminalState(e,t,i),onDidWriteTerminalData:(t,i,r)=>(Yg(e,"terminalDataWriteEvent"),E.onDidWriteTerminalData(t,i,r)),onDidExecuteTerminalCommand:(t,i,r)=>(Yg(e,"terminalExecuteCommandEvent"),E.onDidExecuteTerminalCommand(t,i,r)),get state(){return _.getState(e)},onDidChangeWindowState:(e,t,i)=>_.onDidChangeWindowState(e,t,i),showInformationMessage:(t,...i)=>ke.showMessage(e,Ns.Info,t,i[0],i.slice(1)),showWarningMessage:(t,...i)=>ke.showMessage(e,Ns.Warning,t,i[0],i.slice(1)),showErrorMessage:(t,...i)=>ke.showMessage(e,Ns.Error,t,i[0],i.slice(1)),showQuickPick:(t,i,r)=>X.showQuickPick(e,t,i,r),showWorkspaceFolderPick:e=>X.showWorkspaceFolderPick(e),showInputBox:(e,t)=>X.showInput(e,t),showOpenDialog:t=>Ie.showOpenDialog(e,t),showSaveDialog:e=>Ie.showSaveDialog(e),createStatusBarItem(t,i,r){let n,s,o;return"string"==typeof t?(n=t,s=i,o=r):(s=t,o=i),De.createStatusBarEntry(e,n,s,o)},setStatusBarMessage:(e,t)=>De.setStatusBarMessage(e,t),withScmProgress:t=>(v.report("window.withScmProgress",e,"Use 'withProgress' instead."),ne.withProgress(e,{location:jc.SourceControl},((e,i)=>t({report(e){}})))),withProgress:(t,i)=>ne.withProgress(e,t,i),createOutputChannel:(t,i)=>P.createOutputChannel(t,i,e),createWebviewPanel:(t,i,r,n)=>ue.createWebviewPanel(e,t,i,r,n),createWebviewTextEditorInset:(t,i,r,n)=>(Yg(e,"editorInsets"),K.createWebviewEditorInset(t,i,r,n,e)),createTerminal:(e,t,i)=>"object"==typeof e?"pty"in e?E.createExtensionTerminal(e):E.createTerminalFromOptions(e):E.createTerminal(e,t,i),registerTerminalLinkProvider:e=>E.registerLinkProvider(e),registerTerminalProfileProvider:(t,i)=>E.registerProfileProvider(e,t,i),registerTerminalQuickFixProvider:(t,i)=>(Yg(e,"terminalQuickFixProvider"),E.registerTerminalQuickFixProvider(t,e.identifier.value,i)),registerTreeDataProvider:(t,i)=>j.registerTreeDataProvider(t,i,e),createTreeView:(t,i)=>j.createTreeView(t,i,e),registerWebviewPanelSerializer:(t,i)=>ue.registerWebviewPanelSerializer(e,t,i),registerCustomEditorProvider:(t,i,r={})=>de.registerCustomEditorProvider(e,t,i,r),registerFileDecorationProvider:t=>C.registerFileDecorationProvider(t,e),registerUriHandler:t=>R.registerUriHandler(e,t),createQuickPick:()=>X.createQuickPick(e),createInputBox:()=>X.createInputBox(e),get activeColorTheme(){return oe.activeColorTheme},onDidChangeActiveColorTheme:(e,t,i)=>oe.onDidChangeActiveColorTheme(e,t,i),registerWebviewViewProvider:(t,i,r)=>he.registerWebviewViewProvider(e,t,i,r?.webviewOptions),get activeNotebookEditor(){return M.activeNotebookEditor},onDidChangeActiveNotebookEditor:(e,t,i)=>M.onDidChangeActiveNotebookEditor(e,t,i),get visibleNotebookEditors(){return M.visibleNotebookEditors},get onDidChangeVisibleNotebookEditors(){return M.onDidChangeVisibleNotebookEditors},onDidChangeNotebookEditorSelection:(e,t,i)=>H.onDidChangeNotebookEditorSelection(e,t,i),onDidChangeNotebookEditorVisibleRanges:(e,t,i)=>H.onDidChangeNotebookEditorVisibleRanges(e,t,i),showNotebookDocument:(e,t)=>M.showNotebookDocument(e,t),registerExternalUriOpener:(t,i,r)=>(Yg(e,"externalUriOpener"),ge.registerExternalUriOpener(e.identifier,t,i,r)),registerProfileContentHandler:(t,i)=>(Yg(e,"profileContentHandlers"),fe.registrProfileContentHandler(e,t,i)),registerQuickDiffProvider:(t,i,r,n)=>(Yg(e,"quickDiffProvider"),te.registerQuickDiffProvider(c(t),i,r,n)),get tabGroups(){return b.tabGroups},registerShareProvider:(t,i)=>(Yg(e,"shareProvider"),ie.registerShareProvider(c(t),i))},Pe={get rootPath(){return v.report("workspace.rootPath",e,"Please use 'workspace.workspaceFolders' instead. More details: https://aka.ms/vscode-eliminating-rootpath"),s.getPath()},set rootPath(e){throw h()},getWorkspaceFolder:e=>s.getWorkspaceFolder(e),get workspaceFolders(){return s.getWorkspaceFolders()},get name(){return s.name},set name(e){throw h()},get workspaceFile(){return s.workspaceFile},set workspaceFile(e){throw h()},updateWorkspaceFolders:(t,i,...r)=>s.updateWorkspaceFolders(e,t,i||0,...r),onDidChangeWorkspaceFolders:function(e,t,i){return s.onDidChangeWorkspace(e,t,i)},asRelativePath:(e,t)=>s.getRelativePath(e,t),findFiles:(t,i,r,n)=>s.findFiles(t,i,r,e.identifier,n),findTextInFiles:(t,i,r,n)=>{let o,a;return Yg(e,"findTextInFiles"),"object"==typeof i?(o=i,a=r):(o={},a=i,n=r),s.findTextInFiles(t,o||{},a,e.identifier,n)},save:t=>(Yg(e,"saveEditor"),s.save(t)),saveAs:t=>(Yg(e,"saveEditor"),s.saveAs(t)),saveAll:e=>s.saveAll(e),applyEdit:(t,i)=>Se.applyWorkspaceEdit(t,e,i),createFileSystemWatcher:(t,i,r,n)=>Y.createFileSystemWatcher(s,e,t,i,r,n),get textDocuments(){return F.getAllDocumentData().map((e=>e.document))},set textDocuments(e){throw h()},openTextDocument(e){let t;const i=e;if("string"==typeof e)t=Promise.resolve(pt.file(e));else if(pt.isUri(e))t=Promise.resolve(e);else{if(i&&"object"!=typeof i)throw new Error("illegal argument - uriOrFileNameOrOptions");t=F.createDocumentData(i)}return t.then((e=>F.ensureDocumentData(e).then((e=>e.document))))},onDidOpenTextDocument:(e,t,i)=>F.onDidAddDocument(e,t,i),onDidCloseTextDocument:(e,t,i)=>F.onDidRemoveDocument(e,t,i),onDidChangeTextDocument:(e,t,i)=>F.onDidChangeDocument(e,t,i),onDidSaveTextDocument:(e,t,i)=>F.onDidSaveDocument(e,t,i),onWillSaveTextDocument:(t,i,r)=>O.getOnWillSaveTextDocumentEvent(e)(t,i,r),get notebookDocuments(){return M.notebookDocuments.map((e=>e.apiNotebook))},async openNotebookDocument(e,t){let i;if(pt.isUri(e))i=e,await M.openNotebookDocument(e);else{if("string"!=typeof e)throw new Error("Invalid arguments");i=pt.revive(await M.createNotebookDocument({viewType:e,content:t}))}return M.getNotebookDocument(i).apiNotebook},onDidSaveNotebookDocument:(e,t,i)=>N.onDidSaveNotebookDocument(e,t,i),onDidChangeNotebookDocument:(e,t,i)=>N.onDidChangeNotebookDocument(e,t,i),onWillSaveNotebookDocument:(t,i,r)=>W.getOnWillSaveNotebookDocumentEvent(e)(t,i,r),get onDidOpenNotebookDocument(){return M.onDidOpenNotebookDocument},get onDidCloseNotebookDocument(){return M.onDidCloseNotebookDocument},registerNotebookSerializer:(t,i,r,n)=>M.registerNotebookSerializer(e,t,i,r,Zg(e,"notebookLiveShare")?n:void 0),onDidChangeConfiguration:(e,t,i)=>a.onDidChangeConfiguration(e,t,i),getConfiguration(t,i){return i=1===arguments.length?void 0:i,a.getConfiguration(t,i,e)},registerTextDocumentContentProvider:(e,t)=>L.registerTextDocumentContentProvider(e,t),registerTaskProvider:(t,i)=>(v.report("window.registerTaskProvider",e,"Use the corresponding function on the 'tasks' namespace instead"),T.registerTaskProvider(e,t,i)),registerFileSystemProvider:(t,i,n)=>y(Z.registerFileSystemProvider(e,t,i,n),r.addFileSystemProvider(t,i,n)),get fs(){return r.value},registerFileSearchProvider:(t,i)=>(Yg(e,"fileSearchProvider"),I.registerFileSearchProvider(t,i)),registerTextSearchProvider:(t,i)=>(Yg(e,"textSearchProvider"),I.registerTextSearchProvider(t,i)),registerRemoteAuthorityResolver:(t,i)=>(Yg(e,"resolvers"),n.registerRemoteAuthorityResolver(t,i)),registerResourceLabelFormatter:t=>(Yg(e,"resolvers"),se.$registerResourceLabelFormatter(t)),getRemoteExecServer:t=>(Yg(e,"resolvers"),n.getRemoteExecServer(t)),onDidCreateFiles:(e,t,i)=>Y.onDidCreateFile(e,t,i),onDidDeleteFiles:(e,t,i)=>Y.onDidDeleteFile(e,t,i),onDidRenameFiles:(e,t,i)=>Y.onDidRenameFile(e,t,i),onWillCreateFiles:(t,i,r)=>Y.getOnWillCreateFileEvent(e)(t,i,r),onWillDeleteFiles:(t,i,r)=>Y.getOnWillDeleteFileEvent(e)(t,i,r),onWillRenameFiles:(t,i,r)=>Y.getOnWillRenameFileEvent(e)(t,i,r),openTunnel:t=>(Yg(e,"tunnels"),m.openTunnel(e,t).then((e=>{if(!e)throw new Error("cannot open tunnel");return e}))),get tunnels(){return Yg(e,"tunnels"),m.getTunnels()},onDidChangeTunnels:(t,i,r)=>(Yg(e,"tunnels"),m.onDidChangeTunnels(t,i,r)),registerPortAttributesProvider:(t,i)=>(Yg(e,"portsAttributes"),m.registerPortsAttributesProvider(t,i)),registerTunnelProvider:(t,i)=>(Yg(e,"tunnelFactory"),m.registerTunnelProvider(t,i)),registerTimelineProvider:(t,i)=>(Yg(e,"timeline"),le.registerTimelineProvider(t,i,e.identifier,S.converter)),get isTrusted(){return s.trusted},requestWorkspaceTrust:t=>(Yg(e,"workspaceTrust"),s.requestWorkspaceTrust(t)),onDidGrantWorkspaceTrust:(e,t,i)=>s.onDidGrantWorkspaceTrust(e,t,i),registerEditSessionIdentityProvider:(t,i)=>(Yg(e,"editSessionIdentityProvider"),s.registerEditSessionIdentityProvider(t,i)),onWillCreateEditSessionIdentity:(t,i,r)=>(Yg(e,"editSessionIdentityProvider"),s.getOnWillCreateEditSessionIdentityEvent(e)(t,i,r)),registerCanonicalUriProvider:(t,i)=>(Yg(e,"canonicalUriProvider"),s.registerCanonicalUriProvider(t,i)),getCanonicalUri:(t,i,r)=>(Yg(e,"canonicalUriProvider"),s.provideCanonicalUri(t,i,r))},Ae={get inputBox(){return v.report("scm.inputBox",e,"Use 'SourceControl.inputBox' instead"),ee.getLastInputBox(e)},createSourceControl:(t,i,r)=>ee.createSourceControl(e,t,i,r)},Re={createCommentController:(t,i)=>re.createCommentController(e,t,i)},Fe={get activeDebugSession(){return k.activeDebugSession},get activeDebugConsole(){return k.activeDebugConsole},get breakpoints(){return k.breakpoints},get stackFrameFocus(){return k.stackFrameFocus},onDidStartDebugSession:(e,t,i)=>k.onDidStartDebugSession(e,t,i),onDidTerminateDebugSession:(e,t,i)=>k.onDidTerminateDebugSession(e,t,i),onDidChangeActiveDebugSession:(e,t,i)=>k.onDidChangeActiveDebugSession(e,t,i),onDidReceiveDebugSessionCustomEvent:(e,t,i)=>k.onDidReceiveDebugSessionCustomEvent(e,t,i),onDidChangeBreakpoints:(e,t,i)=>k.onDidChangeBreakpoints(e,t,i),onDidChangeStackFrameFocus:(t,i,r)=>(Yg(e,"debugFocus"),k.onDidChangeStackFrameFocus(t,i,r)),registerDebugConfigurationProvider:(e,t,i)=>k.registerDebugConfigurationProvider(e,t,i||Fx.Initial),registerDebugAdapterDescriptorFactory:(t,i)=>k.registerDebugAdapterDescriptorFactory(e,t,i),registerDebugAdapterTrackerFactory:(e,t)=>k.registerDebugAdapterTrackerFactory(e,t),startDebugging:(e,t,i)=>!i||"object"==typeof i&&"configuration"in i?k.startDebugging(e,t,{parentSession:i}):k.startDebugging(e,t,i||{}),stopDebugging:e=>k.stopDebugging(e),addBreakpoints:e=>k.addBreakpoints(e),removeBreakpoints:e=>k.removeBreakpoints(e),asDebugSourceUri:(e,t)=>k.asDebugSourceUri(e,t)},$e={registerTaskProvider:(t,i)=>T.registerTaskProvider(e,t,i),fetchTasks:e=>T.fetchTasks(e),executeTask:t=>T.executeTask(e,t),get taskExecutions(){return T.taskExecutions},onDidStartTask:(e,t,i)=>T.onDidStartTask(e,t,i),onDidEndTask:(e,t,i)=>T.onDidEndTask(e,t,i),onDidStartTaskProcess:(e,t,i)=>T.onDidStartTaskProcess(e,t,i),onDidEndTaskProcess:(e,t,i)=>T.onDidEndTaskProcess(e,t,i)},Le={createNotebookController:(t,i,r,n,s)=>U.createNotebookController(e,t,i,r,n,Zg(e,"notebookMessaging")?s:void 0),registerNotebookCellStatusBarItemProvider:(t,i)=>M.registerNotebookCellStatusBarItemProvider(e,t,i),createRendererMessaging:t=>V.createRendererMessaging(e,t),createNotebookControllerDetectionTask:t=>(Yg(e,"notebookKernelSource"),U.createNotebookControllerDetectionTask(e,t)),registerKernelSourceActionProvider:(t,i)=>(Yg(e,"notebookKernelSource"),U.registerKernelSourceActionProvider(e,t,i)),onDidChangeNotebookCellExecutionState:(t,i,r)=>(Yg(e,"notebookCellExecutionState"),U.onDidChangeNotebookCellExecutionState(t,i,r))},Oe={t(...t){if("string"==typeof t[0]){const i=t.shift(),r=t&&"object"==typeof t[0]?t[0]:t;return A.getMessage(e.identifier.value,{message:i,args:r})}return A.getMessage(e.identifier.value,t[0])},get bundle(){return A.getBundle(e.identifier.value)},get uri(){return A.getBundleUri(e.identifier.value)}},Me={_version:1,registerInteractiveEditorSessionProvider:t=>(Yg(e,"interactive"),me.registerProvider(e,t)),registerInteractiveSessionProvider:(t,i)=>(Yg(e,"interactive"),we.registerChatProvider(e,t,i)),addInteractiveRequest:t=>(Yg(e,"interactive"),we.addChatRequest(t)),sendInteractiveRequestToProvider:(t,i)=>(Yg(e,"interactive"),we.sendInteractiveRequestToProvider(t,i)),get onDidPerformUserAction(){return Yg(e,"interactiveUserActions"),we.onDidPerformUserAction},transferChatSession:(t,i)=>(Yg(e,"interactive"),we.transferChatSession(t,i))},Ne={getRelatedInformation:(t,i)=>(Yg(e,"aiRelatedInformation"),be.getRelatedInformation(e,t,i)),registerRelatedInformationProvider:(t,i)=>(Yg(e,"aiRelatedInformation"),be.registerRelatedInformationProvider(e,t,i)),registerEmbeddingVectorProvider:(t,i)=>(Yg(e,"aiRelatedInformation"),xe.registerEmbeddingVectorProvider(e,t,i))},He={registerChatResponseProvider:(t,i,r)=>(Yg(e,"chatProvider"),ve.registerProvider(e.identifier,t,i,r)),registerSlashCommand:(t,i,r)=>(Yg(e,"chatSlashCommands"),_e.registerCommand(e.identifier,t,i,r??{description:""})),requestChatAccess:t=>(Yg(e,"chatRequestAccess"),ve.requestChatResponseProvider(e.identifier,t)),registerVariable:(t,i,r)=>(Yg(e,"chatVariables"),ye.registerVariableResolver(e,t,i,r)),registerMappedEditsProvider:(t,i)=>(Yg(e,"mappedEditsProvider"),J.registerMappedEditsProvider(e,t,i))};return{version:t.version,ai:Ne,authentication:u,commands:d,comments:Re,chat:He,debug:Fe,env:p,extensions:x,interactive:Me,l10n:Oe,languages:ce,notebooks:Le,scm:Ae,tasks:$e,tests:g,window:Te,workspace:Pe,Breakpoint:cu,TerminalOutputAnchor:fl,ChatMessage:Bd,ChatMessageRole:Hd,ChatVariableLevel:Ud,CallHierarchyIncomingCall:Zl,CallHierarchyItem:Jl,CallHierarchyOutgoingCall:Yl,CancellationError:l,CancellationTokenSource:Ht,CandidatePortSource:At,CodeAction:ql,CodeActionKind:Kl,CodeActionTriggerKind:jl,CodeLens:ec,Color:Sc,ColorInformation:Ec,ColorPresentation:kc,ColorThemeKind:qu,CommentMode:Pu,CommentState:Au,CommentThreadCollapsibleState:Tu,CommentThreadState:Ru,CompletionItem:hc,CompletionItemKind:uc,CompletionItemTag:dc,CompletionList:pc,CompletionTriggerKind:cc,ConfigurationTarget:su,CustomExecution:Wc,DebugAdapterExecutable:pu,DebugAdapterInlineImplementation:mu,DebugAdapterNamedPipeServer:fu,DebugAdapterServer:gu,DebugConfigurationProviderTriggerKind:Fx,DebugConsoleMode:Fu,DecorationRangeBehavior:Cc,Diagnostic:Ml,DiagnosticRelatedInformation:Ol,DiagnosticSeverity:$l,DiagnosticTag:Fl,Disposable:_l,DocumentHighlight:Ul,DocumentHighlightKind:Hl,DocumentLink:Dc,DocumentSymbol:zl,EndOfLine:El,EnvironmentVariableMutatorType:kl,EvaluatableExpression:yu,InlineValueText:bu,InlineValueVariableLookup:xu,InlineValueEvaluatableExpression:Cu,InlineCompletionTriggerKind:wu,EventEmitter:B,ExtensionKind:Wu,ExtensionMode:ld,ExternalUriOpenerPriority:Cd,FileChangeType:Su,FileDecoration:zu,FileDecoration2:zu,FileSystemError:Eu,FileType:sa,FilePermission:oa,FoldingRange:ku,FoldingRangeKind:Iu,FunctionBreakpoint:du,InlineCompletionItem:gc,InlineCompletionList:fc,Hover:Nl,IndentAction:dy,Location:Ll,MarkdownString:tc,OverviewRulerLane:gm,ParameterInformation:ic,PortAutoForwardAction:Sd,Position:yl,ProcessExecution:Hc,ProgressLocation:jc,QuickInputButtons:Uu,Range:wl,RelativePattern:ou,Selection:bl,SelectionRange:Ql,SemanticTokens:Mu,SemanticTokensBuilder:Ou,SemanticTokensEdit:Nu,SemanticTokensEdits:Hu,SemanticTokensLegend:$u,ShellExecution:Uc,ShellQuoting:Bc,SignatureHelp:nc,SignatureHelpTriggerKind:sc,SignatureInformation:rc,SnippetString:Rl,SourceBreakpoint:uu,StandardTokenType:ud,StatusBarAlignment:vc,SymbolInformation:Wl,SymbolKind:Bl,SymbolTag:Vl,Task:zc,TaskGroup:Mc,TaskPanelKind:Rc,TaskRevealKind:Ac,TaskScope:Vc,TerminalLink:Fc,TerminalQuickFixExecuteTerminalCommand:Lc,TerminalQuickFixOpener:$c,TerminalLocation:Pc,TerminalProfile:Oc,TerminalExitReason:Tc,TextDocumentSaveReason:yc,TextEdit:Il,SnippetTextEdit:Pl,TextEditorCursorStyle:K_,TextEditorLineNumbersStyle:_c,TextEditorRevealType:wc,TextEditorSelectionChangeKind:bc,TextDocumentChangeReason:xc,ThemeColor:nu,ThemeIcon:ru,TreeItem:Kc,TreeItemCheckboxState:Qc,TreeItemCollapsibleState:Gc,TypeHierarchyItem:Ed,UIKind:q,Uri:pt,ViewColumn:mc,WorkspaceEdit:Al,DocumentDropEdit:tu,DocumentPasteEdit:iu,InlayHint:lc,InlayHintLabelPart:ac,InlayHintKind:oc,RemoteAuthorityResolverError:Sl,ResolvedAuthority:Cl,ManagedResolvedAuthority:Dl,SourceControlInputBoxValidationType:Ic,ExtensionRuntime:cd,TimelineItem:ad,NotebookRange:Ku,NotebookCellKind:Yu,NotebookCellExecutionState:Xu,NotebookCellData:Gu,NotebookData:Qu,NotebookRendererScript:sd,NotebookCellStatusBarAlignment:ed,NotebookEditorRevealType:td,NotebookCellOutput:Zu,NotebookCellOutputItem:Ju,NotebookCellStatusBarItem:nd,NotebookControllerAffinity:id,NotebookControllerAffinity2:rd,NotebookEdit:Tl,NotebookKernelSourceAction:od,PortAttributes:gd,LinkedEditingRanges:pd,TestResultState:dd,TestRunRequest:fd,TestMessage:md,TestMessage2:md,TestTag:vd,TestRunProfileKind:hd,TextSearchCompleteMessageType:Dx,DataTransfer:eu,DataTransferItem:Jc,CoveredCount:_d,FileCoverage:yd,StatementCoverage:wd,BranchCoverage:bd,FunctionCoverage:xd,WorkspaceTrustState:Dd,LanguageStatusSeverity:Xl,QuickPickItemKind:Bu,InputBoxValidationSeverity:Vu,TabInputText:kd,TabInputTextDiff:Id,TabInputTextMerge:Td,TabInputCustom:Pd,TabInputNotebook:Rd,TabInputNotebookDiff:Fd,TabInputWebview:Ad,TabInputTerminal:$d,TabInputInteractiveWindow:Ld,TelemetryTrustedValue:Vf,LogLevel:Jn,EditSessionIdentityMatch:Lx,InteractiveSessionVoteDirection:Od,InteractiveSessionCopyKind:Md,InteractiveEditorResponseFeedbackKind:Nd,StackFrameFocus:vu,ThreadFocus:_u,NotebookCodeActionKind:Gl,RelatedInformationType:Vd}}}let Xx=class{constructor(e,t,i,r,n,s,o){this._apiFactory=e,this._extensionRegistry=t,this._instaService=i,this._extHostConfiguration=r,this._extHostExtensionService=n,this._initData=s,this._logService=o,this._factories=new Map,this._alternatives=[]}async install(){this._installInterceptor(),G("code/extHost/willWaitForConfig");const e=await this._extHostConfiguration.getConfigProvider();G("code/extHost/didWaitForConfig");const t=await this._extHostExtensionService.getExtensionPathIndex();this.register(new tC(this._apiFactory,t,this._extensionRegistry,e,this._logService)),this.register(this._instaService.createInstance(iC,t)),this.register(this._instaService.createInstance(eC)),this._initData.remote.isRemote&&this.register(this._instaService.createInstance(rC,t,this._initData.environment.appUriScheme))}register(e){if("nodeModuleName"in e)if(Array.isArray(e.nodeModuleName))for(const t of e.nodeModuleName)this._factories.set(t,e);else this._factories.set(e.nodeModuleName,e);"function"==typeof e.alternativeModuleName&&this._alternatives.push((t=>e.alternativeModuleName(t)))}};Xx=vs([_s(2,cn),_s(3,zg),_s(4,Gm),_s(5,as),_s(6,Gn)],Xx);let eC=class{static{Ox=this}static{this.aliased=new Map([["vscode-ripgrep","@vscode/ripgrep"],["vscode-windows-registry","@vscode/windows-registry"]])}constructor(e){if(e.environment.appRoot&&Ox.aliased.size){const t=Wt(this.forceForwardSlashes(e.environment.appRoot.fsPath)),i="[a-z0-9_.-]",r=`@${i}+\\/${i}+|${i}+`,n="node_modules|node_modules\\.asar(?:\\.unpacked)?";this.re=new RegExp(`^(${t}/${n}\\/)(${r})(.*)$`,"i")}}alternativeModuleName(e){if(!this.re)return;const t=this.re.exec(this.forceForwardSlashes(e));if(!t)return;const[,i,r,n]=t,s=Ox.aliased.get(r);return void 0!==s?(console.warn(`${r} as been renamed to ${s}, please update your imports`),i+s+n):void 0}forceForwardSlashes(e){return e.replace(/\\/g,"/")}};eC=Ox=vs([_s(0,as)],eC);class tC{constructor(e,t,i,r,n){this._apiFactory=e,this._extensionPaths=t,this._extensionRegistry=i,this._configProvider=r,this._logService=n,this.nodeModuleName="vscode",this._extApiImpl=new Ka}load(e,t){const i=this._extensionPaths.findSubstr(t);if(i){let e=this._extApiImpl.get(i.identifier);return e||(e=this._apiFactory(i,this._extensionRegistry,this._configProvider),this._extApiImpl.set(i.identifier,e)),e}if(!this._defaultApiImpl){let e="";this._extensionPaths.forEach(((t,i)=>e+=`\t${i} -> ${t.identifier.value}\n`)),this._logService.warn(`Could not identify extension for 'vscode' require call from ${t}. These are the extension path mappings: \n${e}`),this._defaultApiImpl=this._apiFactory(Qg,this._extensionRegistry,this._configProvider)}return this._defaultApiImpl}}let iC=class{constructor(e,t,i){this._extensionPaths=e,this.nodeModuleName="keytar",this._mainThreadTelemetry=t.getProxy(Ft.MainThreadTelemetry);const{environment:r}=i,n=t.getProxy(Ft.MainThreadKeytar);if(r.appRoot){let e=r.appRoot.fsPath;"win32"===Oe&&(e=e.replace(/\\/g,"/")),"/"===e[e.length-1]&&(e=e.substr(0,e.length-1)),this.alternativeNames=new Set,this.alternativeNames.add(`${e}/node_modules.asar/keytar`),this.alternativeNames.add(`${e}/node_modules/keytar`)}this._impl={getPassword:(e,t)=>n.$getPassword(e,t),setPassword:(e,t,i)=>n.$setPassword(e,t,i),deletePassword:(e,t)=>n.$deletePassword(e,t),findPassword:e=>n.$findPassword(e),findCredentials:e=>n.$findCredentials(e)}}load(e,t){const i=this._extensionPaths.findSubstr(t);return this._mainThreadTelemetry.$publicLog2("shimming.keytar",{extension:i?.identifier.value??"unknown_extension"}),this._impl}alternativeModuleName(e){const t=e.length;if(t<=7||!this.alternativeNames)return;const i=t-7;return("/"===e.charAt(i)||"\\"===e.charAt(i))&&e.endsWith("keytar")&&(e=e.replace(/\\/g,"/"),this.alternativeNames.has(e))?"keytar":void 0}};iC=vs([_s(1,ps),_s(2,as)],iC);let rC=class{constructor(e,t,i){this._extensionPaths=e,this._appUriScheme=t,this.nodeModuleName=["open","opn"],this._mainThreadTelemetry=i.getProxy(Ft.MainThreadTelemetry);const r=i.getProxy(Ft.MainThreadWindow);this._impl=(e,t)=>{const i=pt.parse(e);return t?this.callOriginal(e,t):"http"===i.scheme||"https"===i.scheme?r.$openUri(i,e,{allowTunneling:!0}):"mailto"===i.scheme||i.scheme===this._appUriScheme?r.$openUri(i,e,{}):this.callOriginal(e,t)}}load(e,t,i){const r=this._extensionPaths.findSubstr(t);return r&&(this._extensionId=r.identifier.value,this.sendShimmingTelemetry()),this._original=i(e),this._impl}callOriginal(e,t){return this.sendNoForwardTelemetry(),this._original(e,t)}sendShimmingTelemetry(){this._extensionId&&this._mainThreadTelemetry.$publicLog2("shimming.open",{extension:this._extensionId})}sendNoForwardTelemetry(){this._extensionId&&this._mainThreadTelemetry.$publicLog2("shimming.open.call.noForward",{extension:this._extensionId})}};rC=vs([_s(2,ps)],rC);let nC=class{constructor(e,t){this._mainThreadConsole=e.getProxy(Ft.MainThreadConsole),this._includeStack=t.consoleForward.includeStack,this._logNative=t.consoleForward.logNative,this._wrapConsoleMethod("info","log"),this._wrapConsoleMethod("log","log"),this._wrapConsoleMethod("warn","warn"),this._wrapConsoleMethod("error","error")}_wrapConsoleMethod(e,t){const i=this,r=console[e];Object.defineProperty(console,e,{set:()=>{},get:()=>function(){i._handleConsoleCall(e,t,r,arguments)}})}_handleConsoleCall(e,t,i,r){this._mainThreadConsole.$logExtensionHostMessage({type:"__$console",severity:t,arguments:oC(r,this._includeStack)}),this._logNative&&this._nativeConsoleLogMessage(e,i,r)}};nC=vs([_s(0,ps),_s(1,as)],nC);const sC=1e5;function oC(e,t){const i=[];if(e.length)for(let n=0;n<e.length;n++){let t=e[n];if(void 0===t)t="undefined";else if(t instanceof Error){const e=t;t=e.stack?e.stack:e.toString()}i.push(t)}if(t){const e=(new Error).stack;e&&i.push({__$stack:e.split("\n").slice(3).join("\n")})}try{const e=function(e){const t=new Set;return JSON.stringify(e,((e,i)=>{if(pi(i)||Array.isArray(i)){if(t.has(i))return"[Circular]";t.add(i)}return i}))}(i);return e.length>sC?"Output omitted for a large object that exceeds the limits":e}catch(r){return`Output omitted for an object that cannot be inspected ('${r.toString()}')`}}let aC=class extends nC{constructor(e,t){super(e,t)}_nativeConsoleLogMessage(e,t,i){t.apply(console,i)}};aC=vs([_s(0,ps),_s(1,as)],aC);class lC extends Xx{_installInterceptor(){}getModule(e,t){for(const i of this._alternatives){const t=i(e);if(t){e=t;break}}if(this._factories.has(e))return this._factories.get(e).load(e,t,(()=>{throw new Error("CANNOT LOAD MODULE from here.")}))}}ss(Gm,class extends jm{constructor(){super(...arguments),this.extensionRuntime=cd.Webworker}async _beforeAlmostReadyToRunExtensions(){ye&&this._instaService.createInstance(aC),this._apiFactory=this._instaService.invokeFunction(Yx),this._fakeModules=this._instaService.createInstance(lC,this._apiFactory,{mine:this._myRegistry,all:this._globalRegistry}),await this._fakeModules.install(),performance.mark("code/extHost/didInitAPI"),await this._waitForDebuggerAttachment()}_getEntryPoint(e){return e.browser}async _loadCommonJSModule(e,t,i){var r,n;t=t.with({path:(r=t.path,n=".js",r.endsWith(n)?r:r+n)});const s=e?.identifier.value;s&&performance.mark(`code/extHost/willFetchExtensionCode/${s}`);const o=pt.revive(await this._mainThreadExtensionsProxy.$asBrowserUri(t)),a=await fetch(o.toString(!0));if(s&&performance.mark(`code/extHost/didFetchExtensionCode/${s}`),200!==a.status)throw new Error(a.statusText);const l=`${await a.text()}\n//# sourceURL=${`${t.toString(!0)}#vscode-extension`}`;let c;try{c=new Function("module","exports","require",l)}catch(p){throw s?console.error(`Loading code for extension ${s} failed: ${p.message}`):console.error(`Loading code failed: ${p.message}`),console.error(`${t.toString(!0)}${"number"==typeof p.line?` line ${p.line}`:""}${"number"==typeof p.column?` column ${p.column}`:""}`),console.error(p),p}e&&await this._extHostLocalizationService.initializeLocalizedMessages(e);const u={},d={exports:u},h=e=>{const i=this._fakeModules.getModule(e,t);if(void 0===i)throw new Error(`Cannot load module '${e}'`);return i};try{return i.codeLoadingStart(),s&&performance.mark(`code/extHost/willLoadExtensionCode/${s}`),c(d,u,h),d.exports!==u?d.exports:u}finally{s&&performance.mark(`code/extHost/didLoadExtensionCode/${s}`),i.codeLoadingStop()}}async $setRemoteEnvironment(e){}async _waitForDebuggerAttachment(e=5e3){if(!this._initData.environment.isExtensionDevelopmentDebug)return;const t=Date.now()+e;for(;Date.now()<t&&!("__jsDebugIsReady"in globalThis);)await cr(10)}},0),ss(ff,mf,0);const cC=self.close.bind(self);self.close=()=>console.trace("'close' has been blocked");const uC=postMessage.bind(self);function dC(e){return/^(file|extension|vscode-remote):/i.test(e)}self.postMessage=()=>console.trace("'postMessage' has been blocked");const hC=fetch.bind(self);function pC(e,t){if(self.Worker){const i=self.Worker;Worker=function(r,n){if(/^vscode-remote:/i.test(r.toString()))throw new Error("Creating workers from remote extensions is currently not supported.");(n=n||{}).name=n.name||nt(r.toString());return new class{constructor(r,n){this._onmessage=null,this._onmessageerror=null,this._onerror=null,this.workerPromise=async function(i){const[r,n]=await Promise.all([e(i).then((e=>e.toString(!0))),t().then((e=>Object.fromEntries(e.map((([e,t])=>[e.toString(!0),t.toString(!0)])))))]),s=function(e,t){function i(e){return"string"==typeof e||e instanceof URL?(e=String(e).replace(/^file:\/\//i,"vscode-file://vscode-app"),t[e]??e):e}const r=fetch.bind(self);self.fetch=function(e,t){return e instanceof Request?r(e,t):r(i(e),t)},self.XMLHttpRequest=class extends XMLHttpRequest{constructor(){super(...arguments),this.notFound=!1}open(e,t,r,n,s){const o=i(t);return this.notFound=o.startsWith("extension:"),super.open(e,o,r??!0,n,s)}send(e){this.notFound||super.send(e)}get status(){return this.notFound?404:super.status}};const n=importScripts.bind(self);self.importScripts=(...e)=>{n(...e.map(i))},self.importExt=e=>new Function("url","return import(url)")(i(e)),n(e)}.toString(),o=`(${s}('${r}', ${JSON.stringify(n)}))`,a=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(a)}(pt.parse(r instanceof URL?r.toString():r)).then((e=>new i(e,n)))}set onmessage(e){this._onmessage=e,this.workerPromise.then((t=>{t.onmessage=e}),console.error)}get onmessage(){return this._onmessage}set onmessageerror(e){this._onmessageerror=e,this.workerPromise.then((t=>{t.onmessageerror=e}),console.error)}get onmessageerror(){return this._onmessageerror}set onerror(e){this._onerror=e,this.workerPromise.then((t=>{t.onerror=e}),console.error)}get onerror(){return this._onerror}postMessage(e,t){this.workerPromise.then((i=>{i.postMessage(e,t)}),console.error)}terminate(){this.workerPromise.then((e=>{e.terminate()}),console.error)}addEventListener(e,t,i){this.workerPromise.then((r=>{r.addEventListener(e,t,i)}),console.error)}removeEventListener(e,t,i){this.workerPromise.then((r=>{r.removeEventListener(e,t,i)}),console.error)}dispatchEvent(e){return this.workerPromise.then((t=>{t.dispatchEvent(e)}),console.error),!1}}(r,n)}}else self.Worker=class extends ov{constructor(e,t){super(uC,e,{name:nt(e.toString()),...t})}}}self.importScripts=()=>{throw new Error("'importScripts' has been blocked")},self.addEventListener=()=>console.trace("'addEventListener' has been blocked"),self.AMDLoader=void 0,self.NLSLoaderPlugin=void 0,self.define=void 0,self.require=void 0,self.webkitRequestFileSystem=void 0,self.webkitRequestFileSystemSync=void 0,self.webkitResolveLocalFileSystemSyncURL=void 0,self.webkitResolveLocalFileSystemURL=void 0;const gC=new class{constructor(){this.pid=void 0}exit(e){cC()}};class fC{constructor(){const e=new MessageChannel,t=new B;let i=!1;uC(e.port2,[e.port2]),e.port1.onmessage=e=>{const{data:r}=e;if(!(r instanceof ArrayBuffer))return void console.warn("UNKNOWN data received",r);const n=I.wrap(new Uint8Array(r,0,r.byteLength));if(function(e,t){if(1!==e.byteLength)return!1;switch(e.readUInt8(0)){case 1:return 0===t;case 2:return 1===t;case 3:return 2===t;default:return!1}}(n,2))return i=!0,void mC("received terminate message from renderer");t.fire(n)},this.protocol={onMessage:t.event,send:t=>{if(!i){const i=t.buffer.buffer.slice(t.buffer.byteOffset,t.buffer.byteOffset+t.buffer.byteLength);e.port1.postMessage(i,[i])}}}}}let mC=e=>cC();const vC=function(){G("code/extHost/willConnectToRenderer");const e=new fC;return{onmessage(t){var i,r;(i=t)&&"object"==typeof i&&"vscode.init"===i.type&&i.data instanceof Map&&(r=e.protocol,new Promise((e=>{const t=r.onMessage((i=>{t.dispose();const n=JSON.parse(i.toString());r.send(K(0)),e({protocol:r,initData:n})}));r.send(K(1))}))).then((e=>{G("code/extHost/didWaitForInitData");const i=new nv(e.protocol,e.initData,gC,null,t.data);var r;r=e=>i.asBrowserUri(e),self.fetch=async function(e,t){return e instanceof Request||dC(String(e))&&(e=(await r(pt.parse(String(e)))).toString(!0)),hC(e,t)},self.XMLHttpRequest=class extends XMLHttpRequest{open(e,t,i,n,s){(async()=>{dC(t.toString())&&(t=(await r(pt.parse(t.toString()))).toString(!0)),super.open(e,t,i??!0,n,s)})()}},pC((e=>i.asBrowserUri(e)),(()=>i.getAllStaticBrowserUris())),mC=e=>i.terminate(e)}))}}}();globalThis.onmessage=e=>vC.onmessage(e.data)}();
