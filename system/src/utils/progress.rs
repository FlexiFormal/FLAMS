use indicatif::ProgressStyle;
use tracing::Level;

pub mod spinners {
    /*! // https://jsbin.com/lezohatoho/edit?js,output */
    pub const DOTS: &[&str] = &["â ‹", "â ™", "â ¹", "â ¸", "â ¼", "â ´", "â ¦", "â §", "â ‡", "â "];
    pub const DOTS2: &[&str] = &["â£¾", "â£½", "â£»", "â¢¿", "â¡¿", "â£Ÿ", "â£¯", "â£·"];
    pub const DOTS3: &[&str] = &["â ‹", "â ™", "â š", "â ž", "â –", "â ¦", "â ´", "â ²", "â ³", "â “"];
    pub const DOTS4: &[&str] = &["â „", "â †", "â ‡", "â ‹", "â ™", "â ¸", "â °", "â  ", "â °", "â ¸", "â ™", "â ‹", "â ‡", "â †"];
    pub const DOTS5: &[&str] = &["â ‹", "â ™", "â š", "â ’", "â ‚", "â ‚", "â ’", "â ²", "â ´", "â ¦", "â –", "â ’", "â ", "â ", "â ’", "â “", "â ‹"];
    pub const DOTS6: &[&str] = &["â ", "â ‰", "â ™", "â š", "â ’", "â ‚", "â ‚", "â ’", "â ²", "â ´", "â ¤", "â „", "â „", "â ¤", "â ´", "â ²", "â ’", "â ‚", "â ‚", "â ’", "â š", "â ™", "â ‰", "â "];
    pub const DOTS7: &[&str] = &["â ˆ", "â ‰", "â ‹", "â “", "â ’", "â ", "â ", "â ’", "â –", "â ¦", "â ¤", "â  ", "â  ", "â ¤", "â ¦", "â –", "â ’", "â ", "â ", "â ’", "â “", "â ‹", "â ‰", "â ˆ"];
    pub const DOTS8: &[&str] = &["â ", "â ", "â ‰", "â ™", "â š", "â ’", "â ‚", "â ‚", "â ’", "â ²", "â ´", "â ¤", "â „", "â „", "â ¤", "â  ", "â  ", "â ¤", "â ¦", "â –", "â ’", "â ", "â ", "â ’", "â “", "â ‹", "â ‰", "â ˆ", "â ˆ"];
    pub const DOTS9: &[&str] = &["â¢¹", "â¢º", "â¢¼", "â£¸", "â£‡", "â¡§", "â¡—", "â¡"];
    pub const DOTS10: &[&str] = &["â¢„", "â¢‚", "â¢", "â¡", "â¡ˆ", "â¡", "â¡ "];
    pub const DOTS11: &[&str] = &["â ", "â ‚", "â „", "â¡€", "â¢€", "â  ", "â ", "â ˆ"];
    pub const DOTS12: &[&str] = &["â¢€â €", "â¡€â €", "â „â €", "â¢‚â €", "â¡‚â €", "â …â €", "â¢ƒâ €", "â¡ƒâ €", "â â €", "â¢‹â €", "â¡‹â €", "â â ", "â¢‹â ", "â¡‹â ", "â â ‰", "â ‹â ‰", "â ‹â ‰", "â ‰â ™", "â ‰â ™", "â ‰â ©", "â ˆâ¢™", "â ˆâ¡™", "â¢ˆâ ©", "â¡€â¢™", "â „â¡™", "â¢‚â ©", "â¡‚â¢˜", "â …â¡˜", "â¢ƒâ ¨", "â¡ƒâ¢", "â â¡", "â¢‹â  ", "â¡‹â¢€", "â â¡", "â¢‹â ", "â¡‹â ", "â â ‰", "â ‹â ‰", "â ‹â ‰", "â ‰â ™", "â ‰â ™", "â ‰â ©", "â ˆâ¢™", "â ˆâ¡™", "â ˆâ ©", "â €â¢™", "â €â¡™", "â €â ©", "â €â¢˜", "â €â¡˜", "â €â ¨", "â €â¢", "â €â¡", "â €â  ", "â €â¢€", "â €â¡€"];
    pub const LINE: &[&str] = &["-", "\\", "|", "/"];
    pub const LINE2: &[&str] = &["â ‚", "-", "â€“", "â€”", "â€“", "-"];
    pub const PIPE: &[&str] = &["â”¤", "â”˜", "â”´", "â””", "â”œ", "â”Œ", "â”¬", "â”"];
    pub const SIMPLE_DOTS: &[&str] = &[".  ", ".. ", "...", "   "];
    pub const SIMPLE_DOTS_SCROLLING: &[&str] = &[".  ", ".. ", "...", " ..", "  .", "   "];
    pub const STAR: &[&str] = &["âœ¶", "âœ¸", "âœ¹", "âœº", "âœ¹", "âœ·"];
    pub const STAR2: &[&str] = &["+", "x", "*"];
    pub const FLIP: &[&str] = &["_", "_", "_", "-", "`", "`", "'", "Â´", "-", "_", "_", "_"];
    pub const HAMBURGER: &[&str] = &["â˜±", "â˜²", "â˜´"];
    pub const GROW_VERTICAL: &[&str] = &["â–", "â–ƒ", "â–„", "â–…", "â–†", "â–‡", "â–†", "â–…", "â–„", "â–ƒ"];
    pub const GROW_HORIZONTAL: &[&str] = &["â–", "â–Ž", "â–", "â–Œ", "â–‹", "â–Š", "â–‰", "â–Š", "â–‹", "â–Œ", "â–", "â–Ž"];
    pub const BALLOON: &[&str] = &[" ", ".", "o", "O", "@", "*", " "];
    pub const BALLOON2: &[&str] = &[".", "o", "O", "Â°", "O", "o", "."];
    pub const NOISE: &[&str] = &["â–“", "â–’", "â–‘"];
    pub const BOUNCE: &[&str] = &["â ", "â ‚", "â „", "â ‚"];
    pub const BOX_BOUNCE: &[&str] = &["â––", "â–˜", "â–", "â–—"];
    pub const BOX_BOUNCE2: &[&str] = &["â–Œ", "â–€", "â–", "â–„"];
    pub const TRIANGLE: &[&str] = &["â—¢", "â—£", "â—¤", "â—¥"];
    pub const ARC: &[&str] = &["â—œ", "â— ", "â—", "â—ž", "â—¡", "â—Ÿ"];
    pub const CIRCLE: &[&str] = &["â—¡", "âŠ™", "â— "];
    pub const SQUARE_CORNERS: &[&str] = &["â—°", "â—³", "â—²", "â—±"];
    pub const CIRCLE_QUARTERS: &[&str] = &["â—´", "â—·", "â—¶", "â—µ"];
    pub const CIRCLE_HALVES: &[&str] = &["â—", "â—“", "â—‘", "â—’"];
    pub const SQUISH: &[&str] = &["â•«", "â•ª"];
    pub const TOGGLE: &[&str] = &["âŠ¶", "âŠ·"];
    // ----
    pub const TOGGLE2: &[&str] = &["â–«", "â–ª","â–«"];
    pub const TOGGLE3: &[&str] = &["â–¡", "â– ","â–¡"];
    pub const TOGGLE4: &[&str] = &["â– ", "â–¡", "â–ª", "â–«","â– "];
    pub const TOGGLE5: &[&str] = &["â–®", "â–¯","â–®"];
    pub const TOGGLE6: &[&str] = &["á€", "á€","á€"];
    pub const TOGGLE7: &[&str] = &["â¦¾", "â¦¿","â¦¾"];
    pub const TOGGLE8: &[&str] = &["â—", "â—Œ","â—"];
    pub const TOGGLE9: &[&str] = &["â—‰", "â—Ž","â—‰"];
    pub const TOGGLE10: &[&str] = &["ãŠ‚", "ãŠ€", "ãŠ","ãŠ‚"];
    pub const TOGGLE11: &[&str] = &["â§‡", "â§†","â§‡"];
    pub const TOGGLE12: &[&str] = &["â˜—", "â˜–","â˜—"];
    pub const TOGGLE13: &[&str] = &["=", "*", "-","="];
    pub const ARROW: &[&str] = &["â†", "â†–", "â†‘", "â†—", "â†’", "â†˜", "â†“", "â†™","â†"];
    pub const ARROW2: &[&str] = &["â¬†ï¸ ", "â†—ï¸ ", "âž¡ï¸ ", "â†˜ï¸ ", "â¬‡ï¸ ", "â†™ï¸ ", "â¬…ï¸ ", "â†–ï¸ ","â¬†ï¸ "];
    pub const ARROW3: &[&str] = &["â–¹â–¹â–¹â–¹â–¹", "â–¸â–¹â–¹â–¹â–¹", "â–¹â–¸â–¹â–¹â–¹", "â–¹â–¹â–¸â–¹â–¹", "â–¹â–¹â–¹â–¸â–¹", "â–¹â–¹â–¹â–¹â–¸","â–¸â–¸â–¸â–¸â–¸"];
    pub const BOUNCING_BAR: &[&str] = &["[    ]", "[=   ]", "[==  ]", "[=== ]", "[ ===]", "[  ==]", "[   =]", "[    ]", "[   =]", "[  ==]", "[ ===]", "[====]", "[=== ]", "[==  ]", "[=   ]"];
    pub const BOUNCING_BALL: &[&str] = &["( â—    )", "(  â—   )", "(   â—  )", "(    â— )", "(     â—)", "(    â— )", "(   â—  )", "(  â—   )", "( â—    )", "(â—     )"];
    pub const SMILEY: &[&str] = &["ðŸ˜„ ", "ðŸ˜ ","ðŸ˜„ "];
    pub const MONKEY: &[&str] = &["ðŸ™ˆ ", "ðŸ™ˆ ", "ðŸ™‰ ", "ðŸ™‰ ", "ðŸ™Š ", "ðŸ™Š "];
    pub const HEARTS: &[&str] = &["ðŸ’› ", "ðŸ’™ ", "ðŸ’œ ", "ðŸ’š ", "â¤ï¸ ","ðŸ’› "];
    pub const CLOCK: &[&str] = &["ðŸ•› ", "ðŸ• ", "ðŸ•‘ ", "ðŸ•’ ", "ðŸ•“ ", "ðŸ•” ", "ðŸ•• ", "ðŸ•– ", "ðŸ•— ", "ðŸ•˜ ", "ðŸ•™ ", "ðŸ•š ","ðŸ•› "];
    pub const EARTH: &[&str] = &["ðŸŒ ", "ðŸŒ ","ðŸŒŽ ","ðŸŒŽ ", "ðŸŒ ", "ðŸŒ ","ðŸŒ "];
    pub const MOON: &[&str] = &["ðŸŒ‘ ", "ðŸŒ’ ", "ðŸŒ“ ", "ðŸŒ” ", "ðŸŒ• ", "ðŸŒ– ", "ðŸŒ— ", "ðŸŒ˜ ","ðŸŒ‘ "];
    pub const RUNNER: &[&str] = &["ðŸš¶ ", "ðŸš¶ ","ðŸƒ ","ðŸƒ ","ðŸš¶ ","ðŸš¶ ", "ðŸƒ ","ðŸƒ ","ðŸš¶ "];
    pub const PONG: &[&str] = &["â–â ‚       â–Œ", "â–â ˆ       â–Œ", "â– â ‚      â–Œ", "â– â        â–Œ", "â–  â¡€     â–Œ", "â–  â       â–Œ", "â–   â ‚    â–Œ", "â–   â ˆ    â–Œ", "â–    â ‚   â–Œ", "â–    â     â–Œ", "â–     â¡€  â–Œ", "â–     â    â–Œ", "â–      â ‚ â–Œ", "â–      â ˆ â–Œ", "â–       â ‚â–Œ", "â–       â  â–Œ", "â–       â¡€â–Œ", "â–      â   â–Œ", "â–      â ‚ â–Œ", "â–     â ˆ  â–Œ", "â–     â ‚  â–Œ", "â–    â     â–Œ", "â–    â¡€   â–Œ", "â–   â      â–Œ", "â–   â ‚    â–Œ", "â–  â ˆ     â–Œ", "â–  â ‚     â–Œ", "â– â        â–Œ", "â– â¡€      â–Œ", "â–â         â–Œ","â–â ‚       â–Œ"];
    pub const SHARK: &[&str] = &["â–|\\____________â–Œ", "â–_|\\___________â–Œ", "â–__|\\__________â–Œ", "â–___|\\_________â–Œ", "â–____|\\________â–Œ", "â–_____|\\_______â–Œ", "â–______|\\______â–Œ", "â–_______|\\_____â–Œ", "â–________|\\____â–Œ", "â–_________|\\___â–Œ", "â–__________|\\__â–Œ", "â–___________|\\_â–Œ", "â–____________|\\â–Œ", "â–____________/|â–Œ", "â–___________/|_â–Œ", "â–__________/|__â–Œ", "â–_________/|___â–Œ", "â–_______/|____â–Œ", "â–______/|______â–Œ", "â–_____/|_______â–Œ", "â–____/|________â–Œ", "â–___/|_________â–Œ", "â–__/|__________â–Œ", "â–_/|___________â–Œ", "â–/|____________â–Œ"];
    pub const DQPB: &[&str] = &["d", "q", "p", "b"];
    pub const WEATHER: &[&str] = &["â˜€ï¸ ", "â˜€ï¸ ", "â˜€ï¸ ", "ðŸŒ¤ ", "â›…ï¸ ", "ðŸŒ¥ ", "â˜ï¸ ", "ðŸŒ§ ", "ðŸŒ¨ ", "ðŸŒ§ ", "ðŸŒ¨ ", "ðŸŒ§ ", "ðŸŒ¨ ", "â›ˆ ", "ðŸŒ¨ ", "ðŸŒ§ ", "ðŸŒ¨ ", "â˜ï¸ ", "ðŸŒ¥ ", "â›…ï¸ ", "ðŸŒ¤ ", "â˜€ï¸ ", "â˜€ï¸ "];
    pub const CHRISTMAS: &[&str] = &["ðŸŒ²", "ðŸŽ„", "ðŸŽ„"];
    pub const GRENADE: &[&str] = &["ØŒ   ", "â€²   ", " Â´ ", " â€¾ ", "  â¸Œ", "  â¸Š", "  |", "  âŽ", "  â•", " à·´ ", "  â“", "   ", "   ", "   "];
    pub const POINT: &[&str] = &["âˆ™âˆ™âˆ™", "â—âˆ™âˆ™", "âˆ™â—âˆ™", "âˆ™âˆ™â—", "âˆ™âˆ™âˆ™", "âˆ™âˆ™âˆ™"];
    pub const LAYER: &[&str] = &["-", "=", "â‰¡", "â‰¡"];
    pub const STAR3: &[&str] = &["â­","â­","ðŸŒŸ","ðŸŒŸ","ðŸŒŸ"];
    pub const RAINBOW_CIRCLE: &[&str] = &["ðŸ”´","ðŸŸ ","ðŸŸ¡","ðŸŸ¢","ðŸ”µ","ðŸŸ£","ðŸ”´"];
    pub const RAINBOW_BOXES: &[&str] = &["ðŸŸ¥","ðŸŸ§","ðŸŸ¨","ðŸŸ©","ðŸŸ¦","ðŸŸª"];
    // ðŸŸ¥ðŸŸ§ðŸŸ¨ðŸŸ©ðŸŸ¦ðŸŸª
}

pub mod bars {
    /*! https://changaco.oy.lc/unicode-progress-bars/ */
    pub const BAR1 : &str = "â–ˆâ–";
    pub const BAR2 : &str = "â£¿â£€";
    pub const BAR3 : &str = "â¬¤â—‹";
    pub const BAR4 : &str = "â– â–¡";
    pub const BAR5 : &str = "â–ˆâ–‘";
    pub const BAR6 : &str = "â–°â–±";
    pub const BAR7 : &str = "â—¼â–­";
    pub const BAR8 : &str = "â–®â–¯";
    pub const BAR9 : &str = "âš«âšª";
    pub const BAR10 : &str = "â– â–¢";
    pub const BAR11 : &str = "â–°â•";
    pub const BAR12 : &str = "â–°â•";
}

pub fn in_progress(prefix:&'static str) -> ProgressBarBuilder {
    ProgressBarBuilder {
        prefix,
        initial_message: "".to_string(),
        level: Level::INFO,
        template: None,
        spinner: spinners::ARROW3,
        progress: bars::BAR6,
        bar_length: 40,
        done_color: "green",
        todo_color: "blue"
    }
}

pub struct ProgressBarBuilder {
    prefix:&'static str,
    initial_message:String,
    level: Level,
    template:Option<String>,
    spinner: &'static[&'static str],
    progress:&'static str,
    bar_length:u16,
    done_color:&'static str,
    todo_color:&'static str,
}
impl ProgressBarBuilder {
    pub fn build(self) -> ProgressStyle {
        let s = match self.template {
            Some(t) => ProgressStyle::with_template(t.as_str()).unwrap(),
            None => {
                ProgressStyle::with_template(&format!(
                    "{{spinner}} {} [{{pos}}/{{len}}] {{bar:{}.{}/{}}} {{msg}}\n  (ca. {{eta}} remaining)",
                    self.prefix,
                    self.bar_length,
                    self.done_color,
                    self.todo_color
                )).unwrap()
            }
        };
        s.tick_strings(self.spinner).progress_chars(self.progress)
    }
}